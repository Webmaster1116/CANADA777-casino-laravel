var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),__decorate=this&&this.__decorate||function(e,t,i,n){var o,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(o=e[r])&&(a=(s<3?o(a):s>3?o(t,i,a):o(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},DEBUG=!0,TEST_SERVER=!1,CUSTOM_RESULT=!0,VERSION="1.3.0",ENGINE_TYPE="ActionMoneySlot",com;!function(e){!function(e){!function(e){e.bottle=new Bottle("slot")}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){e.projectMetadata={projectName:"ActionMoneySlot",projectBuild:"1.3.0"}}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.library.utils.log,n=function(e){function t(){var t=e.call(this)||this;return t.totalLabelsPanelHeight=24,t.reelStartBounceTime=0,t.reelStopBounceTime=.4,t.reelStopBouncePercent=30,t.reelRotationSpeed=50,t.reelRotationDirection=-1,t.gameInitialReelRotationTime=400,t.gameBetweenReelsDelay=400,t.autoplayWinVisualizationTime=2e3,t.autoplayWinVisualizationTimePerLine=1e3,t.freeSpinsWinVisualizationTime=1600,t.gameReadyDelay=.3,t.gambleShowTime=.3,t.gambleHideTime=.3,t.gambleHistoryCardsCount=6,t.reelCoordX=176,t.reelCoordY=66,t.jackpotShowDelay=1,t.collectMoneyAnimationTime=1,t.gambleMoneyAnimationTime=1,t.jackpotWinMoneyAnimationTimes=[4,8,12,16],t.gameType="",t.engineType="",t.cacheTimestamp="",t.gameVersion="",t.diamondPlay=!1,t.currencyHideCents=!1,t.currencyDisplayOnlyCredits=!1,t.currencyDoNotDisplayCredits=!1,t.currencyHideCentsOnlyInJackpotBoxes=!1,t.commonSounds=[{src:"mainSounds.mp3",id:"mainSounds",sounds:[{name:"spinSound",start:0,duration:.246},{name:"stopReelSound",start:1,duration:.216},{name:"stopReelAllSound",start:2,duration:.16},{name:"moneyAnimationEndSound",start:3.036,duration:1.27},{name:"collectSound",start:5.036,duration:1.29},{name:"showDenominationsSound",start:7.036,duration:.51},{name:"hideDenominationsSound",start:8.036,duration:.51},{name:"gambleLostSound",start:9.036,duration:.91},{name:"gambleWonSound",start:10.036,duration:.93},{name:"gambleOpenSound",start:11.036,duration:1.51},{name:"gambleCardClickSound",start:13.036,duration:.09},{name:"startAutoplaySound",start:14.036,duration:.24},{name:"stopAutoplaySound",start:15.036,duration:.51},{name:"changeDenominationSound",start:16.036,duration:.81},{name:"creditSound",start:17.036,duration:.31},{name:"currencySound",start:18.036,duration:1.03},{name:"paytableSound",start:20.036,duration:.4},{name:"unmuteSound",start:21.036,duration:.93},{name:"lineChangeSound1",start:23.036,duration:.54},{name:"lineChangeSound2",start:24.036,duration:.55},{name:"lineChangeSound3",start:25.036,duration:.47},{name:"lineChangeSound4",start:26.036,duration:.47},{name:"lineChangeSound5",start:27.036,duration:.56},{name:"fullLine1",start:28.036,duration:4.29},{name:"fullLine2",start:33.036,duration:4.76},{name:"fullLine3",start:38.036,duration:4.84},{name:"fullLine4",start:43.036,duration:5.58},{name:"coinsSound",start:49.036,duration:10}]}],t.jackpotSounds=[{src:"jackpotSounds.mp3",id:"jackpotSounds",sounds:[{name:"jackpotBackgroundSound",start:.036,duration:8},{name:"jackpotCardOpenSound",start:9.036,duration:.29},{name:"jackpotShowWinnerSound",start:10.036,duration:.79},{name:"jackpotWinSound1",start:12.036,duration:6.85},{name:"jackpotWinSound2",start:20.036,duration:5.96},{name:"jackpotWinSound3",start:27.036,duration:6.85},{name:"jackpotWinSound4",start:35.036,duration:6.05},{name:"jackpotIntroSound",start:42.036,duration:5.15},{name:"jackpotCardClickSound",start:48.036,duration:.18},{name:"jackpotCardFigurePulse",start:49.036,duration:.28},{name:"jackpotCardFigureMove",start:50.036,duration:.6}]}],t.numImages=-1,t.numReels=-1,t.numReelCards=-1,t.combCount=-1,t.reelWidth=-1,t.reelHeight=-1,t.reelSpacing=-1,t.wildIndex=-1,t.fixedLinesCount=!1,t.linesSelectActiveColor=0,t.linesSelectInactiveColor=0,t.linesSelectActiveGlowColor=0,t.linesSelectInactiveGlowColor=0,t.gameNumberTimeHelpColor=0,t.labelsColor=0,t.toolTipMainTextColor=0,t.toolTipUsernameTextColor=0,t.toolTipWinAmountTextColor=0,t.toolTipCurrencyTextColor=0,t.toolTipDateTextColor=0,t.toolTipNumberOfWinnersTextColor=0,t.toolTipDateSeparator="/",t.hasFreespins=!1,t.freespinFixedLinesIndex=-1,t.paytablePageCount=-1,t.paytableGamblePage=-1,t.comboColors=null,t.comboCoeficients=null,t.waysCells=null,t.restoreReels=!0,t.reelVideos=null,t.expandVideo=null,t.stopVideos=null,t.reelImages=null,t.lineGame=!0,t.linesCount=null,t.cardsOnTopIndexes=null,t.cardsOnTopArrangeTopToBottom=!0,t.cardsOnTopArrangeLeftToRight=!0,t.scatterConfig=null,t.wildSoundsConfig=null,t.linesCoords=null,t.gameSounds=null,t.freespinSounds=null,t.fullLineSounds=null,t.fullReelStopSounds=[],t.helpLanguages=null,t.paytableLanguages=null,t.paytableExitColor=0,t.paytableExitCoord={x:395,y:504},t.freespinLanguages=null,t.coinAnimationCoef=-1,t.hasMultiplierImages=!1,t.defaultLanguage="en",t.betForLines=1,t.scattersWithoutCells=null,t.currencyISO="",t.language="",t.mainFakeReels=null,t.freespinFakeReels=null,t.lines=null,t.bets=null,t.denominations=null,t.rtp=null,t.paytableCoef=null,t.autoplayLimit=null,t.sendTotalsInfo=!1,t.minimumSpinTime=0,t.jackpot=!1,t.jackpotMinBet=0,t.jackpotMaxBet=0,t.gameVersion=" v: 1.3.0.r",t}return __extends(t,e),t.prototype.getScatterConfig=function(e){for(var t=this.scatterConfig.length,i=0;i<t;i++)if(this.scatterConfig[i].index==e)return this.scatterConfig[i];return null},t.prototype.hasAutoplayLimit=function(){return null!=this.autoplayLimit&&this.autoplayLimit.length>0&&0!=this.autoplayLimit[0]},t.prototype.isAutoplayDisabled=function(){return null!=this.autoplayLimit&&0==this.autoplayLimit[0]},t.prototype.setCacheTimestamp=function(e){e?(this.cacheTimestamp=String(e),this.log("Build time[%s] timestamp[%s]",new Date(e),e)):(this.cacheTimestamp=Date.now().toString(),this.warn("No cache timestamp supplied"))},t.prototype.setCurrencyInfo=function(e){e&&e.displayType&&(this.currencyHideCents="hideCents"==e.displayType,this.currencyDisplayOnlyCredits="displayOnlyCredits"==e.displayType,this.currencyDoNotDisplayCredits="doNotDisplayCredits"==e.displayType,this.currencyHideCentsOnlyInJackpotBoxes="hideCentsOnlyInJackpotBoxes"==e.displayType)},t=__decorate([i.decorator],t)}(Pluck.External);t.GameSettings=n}(t.models||(t.models={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.library.events.LoaderEvent,o=e.egt.library.loading.JSONLoader,s=e.egt.library.loading.LayoutLoader,a=e.egt.library.loading.Loader,r=e.egt.library.loading.LoadingQueue,l=e.egt.library.loading.PIXILoader,c=e.egt.library.loading.ScriptLoader,u=e.egt.library.utils.log,h=function(e){function h(){var i=e.call(this)||this;return i._gameSettings=t.bottle.container.GameSettings,i._gameEnginePath="games/"+i._gameSettings.engineType+"/",i._gameTypePath=""+i._gameEnginePath+i._gameSettings.gameType+"/",i._gameTypeAssetsPath=i._gameEnginePath+"assets/"+i._gameSettings.gameType+"/",i._commonAssetsPath="games/commonAssets/",i._commonAssetsPathFromGameType="../../../commonAssets/",i}return __extends(h,e),d=h,h.prototype.load=function(){this.loadConfig()},h.prototype.loadVideos=function(){var e,t=this._gameSettings.reelVideos,i=t.length;this._videoLoaders||(this._videoLoaders=[]);for(a=0;a<i;a++)(e=t[a])&&(e.loaderId||(e.loaderId=d.WIN_VIDEO_LOADER_ID_PREFIX+a),this.resolveVideoLoaders(e,e.loaderId));var o=null;if(this._gameSettings.stopVideos)for(var s=this._gameSettings.stopVideos.length,a=0;a<s;a++)if(this._gameSettings.stopVideos[a]){o=new l(this._gameSettings.cacheTimestamp,this._gameTypeAssetsPath,"stopVideos_"+a);for(var r=this._gameSettings.stopVideos[a].src.length,c=0;c<r;c++)o.addResource("stopVideo_"+a+"_"+c,this._gameSettings.stopVideos[a].src[c]);this._videoLoaders.push(o),o.addEventListener(n.COMPLETE,this.onVideoLoaded,this),o.load()}this._gameSettings.expandVideo&&this.resolveVideoLoaders(this._gameSettings.expandVideo,d.EXPAND_VIDEO_LOADER_ID_PREFIX)},h.prototype.loadPaytable=function(e){if(null==this._loadingPaytableQueue){this._loadingPaytableQueue=new r;for(var t=0;t<this._gameSettings.paytablePageCount;t++)if(this._gameSettings.jackpot||t!=this._gameSettings.paytablePageCount-2){var i=new l(this._gameSettings.cacheTimestamp,this._gameTypeAssetsPath+"paytable","paytablePage_"+t);i.addResource("page","paytable_"+e+"_"+(t+1)+".png"),this._loadingPaytableQueue.addLoader(i)}}return(this._loadingPaytableQueue.isIdle()||this._loadingPaytableQueue.hasError())&&this._loadingPaytableQueue.load(),this._loadingPaytableQueue},h.prototype.registerSounds=function(e){var t=this._commonAssetsPath+"sounds/",i=this._gameTypeAssetsPath+"sounds/",n=this._gameSettings,o=n.cacheTimestamp;e.registerSounds(n.commonSounds,t,o),e.registerSounds(n.gameSounds,i,o),n.freespinSounds&&e.registerSounds(n.freespinSounds,i,o),n.jackpot&&e.registerSounds(n.jackpotSounds,t,o)},h.prototype.dispose=function(){if(this._configLoadingQueue&&(this._configLoadingQueue.removeEventListener(n.COMPLETE,this.onComplete,this),this._configLoadingQueue.removeEventListener(n.ERROR,this.onError,this),this._configLoadingQueue.dispose()),this._resourcesLoadingQueue&&(this._resourcesLoadingQueue.removeEventListener(n.COMPLETE,this.onComplete,this),this._resourcesLoadingQueue.removeEventListener(n.PROGRESS,this.onProgress,this),this._resourcesLoadingQueue.removeEventListener(n.ERROR,this.onError,this),this._resourcesLoadingQueue.dispose()),this._loadingPaytableQueue&&this._configLoadingQueue.dispose(),this._videoLoaders)for(var e=this._videoLoaders.length,t=0;t<e;t++)this._videoLoaders[t].removeEventListener(n.COMPLETE,this.onVideoLoaded,this),this._videoLoaders[t].dispose()},h.prototype.resolveVideoLoaders=function(e,t){if(e.hasOwnProperty("bottom")||e.hasOwnProperty("top")||this.createVideoLoader(e,t),e.hasOwnProperty("bottom")){i=t+(e.hasOwnProperty("top")?"bottom":"");this.createVideoLoader(e.bottom,i)}if(e.hasOwnProperty("top")){var i=t+(e.hasOwnProperty("bottom")?"top":"");this.createVideoLoader(e.top,i)}},h.prototype.createVideoLoader=function(e,t){this.log("Create video loader[%s]",t);for(var i=new l(this._gameSettings.cacheTimestamp,this._gameTypeAssetsPath,t),o=e.src.length,s=0;s<o;s++)i.addResource(t+"_"+s,e.src[s]);this._videoLoaders.push(i),i.addEventListener(n.COMPLETE,this.onVideoLoaded,this),i.addEventListener(n.ERROR,this.onVideoError,this),i.load()},h.prototype.loadConfig=function(){var e=Date.now().toString();this._configLoadingQueue=new r,this._configLoadingQueue.addLoader(new c(this._gameTypePath+"Config.js",e)),this._configLoadingQueue.addLoader(new o(this._commonAssetsPath+"localization.json",e,null,"localizationLoader")),this._configLoadingQueue.addEventListener(n.COMPLETE,this.onComplete,this),this._configLoadingQueue.addEventListener(n.ERROR,this.onError,this),this._configLoadingQueue.load()},h.prototype.initResourcesLoading=function(){this._resourcesLoadingQueue=new r;var e=new l(this._gameSettings.cacheTimestamp,this._gameTypeAssetsPath,"gameImages");e.addResource("mainResources","images/mainResources.json"),e.addResource("background.jpg","images/background.jpg"),-1!=this._gameSettings.coinAnimationCoef&&e.addResource("coin",this._commonAssetsPathFromGameType+"images/coin.json"),e.addResource("gambleResources",this._commonAssetsPathFromGameType+"images/gambleResources.json"),this._gameSettings.jackpot&&(e.addResource("jackpotResources",this._commonAssetsPathFromGameType+"images/jackpotResources.json"),e.addResource("jackpotTitle.png",this._commonAssetsPathFromGameType+"images/jackpotTitle/jackpotTitle_"+this._gameSettings.language+".png")),e.addResource("commonResources",this._commonAssetsPathFromGameType+"images/commonResources.json");for(var t=this._gameSettings.reelImages.length,i=0;i<t;i++)e.addResource(this._gameSettings.reelImages[i],"images/"+this._gameSettings.reelImages[i]);if(this._resourcesLoadingQueue.addLoader(e),this._resourcesLoadingQueue.addLoader(new s(this._gameTypeAssetsPath+"paytable/layout.json",this._gameSettings.cacheTimestamp,null,"paytableLayoutLoader")),this._gameSettings.hasFreespins){this._resourcesLoadingQueue.addLoader(new c(this._gameTypePath+"FreespinAnimation.min.js",this._gameSettings.cacheTimestamp));var o=this._gameSettings.freespinLanguages.indexOf(this._gameSettings.language)<0?this._gameSettings.defaultLanguage:this._gameSettings.language;this._resourcesLoadingQueue.addLoader(new s(this._gameTypeAssetsPath+"freespins/animation_"+o+".json",this._gameSettings.cacheTimestamp,null,d.FREESPIN_ANIMATION_LAYOUT_LOADER))}this._resourcesLoadingQueue.addEventListener(n.COMPLETE,this.onComplete,this),this._resourcesLoadingQueue.addEventListener(n.PROGRESS,this.onProgress,this),this._resourcesLoadingQueue.addEventListener(n.ERROR,this.onError,this)},h.prototype.configureLocalization=function(){var e=a.getLoader("localizationLoader").getData().jsonContent;void 0!=e[this._gameSettings.language]||(this._gameSettings.language="en"),this._gameSettings.localization=e[this._gameSettings.language]},h.prototype.onVideoLoaded=function(e){this.log("Video loaded[%s]",e.target.id),this.sendNotification(i.Notifications.VIDEO_LOADED,{loader:e.target})},h.prototype.onVideoError=function(e){this.error("Video loading error[%s]",e.target.id)},h.prototype.onComplete=function(e){e.target==this._configLoadingQueue?(this._gameSettings.setCacheTimestamp(window.com.egt.baseslot.buildTime),this._gameSettings.serialize(new window.com.egt.baseslot.Config),this.configureLocalization(),this.initResourcesLoading(),this._resourcesLoadingQueue.load()):this.sendNotification(i.Notifications.RESOURCES_LOADED)},h.prototype.onProgress=function(e){e.target==this._resourcesLoadingQueue&&this.sendNotification(i.Notifications.RESOURCES_PROGRESS,{progress:e.data.progress})},h.prototype.onError=function(e){this.error("Resource loading error",e),this.sendNotification(i.Notifications.RESOURCES_ERROR)},h.FREESPIN_ANIMATION_LAYOUT_LOADER="freespinAnimationLayoutLoader",h.LAYOUT_LOADER_ID="paytableLayoutLoader",h.WIN_VIDEO_LOADER_ID_PREFIX="winVideo_",h.EXPAND_VIDEO_LOADER_ID_PREFIX="expand",h=d=__decorate([u.decorator],h);var d}(Pluck.Model);i.Resources=h}(t.models||(t.models={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.gameCommand="",t.jackpot=!1,t}return __extends(t,e),t.BET="bet",t.COLLECT="collect",t.GAMBLE="gamble",t.JACKPOT="jackpot",t.SET_RESULT="setResult",t}(Pluck.External);e.BaseComplex=t}(e.server||(e.server={}))}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(){var i=e.call(this)||this;return i.state=t.STATE_IDLE,i.gameNumber=-1,i.winAmount=-1,i.balance=-1,i.complex=null,i}return __extends(t,e),t.STATE_IDLE="idle",t.STATE_GAMBLE="gamble",t.STATE_JACKPOT="jackpot",t.STATE_FREESPIN="freespin",t.STATE_INVALID="invalid",t}(Pluck.External);e.BaseResponse=t}(e.response||(e.response={}))}(e.server||(e.server={}))}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.card=-1,t.gambles=-1,t}return __extends(t,e),t}(e.BaseComplex);e.GambleComplex=t}(e.server||(e.server={}))}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(t){!function(t){!function(t){var i=function(t){function i(){var i=t.call(this)||this;return i.complex=e.bottle.container.GambleComplex.instance(),i}return __extends(i,t),i}(t.BaseResponse);t.GambleResponse=i}(t.response||(t.response={}))}(t.server||(t.server={}))}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.card=-1,t.pos=-1,t.winLevel=-1,t}return __extends(t,e),t}(e.BaseComplex);e.JackpotComplex=t}(e.server||(e.server={}))}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(t){!function(t){!function(t){var i=function(t){function i(){var i=t.call(this)||this;return i.complex=e.bottle.container.JackpotComplex.instance(),i}return __extends(i,t),i}(t.BaseResponse);t.JackpotResponse=i}(t.response||(t.response={}))}(t.server||(t.server={}))}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(t){!function(t){!function(t){var i=function(i){function n(){var t=i.call(this)||this;return t.state="",t.gameNumber=0,t.bet=0,t.denomination=0,t.numberOfLines=0,t.combo=0,t.reels=null,t.lines=null,t.combos=null,t.scatters=null,t.expand=null,t.winAmount=0,t.gamblesUsed=0,t.gambles=0,t.previousGambles=null,t.freespins=0,t.freespinsUsed=0,t.freespinScatters=null,t.freespinsPerLine=null,t.firstSpin=null,t.jackpotGameState=null,t.jackpot=!1,t.holdReels=null,t.respin=!1,t.firstSpin=e.bottle.container.BetComplex.instance(),t}return __extends(n,i),n.prototype.getInitialResponse=function(){var e=this.getResponseForState();return e.complex.serialize(this),e.serialize(this),this.state==t.BaseResponse.STATE_IDLE&&(e.complex.jackpot=!1,e.winAmount=0),e},n.prototype.getResponseForState=function(){var i=null;return this.state==t.BaseResponse.STATE_IDLE||this.state==t.BaseResponse.STATE_FREESPIN?i=e.bottle.container.BetResponse.instance():this.state==t.BaseResponse.STATE_GAMBLE?i=this.gamblesUsed>0?e.bottle.container.GambleResponse.instance():e.bottle.container.BetResponse.instance():this.state==t.BaseResponse.STATE_JACKPOT&&(i=e.bottle.container.JackpotResponse.instance()),i},n}(Pluck.External);t.CurrentState=i}(t.response||(t.response={}))}(t.server||(t.server={}))}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.reels=null,t.lines=null,t.combos=null,t.expand=null,t.scatters=null,t.gambles=0,t.freespins=0,t.freespinScatters=null,t.freespinsPerLine=null,t.holdReels=null,t.respin=!1,t}return __extends(t,e),t.prototype.serialize=function(t){e.prototype.serialize.call(this,t),this.combos?(this.lines=this.combos,this.lines.sort(function(e,t){return t.card-e.card})):this.lines.sort(function(e,t){return e.line-t.line})},t}(e.BaseComplex);e.BetComplex=t}(e.server||(e.server={}))}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(t){!function(t){!function(t){var i=function(t){function i(){var i=t.call(this)||this;return i.complex=e.bottle.container.BetComplex.instance(),i}return __extends(i,t),i}(t.BaseResponse);t.BetResponse=i}(t.response||(t.response={}))}(t.server||(t.server={}))}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.library.loading.Loader,o=function(e){function i(){var i=e.call(this)||this;return i._scaleFactor=.5,i._gameSettings=t.bottle.container.GameSettings,i._background=new PIXI.Graphics,i._background.beginFill(7895160,.7),i._background.drawRect(0,0,800,600),i._background.endFill(),i.addChild(i._background),i.createSelectImages(i.gameImagesLoader),i.createReelImages(),i._marker=new PIXI.Graphics,i._marker.lineStyle(2,16711680,1),i._marker.drawRect(0,0,i.selectImages[0].width,i.selectImages[0].height),i._marker.endFill(),i.addChild(i._marker),i.createOpenButton(),i.createActivateButton(),i.createCoinsButton(),i.createFpsCounter(),i}return __extends(i,e),Object.defineProperty(i.prototype,"selectedImageIndex",{get:function(){return this._selectedImageIndex},set:function(e){this._selectedImageIndex=e,this._marker.position.copy(this.selectImages[e].position)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isActive",{set:function(e){this.activateButton.text=(e?"☑":"☐")+" Use custom result"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"areCoinsEnabled",{set:function(e){this.coinsButton.text=(e?"☑":"☐")+" Coins enabled"},enumerable:!0,configurable:!0}),i.prototype.changeReelImage=function(e,t){this.reelImages[e].texture=this.selectImages[t].texture},Object.defineProperty(i.prototype,"gameImagesLoader",{get:function(){return n.getLoader("gameImages")},enumerable:!0,configurable:!0}),i.prototype.createOpenButton=function(){this.openButton=new PIXI.Container,this.openButton.addChild(new PIXI.Text("🐞",{fontSize:32,fill:16711680,stroke:16777215,strokeThickness:5})),this.openButton.x=this.width,this.openButton.y=200,this.openButton.interactive=!0,this.addChild(this.openButton)},i.prototype.createFpsCounter=function(){this.fpsCounter=new PIXI.Text("",{fontSize:18,fill:16777215,stroke:0,strokeThickness:3}),this.fpsCounter.position.set(this.width-50,180),this.addChild(this.fpsCounter)},i.prototype.createActivateButton=function(){this.activateButton=new PIXI.Text("",{fontSize:18,fill:16777215,stroke:0,strokeThickness:3}),this.activateButton.position.set(10,10),this.activateButton.interactive=!0,this.addChild(this.activateButton)},i.prototype.createCoinsButton=function(){this.coinsButton=new PIXI.Text("",{fontSize:18,fill:16777215,stroke:0,strokeThickness:3}),this.coinsButton.position.set(10,40),this.coinsButton.interactive=!0,this.addChild(this.coinsButton)},i.prototype.createSelectImages=function(e){this.selectImages=[];for(var t,i=null,n=0;n<this._gameSettings.numImages;n++){var o=n<10?"0"+n:n;(t=new PIXI.Sprite(e.getTexture(o+".png"))).scale.set(this.getScaleFactor()),t.interactive=!0,t.x=(i?i.x:10)+(i?i.width:0),t.y=100,this.selectImages[n]=t,this.addChild(t),i=t}},i.prototype.getScaleFactor=function(){var e=this._background.width/(this._gameSettings.numImages*this._gameSettings.reelWidth);return e=e>.5?.5:e},i.prototype.createReelImages=function(){this.reelImages=[];for(var e,t=this._gameSettings.numReelCards+2,i=t*this._gameSettings.numReels,n=0;n<i;n++){var o=Math.floor(n/t),s=n%t;(e=new PIXI.Sprite(this.selectImages[0].texture)).scale.set(.4),e.interactive=!0,e.x=10+o*e.width,e.y=190+s*e.height,e.alpha=0==s||s==t-1?.4:1,this.reelImages[n]=e,this.addChild(e)}},i}(PIXI.Container);i.CustomResultView=o}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(t){!function(t){var i=function(t){function i(){var i=t.call(this)||this;i._isActive=!1,i.selectedImageIndex=0,i._mainModel=e.bottle.container.MainModel,i._request={},i._request.reels=[],i._request.gameCommand="setResult";for(var n=(i._mainModel.gameSettings.numReelCards+2)*i._mainModel.gameSettings.numReels,o=0;o<n;o++)i._request.reels[o]=0;return i}return __extends(i,t),i.prototype.setIsActive=function(e){this._isActive=e,this._mainModel.setResultRequest=this._isActive?this._request:null},i.prototype.getIsActive=function(){return this._isActive},i.prototype.changeReelImage=function(e){this._request.reels[e]=this.selectedImageIndex},Object.defineProperty(i.prototype,"reels",{get:function(){return this._request.reels.slice()},enumerable:!0,configurable:!0}),i}(Pluck.Model);t.CustomResultModel=i}(t.customresult||(t.customresult={}))}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.library.utils.log,n=function(e){function t(t,i){var n=e.call(this)||this;n._engineType=t,n._gameType=i,n.reels=null,n.isActive=!1,n.areCoinsEnabled=!1,n._storeKey=t+" "+i+" set result";try{var o=JSON.parse(localStorage.getItem(n._storeKey));Array.isArray(o)?n.reels=o:n.serialize(o)}catch(e){n.error("Unable to retrieve stored data[%s]",e)}return n}return __extends(t,e),t.prototype.save=function(){localStorage.setItem(this._storeKey,JSON.stringify(this))},t.prototype.toJSON=function(){return{reels:this.reels,isActive:this.isActive,areCoinsEnabled:this.areCoinsEnabled}},t=__decorate([i.decorator],t)}(Pluck.External);t.CustomResultConfig=n}(t.customresult||(t.customresult={}))}(t.models||(t.models={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.models.customresult.CustomResultConfig,o=e.egt.library.Device,s=e.egt.library.utils.log,a=function(e){function i(){var i=e.call(this)||this;return i._isViewOpened=!1,i._prevCoinAnimationCoef=-1,i._view=t.bottle.container.CustomResultView,i._model=t.bottle.container.CustomResultModel,i.view.selectedImageIndex=0,i.setupListeners(!0),PIXI.ticker.shared.add(i.onTickerUpdate,i),i._lastTime=(new Date).getTime(),i._fpsValues=[],i._prevCoinAnimationCoef=i.mainModel.gameSettings.coinAnimationCoef,i._config=new n(i.mainModel.gameSettings.engineType,i.mainModel.gameSettings.gameType),i.reels=i._config.reels,i.isActive=i._config.isActive,i.areCoinsEnabled=i._config.areCoinsEnabled,i.closeView(),i}return __extends(i,e),a=i,i.prototype.dispose=function(){this.setupListeners(!1),PIXI.ticker.shared.remove(this.onTickerUpdate,this)},Object.defineProperty(i.prototype,"isActive",{set:function(e){this.log("Is active[%s]",e),this.model.setIsActive(e),this.view.isActive=e,this._config.isActive=e,this._config.save()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"areCoinsEnabled",{get:function(){return-1!==this.mainModel.gameSettings.coinAnimationCoef},set:function(e){this.log("Are coins enabled[%s]",e),this.mainModel.gameSettings.coinAnimationCoef=e?this._prevCoinAnimationCoef:-1,this.view.areCoinsEnabled=e,this._config.areCoinsEnabled=e,this._config.save()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"reels",{set:function(e){var t=this;Array.isArray(e)&&(this.log("Set reels[%s]",e.join(", ")),this._config.reels=e,e.forEach(function(e,i){t.model.selectedImageIndex=e,t.model.changeReelImage(i),t.view.changeReelImage(i,e)}),this.model.selectedImageIndex=this.view.selectedImageIndex,this._config.save())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),i.prototype.setupListeners=function(e){for(var t=e?"on":"off",i=this.view.selectImages.length,n=0;n<i;n++)this.view.selectImages[n][t](o.resolveEvent("click"),this.onSelectImageClick,this);i=this.view.reelImages.length;for(n=0;n<i;n++)this.view.reelImages[n][t](o.resolveEvent("click"),this.onReelImageClick,this);this.view.openButton[t](o.resolveEvent("click"),this.onOpenButtonClick,this),this.view.activateButton[t](o.resolveEvent("click"),this.onActivateButtonClick,this),this.view.coinsButton[t](o.resolveEvent("click"),this.onCoinsButtonClick,this)},i.prototype.openView=function(){this.view.x=a.CLIPPING_WIDTH},i.prototype.closeView=function(){this.view.x=-(this.view.width-this.view.openButton.width)+a.CLIPPING_WIDTH},i.prototype.onOpenButtonClick=function(){this._isViewOpened=!this._isViewOpened,this._isViewOpened?this.openView():this.closeView()},i.prototype.onActivateButtonClick=function(){this.isActive=!this.model.getIsActive()},i.prototype.onCoinsButtonClick=function(){this.areCoinsEnabled=!this.areCoinsEnabled},i.prototype.onSelectImageClick=function(e){this.model.selectedImageIndex=this.view.selectImages.indexOf(e.target),this.view.selectedImageIndex=this.model.selectedImageIndex,this.log("Selected image index[%s]",this.model.selectedImageIndex)},i.prototype.onReelImageClick=function(e){var t=this.view.reelImages.indexOf(e.target);this.log("Set image[%s] at index[%s]",this.model.selectedImageIndex,t),this.model.changeReelImage(t),this.view.changeReelImage(t,this.model.selectedImageIndex),this.reels=this.model.reels},i.prototype.onTickerUpdate=function(e){var t=(new Date).getTime();if(this._fpsValues.push(1e3/(t-this._lastTime)),30==this._fpsValues.length){for(var i=0,n=0;n<30;n++)i+=this._fpsValues[n];this.view.fpsCounter.text=(i/30).toFixed(2),this._fpsValues.length=0}this._lastTime=t},i.CLIPPING_WIDTH=65,i=a=__decorate([s.decorator],i);var a}(Pluck.ViewController);i.CustomResultController=a}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(n){var o=e.egt.library.events,s=e.egt.baseslot.models.server.response.BaseResponse,a=e.egt.baseslot.models.server.BaseComplex,r=e.egt.library.utils.log,l=function(e){function n(){var i=e.call(this)||this;return i._gameCommandMap={bet:t.bottle.container.BetResponse,collect:t.bottle.container.BaseResponse,gamble:t.bottle.container.GambleResponse,jackpot:t.bottle.container.JackpotResponse,setResult:t.bottle.container.BaseResponse},i._isBetRequested=!1,i._isWaitingForCollect=!1,i._mainModel=t.bottle.container.MainModel,i}return __extends(n,e),l=n,Object.defineProperty(n.prototype,"data",{set:function(e){if(e.msg==l.MSG_INSUFFICIENT_FUNDS)this._mainModel.balance=e.balance,this._mainModel.response=t.bottle.container.BaseResponse.instance(),this._mainModel.response.serialize(e),this.sendNotification(i.Notifications.INSUFFICIENT_SERVER_BALANCE);else if("event"==e.command&&"failure"==e.state||"looseConnection"==e.command||e.msg&&-1==l.VALID_MSG_VALUES.indexOf(e.msg))this._mainModel.isNoConnection=!0,this._mainModel.isAutoplayGame=!1,null==e.balance||isNaN(e.balance)||(this._mainModel.balance=e.balance),this.sendNotification(i.Notifications.NO_CONNECTION);else if("event"==e.command)this._mainModel.jackpotStatistics.serialize(e.complex),this.sendNotification(i.Notifications.JACKPOT_STATISTIC_RECEIVED);else if("bet"==e.command){var n=this._gameCommandMap[e.complex.gameCommand];this._mainModel.response=n.instance(),this._mainModel.response.serialize(e),this._mainModel.balance=e.balance,this.handleResponse()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isWaitingForCollect",{get:function(){return this._isWaitingForCollect},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isBetRequested",{get:function(){return this._isBetRequested},enumerable:!0,configurable:!0}),n.prototype.sendBet=function(){if(this._isWaitingForCollect)this._isBetRequested=!0;else switch(this._mainModel.response.state){case s.STATE_IDLE:case s.STATE_FREESPIN:this._mainModel.setResultRequest?this.requestSetResult():this.requestBet();break;case s.STATE_GAMBLE:this._isBetRequested=!0,this.requestCollect();break;default:throw"Trying to send bet in state: "+this._mainModel.response.state}},n.prototype.sendCollect=function(){switch(this._mainModel.response.state){case s.STATE_GAMBLE:this.requestCollect();break;default:throw"Trying to send collect in state: "+this._mainModel.response.state}},n.prototype.sendGamble=function(e){switch(this._mainModel.response.state){case s.STATE_GAMBLE:this.requestGamble(e);break;default:throw"Trying to send gamble in state: "+this._mainModel.response.state}},n.prototype.sendJackpot=function(e){switch(this._mainModel.response.state){case s.STATE_JACKPOT:this.requestJackpot(e);break;default:throw"Trying to send jackpot in state: "+this._mainModel.response.state}},n.prototype.handleResponse=function(){var e=this._mainModel.response.complex.gameCommand;switch(this.log("Handle response game command[%s] is bet requested[%s] set result[%s]",e,this._isBetRequested,this._mainModel.setResultRequest),e){case a.BET:break;case a.COLLECT:if(this._isWaitingForCollect=!1,this._isBetRequested){if(!this._mainModel.isBalanceEnoughForBet)return void this.sendNotification(i.Notifications.INSUFFICIENT_SERVER_BALANCE);this._mainModel.setResultRequest?this.requestSetResult():this.requestBet()}break;case a.GAMBLE:this._mainModel.addGambleCard(this._mainModel.gambleResponse.complex.card);break;case a.SET_RESULT:this.requestBet()}this.sendNotification(i.Notifications.RESPONSE_RECEIVED,this._mainModel.response),this.sendNotification(this._mainModel.response.complex.gameCommand+"Received",this._mainModel.response)},n.prototype.requestBet=function(){this._isBetRequested=!1;var e=new o.Event(a.BET,{bet:this._mainModel.betPerLine,denomination:this._mainModel.denomination,lines:this._mainModel.gameSettings.lineGame?this._mainModel.lines:this._mainModel.linesCoefficient,bonus:this._mainModel.isFreespinGame,gameCommand:a.BET});e.bet=this._mainModel.totalBet,this._mainModel.eventDispatcher.dispatchEvent(e)},n.prototype.requestCollect=function(){this._isWaitingForCollect||(this._isWaitingForCollect=!0,this._mainModel.eventDispatcher.dispatchEvent(new o.Event(a.COLLECT,{gameCommand:a.COLLECT})))},n.prototype.requestGamble=function(e){this._mainModel.eventDispatcher.dispatchEvent(new o.Event(a.GAMBLE,{color:e,gameCommand:a.GAMBLE}))},n.prototype.requestJackpot=function(e){this._mainModel.eventDispatcher.dispatchEvent(new o.Event(a.JACKPOT,{pos:e,gameCommand:a.JACKPOT}))},n.prototype.requestSetResult=function(){this._mainModel.eventDispatcher.dispatchEvent(new o.Event(a.SET_RESULT,this._mainModel.setResultRequest))},n.MSG_SUCCESS="success",n.MSG_INSUFFICIENT_FUNDS="insufficientFunds",n.MSG_REALITY_CHECK="doRealityCheck",n.MSG_BET_LIMIT="betLimitReached",n.MSG_LOSS_LIMIT="lossLimitReached",n.MSG_TIME_LIMIT="sessionTimeLimitReached",n.MSG_TIME_PROXIMITY_ALERT="timeProximityAlert",n.MSG_CREDIT_LEFT_ALERT="creditLeftAlert",n.VALID_MSG_VALUES=[l.MSG_SUCCESS,l.MSG_REALITY_CHECK,l.MSG_TIME_PROXIMITY_ALERT,l.MSG_CREDIT_LEFT_ALERT],n=l=__decorate([r.decorator],n);var l}(Pluck.Model);n.CommunicationManager=l}(i.server||(i.server={}))}(t.models||(t.models={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(t){var i=function(){function t(){this._mainModel=e.bottle.container.MainModel,this._gameSettings=e.bottle.container.GameSettings}return Object.defineProperty(t.prototype,"numberOfWins",{get:function(){var e=this._mainModel.betResponse.complex;return(e.lines?e.lines.length:0)+(e.scatters?e.scatters.length:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strongestCard",{get:function(){for(var e=this._mainModel.betResponse.complex,t=-1,i=e.scatters,n=i.length,o=0;o<n;o++)(-1==t||i[o].scatterName>t)&&(t=i[o].scatterName);if(-1!=t)return t;var s=e.lines;n=s.length;for(o=0;o<n;o++)(-1==t||s[o].card>=t)&&(t=s[o].card);return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullLineCard",{get:function(){for(var e=-1,t=this._mainModel.betResponse.complex.lines,i=t.length,n=0;n<i;n++)(this._gameSettings.lineGame&&t[n].cells.length/2==this._gameSettings.numReels||!this._gameSettings.lineGame&&t[n].len==this._gameSettings.numReels)&&(-1==e||t[n].card>=e)&&(e=t[n].card);return e},enumerable:!0,configurable:!0}),t.prototype.getCard=function(e,t){return this._mainModel.betResponse.complex.reels[(this._gameSettings.numReelCards+2)*e+t+1]},t.prototype.isCardOnReel=function(e,t){for(var i=0;i<this._gameSettings.numReelCards;i++)if(this.getCard(e,i)==t)return!0;return!1},t.prototype.countCardOnReel=function(e,t){for(var i=0,n=0;n<this._gameSettings.numReelCards;n++)this.getCard(e,n)==t&&i++;return i},t.prototype.getCardAfterExpand=function(e,t){var i=this._mainModel.betResponse.complex;if(null!=i.expand&&i.expand.length>0)for(var n=i.expand.length,o=0;o<n;o+=2)if(e==i.expand[o]&&t==i.expand[o+1])return this._gameSettings.wildIndex;return this.getCard(e,t)},t.prototype.getUniqueWinCells=function(){for(var e=[],t=[],i=this._mainModel.betResponse.complex.lines,n=0;n<i.length;n++)for(var o=i[n].cells,s=1;s<o.length;s+=2){var a=o[s],r=o[s-1],l=a*this._gameSettings.numReels+r;t[l]||(t[l]=l,e.push(r),e.push(a))}return{uniqueWinCells:e,uniqueWinIndexes:t}},t}();t.SpinAnalyzer=i}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.levelI=0,t.levelII=0,t.levelIII=0,t.levelIV=0,t.winsLevelI=0,t.largestWinLevelI=0,t.largestWinDateLevelI="",t.largestWinUserLevelI="",t.lastWinLevelI=0,t.lastWinDateLevelI="",t.lastWinUserLevelI="",t.winsLevelII=0,t.largestWinLevelII=0,t.largestWinDateLevelII="",t.largestWinUserLevelII="",t.lastWinLevelII=0,t.lastWinDateLevelII="",t.lastWinUserLevelII="",t.winsLevelIII=0,t.largestWinLevelIII=0,t.largestWinDateLevelIII="",t.largestWinUserLevelIII="",t.lastWinLevelIII=0,t.lastWinDateLevelIII="",t.lastWinUserLevelIII="",t.winsLevelIV=0,t.largestWinLevelIV=0,t.largestWinDateLevelIV="",t.largestWinUserLevelIV="",t.lastWinLevelIV=0,t.lastWinDateLevelIV="",t.lastWinUserLevelIV="",t.winLevel=-1,t.screenName="",t.winAmount=-1,t}return __extends(t,e),t.prototype.serialize=function(t){this.winLevel=-1,this.screenName="",this.winAmount=-1,e.prototype.serialize.call(this,t)},t}(Pluck.External);e.JackpotStatistics=t}(e.response||(e.response={}))}(e.server||(e.server={}))}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.models.server.BaseComplex,o=e.egt.baseslot.models.server.response.BaseResponse,s=function(){function e(e){this._gambleIndex=0,this._gambleAttemptsLeft=0,this._gambleAmountToWin=0,this._freespinsCount=0,this._winAmount=0,this._jackpotWinIndex=0,this._jackpotValues=[],this._bet=0,this._balance=0,this._gameNumber=0,this._insufficientBalance=!1,this._romanNumbers=["I","II","III","IV"],this._cells={twentyLines:[[0,1,1,1,2,1,3,1,4,1],[0,0,1,0,2,0,3,0,4,0],[0,2,1,2,2,2,3,2,4,2],[0,0,1,1,2,2,3,1,4,0],[0,2,1,1,2,0,3,1,4,2],[0,0,1,0,2,1,3,2,4,2],[0,2,1,2,2,1,3,0,4,0],[0,1,1,2,2,2,3,2,4,1],[0,1,1,0,2,0,3,0,4,1],[0,0,1,1,2,1,3,1,4,0],[0,2,1,1,2,1,3,1,4,2],[0,1,1,2,2,1,3,0,4,1],[0,1,1,0,2,1,3,2,4,1],[0,0,1,1,2,0,3,1,4,0],[0,2,1,1,2,2,3,1,4,2],[0,1,1,1,2,2,3,1,4,1],[0,1,1,1,2,0,3,1,4,1],[0,0,1,2,2,0,3,2,4,0],[0,2,1,0,2,2,3,0,4,2],[0,1,1,0,2,2,3,0,4,1]],fortyLines:[[0,1,1,1,2,1,3,1,4,1],[0,0,1,0,2,0,3,0,4,0],[0,2,1,2,2,2,3,2,4,2],[0,3,1,3,2,3,3,3,4,3],[0,1,1,2,2,3,3,2,4,1],[0,2,1,1,2,0,3,1,4,2],[0,0,1,0,2,1,3,2,4,3],[0,3,1,3,2,2,3,1,4,0],[0,2,1,3,2,3,3,3,4,2],[0,1,1,0,2,0,3,0,4,1],[0,0,1,1,2,2,3,3,4,3],[0,3,1,2,2,1,3,0,4,0],[0,2,1,3,2,2,3,1,4,2],[0,1,1,0,2,1,3,2,4,1],[0,0,1,1,2,0,3,1,4,0],[0,3,1,2,2,3,3,2,4,3],[0,1,1,2,2,1,3,0,4,1],[0,2,1,1,2,2,3,3,4,2],[0,0,1,1,2,1,3,1,4,0],[0,3,1,2,2,2,3,2,4,3],[0,1,1,1,2,2,3,3,4,3],[0,2,1,2,2,1,3,0,4,0],[0,0,1,1,2,2,3,2,4,3],[0,3,1,2,2,1,3,1,4,0],[0,1,1,2,2,2,3,2,4,3],[0,2,1,1,2,1,3,1,4,0],[0,0,1,0,2,1,3,0,4,0],[0,3,1,3,2,2,3,3,4,3],[0,2,1,2,2,3,3,2,4,2],[0,1,1,1,2,0,3,1,4,1],[0,0,1,0,2,0,3,1,4,2],[0,3,1,3,2,3,3,2,4,1],[0,2,1,3,2,3,3,2,4,1],[0,1,1,0,2,0,3,1,4,2],[0,0,1,1,2,1,3,2,4,3],[0,3,1,2,2,2,3,1,4,0],[0,2,1,3,2,2,3,1,4,0],[0,1,1,0,2,1,3,2,4,3],[0,0,1,1,2,2,3,3,4,2],[0,3,1,2,2,1,3,0,4,1]]},this._main=e,this._mainModel=t.bottle.container.MainModel;for(var i=0;i<this._main.events.length;i++)this._main.addEventListener(this._main.events[i],this.gameEventHandler,this)}return e.prototype.emitShow=function(){var e={gameType:"RORJSlot",playerName:"myscreenname",gameNumber:0,lastBet:0,lastDenomination:0},t={paytableCoef:{0:{coef:[10,30,100],multiplier:1},1:{coef:[10,30,100],multiplier:1},2:{coef:[10,30,100],multiplier:1},3:{coef:[10,30,100],multiplier:1},4:{coef:[20,50,200],multiplier:1},5:{coef:[20,50,200],multiplier:1},6:{coef:[40,100,500],multiplier:1},7:{coef:[50,200,1e3],multiplier:1},8:{coef:[50,200,1e3],multiplier:1},9:{coef:[60,250,1200],multiplier:1},10:{coef:[60,250,1200],multiplier:1},11:{coef:[70,300,1500],multiplier:1},12:{coef:[70,300,1500],multiplier:1},13:{coef:[10,20,40],multiplier:1}},rtp:"96.45",bets:[1,2,5,10,20],jackpotMinBet:500,jackpot:!0,lines:[5],mainFakeReels:[[2,4,1,3,2,7,0,6,1,4,7,0,5,4,4,4,4,4,5,4,0,7,1,0,3,4,5,2,3,1],[2,4,1,3,2,7,0,6,1,4,7,0,5,6,1,2,4,4,4,4,7,2,7,6,4,2,0,2,0,2],[2,4,1,3,2,7,0,6,2,4,7,0,5,6,4,4,4,4,5,4,1,4,0,5,0,3,4,0,1,6],[2,4,1,3,2,7,0,6,1,4,7,0,5,6,4,4,4,4,5,7,3,6,0,4,0,5,0,2,5,1],[2,4,1,3,2,7,0,6,1,4,7,0,5,6,1,2,4,4,4,4,0,4,1,0,4,4,5,0,0,2],[2,4,1,3,2,7,0,6,1,4,7,0,5,6,1,2,4,4,4,4,7,2,7,6,4,2,0,2,0,2]],jackpotMaxBet:1e3,denominations:[[3,70,3e5],[5,70,3e5],[10,70,3e5],[20,70,3e5]]},i={currentState:{gamblesUsed:0,previousGambles:[],bet:3,numberOfLines:5,denomination:3,state:"idle",winAmount:0,reels:[0,0,0,0,0,1,1,1,1,1,2,2,2,2,2,3,3,3,3,3,4,4,4,4,4,2,2,2,2,2],lines:[],scatters:[],expand:[],gambles:0,jackpot:!1},jackpotState:{levelI:1480,levelII:39731,levelIII:1538675,levelIV:138390,winsLevelI:3478,largestWinLevelI:168560,largestWinDateLevelI:"Dec 24, 2014 8:56:46 PM",largestWinUserLevelI:"sprqxagdbop",lastWinLevelI:529,lastWinDateLevelI:"Oct 18, 2016 1:56:43 PM",lastWinUserLevelI:"1476797858024",winsLevelII:990,largestWinLevelII:157736,largestWinDateLevelII:"Mar 14, 2016 1:20:04 PM",largestWinUserLevelII:"1457960455348",lastWinLevelII:49222,lastWinDateLevelII:"Sep 15, 2016 2:34:58 PM",lastWinUserLevelII:"1473950016748",winsLevelIII:648,largestWinLevelIII:1634549,largestWinDateLevelIII:"Mar 12, 2016 8:05:59 AM",largestWinUserLevelIII:"1457769696526",lastWinLevelIII:1548282,lastWinDateLevelIII:"Sep 16, 2016 6:21:45 AM",lastWinUserLevelIII:"gvdimov31473951996623",winsLevelIV:660,largestWinLevelIV:1001069,largestWinDateLevelIV:"Oct 24, 2014 11:34:07 AM",largestWinUserLevelIV:"mara1010",lastWinLevelIV:148639,lastWinDateLevelIV:"Sep 20, 2016 10:31:00 AM",lastWinUserLevelIV:"gvdimov31474367059040"}};if(this._main.data={msg:"success",gameNumber:0,gameType:"RORJSlot",command:"show",currencyISO:"EUR",balance:15e4,iData:e,settings:t,language:"en",languages:["go","it","ru","es","bg","en","nl","fr","mk","ro"],complex:i},this._balance=this._mainModel.balance,this._mainModel.gameSettings.jackpot)for(var n=0;n<this._romanNumbers.length;n++)this._jackpotValues[n]=this._mainModel.jackpotStatistics["level"+this._romanNumbers[n]]},e.prototype.setBalance=function(e){this._balance=e},e.prototype.setInsufficient=function(){this._insufficientBalance=!0},e.prototype.setJackpotWinner=function(e){var t=this._jackpotValues[e];this._jackpotValues[e]=0;var i="randomuser"+Math.round(100*Math.random());this._main.data={command:"event",msg:"success",complex:{levelI:this._jackpotValues[0],winsLevelI:1730,largestWinLevelI:this._jackpotValues[0],largestWinDateLevelI:"Jun 26,2014 11:50:49 AM",largestWinUserLevelI:i,lastWinLevelI:25*this._jackpotValues[0],lastWinDateLevelI:"Jul 2,2014 5:20:19 AM",lastWinUserLevelI:"MERIA2005",levelII:this._jackpotValues[1],winsLevelII:757,largestWinLevelII:this._jackpotValues[1],largestWinDateLevelII:"Jun 23,2014 9:41:30 PM",largestWinUserLevelII:i,lastWinLevelII:25*this._jackpotValues[1],lastWinDateLevelII:"Jul 1,2014 12:59:01 AM",lastWinUserLevelII:"ANIEVA",levelIII:this._jackpotValues[2],winsLevelIII:35,largestWinLevelIII:this._jackpotValues[2],largestWinDateLevelIII:"Mar 17,2014 6:09:20 PM",largestWinUserLevelIII:i,lastWinLevelIII:25*this._jackpotValues[2],lastWinDateLevelIII:"Jun 29,2014 7:17:58 PM",lastWinUserLevelIII:"JULBA44",levelIV:this._jackpotValues[3],winsLevelIV:7,largestWinLevelIV:this._jackpotValues[3],largestWinDateLevelIV:"Jan 23,2014 6:14:12 PM",largestWinUserLevelIV:i,lastWinLevelIV:85*this._jackpotValues[3],lastWinDateLevelIV:"May 3,2014 8:19:39 PM",lastWinUserLevelIV:"BABCHI",winLevel:e,screenName:i,winAmount:t}}},e.prototype.gameEventHandler=function(e){this._currentEvent=e,this._timer=setTimeout(this.onTimerHandler.bind(this),30+200*Math.random())},e.prototype.onTimerHandler=function(){switch(clearTimeout(this._timer),this._timer=void 0,this._currentEvent.type){case n.BET:this.sendSpin(this._currentEvent.data);break;case n.COLLECT:this.sendCollect();break;case n.GAMBLE:this.sendGamble(this._currentEvent.data);break;case n.JACKPOT:this.sendJackpot(this._currentEvent.data);break;case n.SET_RESULT:this.sendResult(this._currentEvent.data)}},e.prototype.sendSpin=function(e){if(!this._insufficientBalance||(this._insufficientBalance=!1,e.bonus)){this._bet=e.bet*e.lines,e.bonus||(this._balance-=this._bet),this._gameNumber++;var t=this.generateSpinResult();this._winAmount+=t.totalWin;var i=t.freespinScatters.length?3:0,n=0==this._freespinsCount;this._freespinsCount+=i,n||this._freespinsCount--,0==this._freespinsCount&&this._winAmount&&(this._gambleAttemptsLeft=Math.round(1*Math.random())?5:0,this._gambleAmountToWin=2*this._winAmount),20!=e.denomination||this._jackpotCards||(this._jackpotWinIndex=Math.round(3*Math.random()),0==this._jackpotWinIndex?this._jackpotCards=[24,37,24,11,11,50,11]:1==this._jackpotWinIndex?this._jackpotCards=[11,50,37,24,11,24,50,24]:2==this._jackpotWinIndex?this._jackpotCards=[37,50,11,24,37,11,24,37]:3==this._jackpotWinIndex&&(this._jackpotCards=[37,11,11,24,50,37,24,50,50])),this._customResult=null;var s=this._winAmount,a=this._gambleAttemptsLeft,r=this._freespinsCount?o.STATE_FREESPIN:this._gambleAttemptsLeft?o.STATE_GAMBLE:this._jackpotCards?o.STATE_JACKPOT:o.STATE_IDLE,l=!!this._jackpotCards;0==this._gambleAttemptsLeft&&0==this._freespinsCount&&(this._balance+=this._winAmount,this.resetServer()),this._main.data={command:"bet",msg:"success",balance:this._balance,winAmount:s,state:r,gameNumber:this._gameNumber,complex:{gameCommand:"bet",jackpot:l,reels:t.reels,lines:t.lines,combos:t.lines,scatters:t.scatters,expand:t.expand,gambles:a,freespins:i,freespinScatters:t.freespinScatters}}}else this._main.data={command:"bet",msg:"insufficientFunds",balance:this._balance,state:"idle"}},e.prototype.sendGamble=function(e){if(console.log("SEND GAMBLE"),0==this._gambleAttemptsLeft)throw new Error("No gamble attempts allowed!");0==e.color&&(1==this._gambleIndex||2==this._gambleIndex)||1==e.color&&(0==this._gambleIndex||3==this._gambleIndex)?(this._winAmount=this._gambleAmountToWin,this._gambleAmountToWin*=2,this._gambleAttemptsLeft--):(this._winAmount=0,this._gambleAmountToWin=0,this._gambleAttemptsLeft=0);var t=this._gambleIndex,i=this._winAmount,n=(this._gambleAmountToWin,this._gambleAttemptsLeft);this._gambleIndex=(this._gambleIndex+1)%4,0==this._gambleAttemptsLeft&&(this._balance+=this._winAmount,this.resetServer()),this._main.data={command:"bet",msg:"success",balance:this._balance,winAmount:i,state:n?o.STATE_GAMBLE:this._jackpotCards?o.STATE_JACKPOT:o.STATE_IDLE,complex:{gameCommand:"gamble",jackpot:!!this._jackpotCards,card:t,gambles:n}}},e.prototype.sendCollect=function(){this._balance+=this._winAmount;var e=this._winAmount;this.resetServer(),this._main.data={command:"bet",msg:"success",winAmount:e,balance:this._balance,state:this._jackpotCards?o.STATE_JACKPOT:o.STATE_IDLE,complex:{gameCommand:"collect"}},console.log("COLLECT SEND")},e.prototype.sendJackpot=function(e){if(console.log("JACKPOT SEND"),null==this._jackpotCards)throw new Error("No jackpot attempts allowed!");1==this._jackpotCards.length&&(this._winAmount=this._jackpotValues[this._jackpotWinIndex],this._jackpotValues[this._jackpotWinIndex]=90);var t=this._jackpotCards[0],i=this._winAmount;this._jackpotCards.splice(0,1),0==this._jackpotCards.length&&(this._balance+=i,this._jackpotCards=null,this.resetServer()),this._main.data={command:"bet",msg:"success",balance:this._balance,winAmount:i,state:this._jackpotCards?o.STATE_JACKPOT:o.STATE_IDLE,complex:{gameCommand:"jackpot",card:t,pos:e.pos,winLevel:this._jackpotCards?-1:this._jackpotWinIndex}},this._jackpotCards||(this._main.data={command:"event",msg:"success",complex:{levelI:this._jackpotValues[0],levelII:this._jackpotValues[1],levelIII:this._jackpotValues[2],levelIV:this._jackpotValues[3],winLevel:this._jackpotWinIndex,screenName:"yourscreenname",winAmount:this._winAmount}})},e.prototype.generateSpinResult=function(){var e=this._mainModel.gameSettings,t=[];if(this._customResult)t=this._customResult.reels.slice();else{var i=(e.numReelCards+2)*e.numReels;for(c=0;c<i;c++)t[c]=Math.round(Math.random()*(e.numImages-1))}var n,o=[],s=[],a=[],r=[],l=0;if(e.lineGame){i=(n=4==e.numReelCards?this._cells.fortyLines.slice(0,this.linesLength(e.linesCount[this._mainModel.currentLineIndex],this._cells.fortyLines)):this._cells.twentyLines.slice(0,this.linesLength(e.linesCount[this._mainModel.currentLineIndex],this._cells.twentyLines))).length;for(var c=0;c<i;c++){for(var u,h=n[c],d=[],p=h.length,m=0;m<p;m+=2){var _=t[h[m]*(e.numReelCards+2)+h[m+1]+1];if(0!=m){if(_!=u&&_!=e.wildIndex)break}else{for(var g=e.scatterConfig.length,f=0;f<g&&_!=e.scatterConfig[f].index;f++);if(f<g)break;u=_}d.push(h[m],h[m+1])}m>4&&(o.push({line:c,cells:d.slice(),winAmount:100*m/2,card:u}),l+=100*m/2)}var C;for(i=e.scatterConfig.length,c=0;c<i;c++){C=[];for(var S=0;S<e.numReels;S++)if(e.scatterConfig[c].validReels[S])for(var E=0;E<e.numReelCards;E++)if(t[S*(e.numReelCards+2)+E+1]==e.scatterConfig[c].index){C.push(S),C.push(E);break}C.length/2>=e.scatterConfig[c].minCount&&(s.push({scatterName:e.scatterConfig[c].index,cells:C,winAmount:500}),void 0!=e.scatterConfig[c].freespinMinCount&&C.length/2>=e.scatterConfig[c].freespinMinCount&&a.push(e.scatterConfig[c].index),l+=500)}}else{_=-1;var y=[],b=[],I=0;for(d=[],c=1;c<=e.numReelCards;c++)if(b.length=0,d.length=0,I=0,_=t[c],-1==y.indexOf(_)){for(b[0]=1,d.push(0,c-1),I++,S=1;S<e.numReels;S++)for(b[S]=0,E=0;E<e.numReelCards;E++)t[S*(e.numReelCards+2)+E+1]==_&&(0==b[S]&&I++,b[S]++,d.push(S,E));if(I>=3){for(y.push(_),m=c+1;m<=e.numReelCards;m++)t[m]==_&&(b[0]++,d.push(0,m-1));for(var T=1,v=b.length,w=0;w<v;w++)0!=b[w]&&(T*=b[w]);o.push({card:_,cells:d.slice(),count:T,len:I,winPerCount:10*(_+1),winAmount:T*(10*(_+1)),multiplier:T==e.numReels*e.numReels*e.numReelCards?2:1}),l+=T*(10*(_+1))}}}return{reels:t,lines:o,scatters:s,expand:r,freespinScatters:a,totalWin:l}},e.prototype.sendResult=function(e){if(!e)throw new Error("Custom result bet should not be null!");this._customResult=e,this._main.data={command:"bet",msg:"success",balance:this._balance,complex:{gameCommand:"setResult",gameNumber:this._gameNumber}}},e.prototype.resetServer=function(){this._customResult=null,this._gambleAttemptsLeft=0,this._gambleAmountToWin=0,this._freespinsCount=0,this._gambleIndex=1,this._winAmount=0,this._bet=0},e.prototype.validateServer=function(){if(!this._main)throw new Error("The test server is not initialized!");if(this._timer)throw new Error("The test server is not done processing the previous request!")},e.prototype.linesLength=function(e,t){return e<=t.length?e:t.length},e}();i.SlotEngineServer=s}(t.testServer||(t.testServer={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.models.server.response.BaseResponse,o=e.egt.library.events,s=e.egt.library.sound.SoundManager,a=gamy.LoaderMax,r=function(e){function r(){var t=e.call(this)||this;return t._currentFreespin=0,t._totalFreespins=0,t._lineIndexAfterFreespins=-1,t.balance=0,t.currentBetIndex=0,t.currentDenomIndex=0,t.currentLineIndex=4,t.isFreespinGame=!1,t.isAutoplayGame=!1,t.isDisplayingCredits=!1,t.isNoConnection=!1,t.remainingAutoplays=-1,t.totalSessionBet=0,t.totalSessionWin=0,t.isInGamble=!1,t.shouldPlayFullVisualization=!1,t._gambleHistoryCards=[],t}return __extends(r,e),r.prototype.init=function(){this.commManager=t.bottle.container.CommunicationManager,this.gameSettings=t.bottle.container.GameSettings,this.currentState=t.bottle.container.CurrentState,this.spinAnalyzer=t.bottle.container.SpinAnalyzer,this.jackpotStatistics=t.bottle.container.JackpotStatistics.instance(),this.soundManager=new s},Object.defineProperty(r.prototype,"betPerLine",{get:function(){return this.gameSettings.bets[this.currentBetIndex]*this.denomination},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"totalBet",{get:function(){return this.isFreespinGame?0:this.betPerLine*this.linesCoefficient},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isBalanceEnoughForBet",{get:function(){if(this.isFreespinGame)return!0;var e=0;return this.response.state==n.STATE_GAMBLE&&(e=this.response.winAmount),this.balance+e-this.totalBet>=0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"denomination",{get:function(){return this.gameSettings.denominations[this.currentDenomIndex][0]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"linesCoefficientMin",{get:function(){return(this.gameSettings.lineGame?this.gameSettings.fixedLinesCount?this.gameSettings.linesCount[this.gameSettings.linesCount.length-1]:this.gameSettings.linesCount[0]:this.gameSettings.lines[0])/this.gameSettings.betForLines},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"linesCoefficientMax",{get:function(){return(this.gameSettings.lineGame?this.gameSettings.linesCount[this.gameSettings.linesCount.length-1]:this.gameSettings.lines[this.gameSettings.lines.length-1])/this.gameSettings.betForLines},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"linesCoefficient",{get:function(){return(this.gameSettings.lineGame?this.gameSettings.linesCount[this.currentLineIndex]:this.gameSettings.fixedLinesCount?this.gameSettings.lines[0]:this.gameSettings.lines[this.currentLineIndex])/this.gameSettings.betForLines},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"lines",{get:function(){return this.gameSettings.linesCount[this.currentLineIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"betResponse",{get:function(){return this.response},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"gambleResponse",{get:function(){return this.response},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"jackpotResponse",{get:function(){return this.response},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentFreespin",{get:function(){return this._currentFreespin},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"totalFreespins",{get:function(){return this._totalFreespins},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasMoreFreespinsToPlay",{get:function(){return this._totalFreespins>this._currentFreespin||0!==this.betResponse.complex.freespins&&void 0!==this.betResponse.complex.freespins||this.betResponse.complex.respin},enumerable:!0,configurable:!0}),r.prototype.addNewFreespins=function(){this._totalFreespins+=this.betResponse.complex.freespins},r.prototype.increaseCurrentFreespin=function(){this.isFreespinGame&&!this.betResponse.complex.respin&&this._currentFreespin++},r.prototype.resetFreespins=function(){this._currentFreespin=this._totalFreespins=0},r.prototype.shouldPlayCoins=function(){if(-1==this.gameSettings.coinAnimationCoef||0!=this.betResponse.complex.freespins||this.isAutoplayGame)return!1;for(var e=0,t=this.betResponse.complex,i=t.lines.length,n=0;n<i;n++)e+=t.lines[n].winAmount;i=t.scatters.length;for(n=0;n<i;n++)e+=t.scatters[n].winAmount;return e/(this.betPerLine*this.linesCoefficient)>=this.gameSettings.coinAnimationCoef},r.prototype.addGambleCard=function(e){for(var t=Math.min(this.gameSettings.gambleHistoryCardsCount-1,this._gambleHistoryCards.length);t>0;t--)this._gambleHistoryCards[t]=this._gambleHistoryCards[t-1];this._gambleHistoryCards[0]=e},Object.defineProperty(r.prototype,"gambleHistoryCards",{get:function(){return this._gambleHistoryCards.slice()},enumerable:!0,configurable:!0}),r.prototype.sendHideGame=function(){this.eventDispatcher.dispatchEvent(new o.Event(t.Main.HIDE_GAME,{sharedDenominationIndex:this.currentDenomIndex,sharedBetIndex:this.currentBetIndex}))},r.prototype.setFreespinsLineIndex=function(){-1!=this.gameSettings.freespinFixedLinesIndex&&-1==this._lineIndexAfterFreespins&&(this._lineIndexAfterFreespins=this.currentLineIndex,this.currentLineIndex=this.gameSettings.freespinFixedLinesIndex)},r.prototype.setMainGameLineIndex=function(){-1!=this._lineIndexAfterFreespins&&(this.currentLineIndex=this._lineIndexAfterFreespins,this._lineIndexAfterFreespins=-1)},r.prototype.setData=function(e){if(isNaN(e.totalBet)||(this.totalSessionBet=e.totalBet),isNaN(e.totalWin)||(this.totalSessionWin=e.totalWin),"responsibleGaming"==e.command)this.sendNotification(i.Notifications.RESPONSIBLE_GAMING_EVENT);else if("responsibleGamingComplete"==e.command)this.sendNotification(i.Notifications.RESPONSIBLE_GAMING_EVENT_COMPLETE);else if("show"==e.command){this.balance=e.balance,this.currentState.serialize(e),this.gameSettings.serialize(e),this.gameSettings.serialize(e.iData),this.gameSettings.serialize(e.settings),this.gameSettings.gameVersion=e.iData.gameName+this.gameSettings.gameVersion,this.gameSettings.engineType="ActionMoneySlot",this.gameSettings.diamondPlay="EGT"==this.gameSettings.currencyISO;var t=a.getContent("Content").currency[this.gameSettings.currencyISO];this.gameSettings.setCurrencyInfo(t),this.gameSettings.currencyDisplayOnlyCredits&&(this.isDisplayingCredits=!0),void 0!=e.iData.sharedDenominationIndex&&e.iData.sharedDenominationIndex<this.gameSettings.denominations.length&&(this.currentDenomIndex=e.iData.sharedDenominationIndex),void 0!=e.iData.sharedBetIndex&&(this.currentBetIndex=e.iData.sharedBetIndex),null!=e.complex&&this.processSubscribe(e.complex)}else"subscribe"==e.command?this.processSubscribe(e.complex):"balance"==e.command?this.balance=e.balance:this.commManager.data=e},r.prototype.initFromCurrentState=function(){if(this.currentState){if(this.currentState.state!=n.STATE_IDLE){for(var e=0;e<this.gameSettings.denominations.length;e++)if(this.gameSettings.denominations[e][0]==this.currentState.denomination){this.currentDenomIndex=e;break}this.currentBetIndex=this.gameSettings.bets.indexOf(this.currentState.bet/this.denomination),this.currentLineIndex=this.gameSettings.linesCount.indexOf(this.gameSettings.lineGame?this.currentState.numberOfLines:this.currentState.combo)}this.currentState.state==n.STATE_FREESPIN&&0!=this.currentState.freespinsUsed&&(this._currentFreespin=this.currentState.freespinsUsed,this._totalFreespins=this.currentState.freespinsUsed+this.currentState.freespins,this.isFreespinGame=!0)}},r.prototype.saveFreespinBetResponse=function(){if(!this._freespinBetResponse&&this.gameSettings.restoreReels){var e=null!=this.currentState?this.currentState.firstSpin:this.betResponse.complex;this._freespinBetResponse=t.bottle.container.BetResponse.instance(),e.reels&&(this._freespinBetResponse.complex.reels=e.reels.slice()),e.lines&&(this._freespinBetResponse.complex.lines=e.lines.slice()),e.scatters&&(this._freespinBetResponse.complex.scatters=e.scatters.slice()),e.expand&&(this._freespinBetResponse.complex.expand=e.expand.slice())}},r.prototype.restoreFreespinBetResponse=function(){null!=this._freespinBetResponse&&(this.betResponse.complex.reels=this._freespinBetResponse.complex.reels,this.betResponse.complex.lines=this._freespinBetResponse.complex.lines,this.betResponse.complex.scatters=this._freespinBetResponse.complex.scatters,this.betResponse.complex.expand=this._freespinBetResponse.complex.expand,this._freespinBetResponse=null)},r.prototype.changeCurrency=function(){},r.prototype.dispose=function(){this.resources&&this.resources.dispose(),this.soundManager&&this.soundManager.dispose(),e.prototype.dispose.call(this)},r.prototype.processSubscribe=function(e){if(balanceU>0){this.balance=balanceU;}this.currentState.serialize(e.currentState),this.gameSettings.jackpot&&this.jackpotStatistics.serialize(e.jackpotState),this.response=this.currentState.getInitialResponse(),this.resources=t.bottle.container.Resources,this.resources.load()},r}(Pluck.Model);i.MainModel=r}(t.models||(t.models={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){var t=function(){function e(){}return e.RESOURCES_LOADED="resourcesLoaded",e.RESOURCES_PROGRESS="resourcesProgress",e.RESOURCES_ERROR="resourcesError",e.REELS_STOPPED="reelsStopped",e.SPIN_CLICKED="spinClicked",e.COLLECT_CLICKED="collectClicked",e.GAMBLE_CLICKED="gambleClicked",e.RED_GAMBLE_CLICKED="redGambleClicked",e.BLACK_GAMBLE_CLICKED="blackGambleClicked",e.PAYTABLE_CLICKED="paytableClicked",e.STOP_ALL_CLICKED="stopAllClicked",e.DENOMINATION_CLICKED="denominationClicked",e.START_AUTOPLAY_BUTTON_CLICKED="startAutoPlayButtonClicked",e.STOP_AUTOPLAY_BUTTON_CLICKED="stopAutoPlayButtonClicked",e.SELECT_AUTOPLAY_BUTTON_CLICKED="selectAutoPlayButtonClicked",e.SOUND_YES_CLICKED="soundYesClicked",e.RESPONSE_RECEIVED="responseReceived",e.BET_RECEIVED="betReceived",e.COLLECT_RECEIVED="collectReceived",e.GAMBLE_SENT="gambleSent",e.GAMBLE_RECEIVED="gambleReceived",e.JACKPOT_RECEIVED="jackpotReceived",e.SET_RESULT_RECEIVED="setResultReceived",e.RESPONSIBLE_GAMING_EVENT="responsibleGamingEvent",e.RESPONSIBLE_GAMING_EVENT_COMPLETE="responsibleGamingEventComplete",e.WIN_MONEY_ANIMATION_COMPLETE="winMoneyAnimationComplete",e.GAMBLE_WIN_MONEY_ANIMATION_COMPLETE="gambleWinMoneyAnimationComplete",e.JACKPOT_WIN_MONEY_ANIMATION_START="jackpotWinMoneyAnimationStart",e.JACKPOT_WIN_MONEY_ANIMATION_COMPLETE="jackpotWinMoneyAnimationComplete",e.JACKPOT_WIN_MONEY_COLLECT="jackpotWinMoneyCollect",e.WIN_MONEY_COLLECT_ANIMATION_COMPLETE="winMoneyCollectAnimationComplete",e.SMALL_DENOMINATIONS_OPENED="smallDenominationsOpened",e.SMALL_DENOMINATIONS_CLOSED="smallDenominationsClosed",e.SELECT_AUTOPLAY_BUTTONS_OPENED="selectAutoplayButtonsOpened",e.SELECT_AUTOPLAY_BUTTONS_CLOSED="selectAutoplayButtonsClosed",e.DENOMINATION_CHANGED="denominationChanged",e.LINES_CHANGED="linesChanged",e.BET_CHANGED="betChanged",e.GAMBLE_RESUMED="gambleResumed",e.GAMBLE_COMPLETED="gambleCompleted",e.JACKPOT_STARTED="jackpotStarted",e.JACKPOT_SHOWN="jackpotShown",e.JACKPOT_COMPLETED="jackpotCompleted",e.PAYTABLE_OPENED="paytableOpened",e.PAYTABLE_CLOSED="paytableClosed",e.WIN_VISUALIZATION_CYCLE_COMPLETE="winVisualizationCycleComplete",e.WIN_CREATE_MULTIPLIER_IMAGES="winCreateMultiplierImages",e.WIN_STOP_BLINK_INTERVAL_X_IMAGES="winStopBlinkIntervalxImages",e.WIN_COLLECTED="winCollected",e.EXPAND_COMPLETE="expandComplete",e.JACKPOT_STATISTIC_RECEIVED="jackpotStatisticsReceived",e.INSUFFICIENT_BALANCE="insufficientBalance",e.INSUFFICIENT_SERVER_BALANCE="insufficientServerBalance",e.NO_CONNECTION="noConnection",e.VIDEO_LOADED="videoLoaded",e.ENTER_FREESPINS_SCENARIO_COMPLETE="enterFreespinsScenarioComplete",e.FREESPIN_ANIMATION_START_CLICKED="freespinAnimationStartClicked",e.FREESPIN_INTRO_REFRESH_SCREEN="freespInintroRefreshScreen",e.FREESPIN_RETRIGGER_REFRESH_SCREEN="freespinRetriggerRefreshScreen",e.FREESPIN_OUTRO_REFRESH_SCREEN="freespinOutroRefreshScreen",e.FREESPIN_OUTRO_STARTED="freespinOutroStarted",e.FREESPIN_INTRO_ENDED="freespinIntroEnded",e.FREESPIN_RETRIGGER_ENDED="freespinRetriggerEnded",e.FREESPIN_OUTRO_ENDED="freespinOutroEnded",e.CURRENCY_CHANGED="currencyChanged",e.CLEAR_CELLS="clearCells",e.SHOW_CELLS="showACell",e.SHOW_ALL_CELLS="showAllCells",e.DRAW_LINES="drawLines",e.HIDE_LINES="hideLines",e.START_WIN_VISUALIZATION="startWinVisualization",e}();e.Notifications=t}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.loading.Loader,o=e.egt.library.utils.log,s=function(e){function i(){var i=e.call(this)||this,o=n.getLoader("gameImages"),s=t.bottle.container.GameSettings;i._gradient=new PIXI.Sprite(o.getTexture("freespinGradient.png")),i.addChild(i._gradient),i._textContainer=new PIXI.Container,i._textContainer.pivot.set(0,i._gradient.height/2),i._textContainer.position.set(4,i._textContainer.pivot.y),i.addChild(i._textContainer);var a={fontSize:15,fontFamily:"Arial",fontWeight:"bold",align:"left",fill:"#f0d422",lineHeight:31};return i._freespinText=new PIXI.Text(s.localization.FreeSpin,a),i._freespinText.y=9,i._textContainer.addChild(i._freespinText),i._ofText=new PIXI.Text(s.localization.Of,a),i._ofText.y=9,i._textContainer.addChild(i._ofText),a={fontSize:25,fontFamily:"Arial",fontWeight:"bold",fill:"white"},i._currentFreespinText=new PIXI.Text("1",a),i._textContainer.addChild(i._currentFreespinText),i._totalFreespinText=new PIXI.Text("1",a),i._textContainer.addChild(i._totalFreespinText),i}return __extends(i,e),s=i,i.prototype.updateFreespinCount=function(e,t){this.warn("Update freespin count[%s] of total [%s]",e,t),this._currentFreespinText.text=e.toString(),this._totalFreespinText.text=t.toString(),this._currentFreespinText.x=this._freespinText.x+this._freespinText.width+s.MARGIN,this._ofText.x=this._currentFreespinText.x+this._currentFreespinText.width+s.MARGIN,this._totalFreespinText.x=this._ofText.x+this._ofText.width+s.MARGIN,this._textContainer.scale.set(1);var i=s.MAX_WIDTH/this._textContainer.width;i<1&&this._textContainer.scale.set(i)},i.MARGIN=5,i.MAX_WIDTH=180,i=s=__decorate([o.decorator],i);var s}(PIXI.Container);i.FreespinCountView=s}(i.bottomlabels||(i.bottomlabels={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.loading.Loader,o=e.egt.library.widgets.MoneyText,s=e.egt.library.widgets.Text,a=function(e){function i(){var i=e.call(this)||this,a=t.bottle.container.GameSettings;i.freespinCountView=t.bottle.container.FreespinCountView,i.freespinCountView.position.set(324,599),i.addChild(i.freespinCountView),i.freespinCountView.visible=!1;var r=a.diamondPlay,l=n.getLoader("gameImages"),c=r?l.getTexture("diamond.png"):null;if(i._balanceMoney=new o({currency:a.currencyISO,moneyFontSize:33,currencyFontSize:14,align:"center",isShowingCredits:!1,diamond:c,diamondPlay:r,diamondScaleCoef:.487,keepCurrencySize:!0,keepDiamondSize:!1,hideCents:a.currencyHideCents,bounds:{width:196,height:40}}),i._balanceMoney.style={fill:16777215,fontWeight:"bold"},i._balanceMoney.position.set(112,608),i.balanceLabel=new s({align:"center",bounds:{width:202,height:14}},"",{fontSize:12,fontWeight:"bold",fill:a.labelsColor,dropShadow:!0,dropShadowDistance:1,dropShadowBlur:1,dropShadowAngle:11*Math.PI/6}),i.balanceLabel.position.set(109,590),i._winMoney=new o({currency:a.currencyISO,moneyFontSize:65,currencyFontSize:13,align:"center",centerAlignOnlyMoney:!0,isShowingCredits:!1,diamond:c,diamondPlay:r,diamondScaleCoef:.32,keepCurrencySize:!0,keepDiamondSize:!1,shouldHideWhenMoneyValueIsZero:!0,hideCents:a.currencyHideCents,bounds:{width:227,height:80}}),i._winMoney.style={fill:16777215,fontWeight:"bold"},i._winMoney.position.set(941,597),i.winLabel=new s({align:"center",bounds:{width:160,height:24},shouldScale:!0},"",{fontSize:15,fill:a.labelsColor}),i.winLabel.position.set(974,680),i.infoLine=new s({align:"center",bounds:{width:601,height:28}},"",{fontSize:17,fontWeight:"bold",fill:16777215}),i.infoLine.position.set(324,601),a.sendTotalsInfo){var u=new PIXI.Graphics;u.beginFill(0),u.drawRect(0,0,PIXI.renderer.width,a.totalLabelsPanelHeight+5),u.endFill(),u.y=PIXI.renderer.height,i._totalSessionBetLabel=new PIXI.Text(a.localization.totalBetLabel,{fontSize:12,fill:16777215}),i._totalSessionWinLabel=new PIXI.Text(a.localization.totalWinLabel,{fontSize:12,fill:16777215}),i._totalSessionBetMoney=new o({currency:a.currencyISO,moneyFontSize:12,currencyFontSize:8,diamond:c,diamondPlay:r,diamondScaleCoef:.32,hideCents:a.currencyHideCents,shouldFitToBounds:!1}),i._totalSessionBetMoney.style={fill:16777215},i._totalSessionWinMoney=new o({currency:a.currencyISO,moneyFontSize:12,currencyFontSize:8,diamond:c,diamondPlay:r,diamondScaleCoef:.32,hideCents:a.currencyHideCents,shouldFitToBounds:!1}),i._totalSessionWinMoney.style={fill:16777215},i._totalSessionBetLabel.y=i._totalSessionWinLabel.y=i._totalSessionBetMoney.y=i._totalSessionWinMoney.y=725,i.addChild(u,i._totalSessionBetLabel,i._totalSessionWinLabel,i._totalSessionBetMoney,i._totalSessionWinMoney),i.positionTotalLabels()}  return i.addChild(i._balanceMoney),i.addChild(i.balanceLabel),i.addChild(i._winMoney),i.addChild(i.winLabel),i.addChild(i.infoLine),i}return __extends(i,e),Object.defineProperty(i.prototype,"isDisplayingCredits",{set:function(e){this._balanceMoney.isShowingCredits=e,this._winMoney.isShowingCredits=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"denomination",{set:function(e){this._balanceMoney.denomination=e,this._winMoney.denomination=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"winMoney",{get:function(){return this._winMoney.money},set:function(e){this.isWinMoneyAnimating?this.animateWinMoney(e,0):this._winMoney.money=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"balanceMoney",{get:function(){return this._balanceMoney.money},set:function(e){this.isBalanceMoneyAnimating?this.animateBalanceMoney(e,0):this._balanceMoney.money=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isWinMoneyAnimating",{get:function(){return null!=this._winMoneyTween&&this._winMoneyTween.isActive()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isBalanceMoneyAnimating",{get:function(){return null!=this._balanceMoneyTween&&this._balanceMoneyTween.isActive()},enumerable:!0,configurable:!0}),i.prototype.totalSessionBet=function(e){null!=this._totalSessionBetMoney&&(this._totalSessionBetMoney.money=e,this.positionTotalLabels())},i.prototype.totalSessionWin=function(e){null!=this._totalSessionWinMoney&&(this._totalSessionWinMoney.money=e,this.positionTotalLabels())},i.prototype.animateWinMoney=function(e,t){this.isWinMoneyAnimating?this._winMoneyTween.updateTo({money:e}):this._winMoneyTween=TweenMax.to(this._winMoney,t,{money:e,ease:Linear.easeNone,onComplete:this.onWinMoneyAnimationComplete,callbackScope:this})},i.prototype.animateBalanceMoney=function(e,t){this.isBalanceMoneyAnimating?e<this._balanceMoneyTween.vars.money?(this.completeAnimations(),this._balanceMoney.money=e):this._balanceMoneyTween.updateTo({money:e}):this._balanceMoneyTween=TweenMax.to(this._balanceMoney,t,{money:e,ease:Linear.easeNone})},i.prototype.completeAnimations=function(e){this.isWinMoneyAnimating&&this._winMoneyTween.totalTime(this._winMoneyTween.totalDuration(),e),this.isBalanceMoneyAnimating&&this._balanceMoneyTween.totalTime(this._balanceMoneyTween.totalDuration(),e)},i.prototype.startInfoLineBlink=function(){var e=this;this._timer=setInterval(function(){e.onBlink()},400)},i.prototype.stopInfoLineBlink=function(){clearInterval(this._timer),this.infoLine.text="",this.infoLine.visible=!0},i.prototype.dispose=function(){null!=this._winMoneyTween&&this._winMoneyTween.kill(),null!=this._balanceMoneyTween&&this._balanceMoneyTween.kill()},i.prototype.positionTotalLabels=function(){this._totalSessionBetLabel.x=109,this._totalSessionBetMoney.x=this._totalSessionBetLabel.x+this._totalSessionBetLabel.width+6,this._totalSessionWinLabel.x=this._totalSessionBetMoney.x+this._totalSessionBetMoney.width+34,this._totalSessionWinMoney.x=this._totalSessionWinLabel.x+this._totalSessionWinLabel.width+6},i.prototype.onWinMoneyAnimationComplete=function(){this.emit(i.WIN_MONEY_ANIMATION_COMPLETE)},i.prototype.onBlink=function(){this.infoLine.visible=!this.infoLine.visible},i.WIN_MONEY_ANIMATION_COMPLETE="winMoneyAnimationComplete",i}(PIXI.Container);i.BottomLabelsView=a}(i.bottomlabels||(i.bottomlabels={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){var t=function(){function e(){this.countsByOnePoint=10,this.divisor=10,this.fastModeDiv=6,this.fastModeDiv=10,this.startValue=0,this.settings={endValue:0,denom:0,fastMode:!1,onComplete:null}}return e.getAnimationTime=function(t,i){var n=new e;return n.settings.endValue=t,n.settings.denom=i,n.getTime()},e.prototype.getTime=function(){this.amount=this.settings.endValue;for(var e=0;0!=this.amount;)this.DoNextCount(),e++;return 150*(e+1)},e.prototype.round=function(e,t){e=Math.floor(e);var i=Math.floor(e/t)*t,n=i+t;return 0==i?n:n-e>e-i?i:n},e.prototype.DoNextCount=function(){if(this.settings.fastMode){if(!(this.fastModeDiv>1))return this.amount=0,!0;e=Math.floor(this.amount/this.fastModeDiv),e=this.round(e,this.settings.denom),this.fastModeDiv--,this.amount-=e}else if(this.amount>this.settings.denom*this.countsByOnePoint){var e=Math.floor(this.amount-this.settings.denom*this.countsByOnePoint)/this.divisor;e=this.round(e,this.settings.denom),this.amount-=e}else{if(!(this.amount>this.settings.denom))return this.amount=0,!0;this.amount-=this.settings.denom}return!1},e}();e.MoneyAnimation=t}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.views.bottomlabels.BottomLabelsView,o=e.egt.baseslot.models.Notifications,s=e.egt.baseslot.models.server.response.BaseResponse,a=e.egt.baseslot.models.server.BaseComplex,r=e.egt.baseslot.models.server.response.JackpotResponse,l=e.egt.baseslot.models.MoneyAnimation,c=e.egt.library.utils.log,u=function(e){function i(){var i=e.call(this)||this;return i._view=t.bottle.container.BottomLabelsView,i.view.on(n.WIN_MONEY_ANIMATION_COMPLETE,i.onWinMoneyAnimationComplete,i),i.view.balanceMoney=i.mainModel.balance,i.mainModel.response.state!=s.STATE_IDLE?i.view.winMoney=i.mainModel.betResponse.winAmount:i.view.winMoney=0,i.view.denomination=i.mainModel.denomination,i.view.isDisplayingCredits=i.mainModel.isDisplayingCredits,i.view.balanceLabel.text=i.mainModel.gameSettings.localization.Balance,i.view.winLabel.text=i.mainModel.gameSettings.localization.Win,i.infoLineText=i.mainModel.gameSettings.localization.PlaceBet,i.processCurrentState(),i.setSessionTotals(),i}return __extends(i,e),i.prototype.getInterests=function(){return[o.RESPONSE_RECEIVED,o.REELS_STOPPED,o.SPIN_CLICKED,o.COLLECT_CLICKED,o.COLLECT_RECEIVED,o.GAMBLE_RECEIVED,o.GAMBLE_COMPLETED,o.JACKPOT_STARTED,o.JACKPOT_WIN_MONEY_ANIMATION_START,o.JACKPOT_WIN_MONEY_ANIMATION_COMPLETE,o.JACKPOT_WIN_MONEY_COLLECT,o.JACKPOT_COMPLETED,o.EXPAND_COMPLETE,o.INSUFFICIENT_BALANCE,o.INSUFFICIENT_SERVER_BALANCE,o.WIN_COLLECTED,o.WIN_MONEY_ANIMATION_COMPLETE,o.WIN_MONEY_COLLECT_ANIMATION_COMPLETE,o.ENTER_FREESPINS_SCENARIO_COMPLETE,o.FREESPIN_INTRO_REFRESH_SCREEN,o.FREESPIN_RETRIGGER_REFRESH_SCREEN,o.FREESPIN_OUTRO_REFRESH_SCREEN,o.FREESPIN_OUTRO_ENDED,o.CURRENCY_CHANGED,o.DENOMINATION_CHANGED,o.NO_CONNECTION]},Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isWinMoneyAnimating",{get:function(){return this.view.isWinMoneyAnimating},enumerable:!0,configurable:!0}),i.prototype.handleNotification=function(e){switch(e.name){case o.RESPONSE_RECEIVED:this.mainModel.response.complex.gameCommand!=a.SET_RESULT&&(this.mainModel.response.state!=s.STATE_IDLE&&this.mainModel.response.state!=s.STATE_JACKPOT||this.mainModel.response.complex.gameCommand==a.COLLECT?this.mainModel.response.complex.gameCommand==a.COLLECT&&this.mainModel.commManager.isBetRequested?this.view.balanceMoney=this.mainModel.balance-this.mainModel.totalBet:this.view.balanceMoney=this.mainModel.balance:this.view.balanceMoney=this.mainModel.balance-this.mainModel.response.winAmount),this.view.totalSessionBet(this.mainModel.totalSessionBet);break;case o.REELS_STOPPED:0==this.mainModel.spinAnalyzer.numberOfWins&&(this.setSessionTotals(),this.mainModel.betResponse.state!=s.STATE_JACKPOT&&(this.infoLineText=this.mainModel.gameSettings.localization.PlaceBet));break;case o.EXPAND_COMPLETE:this.mainModel.isFreespinGame||(this.view.winMoney=0),this.infoLineText="",this.view.winLabel.text=this.mainModel.gameSettings.localization.Win;var t=this.mainModel.betResponse.winAmount,i=this.mainModel.isAutoplayGame?2:l.getAnimationTime(Math.abs(this.view.winMoney-t),this.mainModel.denomination)/1e3;this.animateWinMoney(t,i,o.WIN_MONEY_ANIMATION_COMPLETE);break;case o.SPIN_CLICKED:this.view.completeAnimations(!0),this.view.freespinCountView.updateFreespinCount(this.mainModel.currentFreespin,this.mainModel.totalFreespins),t=0,this.mainModel.response.state==s.STATE_GAMBLE&&(t=this.mainModel.response.winAmount),this.view.balanceMoney=this.mainModel.balance+t-this.mainModel.totalBet,this.infoLineText=this.mainModel.gameSettings.localization.GoodLuck,this.setLastWin(),this.setSessionTotals();break;case o.COLLECT_CLICKED:this.isWinMoneyAnimating&&this.view.completeAnimations();break;case o.COLLECT_RECEIVED:this.setSessionTotals();break;case o.WIN_MONEY_ANIMATION_COMPLETE:this.mainModel.betResponse.state==s.STATE_GAMBLE||0!=this.mainModel.betResponse.complex.freespins||this.mainModel.betResponse.state==s.STATE_JACKPOT||this.mainModel.isAutoplayGame||(this.infoLineText=this.mainModel.gameSettings.localization.PlaceBet);break;case o.WIN_MONEY_COLLECT_ANIMATION_COMPLETE:this.setLastWin(),this.setSessionTotals();break;case o.GAMBLE_RECEIVED:this.animateWinMoney(this.mainModel.response.winAmount,this.mainModel.gameSettings.gambleMoneyAnimationTime,o.GAMBLE_WIN_MONEY_ANIMATION_COMPLETE);break;case o.GAMBLE_COMPLETED:0!=this.mainModel.response.winAmount?(this.view.winLabel.text=this.mainModel.gameSettings.localization.Win,this.collectWinAmount()):(this.setLastWin(),this.setSessionTotals()),this.mainModel.response.complex.jackpot?this.infoLineText="":this.infoLineText=this.mainModel.gameSettings.localization.PlaceBet,this.view.infoLine.visible=!0;break;case o.JACKPOT_STARTED:this.collectWinAmount(!1),this.infoLineText="";break;case o.JACKPOT_WIN_MONEY_ANIMATION_START:if(this.mainModel.response.state==s.STATE_IDLE){var n=this.mainModel.gameSettings.jackpotWinMoneyAnimationTimes[this.mainModel.jackpotResponse.complex.winLevel];this.infoLineText="",this.view.winLabel.text=this.mainModel.gameSettings.localization.Win,this.view.winMoney=0,this.animateWinMoney(this.mainModel.response.winAmount,n,o.JACKPOT_WIN_MONEY_ANIMATION_COMPLETE)}break;case o.JACKPOT_WIN_MONEY_ANIMATION_COMPLETE:this.infoLineText=this.mainModel.gameSettings.localization.JackpotCollect,this.mainModel.isNoConnection||this.view.startInfoLineBlink();break;case o.JACKPOT_WIN_MONEY_COLLECT:this.collectWinAmount(),this.view.stopInfoLineBlink();break;case o.JACKPOT_COMPLETED:this.infoLineText=this.mainModel.gameSettings.localization.PlaceBet;break;case o.INSUFFICIENT_BALANCE:case o.INSUFFICIENT_SERVER_BALANCE:this.infoLineText=this.mainModel.gameSettings.localization.InsufficientBalance,this.view.balanceMoney=this.mainModel.balance,this.setSessionTotals();break;case o.WIN_COLLECTED:this.mainModel.response.complex.jackpot||(this.infoLineText=this.mainModel.gameSettings.localization.PlaceBet),this.mainModel.isFreespinGame||(this.view.infoLine.visible=!0),e.body.isDuringGamble||this.collectWinAmount(!1);break;case o.ENTER_FREESPINS_SCENARIO_COMPLETE:this.view.completeAnimations(!0);break;case o.FREESPIN_INTRO_REFRESH_SCREEN:case o.FREESPIN_RETRIGGER_REFRESH_SCREEN:this.view.freespinCountView.updateFreespinCount(this.mainModel.currentFreespin,this.mainModel.totalFreespins),this.mainModel.isNoConnection||(this.view.freespinCountView.visible=!0,this.view.infoLine.visible=!1);break;case o.FREESPIN_OUTRO_REFRESH_SCREEN:this.mainModel.resetFreespins(),this.view.freespinCountView.visible=!1;break;case o.FREESPIN_OUTRO_ENDED:this.mainModel.betResponse.state!=s.STATE_GAMBLE&&(this.view.infoLine.visible=!0);break;case o.CURRENCY_CHANGED:this.changeCurrency();break;case o.DENOMINATION_CHANGED:this.view.denomination=this.mainModel.denomination;break;case o.NO_CONNECTION:this.view.stopInfoLineBlink(),this.view.infoLine.text=this.mainModel.gameSettings.localization.NoConnection,this.view.infoLine.visible=!0,this.view.freespinCountView.visible=!1,this.view.balanceMoney=this.mainModel.balance,this.setSessionTotals()}},i.prototype.dispose=function(){this.view.off(n.WIN_MONEY_ANIMATION_COMPLETE,this.onWinMoneyAnimationComplete,this),this.view.dispose(),e.prototype.dispose.call(this)},i.prototype.processCurrentState=function(){this.mainModel.response instanceof r?(this.infoLineText=this.mainModel.gameSettings.localization.ChooseCard,this.view.winLabel.text=this.mainModel.gameSettings.localization.LastWin):this.mainModel.response.state==s.STATE_GAMBLE?this.infoLineText="":this.mainModel.currentState.state==s.STATE_FREESPIN?(this.infoLineText="",this.mainModel.isFreespinGame&&(this.view.freespinCountView.updateFreespinCount(this.mainModel.currentFreespin,this.mainModel.totalFreespins),this.view.freespinCountView.visible=!0,this.view.infoLine.visible=!1)):this.view.winLabel.text=this.mainModel.gameSettings.localization.LastWin},Object.defineProperty(i.prototype,"infoLineText",{set:function(e){this.mainModel.isNoConnection||(this.log("Set info line text[%s]",e),this.view.infoLine.text=e)},enumerable:!0,configurable:!0}),i.prototype.collectWinAmount=function(e){void 0===e&&(e=!0);var t=this.mainModel.response.state==s.STATE_GAMBLE?this.mainModel.response.winAmount:0;e?(this.animateWinMoney(0,this.mainModel.gameSettings.collectMoneyAnimationTime,o.WIN_MONEY_COLLECT_ANIMATION_COMPLETE),this.animateBalanceMoney(this.mainModel.balance+t,this.mainModel.gameSettings.collectMoneyAnimationTime),this.mainModel.soundManager.play("collectSound")):(this.view.balanceMoney=this.mainModel.balance+t,this.setLastWin(),this.setSessionTotals())},i.prototype.animateWinMoney=function(e,t,i){this._winMoneyCompleteNotification=i,this.view.animateWinMoney(e,t)},i.prototype.animateBalanceMoney=function(e,t){this.view.animateBalanceMoney(e,t)},i.prototype.setLastWin=function(){this.mainModel.isFreespinGame||(this.view.winLabel.text=this.mainModel.gameSettings.localization.LastWin,this.mainModel.response.winAmount>0&&(this.view.winMoney=this.mainModel.response.winAmount))},i.prototype.setSessionTotals=function(){this.view.totalSessionBet(this.mainModel.totalSessionBet),this.view.totalSessionWin(this.mainModel.totalSessionWin)},i.prototype.onWinMoneyAnimationComplete=function(){null!=this._winMoneyCompleteNotification&&this.sendNotification(this._winMoneyCompleteNotification)},i.prototype.changeCurrency=function(){this.mainModel.isDisplayingCredits?this.view.balanceLabel.text=this.mainModel.gameSettings.localization.Credit:this.view.balanceLabel.text=this.mainModel.gameSettings.localization.Balance,this.view.isDisplayingCredits=this.mainModel.isDisplayingCredits},i=__decorate([c.decorator],i)}(Pluck.ViewController);i.BottomLabelsController=u}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.library.events.EventDispatcher,n=e.egt.library.events,o=e.egt.library.utils.log,s=function(e){function t(t,n,o,s,a,r,l){var c=e.call(this)||this;return c._reel_length=0,c._result=null,c._final_offset=0,c._drawn_once=!1,c._state=i.REEL_IDLE,c._state_next=i.REEL_IDLE,c._stop_after_start=!1,c._stopped_state=i.REEL_IDLE,c._rotating=!1,c._dist_to_end=-1,c._source_rect={},c._dest_point={},c._result_index=-1,c._bounce=0,c._dispatchStop=!1,c._clearedCellsIndex=[],c._view=t,c._mask=n,c._x=o,c._y=s,c._reel_index=a,c._gameSettings=l,c._cellHeight=l.reelHeight/l.numReelCards,c._textures=r,c._sprites=[],c._spritesCardIndex=[],c.initConfig(),c._dest_point.x=c._x,c._emptyTexture=new PIXI.Texture(new PIXI.BaseTexture(null)),c}return __extends(t,e),i=t,Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.calculateCellHeight=function(){return this._cellHeight},t.prototype.calculateBounce=function(){return this._bounce=Math.floor(this._gameSettings.reelRotationDirection*this._cellHeight*this._gameSettings.reelStopBouncePercent/100)},t.prototype.initConfig=function(){this.calculateCellHeight(),this.calculateBounce(),this.getSetOffset(this._cellHeight),this.destroySprites(),this.createSprites()},t.prototype.destroySprites=function(){if(this._sprites.length){for(var e=0;e<this._sprites.length;e++)this._sprites[e].parent.removeChild(this._sprites[e]);this._sprites.length=0}},t.prototype.createSprites=function(){for(var e=0;e<this._gameSettings.numReelCards+1;e++)this._spritesCardIndex[e]=-1,this._sprites[e]=new PIXI.Sprite(this._textures[0]),this._sprites[e].x=this._x,this._sprites[e].mask=this._mask,this._view.addChild(this._sprites[e])},t.prototype.getSetOffset=function(e){if(void 0==e)return this._offset;this._offset=e},t.prototype.getIndex=function(){return this._reel_index},t.prototype.getState=function(){switch(this._state){case i.REEL_STARTING:case i.REEL_ROTATING:return i.REEL_ROTATING;case i.REEL_STOPPING:case i.REEL_BOUNCING:return i.REEL_STOPPING}return i.REEL_IDLE},t.prototype.changeFakeReel=function(e){this._reel_length=e.length,this._fake_reel=new Array,this._real_reel=new Array;for(var t=0;t<this._reel_length;t++)this._fake_reel[t]=e[t],this._real_reel[t]=i.FAKE_IMAGE_INDEX;var n=this._result.length;for(t=0;t<n;t++)this._real_reel[t]=this._result[t];this._offset=this._cellHeight,-1!==this._result_index&&(this._result_index=0)},t.prototype.setTextures=function(e){this._textures=e},t.prototype.setFakeReel=function(e){this._reel_length=e.length,this._fake_reel=[],this._real_reel=[];for(var t=0;t<this._reel_length;t++)this._fake_reel[t]=e[t],this._real_reel[t]=i.FAKE_IMAGE_INDEX;this._result=[],this.clearResult()},t.prototype.setResult=function(e,t){var i=this._reel_index*(this._gameSettings.numReelCards+2),n=(this.getCurrentTopImage()+this._reel_length-1)%this._reel_length;t&&(this._result_index=n);var o=this._gameSettings.numReelCards+2;this.log("Set results[%s] show now[%s]",e&&e.slice(i,i+o).join(","),t);for(var s=0;s<o;s++)t&&(this._real_reel[n]=e[i+s],n=(n+1)%this._reel_length),this._result[s]=e[s+i];this._drawn_once=!1,t&&this.draw(1)},t.prototype.start=function(){this._state==i.REEL_IDLE&&(this.showAllCells(),this.clearResult(),this.changeState(i.REEL_STARTING),this._stopAfterStart=!1)},t.prototype.stop=function(e){switch(void 0==e&&(e=0),this._state){case i.REEL_STARTING:this._dist_to_end=-1,this._stop_after_start=!0,this._stopped_state=i.REEL_STARTING;break;case i.REEL_ROTATING:this._dist_to_end=e,this.changeState(i.REEL_STOPPING),this._stopped_state=i.REEL_ROTATING;break;case i.REEL_STOPPING:this._offset=this._final_offset-(1==this._gameSettings.reelRotationDirection?e:-e),this._stopped_state=i.REEL_STOPPING}},t.prototype.getDistToStop=function(){return this._state==i.REEL_STOPPING?Math.abs(this._offset-this._final_offset):-1},t.prototype.getDistToRest=function(){return this._state==i.REEL_BOUNCING?Math.abs(this._offset-(this._final_offset-this._bounce)):-1},t.prototype.clearCell=function(e){this.log("Clear cell[%s]",e),this._sprites[e].visible=!1,this._clearedCellsIndex.push(e)},t.prototype.showCell=function(e){this.log("Show cell[%s]",e),this._sprites[e].visible=!0;var t=this._clearedCellsIndex.indexOf(e);-1!=t&&this._clearedCellsIndex.splice(t,1),this.redraw()},t.prototype.redraw=function(){this._drawn_once=!1,this.draw(1)},t.prototype.draw=function(e){if(this._state!=i.REEL_IDLE||!this._drawn_once){this._drawn_once=!0;var t;t=this._rotating?this._cellHeight/this._gameSettings.reelRotationSpeed*e*this._gameSettings.reelRotationDirection:0;var o=this._offset;this._offset+=t,this._state==i.REEL_STOPPING&&(1==this._gameSettings.reelRotationDirection&&this._offset>=this._final_offset||-1==this._gameSettings.reelRotationDirection&&this._offset<=this._final_offset)&&(this._offset=this._final_offset,this.changeState(i.REEL_BOUNCING));var s=this._cellHeight,a=this._reel_length*s;(o%=a)<0&&(o=a+o);var r,l=Math.floor(o/s);1==this._gameSettings.reelRotationDirection&&(this._real_reel[(l+this._reel_length-1)%this._reel_length]=i.FAKE_IMAGE_INDEX);for(var c=-o%s,u=0;c<=this._gameSettings.reelHeight;){(r=this._real_reel[l])===i.FAKE_IMAGE_INDEX&&(r=this._fake_reel[l]);var h=this._sprites[u];r===i.EMPTY_IMAGE_INDEX?(h.texture=this._emptyTexture,this._spritesCardIndex[u]=-1):(this._spritesCardIndex[u]=r,h.texture=this._textures[r]),this._gameSettings.cardsOnTopIndexes&&-1!=this._gameSettings.cardsOnTopIndexes.indexOf(r)?h.parent.setChildIndex(h,h.parent.children.length-1):h.parent.setChildIndex(h,0),(this._state==i.REEL_IDLE||this._state==i.REEL_BOUNCING)&&h.height>this._cellHeight?h.mask=null:h.mask=this._mask,h.x=this._x+(this._gameSettings.reelWidth-h.width)/2,h.y=c+this._y+(s-h.height)/2,(this._state==i.REEL_IDLE||this._state==i.REEL_BOUNCING)&&h.height>this._cellHeight&&(u==this._sprites.length-1&&h.y+h.height/2>=this._gameSettings.reelHeight+this._y||0==u&&h.y+h.height/2<this._y)?h.visible=!1:-1==this._clearedCellsIndex.indexOf(u)&&(h.visible=!0),c+=s,l=(l+1)%this._reel_length,u++}if(!this._gameSettings.cardsOnTopArrangeTopToBottom)for(var d=this._sprites.length-1;d>=0;d--)this._gameSettings.cardsOnTopIndexes&&-1!=this._gameSettings.cardsOnTopIndexes.indexOf(this._spritesCardIndex[d])?this._sprites[d].parent.setChildIndex(this._sprites[d],this._sprites[d].parent.children.length-1):this._sprites[d].parent.setChildIndex(this._sprites[d],0);if(-1==this._gameSettings.reelRotationDirection){var p=-1==this._result_index?(this.getCurrentTopImage()+this._reel_length-2)%this._reel_length:(this._result_index+this._reel_length-1)%this._reel_length;do{l++,l%=this._reel_length,this._real_reel[l]=i.FAKE_IMAGE_INDEX}while(l!=p)}this._dispatchStop&&(this.changeState(i.REEL_IDLE),this._dispatchStop=!1,this.dispatchEvent(new n.Event(i.REEL_STOPPED)))}},t.prototype.showAllCells=function(){this.log("Show all cells");for(var e=0;e<this._sprites.length;e++)this._sprites[e].visible=!0;this._clearedCellsIndex.length=0,this.redraw()},t.prototype.dispose=function(){this._gameSettings=null,this._tween&&(this._tween.kill(),this._tween=null),e.prototype.dispose.call(this)},t.prototype.clearResult=function(){for(var e=this._result.length,t=0;t<e;t++)this._result[t]=-1},t.prototype.getCurrentTopImage=function(){var e=this._cellHeight,t=e*this._reel_length,i=this._offset%t;return i<0&&(i=t+i),Math.floor(i/e)},t.prototype.changeState=function(e){switch(this._state=e,e){case i.REEL_STARTING:this._rotating=!1,this.changeState(i.REEL_ROTATING);break;case i.REEL_ROTATING:this._rotating=!0,this._stop_after_start&&this.changeState(i.REEL_STOPPING);break;case i.REEL_STOPPING:var t=this._cellHeight,o=this._offset+this._gameSettings.reelRotationDirection*(this._gameSettings.numReelCards+2)*t,s=o%t;0!=s&&(this._gameSettings.reelRotationDirection>0?o+=t-s:o-=o<0?t+s:s);var a=this._reel_length*t,r=o%a;r<0&&(r+=a),r=Math.floor(r/t),this._result_index=r;for(var l=this._result.length,c=0;c<l;++c)this._real_reel[r]=this._result[c],r=(r+1)%this._reel_length;o-=this._gameSettings.reelRotationDirection*t,o+=this._bounce,this._final_offset=o,this._dist_to_end>0&&(this._offset=this._final_offset-(1==this._gameSettings.reelRotationDirection?this._dist_to_end:-this._dist_to_end));break;case i.REEL_BOUNCING:this.dispatchEvent(new n.Event(i.REEL_BOUNCED)),this._rotating=!1;var u=this;this._tween=TweenMax.to(this,this._gameSettings.reelStopBounceTime,{getSetOffset:this._offset-this._bounce,ease:Cubic.easeOut,onComplete:function(){u.onTweenEnd()},roundProps:"getSetOffset"}),this._state_next=i.REEL_IDLE}},t.prototype.onTweenEnd=function(){this._state_next==i.REEL_IDLE?(this._dispatchStop=!0,this._drawn_once=!1):this.changeState(this._state_next),this._tween=null},t.prototype.assertResult=function(){for(var e=!1,t=this._result_index,i=0;t<this._result_index+this._gameSettings.numReelCards+2;t++,i++){if(this._real_reel[t%this._real_reel.length]!=this._result[i]){e=!0;break}if(i>0&&i<=this._spritesCardIndex.length&&this._result[i]!=this._spritesCardIndex[i-1]){e=!0;break}}return e?{reelIndex:this._reel_index,result:this._result,resultIndex:this._result_index,reelCards:this._real_reel,fakeCards:this._fake_reel,spritesCardIndex:this._spritesCardIndex,offset:this._offset,finalOffset:this._final_offset}:null},t.prototype.toString=function(){return"ReelView "+this._reel_index},t.REEL_IDLE=0,t.REEL_STARTING=1,t.REEL_ROTATING=2,t.REEL_STOPPING=3,t.REEL_BOUNCING=4,t.REEL_BOUNCED="reelBounced",t.REEL_STOPPED="reelStopped",t.EMPTY_IMAGE_INDEX=-1,t.FAKE_IMAGE_INDEX=-2,t=i=__decorate([o.decorator],t);var i}(i);t.ReelView=s}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.Utils,o=e.egt.library.loading.Loader,s=function(e){function i(){var t=e.call(this)||this;t._firstReelCard=-1,t._reelStopSounds=[],t._scattersAccelerationConfig={},t._stoppedReels=[];for(var i=t.gameSettings.scatterConfig.length,n=0;n<i;n++){var o=t.gameSettings.scatterConfig[n];t._scattersAccelerationConfig[o.index]={count:0,isAccelerationAllowed:!1}}return t}return __extends(i,e),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"betResponse",{get:function(){return this.mainModel.betResponse},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameSettings",{get:function(){return t.bottle.container.GameSettings},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundManager",{get:function(){return this.mainModel.soundManager},enumerable:!0,configurable:!0}),i.prototype.processBetResponse=function(){this.calculateReelStopSounds();for(var e in this._scattersAccelerationConfig)this._scattersAccelerationConfig[e].count=0,this._scattersAccelerationConfig[e].isAccelerationAllowed=!1;this._stoppedReels.length=0},i.prototype.getReelStopSound=function(e){return this._reelStopSounds[e]},i.prototype.shouldReelHaveAcceleration=function(e){for(var t in this._scattersAccelerationConfig){var i=this.gameSettings.getScatterConfig(parseInt(t));if(i.isContinuousScatter){var n=this.getFreespinMinCount(i);if(-1==n||!i.validReels[e])continue;for(var o=0;o<this.gameSettings.numReels&&(o==e||-1!=this._stoppedReels.indexOf(o))&&(o==e||this.mainModel.spinAnalyzer.isCardOnReel(o,parseInt(t)));)o++;if(o>=n&&o-1>=e)return!0}else if(this._scattersAccelerationConfig[t].isAccelerationAllowed&&i.validReels[e])return!0}return!1},i.prototype.shouldPlayScatterStopVideo=function(e,t){for(var i,n=this.gameSettings.scatterConfig.length,o=0;o<n;o++){var s=this.gameSettings.scatterConfig[o];if(s&&s.index===e){i=s;break}}return!i||-1!=this.getActiveScatter(t)},i.prototype.setStoppedReel=function(e){if(-1==this._stoppedReels.indexOf(e)){this._stoppedReels.push(e);for(var t in this._scattersAccelerationConfig){var i=this.gameSettings.getScatterConfig(parseInt(t)),n=this.getFreespinMinCount(i);if(-1!=n){this._scattersAccelerationConfig[t].count+=this.mainModel.spinAnalyzer.countCardOnReel(e,t);var o=null!=i.maxScattersOnReel?i.maxScattersOnReel:1;if(this._scattersAccelerationConfig[t].count>=n-o)return void(this._scattersAccelerationConfig[t].isAccelerationAllowed=!0)}}}},i.prototype.getReelTextures=function(){if(this._reelTextures)return this._reelTextures;var e=o.getLoader("gameImages");this._reelTextures=[];for(var t=0;t<this.mainModel.gameSettings.numImages;t++){var i=n.convertToSequenceString(t);this._reelTextures[t]=e.getTexture(i+".png")}return this._reelTextures},i.prototype.getFreespinMinCount=function(e){return this.mainModel.isFreespinGame&&void 0!=e.freespinMinCountInFs?e.freespinMinCountInFs:e.freespinMinCount},i.prototype.calculateReelStopSounds=function(){for(var e=0;e<this.gameSettings.numReels;e++)this.calculateStopSoundForReel(e)},i.prototype.calculateStopSoundForReel=function(e){var t=this.mainModel.spinAnalyzer.getCard(e,0),i=this.mainModel.spinAnalyzer.isCardOnReel(e,this.gameSettings.wildIndex),n=this.soundManager.hasSound("stopWildSound")||this.gameSettings.wildSoundsConfig&&this.gameSettings.wildSoundsConfig[e];if(i&&n)this.gameSettings.wildSoundsConfig?this._reelStopSounds[e]=this.gameSettings.wildSoundsConfig[e]:this._reelStopSounds[e]="stopWildSound";else if(this.shouldPlayFullReelSound(t,e))this._reelStopSounds[e]=this.gameSettings.fullReelStopSounds[t][e];else{var o=this.gameSettings.getScatterConfig(this.getActiveScatter(e));o&&o.stopSounds&&o.stopSounds[e]?this._reelStopSounds[e]=o.stopSounds[e]:this._reelStopSounds[e]="stopReelSound"}},i.prototype.shouldPlayFullReelSound=function(e,t){if(this.gameSettings.fullReelStopSounds[e]&&this.gameSettings.fullReelStopSounds[e][t]){if(0==t&&(this._firstReelCard=e),e==this._firstReelCard&&this.mainModel.spinAnalyzer.countCardOnReel(t,e)==this.gameSettings.numReelCards)return!0;this._firstReelCard=-1}return!1},i.prototype.getActiveScatter=function(e){for(var t=0;t<this.gameSettings.numReelCards;t++){var i=this.mainModel.spinAnalyzer.getCard(e,t),n=this.gameSettings.getScatterConfig(i);if(n&&n.validReels[e]){for(var o=null!=n.maxScattersOnReel?n.maxScattersOnReel:1,s=0,a=0;a<this.gameSettings.numReels;a++)if(n.validReels[a])if(a<=e){var r=this.mainModel.spinAnalyzer.countCardOnReel(a,i);if(0==r&&n.isContinuousScatter)return-1;s+=r}else a>e&&(s+=o);if(s>=(void 0!=n.minCountInFs&&this.mainModel.isFreespinGame?n.minCountInFs:n.minCount))return i}}return-1},i}(Pluck.Model);i.ReelsModel=s}(i.reels||(i.reels={}))}(t.models||(t.models={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.library.events.EventDispatcher,n=e.egt.library.events,o=e.egt.library.utils.log,s=function(e){function t(t,i){var n=e.call(this)||this;return n._instances=[],n._frames=[],n._videoObj={frame:0},n._isEnded=!1,n._startFrame=0,i instanceof a||(i=new a(i)),n._config=i,n._frames=t,n}return __extends(t,e),i=t,t.prototype.addInstance=function(e){this._instances.push(e),this.isPlaying&&this.setCurrentFrame(e)},t.prototype.removeInstance=function(e,t){void 0===t&&(t=!0);var i=this._instances.indexOf(e);-1!=i&&(t&&this._instances[i].parent&&this._instances[i].parent.removeChild(this._instances[i]),this._instances.splice(i,1))},t.prototype.play=function(e){if(void 0===e&&(e=!1),this.log("Play, is already playing[%s] has tween[%s]",this.isPlaying,!!this._tween),!this.isPlaying){if(this._tween)return this._tween.resume(),void(this._alphaTween&&this._alphaTween.resume());this._isEnded=!1,this._videoObj.frame=this._startFrame;var t=(this._frames.length-this._startFrame)/this._config.fps,i=e?-1:this._config.repeatCount;if(e&&(this._videoObj.frame=this._config.loopIndex,t=(this._frames.length-this._config.loopIndex)/this._config.fps),this._config.alphaTime>0){var n=Math.max(0,Math.min(1,this._config.startAlpha)),o=Math.max(0,Math.min(1,this._config.endAlpha));this._alphaTween=TweenMax.fromTo(this._instances,this._config.alphaTime,{alpha:n},{alpha:o,ease:Linear.easeNone})}this._lastFrame=this._videoObj.frame-1,this._tween=TweenMax.to(this._videoObj,t,{frame:this._frames.length-1,repeat:i,ease:Linear.easeNone,immediateRender:!0,roundProps:["frame"],onUpdate:this.updateFrame,onComplete:this.onVideoEnded,callbackScope:this})}},t.prototype.gotoAndStop=function(e){if(!(e>=this._frames.length&&e<0)){this._startFrame=e,this._videoObj.frame=this._startFrame;for(var t=0;t<this._instances.length;t++)this.setCurrentFrame(this._instances[t])}},t.prototype.stop=function(){this.killTween(),this._alphaTween&&(this._alphaTween.kill(),this._alphaTween=null)},t.prototype.playReverse=function(){if(console.log("????play tween reverse!!---"),this._tween)console.log("play tween reverse!!---"),this._tween.vars.onReverseComplete=this.onVideoReverseComplete,this._tween.reverse();else{this._videoObj.frame=this._frames.length-1;var e=this._frames.length/this._config.fps;this._tween=TweenMax.to(this._videoObj,e,{frame:0,ease:Linear.easeNone,immediateRender:!0,roundProps:["frame"],onUpdate:this.updateFrame,onComplete:this.onVideoReverseComplete,callbackScope:this})}},t.prototype.onVideoReverseComplete=function(){this.killTween(),this.dispatchEvent(new n.Event(i.VIDEO_REVERSE_COMPLETE))},t.prototype.pause=function(){this._tween&&this._tween.pause(),this._alphaTween&&this._alphaTween.pause()},Object.defineProperty(t.prototype,"isPlaying",{get:function(){return null!=this._tween&&this._tween.isActive()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){return this._videoObj.frame},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._frames[0].width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._frames[0].height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._frames.length/this._config.fps},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalLength",{get:function(){var e=this.length;return e+e*(this._config.repeatCount<0?0:this._config.repeatCount)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(t){if(void 0===t&&(t=!0),this.killTween(),t)for(var i=this._instances.length,n=0;n<i;n++)this._instances[n].parent&&this._instances[n].parent.removeChild(this._instances[n]);e.prototype.dispose.call(this)},t.prototype.killTween=function(){this._tween&&(this._tween.kill(),this._tween=null)},t.prototype.onVideoEnded=function(){this.log("Video ended, loop[%s]",this._config.loop),this.killTween(),this._config.loop&&(this._videoObj.frame=this._config.loopIndex,this._lastFrame=this._config.loopIndex-1,this._tween=TweenMax.to(this._videoObj,(this._frames.length-this._config.loopIndex)/this._config.fps,{frame:this._frames.length-1,repeat:-1,immediateRender:!0,onUpdate:this.updateFrame,ease:Linear.easeNone,roundProps:["frame"],callbackScope:this})),this._isEnded||(this._isEnded=!0,this.dispatchEvent(new n.Event(i.VIDEO_COMPLETE)))},t.prototype.setCurrentFrame=function(e){e.texture=this._frames[this._videoObj.frame]},t.prototype.updateFrame=function(){if(this._videoObj.frame!=this._lastFrame){this._videoObj.frame<this._lastFrame&&(this._lastFrame=this._config.loopIndex-1);for(var e=0;e<this._instances.length;e++)this.setCurrentFrame(this._instances[e]);for(var t=this._lastFrame+1;t<=this._videoObj.frame;t++)this.dispatchEvent(new n.Event(i.VIDEO_FRAME,{currentFrame:t}));this._lastFrame=this._videoObj.frame}},t.prototype.toString=function(){return this.constructor.name+" "+this._config.loaderId},t.VIDEO_COMPLETE="videoComplete",t.VIDEO_FRAME="videoFrame",t.VIDEO_REVERSE_COMPLETE="videoReverseComplete",t=i=__decorate([o.decorator],t);var i}(i);t.VideoPlayer=s;var a=function(e){function t(t){var i=e.call(this)||this;return i.loaderId="",i.frameName="",i.width=-1,i.height=-1,i.fps=1,i.scale=1,i.loopIndex=0,i.loop=!1,i.repeatCount=0,i.alphaTime=-1,i.startAlpha=0,i.endAlpha=1,i.sequenceDigitsCount=3,t&&i.serialize(t),i}return __extends(t,e),t}(Pluck.External);t.VideoPlayerConfig=a}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.views.ReelView,o=e.egt.baseslot.models.Notifications,s=e.egt.library.loading.Loader,a=e.egt.library.Utils,r=e.egt.library.Device,l=e.egt.baseslot.views.VideoPlayer,c=e.egt.library.utils.log,u=e.egt.baseslot.views.VideoPlayerConfig,h=e.egt.library.LogServer,d=function(e){function i(){var i=e.call(this)||this;return i._stopAllRequested=!1,i._stopReelTimer=0,i._stopVideoPlayers=[],i._stopVideoSpritesConfig=[],i._view=new PIXI.Container,i._model=t.bottle.container.ReelsModel,i._reelView=new PIXI.Container,i.initMask(),i.view.addChild(i._reelView),i.initReels(),i.mainModel.isFreespinGame&&i.setFreespinFakeReels(),PIXI.ticker.shared.add(i.onTick,i),i}return __extends(i,e),i.prototype.dispose=function(){PIXI.ticker.shared.remove(this.onTick,this),this._stopVideoSpritesConfig=null,this._stopVideoPlayers=null,e.prototype.dispose.call(this)},i.prototype.provideLoder=function(){return s.getLoader("gameImages")},Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameSettings",{get:function(){return this.mainModel.gameSettings},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundManager",{get:function(){return this.mainModel.soundManager},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"areReelsRotating",{get:function(){for(var e=this._reels.length,t=0;t<e;t++)if(this._reels[t].getState()!=n.REEL_IDLE)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isStopAllRequested",{get:function(){return this._stopAllRequested},enumerable:!0,configurable:!0}),i.prototype.getInterests=function(){return[o.SPIN_CLICKED,o.STOP_ALL_CLICKED,o.BET_RECEIVED,o.CLEAR_CELLS,o.SHOW_CELLS,o.SHOW_ALL_CELLS,o.FREESPIN_INTRO_REFRESH_SCREEN,o.FREESPIN_OUTRO_REFRESH_SCREEN]},i.prototype.handleNotification=function(e){this.log("Handle notification[%s]",e.name);var t;switch(e.name){case o.SPIN_CLICKED:this.start();break;case o.STOP_ALL_CLICKED:this.stopAll();break;case o.BET_RECEIVED:this.resultReceived();break;case o.CLEAR_CELLS:t=e.body.cells.length,this.log("Clear cells[%o]",e.body.cells);for(i=0;i<t;i+=2)this._reels[e.body.cells[i]].clearCell(e.body.cells[i+1]);break;case o.SHOW_CELLS:t=e.body.cells.length,this.log("Show cells[%o]",e.body.cells);for(i=0;i<t;i+=2)this._reels[e.body.cells[i]].showCell(e.body.cells[i+1]);break;case o.SHOW_ALL_CELLS:t=this._reels.length;for(var i=0;i<t;i++)this._reels[i].showAllCells();break;case o.FREESPIN_INTRO_REFRESH_SCREEN:this.setFreespinFakeReels();break;case o.FREESPIN_OUTRO_REFRESH_SCREEN:this.setMainFakeReels(),this.setReels(this.mainModel.betResponse.complex.reels)}},i.prototype.start=function(){var e=this;if(!this.areReelsRotating){var t=this.mainModel.betResponse.complex.holdReels||[];this.log("Starting reels rotation. Holding reels with index[%s]",t.join(", ")),this._shouldPlayFirstReelStopSound=!0,this._stopVideoSpritesConfig.length=0,this._numReelsStarted=0;for(var i=this._reels.length,n=0;n<i;n++)-1===t.indexOf(n)&&(this._reels[n].start(),this._numReelsStarted++);if(this._stopReelTimer)throw"_stopReelTimer should be null when the reels are starting!";var o=(this.gameSettings.numReels-1)*this.gameSettings.gameBetweenReelsDelay+((this.gameSettings.numReelCards+1)*this.gameSettings.reelRotationSpeed+1e3*this.gameSettings.reelStopBounceTime),s=Math.max(this.gameSettings.gameInitialReelRotationTime,1e3*this.gameSettings.minimumSpinTime-o);this._stopReelTimer=setTimeout(function(){return e.onStopReelTimer()},s),this._isResultReceived=!1,this._hasInitialRotationTimeElapsed=!1,this._numReelsBounced=0}},i.prototype.stopAll=function(){if(this.areReelsRotating){if(this._isResultReceived)for(var e=this.gameSettings.reelHeight/this.gameSettings.numReelCards,t=this._reels.length,i=0;i<t;i++)this._reels[i].stop(e);this._stopAllRequested=!0,this._stopReelTimer&&(clearTimeout(this._stopReelTimer),this._stopReelTimer=0)}},i.prototype.resultReceived=function(){this.model.processBetResponse(),this.log("Results received, stop requested[%s] has initial rotation time elapsed[%s]",this._stopAllRequested,this._hasInitialRotationTimeElapsed);for(var e=this.mainModel.betResponse.complex,t=this._reels.length,i=0;i<t;i++)this._reels[i].getState()==n.REEL_ROTATING?this._reels[i].setResult(e.reels):this.log("Not setting result for reel[%s] because it was held",i);this._isResultReceived=!0,this._stopAllRequested?this.stopAll():this._hasInitialRotationTimeElapsed&&this.onStopReelTimer()},i.prototype.setReels=function(e){if(this.areReelsRotating)throw"Cannot set reels if they are not stopped!";for(var t=this._reels.length,i=0;i<t;i++)this._reels[i].setResult(e,!0)},i.prototype.clearReels=function(e){for(var t=e.length,i=0;i<t;i+=2)this._reels[e[i]].clearCell(e[i+1])},i.prototype.setMainFakeReels=function(){for(var e=this._reels.length,t=0;t<e;t++)this._reels[t].changeFakeReel(this.gameSettings.mainFakeReels[t])},i.prototype.setFreespinFakeReels=function(){if(this.gameSettings.freespinFakeReels)for(var e=this._reels.length,t=0;t<e;t++)this._reels[t].changeFakeReel(this.gameSettings.freespinFakeReels[t])},i.prototype.redrawReels=function(){for(var e=this._reels.length,t=0;t<e;t++)this._reels[t].redraw()},i.prototype.getNextReelToStop=function(){for(var e=this._reels.length,t=0;t<e;t++)if(this._reels[t].getState()==n.REEL_ROTATING)return this._reels[t];return null},i.prototype.onReelClick=function(e){if(this._isResultReceived&&!(this.gameSettings.minimumSpinTime>0)){var t=this._reels[this._reelButtons.indexOf(e.target)];if(t.getState()==n.REEL_ROTATING){0!=t.getIndex()&&(this._shouldPlayFirstReelStopSound=!1,this._reels[0].stop(),this.model.setStoppedReel(0)),t.stop(),this.model.setStoppedReel(t.getIndex());var i=this.getNextReelToStop();if(i){var o=this;window.clearTimeout(this._stopReelTimer),this._stopReelTimer=window.setTimeout(function(){o.onStopReelTimer()},this.model.shouldReelHaveAcceleration(i.getIndex())?1500:this.gameSettings.gameBetweenReelsDelay)}}}},i.prototype.onStopReelTimer=function(){var e=this;if(this._isResultReceived){var t=this.getNextReelToStop();if(t){t.stop(),this.model.setStoppedReel(t.getIndex());var i=this.getNextReelToStop();if(i){var n=this.model.shouldReelHaveAcceleration(i.getIndex())?1500:this.gameSettings.gameBetweenReelsDelay;clearTimeout(this._stopReelTimer),this._stopReelTimer=setTimeout(function(){return e.onStopReelTimer()},n)}}}else this._hasInitialRotationTimeElapsed=!0,clearTimeout(this._stopReelTimer),this._stopReelTimer=0},i.prototype.onReelBounced=function(e){this._numReelsBounced++;var t=e.target;if(this._reelAccelerationSound&&this._reelAccelerationSound.stop(),this._stopAllRequested)this._numReelsBounced==this._numReelsStarted&&this.soundManager.play("stopReelAllSound");else{this.checkForStopVideos(t);var i=t.getIndex();if(this._stopVideoPlayers[i])for(var n=0;n<this._stopVideoPlayers[i].length;n++)this._stopVideoPlayers[i][n]&&this._stopVideoPlayers[i][n].play();(0!=t.getIndex()||this._shouldPlayFirstReelStopSound)&&this.soundManager.play(this.model.getReelStopSound(t.getIndex()));var o=this.getNextReelToStop();o&&this.model.shouldReelHaveAcceleration(o.getIndex())&&(this._reelAccelerationSound=this.soundManager.play("reelAccelerateSound"))}},i.prototype.checkForStopVideos=function(e){if(this.gameSettings.stopVideos)for(var t=e.getIndex(),i=0;i<this.gameSettings.numReelCards;i++){var n=this.mainModel.spinAnalyzer.getCard(t,i);if(this.gameSettings.stopVideos[n]&&this.model.shouldPlayScatterStopVideo(n,t)){this._stopVideoPlayers[t]||(this._stopVideoPlayers[t]=[]);var o=this._stopVideoPlayers[t][n];if(!o){var r=s.getLoader("stopVideos_"+n);if(!r.isLoaded())continue;var c=new u;c.serialize(this.gameSettings.stopVideos[n]);var h=c.frameName||"stopVideo_"+a.convertToSequenceString(n)+"_",d=r.getTextureSequence(h,"png");(o=new l(d,c)).addEventListener(l.VIDEO_COMPLETE,this.onStopVideoComplete,this),this._stopVideoPlayers[t][n]=o}var p=this.gameSettings.reelHeight/this.gameSettings.numReelCards,m=new PIXI.Sprite;m.x=e.x+(this.gameSettings.reelWidth-o.width)/2,m.y=e.y+i*p+(p-o.height)/2,o.addInstance(m),this._stopVideoSpritesConfig[t]||(this._stopVideoSpritesConfig[t]=[]),this._stopVideoSpritesConfig[t].push({sprite:m,originalY:m.y}),m.y+=e.getDistToRest(),this.view.addChild(m)}}},i.prototype.onStopVideoComplete=function(e){for(var t=-1,i=0;i<this._stopVideoPlayers.length;i++)if(this._stopVideoPlayers[i]&&(t=this._stopVideoPlayers[i].indexOf(e.target))>-1){this.handleStopVideoEnded(i,t);break}},i.prototype.handleStopVideoEnded=function(e,t){this._stopVideoPlayers[e]&&this._stopVideoPlayers[e][t]&&(this._stopVideoPlayers[e][t].dispose(),this._stopVideoPlayers[e][t]=null)},i.prototype.onReelStopped=function(e){this.areReelsRotating||this.onAllReelsStopped()},i.prototype.onAllReelsStopped=function(){this.log("All reels stopped"),this._stopReelTimer&&(clearTimeout(this._stopReelTimer),this._stopReelTimer=0),this._stopAllRequested=!1,this.checkForReelsMismatch(),this.sendNotification(o.REELS_STOPPED)},i.prototype.checkForReelsMismatch=function(){for(var e,t=this._reels.length,i=[],n=0;n<t;n++)(e=this._reels[n].assertResult())&&i.push(e);return!!i.length&&(h.sendLog({message:"reelsMismatch",info:i,gameNumber:this.mainModel.response.gameNumber,tcpHost:gpts.AppFacade.getInstance().tcpHost}),!0)},i.prototype.positionStopVideos=function(e){if(this._stopVideoSpritesConfig[e]){var t=this._reels[e].getDistToRest();if(t>-1)for(var i=0;i<this._stopVideoSpritesConfig[e].length;i++){var n=this._stopVideoSpritesConfig[e][i].originalY;this._stopVideoSpritesConfig[e][i].sprite.y=n+t}}},i.prototype.initMask=function(){this._reelMask=new PIXI.Graphics,this._reelMask.beginFill(16711680,0),this._reelMask.drawRect(0,this.gameSettings.reelCoordY,PIXI.renderer.width,this.gameSettings.reelHeight),this._reelMask.endFill(),this.view.addChild(this._reelMask)},i.prototype.initReels=function(){this._reels=[],this._reelButtons=[];for(var e=0;e<this.mainModel.gameSettings.numReels;e++){var i=this.gameSettings.sendTotalsInfo?1:0,o=this.gameSettings.reelCoordX+e*(this.gameSettings.reelWidth+this.gameSettings.reelSpacing);this._reels[e]=new t.bottle.container.ReelViewConstructor(this._reelView,this._reelMask,o,this.gameSettings.reelCoordY+i,e,this.model.getReelTextures(),this.gameSettings),this._reels[e].setFakeReel(this.mainModel.gameSettings.mainFakeReels[e]),this._reels[e].setResult(this.mainModel.currentState.reels,!0),this._reels[e].addEventListener(n.REEL_STOPPED,this.onReelStopped,this),this._reels[e].addEventListener(n.REEL_BOUNCED,this.onReelBounced,this);var s=new PIXI.Graphics;s.beginFill(16711680,0),s.drawRect(0,0,this.gameSettings.reelWidth,this.gameSettings.reelHeight),s.endFill(),s.position.set(o,this.gameSettings.reelCoordY),s.on(r.resolveEvent("click"),this.onReelClick,this),s.interactive=!0,this._reelButtons[e]=s,this.view.addChild(s)}},i.prototype.onTick=function(){var e=this._reels.length;if(this.areReelsRotating){var t=Math.min(PIXI.ticker.shared.elapsedMS,200);if(this.gameSettings.cardsOnTopArrangeLeftToRight)for(i=0;i<e;i++)this._reels[i].draw(t),this.positionStopVideos(i);else for(var i=e-1;i>=0;i--)this._reels[i].getState()==n.REEL_IDLE?this._reels[i].redraw():this._reels[i].draw(t),this.positionStopVideos(i)}},i=__decorate([c.decorator],i)}(Pluck.ViewController);i.ReelsController=d}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=e.egt.library.widgets.StateButton,o=e.egt.library.widgets.MoneyText,s=e.egt.library.widgets.Text,a=e.egt.library.widgets.Button,r=function(e){function t(){var n={},o={},s=i.getLoader("gameImages");return o[a.STATE_UP]=s.getTexture("denominationButtonUp.png"),o[a.STATE_DOWN]=s.getTexture("denominationButtonDown.png"),n[t.STATE_ACTIVE]=o,o={},o[a.STATE_UP]=s.getTexture("denominationButtonUpInactive.png"),n[t.STATE_INACTIVE]=o,e.call(this,n,t.STATE_INACTIVE)||this}return __extends(t,e),t.prototype.init=function(e,n,a,r){var l=i.getLoader("gameImages");if(this._diamondTexture=a?l.getTexture("diamond.png"):null,this._moneyText=new o({currency:e,diamond:n==t.TYPE_SECONDARY?this._diamondTexture:null,diamondPlay:a,diamondScaleCoef:.5,moneyFontSize:n==t.TYPE_MAIN?22:17,currencyFontSize:10,align:"center",isShowingCredits:!1,shouldShowCurrency:n==t.TYPE_SECONDARY,hideCents:r,bounds:{width:this.width-4,height:22}}),this._moneyText.position.set(2,n==t.TYPE_MAIN?40:38),this._moneyText.style={fill:16777215,fontWeight:"bold"},this._topText=new s({align:"center",bounds:{width:this.width,height:14}},"",{fontSize:n==t.TYPE_MAIN?12:11,fontWeight:"bold",fill:16777215}),this._topText.position.set(0,9),this._middleText=new s({align:"center",bounds:{width:this.width,height:18}},"",{fontSize:n==t.TYPE_MAIN?11:13,fill:16777215}),this._middleText.text=n==t.TYPE_SECONDARY?"=":n!=t.TYPE_MAIN||this._diamondTexture?"":e,this._middleText.position.set(0,23),this.addChild(this._moneyText),this.addChild(this._topText),this.addChild(this._middleText),this._diamondTexture&&n==t.TYPE_MAIN){var c=new PIXI.Sprite(this._diamondTexture);c.anchor.set(.5),c.scale.set(.1),c.position.set(this.width/2,32),this.addChild(c)}},Object.defineProperty(t.prototype,"money",{set:function(e){this._moneyText.money=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topText",{set:function(e){this._topText.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{set:function(e){this.state(e?t.STATE_ACTIVE:t.STATE_INACTIVE)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._moneyText.dispose(),this._topText.dispose(),this._middleText.dispose(),e.prototype.dispose.call(this)},t.STATE_ACTIVE="stateActive",t.STATE_INACTIVE="stateInactive",t.TYPE_MAIN=0,t.TYPE_SECONDARY=1,t}(n);t.DenominationButton=r}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.library.loading.Loader,o=e.egt.library.widgets.StateButton,s=e.egt.library.widgets.Button,a=e.egt.library.widgets.Text,r=e.egt.library.widgets.MoneyText,l=function(e){function i(){var o=this,l={},c={},u=t.bottle.container.GameSettings,h=n.getLoader("gameImages");return c[s.STATE_UP]=h.getTexture("betButtonActive.png"),l[i.STATE_ACTIVE]=c,c={},c[s.STATE_UP]=h.getTexture("betButtonInactive.png"),l[i.STATE_INACTIVE]=c,o=e.call(this,l,i.STATE_INACTIVE)||this,o._offset=0,o._isButtonPressed=!1,o._moneyText=new r({bounds:{width:74,height:42},align:"center",moneyFontSize:i.MONEY_FONT_SIZE,centsFontSize:i.MONEY_FONT_SIZE*i.CENTS_FONT_SIZE_COEFICIENT,shouldShowCurrency:!1,centsVisibilityMoneyLimit:9999,shouldHaveSpaceBetweenThousands:!1,hideCents:u.currencyHideCents,diamondPlay:u.diamondPlay}),o._moneyText.style={fontWeight:"bold",fill:i.INACTIVE_MONEY_COLOR},o._moneyText.position.set(6,11),o._topText=new a({align:"center",bounds:{width:o._background.width,height:13}},"",{fontSize:9,fontWeight:"bold",fill:i.INACTIVE_LABEL_COLOR}),o._topText.position.set(0,-1),o._bottomText=new a({align:"center",bounds:{width:o._background.width,height:17}},"",{fontSize:12,fill:i.INACTIVE_LABEL_COLOR}),o._bottomText.position.set(0,52),o.addChild(o._moneyText),o.addChild(o._topText),o.addChild(o._bottomText),o}return __extends(i,e),Object.defineProperty(i.prototype,"isActive",{get:function(){return this.state()==i.STATE_ACTIVE},set:function(e){this.state(e?i.STATE_ACTIVE:i.STATE_INACTIVE);var t=e?i.ACTIVE_MONEY_COLOR:i.INACTIVE_MONEY_COLOR;this._moneyText.style={fill:t};var n=e?i.ACTIVE_LABEL_COLOR:i.INACTIVE_LABEL_COLOR,o=this._topText.style;o.fill=n,this._topText.style=o,(o=this._bottomText.style).fill=n,this._bottomText.style=o},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"money",{get:function(){return this._moneyText.money},set:function(e){this.fontSize=i.MONEY_FONT_SIZE,this._moneyText.money=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDisplayingCredits",{set:function(e){this.fontSize=i.MONEY_FONT_SIZE,this._moneyText.isShowingCredits=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"denomination",{set:function(e){this.fontSize=i.MONEY_FONT_SIZE,this._moneyText.denomination=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topText",{set:function(e){this._topText.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottomText",{set:function(e){this._bottomText.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._moneyText.moneyFontSize},set:function(e){this._moneyText.moneyFontSize=e,this._moneyText.centsFontSize=e*i.CENTS_FONT_SIZE_COEFICIENT},enumerable:!0,configurable:!0}),i.prototype.reset=function(){this.onMouseUp()},i.prototype.dispose=function(){this._moneyText.destroy(),this._topText.dispose(),this._bottomText.dispose(),e.prototype.dispose.call(this)},i.prototype.onMouseDown=function(){e.prototype.onMouseDown.call(this),this._isButtonPressed||(this._offset=4,this.y+=this._offset,this._isButtonPressed=!0)},i.prototype.onMouseUp=function(){e.prototype.onMouseUp.call(this),this._isButtonPressed&&(this.y-=this._offset,this._offset=0,this._isButtonPressed=!1)},i.STATE_ACTIVE="stateActive",i.STATE_INACTIVE="stateInactive",i.ACTIVE_LABEL_COLOR=0,i.INACTIVE_LABEL_COLOR=4276545,i.ACTIVE_MONEY_COLOR=16777215,i.INACTIVE_MONEY_COLOR=16777215,i.MONEY_FONT_SIZE=30,i.CENTS_FONT_SIZE_COEFICIENT=.67,i}(o);i.BetControlButton=l}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=e.egt.library.widgets.StateButton,o=e.egt.library.widgets.Button,s=function(e){function t(){var n=this,s={},a={},r=i.getLoader("gameImages");return a[o.STATE_UP]=r.getTexture("startAutoplayButtonUp.png"),a[o.STATE_DOWN]=r.getTexture("startAutoplayButtonDown.png"),a[o.STATE_DISABLED]=r.getTexture("startAutoplayButtonUpInactive.png"),s[t.STATE_START]=a,a={},a[o.STATE_UP]=r.getTexture("stopAutoplayButtonUp.png"),a[o.STATE_DOWN]=r.getTexture("stopAutoplayButtonDown.png"),a[o.STATE_DISABLED]=r.getTexture("startAutoplayButtonUpInactive.png"),s[t.STATE_STOP]=a,n=e.call(this,s,t.STATE_START)||this,n._loader=r,n._icon=new PIXI.Sprite(r.getTexture("startAutoplayIconUp.png")),n.addChild(n._icon),n._countText=new PIXI.Text("",{fontSize:9,fill:16777215}),n._count=NaN,n.positionCountText(),n.addChild(n._countText),n}return __extends(t,e),t.prototype.ignoreDisabledState=function(){this._states[t.STATE_START][t.STATE_DISABLED]=void 0,this._states[t.STATE_STOP][t.STATE_DISABLED]=void 0},t.prototype.count=function(e){isNaN(e)?(this._icon.visible=!0,this._countText.text=""):(this._icon.visible=!1,this._countText.text=-1==e?"∞":e.toString()),this._count=e,this.positionCountText()},t.prototype.state=function(t){if(void 0==t)return e.prototype.state.call(this,t);e.prototype.state.call(this,t),this.updateIcon(!1)},t.prototype.positionCountText=function(){this._countText.x=29+(t.COUNT_FIELD_WIDTH-this._countText.width)/2,this._countText.y=15+(t.COUNT_FIELD_HEIGHT-this._countText.height)/2},t.prototype.updateIcon=function(e){var i=this._texturesState==t.STATE_STOP?"stop":"start",n=e?"Down":"Up";this._icon.texture=this._loader.getTexture(i+"AutoplayIcon"+n+".png")},t.prototype.setImageForState=function(t){e.prototype.setImageForState.call(this,t),null!=this._icon&&(this._icon.visible=this._state!=o.STATE_DISABLED&&isNaN(this._count))},t.prototype.onMouseDown=function(){e.prototype.onMouseDown.call(this),this._countText.scale.set(.85),this.updateIcon(!0),this.positionCountText()},t.prototype.onMouseUp=function(){e.prototype.onMouseUp.call(this),this._countText.scale.set(1),this.updateIcon(!1),this.positionCountText()},t.STATE_START="stateStart",t.STATE_STOP="stateStop",t.COUNT_FIELD_WIDTH=12,t.COUNT_FIELD_HEIGHT=14,t}(n);t.AutoplayButton=s}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=e.egt.library.widgets.StateButton,o=e.egt.library.widgets.Button,s=function(e){function t(){var n={},s={},a=i.getLoader("gameImages");return s[o.STATE_UP]=a.getTexture("soundButtonUp.png"),s[o.STATE_DOWN]=a.getTexture("soundButtonDown.png"),n[t.STATE_UNMUTED]=s,s={},s[o.STATE_UP]=a.getTexture("noSoundButtonUp.png"),s[o.STATE_DOWN]=a.getTexture("noSoundButtonDown.png"),n[t.STATE_MUTED]=s,e.call(this,n,t.STATE_MUTED)||this}return __extends(t,e),Object.defineProperty(t.prototype,"isMuted",{set:function(e){e?this.state(t.STATE_MUTED):this.state(t.STATE_UNMUTED)},enumerable:!0,configurable:!0}),t.STATE_MUTED="stateMuted",t.STATE_UNMUTED="stateUnmuted",t}(n);t.SoundButton=s}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=e.egt.library.widgets.Button,o=function(e){function t(t,o){var s=this,a={},r=i.getLoader("gameImages");a[n.STATE_UP]=r.getTexture("gambleButtonUp.png"),a[n.STATE_DOWN]=r.getTexture("gambleButtonDown.png");var l={fontSize:15,fill:o};(s=e.call(this,a)||this)._title=new PIXI.Text(t,l),s.addChild(s._title),s.positionTitle();var c=s;return s._timer=setInterval(function(){c.onTitleBlink()},200),s}return __extends(t,e),t.prototype.refreshState=function(){e.prototype.refreshState.call(this),this.resetTitle()},t.prototype.dispose=function(){clearInterval(this._timer)},t.prototype.resetTitle=function(){this._title.scale.set(1),this.positionTitle()},t.prototype.positionTitle=function(){this._title.position.set((this.width-this._title.width)/2,(this.height-this._title.height)/2)},t.prototype.onTitleBlink=function(){this._title.visible=!this._title.visible},t.prototype.onMouseDown=function(){e.prototype.onMouseDown.call(this),this._title.scale.set(.8),this.positionTitle()},t.prototype.onMouseUp=function(){e.prototype.onMouseUp.call(this),this.resetTitle()},t}(n);t.GambleButton=o}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.library.widgets.Button,n=function(e){function t(n,o){var s=this,a={};a[i.STATE_UP]=new PIXI.Texture(new PIXI.BaseTexture(null));var r={fontSize:11,fill:o};return(s=e.call(this,a)||this)._title=new PIXI.Text(n,r),s.addChild(s._title),s.hitArea=new PIXI.Rectangle(0,0,t.WIDTH,t.HEIGHT),s.positionTitle(),s}return __extends(t,e),t.prototype.positionTitle=function(){this._title.position.set((t.WIDTH-this._title.width)/2,(t.HEIGHT-this._title.height)/2)},t.prototype.onMouseDown=function(){e.prototype.onMouseDown.call(this),this._title.scale.set(.8),this.positionTitle()},t.prototype.onMouseUp=function(){e.prototype.onMouseUp.call(this),this._title.scale.set(1),this.positionTitle()},t.WIDTH=80,t.HEIGHT=16,t}(i);t.HelpButton=n}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o,s){var a=e.call(this)||this;return a.index=t,a.beginFill(16777215,0),a.drawRect(i,n,o,s),a.endFill(),a}return __extends(t,e),t}(PIXI.Graphics);e.LinesButton=t}(e.views||(e.views={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=e.egt.library.widgets.Button,o=e.egt.baseslot.bottle,s=function(e){function s(){var a=e.call(this)||this,r=o.container.GameSettings,l=i.getLoader("gameImages");a.gambleButton=new t.GambleButton(r.localization.Gamble,r.labelsColor),a.gambleButton.position.set(964,679),a.addChild(a.gambleButton);var c={};c[n.STATE_UP]=l.getTexture("halfRedButtonUp.png"),c[n.STATE_DOWN]=l.getTexture("halfRedButtonDown.png"),a.redGambleButton=new n(c),a.redGambleButton.position.copy(a.gambleButton.position),a.addChild(a.redGambleButton),(c={})[n.STATE_UP]=l.getTexture("halfBlackButtonUp.png"),c[n.STATE_DOWN]=l.getTexture("halfBlackButtonDown.png"),a.blackGambleButton=new n(c),a.blackGambleButton.position.set(a.redGambleButton.x+a.redGambleButton.width,a.redGambleButton.y),a.addChild(a.blackGambleButton),a.denominationButton=o.container.DenominationButton.instance(),a.denominationButton.init(r.currencyISO,t.DenominationButton.TYPE_MAIN,r.diamondPlay,r.currencyHideCents),a.denominationButton.position.set(322,s.BET_BUTTONS_START_Y),a.denominationButton.topText="1 "+r.localization.Credit,a.denominationButton.isActive=!0,a.addChild(a.denominationButton),a.autoplayButton=o.container.AutoplayButton.instance(),a.autoplayButton.position.set(245,663),r.isAutoplayDisabled()||a.autoplayButton.ignoreDisabledState(),a.addChild(a.autoplayButton),a.soundButton=o.container.SoundButton.instance(),a.soundButton.position.set(107,663),a.addChild(a.soundButton),a.fullscreenButton=o.container.FullscreenButton.instance(),a.fullscreenButton.position.set(153,663),a.addChild(a.fullscreenButton),(c={})[n.STATE_UP]=l.getTexture("paytableButtonUp.png"),c[n.STATE_DOWN]=l.getTexture("paytableButtonDown.png"),a.paytableButton=new n(c),a.paytableButton.position.set(199,663),a.addChild(a.paytableButton),(c=[])[n.STATE_UP]=l.getTexture("homeButtonUp.png"),c[n.STATE_DOWN]=l.getTexture("homeButtonDown.png"),c[n.STATE_DISABLED]=l.getTexture("homeButtonDisabled.png"),a.homeButton=new n(c),a.homeButton.position.set(860,663),a.addChild(a.homeButton),a.betButtons=[],length=r.bets.length;for(var u=0;u<length;u++){var h=o.container.BetControlButton.instance();h.x=s.BET_BUTTONS_START_X+u*(h.width+s.BET_BUTTONS_RIGHT_MARGIN),h.y=s.BET_BUTTONS_START_Y,a.addChild(h),a.betButtons[u]=h}a.currencyButton=new PIXI.Graphics,a.currencyButton.beginFill(16777215,0),a.currencyButton.drawRect(109,597,202,53),a.currencyButton.interactive=!0,a.addChild(a.currencyButton);var d=107,p=83;a.linesButtons=[];for(var m=0;m<2;m++){for(var _=4;_>=0;_--){var g=new t.LinesButton(_,d,p,43,94);g.interactive=!0,a.addChild(g),a.linesButtons[5*m+_]=g,p+=97}d=1130,p=83}return a}return __extends(s,e),s.prototype.dispose=function(){this.gambleButton.dispose()},s.prototype.setEqualFontSizeForBetButtons=function(){for(var e=Number.MAX_VALUE,t=this.betButtons.length,i=0;i<t;i++)this.betButtons[i].fontSize<e&&(e=this.betButtons[i].fontSize);for(i=0;i<t;i++)this.betButtons[i].fontSize=e},s.BET_BUTTONS_START_X=403,s.BET_BUTTONS_START_Y=638,s.BET_BUTTONS_RIGHT_MARGIN=5,s}(PIXI.Container);t.UIView=s}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.baseslot.models.server.response.BaseResponse,o=e.egt.baseslot.views.AutoplayButton,s=e.egt.library.utils.log,a=function(){function e(){this._betButtonStates=[],this.isPaytableOpened=!1,this._uiView=t.bottle.container.UIView,this._mainModel=t.bottle.container.MainModel,this._localisation=this._mainModel.gameSettings.localization}return i=e,e.prototype.state=function(e){if(void 0==e)return this._state;if(this._state!=i.NO_CONNECTION){this._state=e,this.log("Set state[%s]",e);var t;t=this.isPaytableOpened?this._mainModel.response.state!=n.STATE_GAMBLE||this._mainModel.commManager.isWaitingForCollect?i.BET_BUTTON_STATE_SELECT:i.BET_BUTTON_STATE_COLLECT:i.BET_BUTTON_STATE_BET,this.setBetButtonStates(i.BET_BUTTON_STATE_BET,t),this.areBetButtonsInteractive=!1;var s=this._mainModel.gameSettings.minimumSpinTime<=0;switch(this._uiView.denominationButton.interactive=!1,this._uiView.denominationButton.refreshState(),this._mainModel.isAutoplayGame&&this._mainModel.remainingAutoplays>=0?this._uiView.autoplayButton.count(this._mainModel.remainingAutoplays):this._uiView.autoplayButton.count(NaN),this._uiView.autoplayButton.state(this._mainModel.isAutoplayGame?o.STATE_STOP:o.STATE_START),this._uiView.autoplayButton.interactive=this._mainModel.isAutoplayGame&&!this._mainModel.gameSettings.isAutoplayDisabled(),this._uiView.autoplayButton.refreshState(),this._uiView.gambleButton.visible=!1,this._uiView.gambleButton.interactive=!1,this._uiView.gambleButton.refreshState(),this._uiView.redGambleButton.visible=!1,this._uiView.blackGambleButton.visible=!1,this._uiView.redGambleButton.interactive=!1,this._uiView.blackGambleButton.interactive=!1,this._uiView.paytableButton.interactive=!1,this._uiView.paytableButton.refreshState(),this.setLineButtonsInteractive(!1),this._uiView.homeButton.interactive=!1,this._uiView.homeButton.refreshState(),e){case i.IDLE:this.areBetButtonsInteractive=!0,this._uiView.denominationButton.interactive=this._mainModel.gameSettings.denominations.length>1,this._uiView.autoplayButton.interactive=!this._mainModel.gameSettings.isAutoplayDisabled(),this._uiView.autoplayButton.refreshState(),this._uiView.paytableButton.interactive=!0,this._uiView.paytableButton.refreshState(),this._uiView.homeButton.interactive=!0,this._uiView.homeButton.refreshState(),this.setLineButtonsInteractive(!0);break;case i.WAITING_FOR_SPIN_RESULT:this.setBetButtonStates(s?i.BET_BUTTON_STATE_STOP:i.BET_BUTTON_STATE_BET),this.areBetButtonsInteractive=s;break;case i.WAITING_FOR_REELS_TO_STOP:this.setBetButtonStates(s?i.BET_BUTTON_STATE_STOP:i.BET_BUTTON_STATE_BET);break;case i.WAITING_FOR_EXPAND_COMPLETE:this.setBetButtonStates(i.BET_BUTTON_STATE_STOP);break;case i.WAITING_FOR_COLLECT:this.setBetButtonStates(i.BET_BUTTON_STATE_COLLECT),this.areBetButtonsInteractive=!0;break;case i.WAITING_FOR_GAMBLE_START:this.areBetButtonsInteractive=!0,this.setLineButtonsInteractive(!0),this._uiView.denominationButton.interactive=this._mainModel.gameSettings.denominations.length>1,this._uiView.autoplayButton.interactive=!this._mainModel.gameSettings.isAutoplayDisabled(),this._uiView.autoplayButton.refreshState(),this._uiView.paytableButton.interactive=!0,this._uiView.paytableButton.refreshState(),this._uiView.homeButton.interactive=!0,this._uiView.homeButton.refreshState(),this._uiView.gambleButton.visible=!0,this._uiView.gambleButton.interactive=!0;break;case i.WAITING_FOR_GAMBLE_RESUME:this.setBetButtonStates(i.BET_BUTTON_STATE_COLLECT),this._uiView.redGambleButton.visible=!0,this._uiView.blackGambleButton.visible=!0;break;case i.GAMBLE:this.setBetButtonStates(i.BET_BUTTON_STATE_COLLECT),this.areBetButtonsInteractive=!0,this._uiView.paytableButton.interactive=!0,this._uiView.paytableButton.refreshState(),this._uiView.redGambleButton.visible=!0,this._uiView.blackGambleButton.visible=!0,this._uiView.redGambleButton.interactive=!0,this._uiView.blackGambleButton.interactive=!0;break;case i.WAITING_FOR_JACKPOT_COLLECT:this.setBetButtonStates(i.BET_BUTTON_STATE_COLLECT);break;case i.WAITING_FOR_FREESPIN_ANIMATION_START:this.areBetButtonsInteractive=!0;break;case i.NO_CONNECTION:this._uiView.homeButton.interactive=!0,this._uiView.homeButton.refreshState();break;case i.WAITING_FOR_AUTOPLAY_TIMER_COMPLETE:this.areBetButtonsInteractive=!0;break;case i.WAITING_FOR_FREESPIN_SCENARIO_COMPLETE:this.setBetButtonStates(i.BET_BUTTON_STATE_COLLECT)}}},e.prototype.getBetButtonState=function(e){return this._betButtonStates[e]},e.prototype.isBetChangeAllowed=function(e){var t=this.getBetButtonState(e)==i.BET_BUTTON_STATE_BET&&this._state!=i.WAITING_FOR_FREESPIN_ANIMATION_START,n=this.getBetButtonState(e)==i.BET_BUTTON_STATE_SELECT,o=this.getBetButtonState(e)==i.BET_BUTTON_STATE_COLLECT&&this.isPaytableOpened&&this._state!=i.GAMBLE;return t||n||o},e.prototype.setBetButtonStates=function(e,t){for(var n=this._uiView.betButtons.length,o=0;o<n;o++){var s=e;this._uiView.betButtons[o].isActive||(s=t||e),this._betButtonStates[o]=s,s==i.BET_BUTTON_STATE_BET?this._uiView.betButtons[o].bottomText=this._mainModel.gameSettings.localization.Start:s==i.BET_BUTTON_STATE_STOP?this._uiView.betButtons[o].bottomText=this._mainModel.gameSettings.localization.StopAll:s==i.BET_BUTTON_STATE_COLLECT?this._uiView.betButtons[o].bottomText=this._mainModel.gameSettings.localization.Collect:s==i.BET_BUTTON_STATE_SELECT&&(this._uiView.betButtons[o].bottomText=this._mainModel.gameSettings.localization.Select)}},Object.defineProperty(e.prototype,"areBetButtonsInteractive",{set:function(e){for(var t=this._uiView.betButtons.length,i=0;i<t;i++)this._uiView.betButtons[i].reset(),this._uiView.betButtons[i].interactive=e},enumerable:!0,configurable:!0}),e.prototype.setLineButtonsInteractive=function(e){for(var t=0;t<this._uiView.linesButtons.length;t++)this._uiView.linesButtons[t].interactive=e},e.IDLE="idle",e.WAITING_FOR_SPIN_RESULT="waitingForSpinResult",e.WAITING_FOR_AUTOPLAY_TIMER_COMPLETE="waitingForAutoplayTimer",e.WAITING_FOR_REELS_TO_STOP="waitingForReelsToStop",e.WAITING_FOR_COLLECT="waitingForCollect",e.WAITING_FOR_GAMBLE_START="waitingForGambleStart",e.GAMBLE="gamble",e.WAITING_FOR_GAMBLE_RESUME="waitingForGambleResume",e.JACKPOT="jackpot",e.WAITING_FOR_JACKPOT_COLLECT="waitingForJackpotCollect",e.WAITING_FOR_EXPAND_COMPLETE="waitingForExpandComplete",e.WAITING_FOR_FREESPIN_SCENARIO_COMPLETE="waitingForFreespinScenarioComplete",e.WAITING_FOR_FREESPIN_ANIMATION_START="waitingForFreespinAnimationStart",e.WAITING_FOR_FREESPIN_ANIMATION_COMPLETE="waitingForFreespinAnimationComplete",e.NO_CONNECTION="noConnection",e.EXIT="exit",e.BET_BUTTON_STATE_BET="bet",e.BET_BUTTON_STATE_STOP="stop",e.BET_BUTTON_STATE_COLLECT="collect",e.BET_BUTTON_STATE_SELECT="select",e=i=__decorate([s.decorator],e);var i}();i.UIStateManager=a}(i.ui||(i.ui={}))}(t.models||(t.models={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.Device,o=function(){function e(){this._isKeyDown=!1,this.areSelectDenominationsOpened=!1,this.areSelectAutoplayButtonsOpened=!1,this.isKeyboardEnabled=!0,this._uiView=t.bottle.container.UIView,this._mainModel=t.bottle.container.MainModel,this._boundOnKeyDown=this.onKeyDown.bind(this),this._boundOnKeyUp=this.onKeyUp.bind(this),this._boundOnBlur=this.onBlur.bind(this),$(window).on("keydown",this._boundOnKeyDown),$(window).on("keyup",this._boundOnKeyUp),$(window).on("blur",this._boundOnBlur)}return e.prototype.dispose=function(){$(window).off("keydown",this._boundOnKeyDown),$(window).off("keyup",this._boundOnKeyUp),$(window).off("blur",this._boundOnBlur)},e.prototype.triggerActiveBet=function(){var e=this._uiView.betButtons[this._mainModel.currentBetIndex];e.interactive&&this.isKeyboardEnabled&&e.emit(n.resolveEvent("click"),{target:e})},e.prototype.pressDown=function(e){e.interactive&&this.isKeyboardEnabled&&e.emit(n.resolveEvent("mousedown"),{target:e})},e.prototype.click=function(e){e.emit(n.resolveEvent("mouseup"),{target:e}),e.interactive&&this.isKeyboardEnabled&&e.emit(n.resolveEvent("click"),{target:e})},e.prototype.isSelectDenominationOpened=function(e){return this.areSelectDenominationsOpened&&e<this._mainModel.gameSettings.denominations.length},e.prototype.isSelectAutoplayButtonOpened=function(e){return this.areSelectAutoplayButtonsOpened&&null!=this._mainModel.gameSettings.autoplayLimit&&e<this._mainModel.gameSettings.autoplayLimit.length},e.prototype.onKeyDown=function(e){this._isKeyDown||(this._isKeyDown=!0,this._keyCode=e.keyCode,67!=e.keyCode||this.isSelectDenominationOpened(0)||this.isSelectAutoplayButtonOpened(0)?86!=e.keyCode||this.isSelectDenominationOpened(1)||this.isSelectAutoplayButtonOpened(1)?66!=e.keyCode||this.isSelectDenominationOpened(2)||this.isSelectAutoplayButtonOpened(2)?78!=e.keyCode||this.isSelectDenominationOpened(3)||this.isSelectAutoplayButtonOpened(3)?77!=e.keyCode||this.isSelectDenominationOpened(4)||this.isSelectAutoplayButtonOpened(4)?88==e.keyCode?this.pressDown(this._uiView.denominationButton):188==e.keyCode?this.pressDown(this._uiView.homeButton):90==e.keyCode?this.pressDown(this._uiView.autoplayButton):37!=e.keyCode&&39!=e.keyCode||(this._uiView.gambleButton.interactive?this.pressDown(this._uiView.gambleButton):37==e.keyCode?this.pressDown(this._uiView.redGambleButton):this.pressDown(this._uiView.blackGambleButton)):this.pressDown(this._uiView.betButtons[4]):this.pressDown(this._uiView.betButtons[3]):this.pressDown(this._uiView.betButtons[2]):this.pressDown(this._uiView.betButtons[1]):this.pressDown(this._uiView.betButtons[0]))},e.prototype.onKeyUp=function(e){e.keyCode==this._keyCode&&(this._isKeyDown=!1,this._keyCode=-1,32==e.keyCode?this.triggerActiveBet():67!=e.keyCode||this.isSelectDenominationOpened(0)||this.isSelectAutoplayButtonOpened(0)?86!=e.keyCode||this.isSelectDenominationOpened(1)||this.isSelectAutoplayButtonOpened(1)?66!=e.keyCode||this.isSelectDenominationOpened(2)||this.isSelectAutoplayButtonOpened(2)?78!=e.keyCode||this.isSelectDenominationOpened(3)||this.isSelectAutoplayButtonOpened(3)?77!=e.keyCode||this.isSelectDenominationOpened(4)||this.isSelectAutoplayButtonOpened(4)?88==e.keyCode?this.click(this._uiView.denominationButton):188==e.keyCode?this.click(this._uiView.homeButton):90==e.keyCode?this.click(this._uiView.autoplayButton):37==e.keyCode||39==e.keyCode?this._uiView.gambleButton.interactive?this.click(this._uiView.gambleButton):37==e.keyCode?this.click(this._uiView.redGambleButton):this.click(this._uiView.blackGambleButton):e.keyCode>=49&&e.keyCode<=53&&this.click(this._uiView.linesButtons[e.keyCode-49]):this.click(this._uiView.betButtons[4]):this.click(this._uiView.betButtons[3]):this.click(this._uiView.betButtons[2]):this.click(this._uiView.betButtons[1]):this.click(this._uiView.betButtons[0]))},e.prototype.onBlur=function(){var e={};e.keyCode=this._keyCode,this.onKeyUp(e)},e}();i.UIKeyboardManager=o}(i.ui||(i.ui={}))}(t.models||(t.models={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=e.egt.library.widgets.StateButton,o=e.egt.library.widgets.Button,s=function(e){function t(){var n={},s={},a=i.getLoader("gameImages");return s[o.STATE_UP]=a.getTexture("noFullscreenButtonUp.png"),s[o.STATE_DOWN]=a.getTexture("noFullscreenButtonDown.png"),n[t.STATE_NO_FULLSCREEN]=s,s={},s[o.STATE_UP]=a.getTexture("fullscreenButtonUp.png"),s[o.STATE_DOWN]=a.getTexture("fullscreenButtonDown.png"),n[t.STATE_FULLSCREEN]=s,e.call(this,n,t.STATE_NO_FULLSCREEN)||this}return __extends(t,e),t.STATE_FULLSCREEN="fullscreen",t.STATE_NO_FULLSCREEN="noFullscreen",t}(n);t.FullscreenButton=s}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.models.ui.UIStateManager,o=e.egt.baseslot.models.server.response.BaseResponse,s=e.egt.baseslot.models.server.BaseComplex,a=e.egt.baseslot.models.Notifications,r=e.egt.library.Device,l=e.egt.baseslot.models.server.response.GambleResponse,c=e.egt.baseslot.models.server.response.JackpotResponse,u=e.egt.baseslot.views.FullscreenButton,h=e.egt.baseslot.views.AutoplayButton,d=e.egt.library.utils.log,p=function(e){function i(){var i=e.call(this)||this;i._isExitRequested=!1,i._hasWinForCollect=!1,i._isWinMoneyAnimating=!1,i._view=t.bottle.container.UIView,i._stateManager=t.bottle.container.UIStateManager,i._stateManager.state(n.IDLE),i._keyboardManager=t.bottle.container.UIKeyboardManager;for(var o=i.view.betButtons.length,s=0;s<o;s++)i.view.betButtons[s].on(r.resolveEvent("click"),i.onBetControlClick,i);i.view.betButtons[i.mainModel.currentBetIndex].isActive=!0,i.view.denominationButton.on(r.resolveEvent("click"),i.onDenominationClick,i),i.view.autoplayButton.on(r.resolveEvent("click"),i.onAutoplayClick,i),i.view.gambleButton.on(r.resolveEvent("click"),i.onGambleClick,i),i.view.redGambleButton.on(r.resolveEvent("click"),i.onRedBlackGambleClick,i),i.view.blackGambleButton.on(r.resolveEvent("click"),i.onRedBlackGambleClick,i),i.view.fullscreenButton.on(r.resolveEvent("click"),i.onFullscreenClick,i),i.view.paytableButton.on(r.resolveEvent("click"),i.onPaytableClick,i),i.view.soundButton.on(r.resolveEvent("click"),i.onSoundClick,i),i.view.currencyButton.on(r.resolveEvent("click"),i.onBalanceClick,i),i.view.soundButton.isMuted=i.soundManager.isMuted,i.view.homeButton.on(r.resolveEvent("click"),i.onHomeClick,i);for(var a=0;a<i.view.linesButtons.length;a++)i.view.linesButtons[a].on(r.resolveEvent("click"),i.onLineButtonClick,i);return i._boundOnFullscreenChanged=i.onFullscreenChanged.bind(i),$(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange msfullscreenchange",i._boundOnFullscreenChanged),null==document.fullscreenElement&&null==document.mozFullScreenElement&&null==document.webkitFullscreenElement&&null==document.msFullscreenElement||i.view.fullscreenButton.state(u.STATE_FULLSCREEN),i.setBetControlIsDisplayingCredits(),i.updateButtonValues(),i.processCurrentState(),i}return __extends(i,e),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameSettings",{get:function(){return t.bottle.container.GameSettings},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundManager",{get:function(){return this.mainModel.soundManager},enumerable:!0,configurable:!0}),i.prototype.getInterests=function(){return[a.REELS_STOPPED,a.WIN_MONEY_ANIMATION_COMPLETE,a.GAMBLE_SENT,a.GAMBLE_RESUMED,a.GAMBLE_COMPLETED,a.JACKPOT_WIN_MONEY_ANIMATION_START,a.JACKPOT_WIN_MONEY_COLLECT,a.JACKPOT_COMPLETED,a.COLLECT_RECEIVED,a.RESPONSIBLE_GAMING_EVENT,a.RESPONSIBLE_GAMING_EVENT_COMPLETE,a.LINES_CHANGED,a.EXPAND_COMPLETE,a.DENOMINATION_CHANGED,a.ENTER_FREESPINS_SCENARIO_COMPLETE,a.FREESPIN_ANIMATION_START_CLICKED,a.FREESPIN_INTRO_ENDED,a.FREESPIN_RETRIGGER_ENDED,a.FREESPIN_OUTRO_ENDED,a.FREESPIN_INTRO_REFRESH_SCREEN,a.FREESPIN_OUTRO_REFRESH_SCREEN,a.SOUND_YES_CLICKED,a.PAYTABLE_OPENED,a.PAYTABLE_CLOSED,a.SMALL_DENOMINATIONS_OPENED,a.SMALL_DENOMINATIONS_CLOSED,a.SELECT_AUTOPLAY_BUTTONS_OPENED,a.SELECT_AUTOPLAY_BUTTONS_CLOSED,a.INSUFFICIENT_SERVER_BALANCE,a.NO_CONNECTION,a.SELECT_AUTOPLAY_BUTTON_CLICKED,a.CURRENCY_CHANGED]},i.prototype.handleNotification=function(e){switch(this.log("Handle notification[%s]",e.name),e.name){case a.REELS_STOPPED:this._isWinMoneyAnimating=!1,this.checkForAutoplayStopCondition();this.mainModel.response;0!=this.mainModel.spinAnalyzer.numberOfWins?this._stateManager.state(n.WAITING_FOR_EXPAND_COMPLETE):this.mainModel.betResponse.state!=o.STATE_JACKPOT||this.mainModel.isFreespinGame?this.mainModel.isFreespinGame&&!this.mainModel.hasMoreFreespinsToPlay?this._stateManager.state(n.WAITING_FOR_FREESPIN_ANIMATION_COMPLETE):this.mainModel.isAutoplayGame||this.mainModel.hasMoreFreespinsToPlay?this.performBetClick():this._stateManager.state(n.IDLE):this._stateManager.state(n.JACKPOT);break;case a.WIN_MONEY_ANIMATION_COMPLETE:this._isWinMoneyAnimating=!1,this.mainModel.isAutoplayGame?(this._stateManager.state(n.WAITING_FOR_AUTOPLAY_TIMER_COMPLETE),TweenMax.delayedCall(1,this.performBetClick,null,this)):this.mainModel.hasMoreFreespinsToPlay&&0==this.mainModel.betResponse.complex.freespins?this.performBetClick():this.mainModel.isFreespinGame&&!this.mainModel.hasMoreFreespinsToPlay?this._stateManager.state(n.WAITING_FOR_FREESPIN_ANIMATION_COMPLETE):this.mainModel.response.state==o.STATE_GAMBLE?this._stateManager.state(n.WAITING_FOR_GAMBLE_START):this.mainModel.response.state==o.STATE_JACKPOT?this._stateManager.state(n.JACKPOT):this.mainModel.response.state==o.STATE_IDLE&&this._stateManager.state(n.IDLE);break;case a.GAMBLE_COMPLETED:this.mainModel.response.state==o.STATE_JACKPOT||this.mainModel.response.complex.jackpot?this._stateManager.state(n.JACKPOT):this._stateManager.state(n.IDLE);break;case a.JACKPOT_COMPLETED:this._stateManager.state(n.IDLE),this.view.currencyButton.interactive=!0;break;case a.GAMBLE_SENT:this._stateManager.state(n.WAITING_FOR_GAMBLE_RESUME);break;case a.GAMBLE_RESUMED:this._stateManager.state(n.GAMBLE);break;case a.JACKPOT_WIN_MONEY_ANIMATION_START:this.mainModel.response.state==o.STATE_IDLE&&TweenMax.delayedCall(this.gameSettings.jackpotWinMoneyAnimationTimes[this.mainModel.jackpotResponse.complex.winLevel],function(){this._stateManager.state(n.WAITING_FOR_COLLECT)},null,this),this.view.currencyButton.interactive=!1;break;case a.JACKPOT_WIN_MONEY_COLLECT:this._stateManager.state(n.WAITING_FOR_JACKPOT_COLLECT);break;case a.COLLECT_RECEIVED:this._isExitRequested&&this.mainModel.sendHideGame();break;case a.RESPONSIBLE_GAMING_EVENT:this.mainModel.isAutoplayGame&&this.stopAutoplay(),this._keyboardManager.isKeyboardEnabled=!1;break;case a.RESPONSIBLE_GAMING_EVENT_COMPLETE:this._keyboardManager.isKeyboardEnabled=!0;break;case a.EXPAND_COMPLETE:this._hasWinForCollect=!0,this._isWinMoneyAnimating=!0,0!=this.mainModel.betResponse.complex.freespins?this._stateManager.state(n.WAITING_FOR_FREESPIN_SCENARIO_COMPLETE):this._stateManager.state(n.WAITING_FOR_COLLECT);break;case a.DENOMINATION_CHANGED:this.updateButtonValues(),this.collectWin();break;case a.ENTER_FREESPINS_SCENARIO_COMPLETE:this.mainModel.isFreespinGame?this._stateManager.state(n.WAITING_FOR_FREESPIN_ANIMATION_COMPLETE):this._stateManager.state(n.WAITING_FOR_FREESPIN_ANIMATION_START);break;case a.FREESPIN_ANIMATION_START_CLICKED:this._stateManager.state(n.WAITING_FOR_FREESPIN_ANIMATION_COMPLETE);break;case a.FREESPIN_INTRO_ENDED:case a.FREESPIN_RETRIGGER_ENDED:this.performBetClick();break;case a.FREESPIN_OUTRO_ENDED:this.mainModel.response.state==o.STATE_JACKPOT?this._stateManager.state(n.JACKPOT):this.mainModel.response.state==o.STATE_GAMBLE?this._stateManager.state(n.WAITING_FOR_GAMBLE_START):this._stateManager.state(n.IDLE),this._hasWinForCollect=!0;break;case a.SOUND_YES_CLICKED:this.view.soundButton.isMuted=this.soundManager.isMuted;break;case a.PAYTABLE_OPENED:case a.PAYTABLE_CLOSED:this._stateManager.isPaytableOpened=e.name==a.PAYTABLE_OPENED,this._stateManager.state(this._stateManager.state());break;case a.SMALL_DENOMINATIONS_OPENED:this._keyboardManager.areSelectDenominationsOpened=!0;break;case a.SMALL_DENOMINATIONS_CLOSED:this._keyboardManager.areSelectDenominationsOpened=!1;break;case a.SELECT_AUTOPLAY_BUTTONS_OPENED:this._keyboardManager.areSelectAutoplayButtonsOpened=!0;break;case a.SELECT_AUTOPLAY_BUTTONS_CLOSED:this._keyboardManager.areSelectAutoplayButtonsOpened=!1;break;case a.INSUFFICIENT_SERVER_BALANCE:case a.NO_CONNECTION:this._stateManager.state(n.NO_CONNECTION);break;case a.SELECT_AUTOPLAY_BUTTON_CLICKED:this.mainModel.response.complex.jackpot||(this.soundManager.play("startAutoplaySound"),this.mainModel.isAutoplayGame=!0),this.performBetClick();break;case a.CURRENCY_CHANGED:this.currencyChangedHandler()}},i.prototype.dispose=function(){this._keyboardManager.dispose(),$(document).off("fullscreenchange mozfullscreenchange webkitfullscreenchange msfullscreenchange",this._boundOnFullscreenChanged),e.prototype.dispose.call(this)},i.prototype.checkForAutoplayStopCondition=function(){this.mainModel.isAutoplayGame&&(this.mainModel.betResponse.complex.jackpot||0!=this.mainModel.betResponse.complex.freespins||0==this.mainModel.remainingAutoplays)&&this.stopAutoplay(!0)},i.prototype.processCurrentState=function(){this.mainModel.response instanceof l?(this._stateManager.state(n.WAITING_FOR_GAMBLE_RESUME),this._hasWinForCollect=!0):this.mainModel.response instanceof c?this._stateManager.state(n.JACKPOT):this.mainModel.response.state==o.STATE_GAMBLE?(this._stateManager.state(n.WAITING_FOR_GAMBLE_START),this._hasWinForCollect=!0):this.mainModel.currentState.state==o.STATE_FREESPIN&&(this.mainModel.isFreespinGame?TweenMax.delayedCall(this.gameSettings.gameReadyDelay,this.performBetClick,null,this):this._stateManager.state(n.WAITING_FOR_FREESPIN_ANIMATION_START))},i.prototype.updateButtonValues=function(){for(var e=this.view.betButtons.length,t=0;t<e;t++)this.view.betButtons[t].denomination=this.mainModel.denomination,this.view.betButtons[t].money=this.gameSettings.bets[t]*this.mainModel.linesCoefficient*this.mainModel.denomination;this.view.setEqualFontSizeForBetButtons(),this.view.denominationButton.money=this.mainModel.denomination},i.prototype.setBetControlIsDisplayingCredits=function(){for(var e=0;e<this.view.betButtons.length;e++)this.view.betButtons[e].isDisplayingCredits=this.mainModel.isDisplayingCredits,this.mainModel.isDisplayingCredits||this.gameSettings.diamondPlay?this.view.betButtons[e].topText=this.gameSettings.localization.Bet:this.view.betButtons[e].topText=this.gameSettings.currencyISO;this.view.setEqualFontSizeForBetButtons()},i.prototype.performBetClick=function(){this.log("Bet click"),TweenMax.killDelayedCallsTo(this.performBetClick),this.mainModel.isNoConnection||(this._stateManager.state()==n.WAITING_FOR_FREESPIN_ANIMATION_START?this.sendNotification(a.FREESPIN_ANIMATION_START_CLICKED):this.mainModel.response.complex.jackpot&&!this.mainModel.isFreespinGame?this.collectWin():(this.mainModel.isAutoplayGame||this.mainModel.isFreespinGame||this.soundManager.play("spinSound"),this.collectWin(),this.mainModel.isBalanceEnoughForBet?(this.mainModel.isAutoplayGame&&this.mainModel.remainingAutoplays>0&&this.mainModel.remainingAutoplays--,this._stateManager.state(n.WAITING_FOR_SPIN_RESULT),this.mainModel.increaseCurrentFreespin(),this.sendNotification(a.SPIN_CLICKED),this.mainModel.commManager.sendBet()):(this.mainModel.isAutoplayGame&&this.stopAutoplay(!0),this._stateManager.state(n.IDLE),this.sendNotification(a.INSUFFICIENT_BALANCE))))},i.prototype.performCollectClick=function(){this.log("Collect click, win money animating[%s]",this._isWinMoneyAnimating),this._isWinMoneyAnimating||this.mainModel.response.complex.gameCommand!=s.JACKPOT&&this.collectWin(),this.sendNotification(a.COLLECT_CLICKED)},i.prototype.performStopAllClick=function(){this.log("Stop all click"),this._stateManager.state(n.WAITING_FOR_REELS_TO_STOP),this.sendNotification(a.STOP_ALL_CLICKED)},i.prototype.stopAutoplay=function(e){this.log("Stop autoplay"),e||this.soundManager.play("stopAutoplaySound"),this.mainModel.isAutoplayGame=!1,TweenMax.killDelayedCallsTo(this.performBetClick),this._stateManager.state()==n.WAITING_FOR_AUTOPLAY_TIMER_COMPLETE?this._stateManager.state(this.mainModel.response.state==o.STATE_GAMBLE?n.WAITING_FOR_GAMBLE_START:n.IDLE):this._stateManager.state(this._stateManager.state())},i.prototype.collectWin=function(){if(this.log("Collect win, has win to collect[%s]",this._hasWinForCollect),this._hasWinForCollect){this._hasWinForCollect=!1,this.mainModel.response.state==o.STATE_GAMBLE&&this.mainModel.commManager.sendCollect();var e=this._stateManager.state()==n.GAMBLE;this.mainModel.response.complex.jackpot?this._stateManager.state(n.JACKPOT):this._isExitRequested?this._stateManager.state(n.EXIT):this._stateManager.state(n.IDLE),this.sendNotification(a.WIN_COLLECTED,{isDuringGamble:e})}},i.prototype.onBetControlClick=function(e){var t=this.view.betButtons.indexOf(e.target),i=this._stateManager.getBetButtonState(t),o=t!=this.mainModel.currentBetIndex;this.log("On bet control click index[%s] state[%s] isDifferentBetClicked[%s]",t,i,o),o&&this._stateManager.isBetChangeAllowed(t)&&!this.mainModel.isAutoplayGame&&(this.view.betButtons[this.mainModel.currentBetIndex].isActive=!1,this.view.betButtons[t].isActive=!0,this.mainModel.currentBetIndex=t,this.sendNotification(a.BET_CHANGED),this.soundManager.play("spinSound"),this._stateManager.state(this._stateManager.state())),i==n.BET_BUTTON_STATE_BET?this.performBetClick():i==n.BET_BUTTON_STATE_COLLECT?this.performCollectClick():i==n.BET_BUTTON_STATE_STOP?this.performStopAllClick():i==n.BET_BUTTON_STATE_SELECT&&this.collectWin()},i.prototype.onDenominationClick=function(){this.sendNotification(a.DENOMINATION_CLICKED)},i.prototype.onAutoplayClick=function(){var e=this.view.autoplayButton.state()==h.STATE_START?a.START_AUTOPLAY_BUTTON_CLICKED:a.STOP_AUTOPLAY_BUTTON_CLICKED;this.mainModel.isAutoplayGame?this.stopAutoplay():this.gameSettings.hasAutoplayLimit()||(this.mainModel.response.complex.jackpot||(this.soundManager.play("startAutoplaySound"),this.mainModel.isAutoplayGame=!0),this.performBetClick()),this.sendNotification(e)},i.prototype.onSoundClick=function(){this.soundManager.isMuted=!this.soundManager.isMuted,gpts.muted=this.soundManager.isMuted,this.view.soundButton.isMuted=this.soundManager.isMuted,this.soundManager.isMuted||(this.soundManager.play("unmuteSound"),this.soundManager.loadAll())},i.prototype.onGambleClick=function(){this._stateManager.state(n.WAITING_FOR_GAMBLE_RESUME),this.sendNotification(a.GAMBLE_CLICKED)},i.prototype.onRedBlackGambleClick=function(e){e.target==this.view.redGambleButton?this.sendNotification(a.RED_GAMBLE_CLICKED):e.target==this.view.blackGambleButton&&this.sendNotification(a.BLACK_GAMBLE_CLICKED)},i.prototype.onFullscreenClick=function(e){null!=document.fullscreenElement||null!=document.mozFullScreenElement||null!=document.webkitFullscreenElement||null!=document.msFullscreenElement?gpts.fullscreen.cancel():gpts.fullscreen.request()},i.prototype.onPaytableClick=function(e){this.sendNotification(a.PAYTABLE_CLICKED)},i.prototype.onHomeClick=function(e){this.mainModel.isNoConnection||this.mainModel.response.state==o.STATE_INVALID||this.mainModel.response.state==o.STATE_IDLE?this.mainModel.sendHideGame():(this.mainModel.response.complex.jackpot||(this._isExitRequested=!0),this.collectWin())},i.prototype.onFullscreenChanged=function(e){null!=document.fullscreenElement||null!=document.mozFullScreenElement||null!=document.webkitFullscreenElement||null!=document.msFullscreenElement?this.view.fullscreenButton.state(u.STATE_FULLSCREEN):this.view.fullscreenButton.state(u.STATE_NO_FULLSCREEN)},i.prototype.onBalanceClick=function(){this.mainModel.changeCurrency()},i.prototype.currencyChangedHandler=function(){this.mainModel.isDisplayingCredits?this.soundManager.play("creditSound"):this.soundManager.play("currencySound"),this.setBetControlIsDisplayingCredits()},i.prototype.onLineButtonClick=function(e){this.gameSettings.fixedLinesCount||(this.soundManager.play("lineChangeSound"+(e.target.index+1)),this.mainModel.currentLineIndex=e.target.index,this.collectWin(),this._stateManager.isPaytableOpened&&this.sendNotification(a.BET_CHANGED),this.sendNotification(a.LINES_CHANGED),this.updateButtonValues())},i=__decorate([d.decorator],i)}(Pluck.ViewController);i.UIController=p}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.library.loading.Loader,o=e.egt.baseslot.models.Resources,s=e.egt.library.widgets.MoneyText,a=e.egt.library.widgets.Text,r=function(e){function i(){var i=e.call(this)||this;i._moneyAmountsContainers={};var r=t.bottle.container.GameSettings;i._winAmounts={},i._localisation=r.localization;var l=n.getLoader("gameImages");i._layoutLoader=n.getLoader(o.LAYOUT_LOADER_ID);r.diamondPlay&&l.getTexture("diamond.png");i._elementsWithID=i._layoutLoader.getData().elementsWithID,i._language=r.paytableLanguages.indexOf(r.language)<0?r.defaultLanguage:r.language,i.initWinAmounts(),console.log(i._winAmounts);var c=i._elementsWithID["gambleBet_"+i._language];c.style.lineJoin="round";var u=i._elementsWithID["gambleCurrency_"+i._language];if(u&&(u.style.lineJoin="round"),i._gambleAmount=new s(i.winObj(u,c)),i._gambleAmount.style=c.style,u)i._gambleAmount.currencyStyle=u.style;else{var h=jQuery.extend(!0,{},c.style);h.strokeThickness=Math.round(.5*c.style.strokeThickness),i._gambleAmount.currencyStyle=h}i._gambleAmount.position.set(c.x,c.y),i.addChild(i._gambleAmount),i._gambleAmount.visible=!1,i.initJackpotBets(),i._moneyAmountsContainers[r.paytableGamblePage]=i._gambleAmount;var d=new a({bounds:{width:158,height:26},align:"center"},i._localisation.Exit,{fill:r.paytableExitColor,fontSize:22,fontWeight:"bold"});return d.position.set(r.paytableExitCoord.x,r.paytableExitCoord.y),i.addChild(d),i.exitButton=new PIXI.Graphics,i.exitButton.beginFill(16711680,0),i.exitButton.drawRect(0,0,158,26),i.exitButton.endFill(),i.exitButton.position.set(395,503),i.exitButton.interactive=!0,i.exitButton.buttonMode=!0,i.addChild(i.exitButton),i.leftButton=new PIXI.Graphics,i.leftButton.beginFill(16711680,0),i.leftButton.drawRect(0,0,75,26),i.leftButton.endFill(),i.leftButton.position.set(317,503),i.leftButton.interactive=!0,i.leftButton.buttonMode=!0,i.addChild(i.leftButton),i.rightButton=new PIXI.Graphics,i.rightButton.beginFill(16711680,0),i.rightButton.drawRect(0,0,75,26),i.rightButton.endFill(),i.rightButton.position.set(556,503),i.rightButton.interactive=!0,i.rightButton.buttonMode=!0,i.addChild(i.rightButton),i._pageImages=[],i}return __extends(i,e),i.prototype.initJackpotBets=function(){var e=t.bottle.container.GameSettings,i=new PIXI.Container,n=this._elementsWithID["jackpotMinBet_"+this._language];n.style.lineJoin="round";var o=this._elementsWithID["jackpotMinCurrency_"+this._language];if(o&&(o.style.lineJoin="round"),this._jackpotMinBet=new s(this.winObj(o,n)),i.addChild(this._jackpotMinBet),this._jackpotMinBet.position.set(n.x,n.y),this._dash=new PIXI.Text(" - ",n.style),this._dash.position.set(this._jackpotMinBet.x+this._jackpotMinBet.textWidth,this._jackpotMinBet.y),i.addChild(this._dash),this._jackpotMaxBet=new s(this.winObj(o,n)),this._jackpotMinBet.style=n.style,this._jackpotMaxBet.style=n.style,o)this._jackpotMinBet.currencyStyle=o.style,this._jackpotMaxBet.currencyStyle=o.style;else{var a=jQuery.extend(!0,{},n.style);a.strokeThickness=Math.round(.5*n.style.strokeThickness),this._jackpotMinBet.currencyStyle=a,this._jackpotMaxBet.currencyStyle=a}i.addChild(this._jackpotMaxBet),this.addChild(i),i.visible=!1,this._moneyAmountsContainers[e.paytablePageCount-2]=i},i.prototype.initWinAmounts=function(){var e=new PIXI.Container;this.addChild(e),e.visible=!1,this._moneyAmountsContainers[0]=e;for(var t in this._elementsWithID)this.defineWinAmounts(t)},i.prototype.defineWinAmounts=function(e){var t=e.match(/\d+|_m$/g);if(t){t[0];var i=this._elementsWithID[e];this.setStartIndex(t),this.setEndIndex(t);for(var n=this._startIndex;n<this._endIndex;n++){var o=this.createWinAmountMoneyField(i,n);this.saveWinAmounts(o,t,n)}}},i.prototype.saveWinAmounts=function(e,t,i){var n=t[0];this._moneyAmountsContainers[0].addChild(e),"_m"===t[t.length-1]?(n+"_m"in this._winAmounts||(this._winAmounts[n+"_m"]=[]),this._winAmounts[n+"_m"][i]=e):(n in this._winAmounts||(this._winAmounts[n]=[]),this._winAmounts[n][i]=e)},i.prototype.winObj=function(e,i,o){var s=t.bottle.container.GameSettings,a=s.diamondPlay,r=n.getLoader("gameImages"),l=a?r.getTexture("diamond.png"):null,c={currency:s.currencyISO,centerAlignOnlyMoney:!1,isShowingCredits:!1,moneyFontSize:i.style.fontSize,currencyFontSize:Math.round(e?e.style.fontSize:.5*i.style.fontSize),shouldFitToBounds:!1,diamond:l,diamondPlay:a,diamondScaleCoef:a?.5:0,hideCents:s.currencyHideCents,bounds:{width:o||0,height:i.height}};return o&&(c.align=i.align),c},i.prototype.createWinAmountMoneyField=function(e,t){e.winCurrency&&(e.winCurrency.style.lineJoin="round"),e.winAmount.style.lineJoin="round";var i=new s(this.winObj(e.winCurrency,e.winAmount,e.width));if(i.position.set(e.x,e.y+this.getDistanceBetweenBullet(e.height)*(this.elementsCount-1)-(t-this._startIndex)*this.getDistanceBetweenBullet(e.height)-e.winAmount.height/2),i.style=e.winAmount.style,e.winCurrency)i.currencyStyle=e.winCurrency.style;else{var n=jQuery.extend(!0,{},e.winAmount.style);n.strokeThickness=Math.round(.5*e.winAmount.style.strokeThickness),i.currencyStyle=n}return i},i.prototype.setStartIndex=function(e){parseInt(e[1])?this._startIndex=parseInt(e[1]):this._startIndex=0},i.prototype.setEndIndex=function(e){if(parseInt(e[2]))this._endIndex=parseInt(e[2]);else{var i=t.bottle.container.GameSettings,n=e[0];this._endIndex=i.paytableCoef[n].coef.length}},Object.defineProperty(i.prototype,"elementsCount",{get:function(){return this._endIndex-this._startIndex},enumerable:!0,configurable:!0}),i.prototype.getDistanceBetweenBullet=function(e){return this.elementsCount>1?e/(this.elementsCount-1):0},Object.defineProperty(i.prototype,"currentPage",{get:function(){return this._currentPage},enumerable:!0,configurable:!0}),i.prototype.updateWinAmounts=function(e,t,i,n,o){this._winAmounts[t]&&this._winAmounts[t][i]&&this.updateMoneyText(this._winAmounts[t][i],e,n,o)},i.prototype.updateGambleAmount=function(e,t,i){this.updateMoneyText(this._gambleAmount,e,t,i)},i.prototype.updateJackpotBets=function(e,t,i,n){var o=this._layoutLoader.getData().elementsWithID["jackpotMinBet_"+this._language];this.updateMoneyText(this._jackpotMinBet,e,i,n),this.updateMoneyText(this._jackpotMaxBet,t,i,n),this._jackpotMinBet.position.set(o.x,o.y),this._dash.position.set(this._jackpotMinBet.x+this._jackpotMinBet.textWidth,this._jackpotMinBet.y),this._jackpotMaxBet.position.set(this._dash.x+this._dash.width,o.y)},i.prototype.updateMoneyText=function(e,t,i,n){e.denomination=i,e.money=t,e.isShowingCredits=n},i.prototype.hasPage=function(e){return null!=this._pageImages[e]},i.prototype.addPage=function(e,t){null==this._pageImages[e]&&(this._pageImages[e]=new PIXI.Sprite(t),this._pageImages[e].interactive=!0)},i.prototype.addLayout=function(e){this.addChild(e)},i.prototype.gotoPage=function(e){this.hasPage(e)&&(this.removeChild(this._pageImages[this._currentPage]),this._currentPage in this._moneyAmountsContainers&&(this._moneyAmountsContainers[this._currentPage].visible=!1),e in this._moneyAmountsContainers&&(this._moneyAmountsContainers[e].visible=!0),this.addChildAt(this._pageImages[e],0),this._currentPage=e)},i}(PIXI.Container);i.PaytableView=r}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.library.events.LoaderEvent,o=e.egt.library.loading.Loader,s=e.egt.baseslot.models.Notifications,a=e.egt.library.Device,r=function(e){function i(){var o=e.call(this)||this;return o._startPageIndex=0,o._state=i.STATE_HIDDEN,o._view=t.bottle.container.PaytableView.instance(),o.view.position.set(166,i.HIDDEN_Y),o._language=o.gameSettings.paytableLanguages.indexOf(o.gameSettings.language)<0?o.gameSettings.defaultLanguage:o.gameSettings.language,o._loadingQueue=o.mainModel.resources.loadPaytable(o._language),o._loadingQueue.isLoading()&&o._loadingQueue.addEventListener(n.CHILD_COMPLETE,o.onChildComplete,o),o.view.exitButton.on(a.resolveEvent("mousedown"),o.onExitClick,o),o.view.leftButton.on(a.resolveEvent("mousedown"),o.onNavigationClick,o),o.view.rightButton.on(a.resolveEvent("mousedown"),o.onNavigationClick,o),o.mainModel.isInGamble&&(o._startPageIndex=o.gameSettings.paytableGamblePage),o.addPages(),o.view.hasPage(o._startPageIndex)&&o.show(),o.updateValues(),o.sendNotification(s.PAYTABLE_OPENED),o}return __extends(i,e),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameSettings",{get:function(){return this.mainModel.gameSettings},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundManager",{get:function(){return this.mainModel.soundManager},enumerable:!0,configurable:!0}),i.prototype.getInterests=function(){return[s.PAYTABLE_CLICKED,s.SPIN_CLICKED,s.GAMBLE_CLICKED,s.RED_GAMBLE_CLICKED,s.BLACK_GAMBLE_CLICKED,s.GAMBLE_COMPLETED,s.WIN_COLLECTED,s.BET_CHANGED,s.CURRENCY_CHANGED,s.DENOMINATION_CHANGED]},i.prototype.handleNotification=function(e){switch(e.name){case s.PAYTABLE_CLICKED:this._state==i.STATE_HIDDEN?this.remove():this._state==i.STATE_HIDING?this.show():this.hide();break;case s.SPIN_CLICKED:this.hideOrRemove();break;case s.RED_GAMBLE_CLICKED:case s.BLACK_GAMBLE_CLICKED:case s.GAMBLE_CLICKED:case s.GAMBLE_COMPLETED:this.remove();break;case s.WIN_COLLECTED:this.mainModel.response.complex.jackpot&&this.hideOrRemove();break;case s.CURRENCY_CHANGED:case s.DENOMINATION_CHANGED:case s.BET_CHANGED:this.updateValues()}},i.prototype.dispose=function(){this.view.exitButton.off(a.resolveEvent("mousedown"),this.onExitClick,this),this.view.leftButton.off(a.resolveEvent("mousedown"),this.onNavigationClick,this),this.view.rightButton.off(a.resolveEvent("mousedown"),this.onNavigationClick,this),this._loadingQueue.removeEventListener(n.CHILD_COMPLETE,this.onChildComplete,this),this._showHideTween&&this._showHideTween.kill(),e.prototype.dispose.call(this)},i.prototype.show=function(){this._state!=i.STATE_SHOWING&&this._state!=i.STATE_SHOWN&&(this._state=i.STATE_SHOWING,this._showHideTween&&this._showHideTween.isActive()&&this._showHideTween.updateTo({y:i.SHOWN_Y},!0),this._showHideTween=TweenMax.to(this.view.position,.2,{y:i.SHOWN_Y,ease:Linear.easeNone,onComplete:this.onShowComplete,callbackScope:this}))},i.prototype.hide=function(){this._state!=i.STATE_HIDING&&this._state!=i.STATE_HIDDEN&&(this.soundManager.play("paytableSound"),this._state=i.STATE_HIDING,this._showHideTween&&this._showHideTween.isActive()&&this._showHideTween.updateTo({y:i.HIDDEN_Y},!0),this._showHideTween=TweenMax.to(this.view.position,.2,{y:i.HIDDEN_Y,ease:Linear.easeNone,onComplete:this.onHideComplete,callbackScope:this}))},i.prototype.hideOrRemove=function(){this._state==i.STATE_HIDDEN?this.remove():this.hide()},i.prototype.updateValues=function(){this.updateWinAmounts(),this.updateGambleWinAmount(),this.updateJackpotBets()},i.prototype.updateWinAmounts=function(){var e=this.mainModel.denomination,t=this.mainModel.isDisplayingCredits;for(var i in this.gameSettings.paytableCoef)for(var n=this.gameSettings.paytableCoef[i].coef,o=this.gameSettings.paytableCoef[i].multiplier,s=n.length,a=0;a<s;a++){var r=n[a],l=null!=this.gameSettings.getScatterConfig(parseInt(i))?this.mainModel.totalBet:this.mainModel.betPerLine;o>1&&this.view.updateWinAmounts(l*o*r,i+"_m",a,e,t),this.view.updateWinAmounts(l*r,i,a,e,t)}},i.prototype.updateGambleWinAmount=function(){var e=this.mainModel.denomination,t=this.mainModel.isDisplayingCredits,i=Math.min(this.gameSettings.denominations[this.mainModel.currentDenomIndex][2],this.gameSettings.denominations[this.mainModel.currentDenomIndex][1]*this.mainModel.totalBet)/2;this._view.updateGambleAmount(i,e,t)},i.prototype.updateJackpotBets=function(){var e=this.mainModel.denomination,t=this.mainModel.isDisplayingCredits;this._view.updateJackpotBets(this.gameSettings.jackpotMinBet,this.gameSettings.jackpotMaxBet,e,t)},i.prototype.addPages=function(){for(var e=0;e<this.gameSettings.paytablePageCount;e++){var t=o.getLoader("paytablePage_"+e);null!=t&&t.isLoaded()&&(this.view.addPage(e,t.getTexture("page")),e==this._startPageIndex&&this.gotoPage(e))}},i.prototype.gotoPage=function(e){this.view.gotoPage(e),this.soundManager.play("paytableSound")},i.prototype.remove=function(){this.parent.removeChildViewController(this),this.sendNotification(s.PAYTABLE_CLOSED)},i.prototype.onShowComplete=function(){this._state=i.STATE_SHOWN},i.prototype.onHideComplete=function(){this._state=i.STATE_HIDDEN,this.remove()},i.prototype.onExitClick=function(e){this.soundManager.play("settingsHideSound"),this.hide()},i.prototype.onNavigationClick=function(e){var t=this.view.currentPage;e.target==this.view.leftButton?(--t<0&&(t+=this.gameSettings.paytablePageCount),this.gameSettings.jackpot||t!=this.gameSettings.paytablePageCount-2||t--):(t=(t+1)%this.gameSettings.paytablePageCount,this.gameSettings.jackpot||t!=this.gameSettings.paytablePageCount-2||t++),this.gotoPage(t)},i.prototype.onChildComplete=function(e){var t=e.target.id.split("_")[1];this.view.addPage(t,e.target.getTexture("page")),t==this._startPageIndex&&(this.gotoPage(t),this.show())},i.LOADING_QUEUE_ID="paytableLoadingQueue",i.STATE_HIDDEN="stateHidden",i.STATE_HIDING="stateHiding",i.STATE_SHOWN="stateShown",i.STATE_SHOWING="stateShowing",i.HIDDEN_Y=-541,i.SHOWN_Y=53,i}(Pluck.ViewController);i.PaytableController=r}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(n,o){var s=e.call(this)||this;s._textures=n,s._config=new i,s._config.serialize(o),s._cards=[];for(var a=0;a<s._config.cardsCount;a++){var r=new PIXI.Sprite(s._textures[t.CARD_BACK]);r.scale.set(s._config.cardScale),r.x=a*(r.width+s._config.margin),s._cards[a]=r,s.addChild(r)}return s}return __extends(t,e),t.prototype.updateCards=function(e){for(var t=this._cards.length,i=0;i<t;i++)i>0?null!=e[i-1]?this.setCard(i,e[i-1]):this._cards[i].visible=!1:this.setCard(0,-1)},t.prototype.addCard=function(e){this.setCard(0,e)},t.prototype.dispose=function(){this._updateDelay&&this._updateDelay.kill()},t.prototype.setCard=function(e,i){this._cards[e].visible=!0,this._cards[e].texture=-1==i?this._textures[t.CARD_BACK]:this._textures[i]},t.CARD_BACK=4,t}(PIXI.Container);e.GambleHistoryView=t;var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cardsCount=6,t.cardScale=.38,t.margin=20,t.updateDelay=1,t}return __extends(t,e),t}(Pluck.External)}(e.gamble||(e.gamble={}))}(e.views||(e.views={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=function(e){function t(){var t=e.call(this)||this,n=i.getLoader("gameImages");t._cards=[];for(var o=0;o<5;o++)t._cards[o]=new PIXI.Sprite(n.getTexture("cardBackRed.png")),t.addChild(t._cards[o]);t.resetCards();var s=new PIXI.Graphics;return s.beginFill(16711680,.3),s.drawRect(0,0,700,t._cards[0].height),s.endFill(),t.addChild(s),t.mask=s,t}return __extends(t,e),t.prototype.addCard=function(){this._timeline=new TimelineMax({onComplete:this.onComplete,callbackScope:this}),this._timeline.add(TweenMax.to(this._cards[0].position,.6,{x:460,ease:Linear.easeNone}));for(var e=1;e<5;e++)this._timeline.add(TweenMax.to(this._cards[e].position,.6,{x:t.START_X-(e-1)*t.CARD_SPACING,ease:Linear.easeNone}),"-=0.6");this._timeline.play()},t.prototype.dispose=function(){this._timeline&&this._timeline.kill()},t.prototype.resetCards=function(){for(var e=0;e<4;e++)this._cards[e].x=t.START_X-e*t.CARD_SPACING;this._cards[4].x=-this._cards[4].width},t.prototype.onComplete=function(){this.resetCards(),this.emit(t.COMPLETE)},t.COMPLETE="complete",t.CARD_SPACING=46,t.START_X=243,t}(PIXI.Container);t.CardsStack=n}(t.gamble||(t.gamble={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=e.egt.library.widgets.Button,o=e.egt.library.widgets.Text,s=function(e){function t(s,a){var r=this,l={},c=i.getLoader("gameImages");l[n.STATE_UP]=c.getTexture("yellowGambleButton.png"),l[n.STATE_DOWN]=c.getTexture("yellowGambleButtonDown.png");var u={fontSize:42,fill:a,stroke:5066061,strokeThickness:4,lineJoin:"round"};return(r=e.call(this,l)||this)._title=new o({bounds:{width:r._background.width-2*t.PADDING,height:r._background.height},shouldScale:!0,align:"center"},s,u),r.addChild(r._title),r._title.x=t.PADDING,r}return __extends(t,e),t.PADDING=12,t}(n);t.GambleChoiceButton=s}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(n){var o=e.egt.library.loading.Loader,s=e.egt.library.widgets.MoneyText,a=e.egt.library.widgets.Text,r=function(e){function r(){var s=e.call(this)||this;s._isRedBack=!0,s._blinkTimer=-1;var a=t.bottle.container.GameSettings;return s._loader=o.getLoader("gameImages"),s._localisation=a.localization,s._background=new PIXI.Sprite(s._loader.getTexture("gambleBackground.png")),s.addChild(s._background),s.redButton=new i.GambleChoiceButton(s._localisation.Red,16711680),s.redButton.position.set(769,239),s.redButton.interactive=!1,s.blackButton=new i.GambleChoiceButton(s._localisation.Black,0),s.blackButton.position.set(769,376),s.blackButton.interactive=!1,s.addChild(s.redButton),s.addChild(s.blackButton),s.createMainCard(),s.createAttemptsLeft(),s.createGambleAmounts(a),s.createHistory(a),s.cardsStack=new n.CardsStack,s.cardsStack.position.set(14,243),s.addChild(s.cardsStack),s.winText=new PIXI.Sprite(s._loader.getTexture("gambleWinText.png")),s.winText.x=s.mainCard.x+(s.mainCard.width-s.winText.width)/2,s.winText.y=s.mainCard.y+(s.mainCard.height-s.winText.height)/2,s.winText.visible=!1,s.addChild(s.winText),s}return __extends(r,e),Object.defineProperty(r.prototype,"card",{set:function(e){this.stopBlink(),this.mainCard.texture=this._loader.getTexture("cardFront"+e+".png")},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"attemptsLeft",{set:function(e){this._attemptsLeftNumber.text=e.toString(),this.positionAttemptsLeft()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"gambleAmount",{set:function(e){this._gambleAmountMoney.money=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"gambleToWin",{set:function(e){this._gambleToWinMoney.money=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isShowingCredits",{set:function(e){this._gambleToWinMoney.isShowingCredits=e,this._gambleAmountMoney.isShowingCredits=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"denomination",{set:function(e){this._gambleToWinMoney.denomination=e,this._gambleAmountMoney.denomination=e},enumerable:!0,configurable:!0}),r.prototype.startBlink=function(){if(-1==this._blinkTimer){var e=this;this._blinkTimer=setInterval(function(){e.onBlink()},70),this.onBlink()}},r.prototype.dispose=function(){this.stopBlink(),this.historyView.dispose(),this.cardsStack.dispose()},r.prototype.createMainCard=function(){this._redBack=this._loader.getTexture("cardBackRed.png"),this._blackBack=this._loader.getTexture("cardBackBlack.png"),this.mainCard=new PIXI.Sprite(this._redBack),this.mainCard.position.set(474,243),this.mainCard.visible=!1,this.addChild(this.mainCard)},r.prototype.createAttemptsLeft=function(){var e={fontSize:20,fontWeight:"bold",fill:r.ATTEMPTS_LABEL_COLOR,dropShadow:!0,dropShadowAngle:Math.PI/4,dropShadowBlur:4,dropShadowDistance:4};this._attemptsLeftLabel=new PIXI.Text(this._localisation.GambleAttemptsLeft+" :",e),e={fontSize:20,fontWeight:"bold",fill:r.HISTORY_COLOR,dropShadow:!0,dropShadowAngle:Math.PI/4,dropShadowBlur:4,dropShadowDistance:4},this._attemptsLeftNumber=new PIXI.Text("",e),this._attemptsLeftLabel.y=this._attemptsLeftNumber.y=485,this.addChild(this._attemptsLeftLabel),this.addChild(this._attemptsLeftNumber)},r.prototype.createGambleAmounts=function(e){var t=e.diamondPlay,i=o.getLoader("gameImages"),n=t?i.getTexture("diamond.png"):null;this._gambleAmountLabel=new a({align:"center",bounds:{width:446,height:30}},this._localisation.GambleAmount,{fontSize:30,fontWeight:"bold",fill:r.TOP_LABELS_COLOR,dropShadow:!0,dropShadowAngle:Math.PI/4,dropShadowBlur:4,dropShadowDistance:4}),this._gambleAmountLabel.position.set(14,30),this._gambleAmountMoney=new s({currency:e.currencyISO,moneyFontSize:39,centsFontSize:28,currencyFontSize:14,spaceBetweenMoneyAndCents:-2,spaceBetweenMoneyAndDiamond:7,align:"center",diamond:n,diamondScaleCoef:.47,diamondPlay:t,hideCents:e.currencyHideCents,bounds:{width:410,height:39}}),this._gambleAmountMoney.position.set(30,65),this._gambleAmountMoney.style={fill:r.GAMBLE_TO_WIN_COLOR,fontWeight:"bold",dropShadow:!0,dropShadowAngle:Math.PI/4,dropShadowBlur:4,dropShadowDistance:4},this._gambleAmountMoney.currencyStyle={fontWeight:"normal"},this._gambleToWinLabel=new a({align:"center",bounds:{width:446,height:30}},this._localisation.GambleToWin,{fontSize:30,fontWeight:"bold",fill:r.TOP_LABELS_COLOR,dropShadow:!0,dropShadowAngle:Math.PI/4,dropShadowBlur:4,dropShadowDistance:4}),this._gambleToWinLabel.position.set(647,30),this._gambleToWinMoney=new s({currency:e.currencyISO,moneyFontSize:50,centsFontSize:34,currencyFontSize:17,spaceBetweenMoneyAndCents:-3,align:"center",diamond:n,diamondScaleCoef:.46,diamondPlay:t,spaceBetweenMoneyAndDiamond:7,hideCents:e.currencyHideCents,bounds:{width:410,height:50}}),this._gambleToWinMoney.position.set(666,61),this._gambleToWinMoney.style={fill:r.GAMBLE_AMOUNT_COLOR,fontWeight:"bold",dropShadow:!0,dropShadowAngle:Math.PI/4,dropShadowBlur:4,dropShadowDistance:4},this._gambleToWinMoney.currencyStyle={fontWeight:"normal"},this.addChild(this._gambleAmountLabel),this.addChild(this._gambleAmountMoney),this.addChild(this._gambleToWinLabel),this.addChild(this._gambleToWinMoney)},r.prototype.createHistory=function(e){var t={fontSize:28,fontWeight:"bold",fill:r.HISTORY_COLOR,dropShadow:!0,dropShadowAngle:Math.PI/4,dropShadowBlur:4,dropShadowDistance:4};this._historyLabel=new PIXI.Text(this._localisation.History,t),this._historyLabel.x=(this.width-this._historyLabel.width)/2,this._historyLabel.y=87;var i=[];i[n.GambleHistoryView.CARD_BACK]=this._redBack;for(var o=0;o<4;o++)i[o]=this._loader.getTexture("cardFront"+o+".png");this.historyView=new n.GambleHistoryView(i,{cardsCount:e.gambleHistoryCardsCount,margin:8}),this.historyView.x=358,this.historyView.y=123,this.addChild(this._historyLabel),this.addChild(this.historyView)},r.prototype.positionAttemptsLeft=function(){var e=this._attemptsLeftLabel.width+this._attemptsLeftNumber.width+7;this._attemptsLeftLabel.x=12+(this._background.width-e)/2,this._attemptsLeftNumber.x=this._attemptsLeftLabel.x+this._attemptsLeftLabel.width+7},r.prototype.stopBlink=function(){clearInterval(this._blinkTimer),this._blinkTimer=-1},r.prototype.onBlink=function(){this._isRedBack=!this._isRedBack,this.mainCard.texture=this._isRedBack?this._redBack:this._blackBack},r.GAMBLE_TO_WIN_COLOR=16350741,r.GAMBLE_AMOUNT_COLOR=16731648,r.HISTORY_COLOR=3123745,r.TOP_LABELS_COLOR=15782946,r.ATTEMPTS_LABEL_COLOR=16497700,r}(PIXI.Container);n.GambleView=r}(i.gamble||(i.gamble={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.library.sound.SoundManager,o=e.egt.baseslot.models.server.response.BaseResponse,s=e.egt.baseslot.models.Notifications,a=e.egt.library.Device,r=e.egt.baseslot.views.gamble.CardsStack,l=function(e){function i(){var i=e.call(this)||this;return i.mainModel.currentState&&i.handleRecovery(),i._view=t.bottle.container.GambleView.instance(),i.view.position.set(88,56),i.view.redButton.on(a.resolveEvent("click"),i.onClick,i),i.view.blackButton.on(a.resolveEvent("click"),i.onClick,i),i.view.historyView.updateCards(i.mainModel.gambleHistoryCards),i.soundManager.addEventListener(n.SOUND_LOADED,i.onSoundLoaded,i),i.view.cardsStack.on(r.COMPLETE,i.onCardsStackComplete,i),i.view.cardsStack.addCard(),i.view.isShowingCredits=i.mainModel.isDisplayingCredits,i.view.denomination=i.mainModel.denomination,i.updateGambleInfo(),i.soundManager.play("gambleOpenSound"),i}return __extends(i,e),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundManager",{get:function(){return this.mainModel.soundManager},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){this.soundManager.removeEventListener(n.SOUND_LOADED,this.onSoundLoaded,this),this.view.cardsStack.off(r.COMPLETE,this.onCardsStackComplete,this),this.stopBlinkSound()},i.prototype.getInterests=function(){return[s.GAMBLE_RECEIVED,s.RED_GAMBLE_CLICKED,s.BLACK_GAMBLE_CLICKED,s.COLLECT_CLICKED,s.CURRENCY_CHANGED,s.GAMBLE_WIN_MONEY_ANIMATION_COMPLETE,s.NO_CONNECTION]},i.prototype.handleNotification=function(e){switch(e.name){case s.GAMBLE_RECEIVED:this.handleGambleResponse();break;case s.COLLECT_CLICKED:this.completeGamble();break;case s.RED_GAMBLE_CLICKED:this.performRedOrBlackClick(i.RED);break;case s.BLACK_GAMBLE_CLICKED:this.performRedOrBlackClick(i.BLACK);break;case s.CURRENCY_CHANGED:this.view.isShowingCredits=this.mainModel.isDisplayingCredits;break;case s.GAMBLE_WIN_MONEY_ANIMATION_COMPLETE:this.mainModel.gambleResponse.state!=o.STATE_GAMBLE?0!=this.mainModel.gambleResponse.winAmount?TweenMax.delayedCall(1,this.completeGamble,null,this):this.completeGamble():(this.view.winText.visible=!1,this.view.mainCard.visible=!1,this.view.cardsStack.addCard(),this.view.historyView.updateCards(this.mainModel.gambleHistoryCards));break;case s.NO_CONNECTION:this.view.redButton.interactive=!1,this.view.blackButton.interactive=!1}},i.prototype.handleGambleResponse=function(){this.view.card=this.mainModel.gambleResponse.complex.card,this.view.historyView.addCard(this.mainModel.gambleResponse.complex.card),0!=this.mainModel.gambleResponse.winAmount?(this.soundManager.play("gambleWonSound"),this.view.winText.visible=!0):this.soundManager.play("gambleLostSound"),this.mainModel.gambleResponse.state==o.STATE_GAMBLE&&this.updateGambleInfo()},i.prototype.handleRecovery=function(){for(var e=this.mainModel.currentState.previousGambles.length-1;e>=0;e--)this.mainModel.addGambleCard(this.mainModel.currentState.previousGambles[e])},i.prototype.resumeGamble=function(){this.view.mainCard.visible=!0,this.startBlink(),this.mainModel.isNoConnection||(this.view.redButton.interactive=!0,this.view.blackButton.interactive=!0),this.sendNotification(s.GAMBLE_RESUMED)},i.prototype.updateGambleInfo=function(){this.view.attemptsLeft=this.mainModel.betResponse.complex.gambles,this.view.gambleAmount=this.mainModel.betResponse.winAmount,this.view.gambleToWin=2*this.mainModel.betResponse.winAmount},i.prototype.completeGamble=function(){this.parent.removeChildViewController(this),this.sendNotification(s.GAMBLE_COMPLETED)},i.prototype.performRedOrBlackClick=function(e){this.stopBlinkSound(),this.view.attemptsLeft=this.mainModel.response.complex.gambles-1,this.view.redButton.interactive=!1,this.view.blackButton.interactive=!1,this.mainModel.commManager.sendGamble(e),this.sendNotification(s.GAMBLE_SENT)},i.prototype.startBlink=function(){this.view.startBlink(),this._blinkSound=this.soundManager.play("gambleCardClickSound",!0),this._blinkSoundRequested=null==this._blinkSound},i.prototype.stopBlinkSound=function(){this._blinkSound&&this._blinkSound.stop(),this._blinkSoundRequested=!1},i.prototype.onClick=function(e){this.performRedOrBlackClick(e.target==this.view.redButton?i.RED:i.BLACK)},i.prototype.onCardsStackComplete=function(e){this.resumeGamble()},i.prototype.onSoundLoaded=function(e){"mainSounds"==e.data.soundId&&this._blinkSoundRequested&&this.startBlink()},i.RED=0,i.BLACK=1,i}(Pluck.ViewController);i.GambleController=l}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=function(e){function t(){var t=e.call(this)||this;t._loader=i.getLoader("gameImages"),t._symbols=[],t._suits=[],t._smallSuits=[];for(var n=0;n<4;n++)n<2&&(t._symbols[n]=t._loader.getTexture("cardSymbol"+n+".png")),t._suits[n]=t._loader.getTexture("cardSuit"+n+".png"),t._smallSuits[n]=t._loader.getTexture("SmallcardSuit"+n+".png");return t._back=new PIXI.extras.MovieClip([t._loader.getTexture("jpcardBackBlack.png"),t._loader.getTexture("jpcardBackRed.png")]),t._back.animationSpeed=.2,t.addChild(t._back),t._back.gotoAndStop(0),t.createFront(),t.suit=-1,t}return __extends(t,e),Object.defineProperty(t.prototype,"suit",{get:function(){return this._suitNumber},set:function(e){-1==e?(this._back.visible=!0,this._front.visible=!1):(this._back.visible=!1,this._front.visible=!0,this.updateFront(e)),this._suitNumber=e},enumerable:!0,configurable:!0}),t.prototype.darken=function(){var e=new PIXI.filters.ColorMatrixFilter,t=new PIXI.filters.ColorMatrixFilter;t.desaturate(),e.brightness(.5),this.filters=[e,t]},t.prototype.startSuitBlink=function(){TweenMax.to(this._glow,.4,{alpha:1,yoyo:!0,repeat:-1})},t.prototype.dispose=function(){this._blinkTween&&this._blinkTween.kill()},t.prototype.playBackAnimation=function(){this._back.play()},t.prototype.stopBackAnimation=function(){this._back.gotoAndStop(0)},t.prototype.createFront=function(){this._front=new PIXI.Container;var e=new PIXI.Sprite(this._loader.getTexture("jpcardBackground.png")),t=new PIXI.Sprite(this._loader.getTexture("cardImage.png"));t.position.set(40,9),this._frontSymbol=new PIXI.Sprite(this._symbols[0]),this._frontSymbol.position.set(7,9),this._frontSuit=new PIXI.Sprite(this._suits[0]),this._frontSuit.anchor=new PIXI.Point(.5,.5),this._frontSuit.x=(this.width-this._frontSuit.width)/2+this._frontSuit.width/2,this._frontSuit.y=67+this._frontSuit.height/2,this._frontSmallSuit=new PIXI.Sprite(this._smallSuits[0]),this._frontSmallSuit.position.set(7,40),this._glow=new PIXI.Sprite(this._loader.getTexture("glow.png")),this._glow.anchor=new PIXI.Point(.5,.5),this._glow.x=e.width/2-1,this._glow.y=e.height/2-1,this._glow.alpha=0,this._front.addChild(e),this._front.addChild(t),this._front.addChild(this._frontSymbol),this._front.addChild(this._frontSuit),this._front.addChild(this._frontSmallSuit),this._front.addChild(this._glow),this.addChild(this._front)},t.prototype.scaleFigure=function(){TweenMax.to(this._frontSuit.scale,.3,{x:1.4,y:1.4,onComplete:function(){TweenMax.to(this._frontSuit.scale,.3,{x:1,y:1,onComplete:function(){this.emit(t.ON_PULSE_COMPLETE,this._frontSuit,this)},callbackScope:this})},callbackScope:this})},t.prototype.updateFront=function(e){this._frontSuit.texture=this._suits[e],this._frontSmallSuit.texture=this._smallSuits[e],this._frontSymbol.texture=this._symbols[e%3==0?1:0]},t.prototype.onSuitBlink=function(){1==this._frontSuit.alpha?this._frontSuit.alpha=.3:this._frontSuit.alpha=1,this._blinkTween=TweenMax.delayedCall(t.BLINK_TIME,this.onSuitBlink,null,this)},t.BLINK_TIME=.3,t.ON_PULSE_COMPLETE="onPulseComplete",t}(PIXI.Container);t.JackpotCard=n}(t.jackpot||(t.jackpot={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=function(e){function t(){var t=e.call(this)||this;t._lightsCoordinates=[281,442,281,402,280,363,277,324,274,287,270,250,265,213,259,175,250,135];var n=i.getLoader("gameImages");t._lightOnTexture=n.getTexture("jackpotLight_on.png"),t._lightOffTexture=n.getTexture("jackpotLight_off.png"),t._allLights=[],t._disabledLights=[];for(var o=0;o<t._lightsCoordinates.length;o+=2){var s=new PIXI.Sprite(t._lightOnTexture);s.scale=new PIXI.Point(.8,.8),s.x=t._lightsCoordinates[o],s.y=t._lightsCoordinates[o+1],t._allLights[o]=s;var a=new PIXI.Sprite(t._lightOnTexture);a.scale=new PIXI.Point(.8,.8),a.x=t._lightsCoordinates[o]+525+2*(t._allLights[0].x-s.x),a.y=t._lightsCoordinates[o+1],t._allLights[o+1]=a,t.addChild(s),t.addChild(a)}var r=t;return t._timer=setInterval(function(){r.onLightTimer()},350),t}return __extends(t,e),t.prototype.dispose=function(){clearInterval(this._timer)},t.prototype.playLightsFast=function(){clearInterval(this._timer);var e=this;this._timer=setInterval(function(){e.onLightTimer()},100)},t.prototype.onLightTimer=function(){for(var e=this._disabledLights.length,t=0;t<e;t++)this._disabledLights[t].texture=this._lightOnTexture;for(this._disabledLights.length=0,e=Math.round(1+3*Math.random()),t=0;t<e;t++){var i=Math.round(Math.random()*(this._allLights.length-1));this._allLights[i].texture=this._lightOffTexture,this._disabledLights.push(this._allLights[i])}},t}(PIXI.Container);t.LightStrip=n}(t.jackpot||(t.jackpot={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=function(e){function t(){var n=e.call(this)||this;n._loader=i.getLoader("gameImages"),n._suits=[],n.suitsFulfillCount=[0,0,0,0];for(var o=0;o<12;o++){var s=Math.floor(o/3),a=o%3,r=t.startXSuits[s];0==a&&(n._suits[s]=[]);var l=new PIXI.Sprite(n._loader.getTexture("smallSuitInactive"+s+".png"));l.x=r+o%3*(l.width+t.spacingBetweenSuits[s]),n._suits[s][a]=l,n.addChild(l)}return n}return __extends(t,e),t.prototype.updateSuits=function(e){for(var t=0;t<12;t++){var i=Math.floor(t/3),n=t%3;e[i][n]?this._suits[i][n].texture=this._loader.getTexture("smallSuitActive"+i+".png"):this._suits[i][n].texture=this._loader.getTexture("smallSuitInactive"+i+".png")}},t.prototype.updateSuitsFullFill=function(e){for(var t=0;t<e.length;t++){for(var i=0,n=0,o=e[t];n<o.length;n++)o[n]&&i++;this.suitsFulfillCount[t]=i}},t.prototype.updateSuitToActiveByTypeAndPos=function(e,t){this._suits[e][t].texture=this._loader.getTexture("smallSuitActive"+e+".png")},t.prototype.startBlink=function(e){console.log("start blink smallSuits"),this._blinkingWinLevel=e,this._blinkTextureActive=this._loader.getTexture("smallSuitActive"+e+".png"),this._blinkTextureInactive=this._loader.getTexture("smallSuitInactive"+e+".png"),this._blinkTween=TweenMax.delayedCall(t.BLINK_TIME,this.onSuitBlink,null,this)},t.prototype.dispose=function(){this._blinkTween&&this._blinkTween.kill()},t.prototype.onSuitBlink=function(){for(var e=this._suits[this._blinkingWinLevel],i=e.length,n=0;n<i;n++)e[n].texture==this._blinkTextureActive?e[n].texture=this._blinkTextureInactive:e[n].texture=this._blinkTextureActive;this._blinkTween=TweenMax.delayedCall(t.BLINK_TIME,this.onSuitBlink,null,this)},t.spacingBetweenSuits=[10,18,18,19],t.startXSuits=[5,166,709,891],t.BLINK_TIME=.3,t}(PIXI.Container);t.SmallSuits=n}(t.jackpot||(t.jackpot={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.loading.Loader,o=e.egt.library.widgets.MoneyText,s=function(e){function s(){var o=e.call(this)||this;o._dropAnimationComplete=!1;var s=t.bottle.container.GameSettings;return o.glowBoxes=[],o._dropSuitsSprites=[],o._loader=n.getLoader("gameImages"),o.createBackground(),o.createCards(),o.createGlowingBoxes(),o.createTurnAnimation(),o.createWinMoney(s),o.smallSuits=new i.SmallSuits,o.smallSuits.position.set(71,-17),o.smallSuitsAnimationsCount=0,o.addChild(o.smallSuits),o}return __extends(s,e),s.prototype.playRainfallAnimation=function(e,t){for(var i=0;i<95;i++){var n=new PIXI.Sprite(this._loader.getTexture("suitDrop"+e+".png"));this.addChild(n),this._dropSuitsSprites.push(n),this.tweenDropSymbol(n,this.getRandom(0,3))}TweenMax.delayedCall(t-3,function(){this._dropAnimationComplete=!0},[],this)},s.prototype.playTurnAnimation=function(e){this.smallSuitsAnimationsCount++,this._turnAnimation.x=this._cardsContainer.x+this.cards[e].x+this.cards[e].width/2,this._turnAnimation.y=this._cardsContainer.y+this.cards[e].y+this.cards[e].height/2,this._turnAnimation.visible=!0,this._turnAnimation.gotoAndPlay(0),TweenMax.delayedCall(.5,function(){this.cards[e].scaleFigure(),this.emit(s.CARD_PULSE_STARTED)},null,this)},s.prototype.playJackpotBoxGlow=function(e){this.glowBoxes[e].alpha=1,this.glowBoxes[e].play()},s.prototype.animateWinMoneyInTitle=function(e,t,i,n){TweenMax.to(this._winMoney,t,{money:e,ease:Linear.easeNone}),this._title.visible=!1,this._winMoney.visible=!0,this._winMoney.isShowingCredits=i,this._winMoney.denomination=n},s.prototype.dispose=function(){this.lights.dispose();for(var e=this.cards.length,t=0;t<e;t++)this.cards[t].off(i.JackpotCard.ON_PULSE_COMPLETE,this.onPulseComplete.bind(this)),this.cards[t].dispose();var n=this._dropSuitsSprites.length;for(t=0;t<n;t++)this.removeChild(this._dropSuitsSprites[t]);this._dropSuitsSprites=null,this.smallSuits.dispose(),this._turnAnimation.destroy()},s.prototype.tweenDropSymbol=function(e,t){e.position.x=512,e.position.y=-160,TweenMax.to(e,2,{physics2D:{velocity:this.getRandom(200,600),angle:this.getRandom(180,360),gravity:1800,friction:0},delay:t,onComplete:this._dropAnimationComplete?null:this.tweenDropSymbol,onCompleteScope:this,onCompleteParams:[e,0]})},s.prototype.createTurnAnimation=function(){for(var e=[],t=1;t<14;t++)e.push(this._loader.getTexture("turnAnimation_"+t+".png"));this._turnAnimation=new PIXI.extras.MovieClip(e),this._turnAnimation.stop(),this._turnAnimation.onComplete=function(){this.visible=!1},this._turnAnimation.loop=!1,this._turnAnimation.scale=new PIXI.Point(.9,.9),this._turnAnimation.anchor=new PIXI.Point(.5,.5),this.addChild(this._turnAnimation),this._turnAnimation.visible=!1},s.prototype.createGlowingBoxes=function(){for(var e=["clubs","diamonds","hearts","spades"],t=[20,180,724,901],i=e.length,n=0;n<i;n++){for(var o=[],s=1;s<9;s++)o.push(this._loader.getTexture("glow_"+e[n]+"_0"+s+".png"));this.glowBoxes[n]=new PIXI.extras.MovieClip(o),this.glowBoxes[n].position.set(t[n],-60),this.glowBoxes[n].alpha=0,this.glowBoxes[n].animationSpeed=.5,this.addChild(this.glowBoxes[n])}},s.prototype.createBackground=function(){this._background=new PIXI.Sprite(this._loader.getTexture("jackpotBackground.png")),this._background.position.set(10,-1),this._title=new PIXI.Sprite(this._loader.getTexture("jackpotTitle.png")),this._title.x=this._background.x+(this._background.width-this._title.width)/2,this._title.y=30,this.lights=new i.LightStrip,this.addChild(this._background),this.addChild(this._title),this.addChild(this.lights)},s.prototype.createWinMoney=function(e){this._winMoney=new o({currency:e.currencyISO,moneyFontSize:48,currencyFontSize:26,align:"center",shouldHideWhenMoneyValueIsZero:!0,bounds:{width:536,height:83},diamond:e.diamondPlay?n.getLoader("gameImages").getTexture("diamond.png"):null,diamondPlay:e.diamondPlay,hideCents:e.currencyHideCents,diamondScaleCoef:.5}),this._winMoney.style={fill:16777215,fontWeight:"bold",stroke:20602,strokeThickness:4},this._winMoney.currencyStyle={fill:16777215,fontWeight:"normal",stroke:20602,strokeThickness:4,lineJoin:"round"},this._winMoney.position.set((s.WIDTH-536)/2,25),this._winMoney.visible=!1,this.addChild(this._winMoney)},s.prototype.onPulseComplete=function(e,t){var n=this;this.smallSuits.suitsFulfillCount[t.suit]++;var o=new PIXI.Sprite(e.texture);o.anchor=new PIXI.Point(.5,.5),this.addChild(o);var a=this._cardsContainer.x+t.x+e.x,r=this._cardsContainer.y+t.y+e.y;o.position.set(a,r);var l=new PIXI.Sprite(e.texture);l.scale.x=l.scale.y=.57;var c=this.smallSuits.suitsFulfillCount[t.suit]>1?this.smallSuits.suitsFulfillCount[t.suit]-1:0,u=Math.round(this.smallSuits.x+i.SmallSuits.startXSuits[t.suit]+l.width/2+c*(l.width+i.SmallSuits.spacingBetweenSuits[t.suit])),h=this.smallSuits.y+l.height/2;TweenMax.to(o,.6,{bezier:[{x:u-40,y:h-40},{x:u,y:h}],rotation:2*Math.PI,onComplete:function(e,t,i){n.smallSuitsAnimationsCount--,n.removeChild(e),e=null,n.smallSuits.updateSuitToActiveByTypeAndPos(t.suit,i),n.emit(s.TWEENING_SUIT_TO_TOP_COMPLETE)},onCompleteParams:[o,t,this.smallSuits.suitsFulfillCount[t.suit]-1]}),TweenMax.to(o.scale,.6,{x:.57,y:.57}),this.emit(s.CARD_PULSE_COMPLETE)},s.prototype.createCards=function(){this._cardsContainer=new PIXI.Container,this.cards=[];for(var e=0;e<12;e++){var t=new i.JackpotCard;t.x=e%4*(t.width+s.CARD_RIGHT_MARGIN)+1,t.y=Math.floor(e/4)*(t.height+s.CARD_BOTTOM_MARGIN),t.buttonMode=!0,t.on(i.JackpotCard.ON_PULSE_COMPLETE,this.onPulseComplete.bind(this)),this._cardsContainer.addChild(t),this.cards[e]=t}this._cardsContainer.x=(s.WIDTH-this._cardsContainer.width)/2,this._cardsContainer.y=(s.HEIGHT-this._cardsContainer.height)/2+s.CARDS_Y_OFFSET,this.addChild(this._cardsContainer)},s.prototype.getRandom=function(e,t){return e+Math.random()*(t-e)},s.TWEENING_SUIT_TO_TOP_COMPLETE="tweeningSuitToTopComplete",s.CARD_PULSE_STARTED="cardPulseStarted",s.CARD_PULSE_COMPLETE="cardPulseComplete",s.WIDTH=1124,s.HEIGHT=536,s.CARD_BOTTOM_MARGIN=7,s.CARD_RIGHT_MARGIN=31,s.CARDS_Y_OFFSET=44,s}(PIXI.Container);i.JackpotView=s}(i.jackpot||(i.jackpot={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t,i,n,o){void 0===n&&(n=0);var s=e.call(this)||this;s._spriteCount=t,s._animationTime=i,s._gravity=n,s._textures=o;for(var a=0;a<t;a++){var r=new PIXI.Sprite;r.texture=s.chooseTexture(),s.addChild(r)}return s}return __extends(t,e),t.prototype.explode=function(){for(var e=0;e<this.children.length;e++){var t=this.children[e],i=this.generateAngle(),n=this.generateVelocity();TweenLite.to(t.position,this._animationTime,{physics2D:{velocity:n,xProp:"x",yProp:"y",acceleration:.025,angle:i},onCompleteParams:[t],onComplete:this.onAnimComplete,onCompleteScope:this}),TweenLite.to(t,this._animationTime,{ease:Power2.easeIn,alpha:0})}},t.prototype.generateAngle=function(){return Math.floor(360*Math.random()+1)},t.prototype.generateVelocity=function(){return Math.floor(350*Math.random()+250)},t.prototype.onAnimComplete=function(e){this.removeChild(e)},t.prototype.chooseTexture=function(){return this._textures[Math.floor(Math.random()*this._textures.length)]},t}(PIXI.Container);e.FireworksView=t}(e.jackpot||(e.jackpot={}))}(e.views||(e.views={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=function(e){function n(){var o=e.call(this)||this,s=i.getLoader("gameImages");o.jackpotMask=new PIXI.Graphics,o.jackpotMask.beginFill(16711680),o.jackpotMask.drawRect(0,0,PIXI.renderer.width,PIXI.renderer.height),o.jackpotMask.endFill(),o.jackpotMask.pivot.set(o.jackpotMask.width/2,o.jackpotMask.height/2),o.jackpotMask.position.copy(o.jackpotMask.pivot),o.jackpotMask.scale.x=1e-4,o._jackpotTitleTop=new PIXI.Sprite(s.getTexture("jackpotTitleTop.png")),o._jackpotTitleBottom=new PIXI.Sprite(s.getTexture("jackpotTitleBottom.png")),o._jackpotTitleTop.pivot.set(o._jackpotTitleTop.width/2,o._jackpotTitleTop.height/2),o._jackpotTitleBottom.pivot.set(o._jackpotTitleBottom.width/2,o._jackpotTitleBottom.height/2),o._jackpotTitleTop.position.set(640,208),o._jackpotTitleBottom.x=o._jackpotTitleTop.x,o._jackpotTitleBottom.y=o._jackpotTitleTop.y+o._jackpotTitleTop.height;for(var a=[],r=[PIXI.renderer.width/2,o.getRandomInt(300,700),o.getRandomInt(300,700),o.getRandomInt(300,700)],l=[PIXI.renderer.height/2,o.getRandomInt(120,520),o.getRandomInt(120,520),o.getRandomInt(300,520)],c=[0,1,2,2.8],u=0;u<7;u++)a[u]=s.getTexture("star"+u+".png");for(u=0;u<4;u++){var h=new t.FireworksView(200,1.8,0,a);o.addChild(h),h.visible=!1,h.position=new PIXI.Point(r[u],l[u]),TweenMax.delayedCall(c[u],o.explodeFirework,[h],o)}return o.addChild(o.jackpotMask),o.addChild(o._jackpotTitleTop),o.addChild(o._jackpotTitleBottom),new TimelineMax({onComplete:function(){this.emit(n.COMPLETE)},callbackScope:o}).to(o._jackpotTitleTop,2,{rotation:2*Math.PI,ease:Elastic.easeOut}).to(o._jackpotTitleBottom,2,{rotation:2*Math.PI,ease:Elastic.easeOut},0).to(o._jackpotTitleTop.scale,.3,{x:.7,y:.78,ease:Linear.easeNone},4).to(o._jackpotTitleBottom.scale,.3,{x:.7,y:.78,ease:Linear.easeNone},4).to(o._jackpotTitleTop.position,.3,{x:704,y:320,ease:Linear.easeNone},4).to(o._jackpotTitleBottom.position,.3,{x:560,y:320,ease:Linear.easeNone},4).to(o._jackpotTitleTop,.3,{rotation:2*Math.PI+Math.PI/2,ease:Linear.easeNone},4).to(o._jackpotTitleBottom,.3,{rotation:2*Math.PI+Math.PI/2,ease:Linear.easeNone},4).to(o.jackpotMask.scale,.2,{x:1,ease:Linear.easeNone}).to(o._jackpotTitleTop.position,.227,{x:1800,ease:Linear.easeNone},"-=0.2").to(o._jackpotTitleBottom.position,.227,{x:-180,ease:Linear.easeNone},"-=0.227"),o}return __extends(n,e),n.prototype.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},n.prototype.explodeFirework=function(e){e.visible=!0,e.explode()},n.COMPLETE="complete",n}(PIXI.Container);t.JackpotShowAnimation=n}(t.jackpot||(t.jackpot={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(){var t=e.call(this)||this;t.suits=[],t.suitPositions=[],t.cardPositions=[];for(var i=0;i<12;i++){var n=Math.floor(i/3),o=i%3;0==o&&(t.suits[n]=[],t.suitPositions[n]=[]),t.suits[n][o]=!1,t.cardPositions[i]=i}return t}return __extends(t,e),t.prototype.removeCardPosition=function(e){var t=this.cardPositions.indexOf(e);-1!=t&&this.cardPositions.splice(t,1)},t.prototype.addCardAtPosition=function(e,t){var i=Math.floor(e/13),n=this.suits[i].lastIndexOf(!0);this.suits[i][n+1]=!0,this.suitPositions[i][n+1]=t},Object.defineProperty(t.prototype,"remainingSuits",{get:function(){if(null==this._remainingSuits){for(var e={},t=0;t<4;t++)for(var i=this.suits[t].lastIndexOf(!0)+1;i<3;i++){var n=Math.round(Math.random()*(this.cardPositions.length-1));e[this.cardPositions[n]]=t,this.cardPositions.splice(n,1)}this._remainingSuits=e}return this._remainingSuits},enumerable:!0,configurable:!0}),t}(Pluck.Model);e.JackpotModel=t}(e.jackpot||(e.jackpot={}))}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.views.jackpot.JackpotView,o=e.egt.baseslot.views.jackpot.JackpotShowAnimation,s=e.egt.library.sound.SoundManager,a=e.egt.baseslot.models.server.response.BaseResponse,r=e.egt.baseslot.models.Notifications,l=e.egt.library.Device,c=function(e){function i(){var i=e.call(this)||this;return i._currentlyHoveredCardIndex=-1,i._endGame=!1,i._view=new PIXI.Container,i._jackpotView=t.bottle.container.JackpotView.instance(),i._jackpotView.position.set(79,59),i._jackpotView.on(n.CARD_PULSE_STARTED,i.onCardPulseStarted,i),i._jackpotView.on(n.CARD_PULSE_COMPLETE,i.onCardPulseComplete,i),i._view.addChild(i._jackpotView),i._model=t.bottle.container.JackpotModel.instance(),i.setupEventListeners(!0),i.mainModel.currentState?(i.handleRecovery(),TweenMax.delayedCall(0,i.onShowComplete,null,i)):(i._showAnimation=t.bottle.container.JackpotShowAnimation.instance(),i._showAnimation.once(o.COMPLETE,i.onShowComplete,i),i._jackpotView.mask=i._showAnimation.jackpotMask,i._view.addChild(i._showAnimation),i.mainModel.soundManager.play("jackpotIntroSound")),i}return __extends(i,e),i.prototype.getInterests=function(){return[r.JACKPOT_RECEIVED,r.COLLECT_CLICKED,r.WIN_MONEY_COLLECT_ANIMATION_COMPLETE,r.NO_CONNECTION]},i.prototype.handleNotification=function(e){switch(e.name){case r.JACKPOT_RECEIVED:this.handleResponse();break;case r.COLLECT_CLICKED:this.sendNotification(r.JACKPOT_WIN_MONEY_COLLECT),this.stopJackpotWinSound(),this._jackpotView.animateWinMoneyInTitle(0,this.mainModel.gameSettings.collectMoneyAnimationTime,this.mainModel.isDisplayingCredits,this.mainModel.denomination);break;case r.WIN_MONEY_COLLECT_ANIMATION_COMPLETE:this.completeJackpot();break;case r.NO_CONNECTION:this.toggleCardsInteraction(!1),-1!=this._currentlyHoveredCardIndex&&(this.stopJackpotCardClickSound(),this._jackpotView.cards[this._currentlyHoveredCardIndex].stopBackAnimation(),this._currentlyHoveredCardIndex=-1)}},i.prototype.dispose=function(){this._endGame=!1,this.setupEventListeners(!1),this._jackpotView.off(n.CARD_PULSE_STARTED,this.onCardPulseStarted,this),this._jackpotView.off(n.CARD_PULSE_COMPLETE,this.onCardPulseComplete,this),this._jackpotView.dispose(),this.stopJackpotWinSound(),this.stopJackpotBackgroundSound(),e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundManager",{get:function(){return this.mainModel.soundManager},enumerable:!0,configurable:!0}),i.prototype.setupEventListeners=function(e){for(var t=this._jackpotView.cards.length,i=0;i<t;i++)e?(this._jackpotView.cards[i].on(l.resolveEvent("click"),this.onCardClick,this),this._jackpotView.cards[i].on(l.resolveEvent("mouseover"),this.onMouseOverCard,this),this._jackpotView.cards[i].on(l.resolveEvent("mouseout"),this.onMouseOutCard,this)):(this._jackpotView.cards[i].off(l.resolveEvent("click"),this.onCardClick,this),this._jackpotView.cards[i].off(l.resolveEvent("mouseover"),this.onMouseOverCard,this),this._jackpotView.cards[i].off(l.resolveEvent("mouseout"),this.onMouseOutCard,this));e?(this._jackpotView.on(n.TWEENING_SUIT_TO_TOP_COMPLETE,this.onTweeningSuitToTopComplete,this),this.soundManager.addEventListener(s.SOUND_LOADED,this.onSoundsLoaded,this)):(this._jackpotView.off(n.TWEENING_SUIT_TO_TOP_COMPLETE,this.onTweeningSuitToTopComplete,this),this.soundManager.removeEventListener(s.SOUND_LOADED,this.onSoundsLoaded,this))},i.prototype.handleResponse=function(){this._jackpotView.playTurnAnimation(this._cardClickedIndex),this._jackpotView.cards[this.mainModel.jackpotResponse.complex.pos].suit=Math.floor(this.mainModel.jackpotResponse.complex.card/13),this.model.addCardAtPosition(this.mainModel.jackpotResponse.complex.card,this.mainModel.jackpotResponse.complex.pos),this.soundManager.play("jackpotCardOpenSound"),this.model.removeCardPosition(this._cardClickedIndex),this.stopJackpotCardClickSound(),this.mainModel.response.state==a.STATE_JACKPOT?this.toggleCardsInteraction(!0):this._endGame=!0},i.prototype.handleRecovery=function(){this.toggleCardsInteraction(!1);for(var e in this.mainModel.currentState.jackpotGameState)this.model.removeCardPosition(parseInt(e)),this._jackpotView.cards[parseInt(e)].suit=Math.floor(this.mainModel.currentState.jackpotGameState[e]/13),this.model.addCardAtPosition(this.mainModel.currentState.jackpotGameState[e],parseInt(e));this._jackpotView.smallSuits.updateSuits(this.model.suits),this._jackpotView.smallSuits.updateSuitsFullFill(this.model.suits),this.toggleCardsInteraction(!0)},i.prototype.toggleCardsInteraction=function(e){if(!e||!this.mainModel.isNoConnection)for(var t=this.model.cardPositions.length,i=0;i<t;i++)this._jackpotView.cards[this.model.cardPositions[i]].interactive=e},i.prototype.completeJackpot=function(){this.parent.removeChildViewController(this),this.sendNotification(r.JACKPOT_COMPLETED)},i.prototype.startWinAnimation=function(){var e=this.model.remainingSuits;for(var t in e)this._jackpotView.cards[parseInt(t)].suit=e[t],this._jackpotView.cards[parseInt(t)].darken();for(var i=this.mainModel.jackpotResponse.complex.winLevel,n=this.model.suitPositions[i],o=n.length,s=this.mainModel.gameSettings.jackpotWinMoneyAnimationTimes[i],a=0;a<o;a++)this._jackpotView.cards[n[a]].startSuitBlink();this._jackpotView.animateWinMoneyInTitle(this.mainModel.response.winAmount,s,this.mainModel.isDisplayingCredits,this.mainModel.denomination),this._jackpotView.playJackpotBoxGlow(i),this._jackpotView.playRainfallAnimation(i,s),this._jackpotView.lights.playLightsFast(),this.stopJackpotBackgroundSound(),this._jackpotWinSound=this.soundManager.play("jackpotWinSound"+(i+1),!0),this._isJackpotWinSoundRequested=null==this._jackpotWinSound},i.prototype.stopJackpotBackgroundSound=function(){this._jackpotBackgroundSound&&(this._jackpotBackgroundSound.stop(),this._jackpotBackgroundSound=null,this._isJackpotBackgroundSoundRequested=!1)},i.prototype.stopJackpotWinSound=function(){this._jackpotWinSound&&(this._jackpotWinSound.stop(),this._jackpotWinSound=null,this._isJackpotWinSoundRequested=!1)},i.prototype.stopJackpotCardClickSound=function(){this._jackpotCardClickSound&&(this._jackpotCardClickSound.stop(),this._jackpotCardClickSound=null)},i.prototype.onCardPulseStarted=function(){this.mainModel.soundManager.play("jackpotCardFigurePulse")},i.prototype.onCardPulseComplete=function(){this.mainModel.soundManager.play("jackpotCardFigureMove")},i.prototype.onCardClick=function(e){this._cardClickedIndex=this._jackpotView.cards.indexOf(e.target),this.toggleCardsInteraction(!1),console.log("Card clicked index",this._cardClickedIndex),this.mainModel.commManager.sendJackpot(this._cardClickedIndex)},i.prototype.onMouseOverCard=function(e){var t=e.target;t.playBackAnimation(),this._currentlyHoveredCardIndex=this._jackpotView.cards.indexOf(t),this._jackpotCardClickSound||(this._jackpotCardClickSound=this.soundManager.play("jackpotCardClickSound",!0))},i.prototype.onMouseOutCard=function(e){var t=e.target,i=this._jackpotView.cards.indexOf(t);t.stopBackAnimation(),i==this._currentlyHoveredCardIndex&&(this.stopJackpotCardClickSound(),this._currentlyHoveredCardIndex=-1)},i.prototype.onShowComplete=function(){this._jackpotBackgroundSound=this.mainModel.soundManager.play("jackpotBackgroundSound",!0),this._isJackpotBackgroundSoundRequested=null==this._jackpotBackgroundSound,this.toggleCardsInteraction(!0),this.sendNotification(r.JACKPOT_SHOWN)},i.prototype.onTweeningSuitToTopComplete=function(){this._endGame&&0==this._jackpotView.smallSuitsAnimationsCount&&!this._endingWinMoneyAnimationStarted&&(this._endingWinMoneyAnimationStarted=!0,this.sendNotification(r.JACKPOT_WIN_MONEY_ANIMATION_START,null),this.startWinAnimation())},i.prototype.onSoundsLoaded=function(e){if("jackpotSounds"==e.data.soundId)if(this._isJackpotBackgroundSoundRequested)this._jackpotBackgroundSound=this.mainModel.soundManager.play("jackpotBackgroundSound",!0);else if(this._isJackpotWinSoundRequested){var t=this.mainModel.jackpotResponse.complex.winLevel;this._jackpotWinSound=this.soundManager.play("jackpotWinSound"+(t+1),!0)}},i}(Pluck.ViewController);i.JackpotController=c}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.utils.Timer,o=e.egt.library.utils.decimalToHexColorString,s=function(e){function i(){var i=e.call(this)||this;i._blinkIntervalId=-1,i.linesDrawn=0,i._gameSettings=t.bottle.container.GameSettings,i._context=document.createElement("canvas").getContext("2d"),i._context.canvas.width=PIXI.renderer.width,i._context.canvas.height=PIXI.renderer.height,i._lineTexture=PIXI.Texture.fromCanvas(i._context.canvas),i._lineSprite=new PIXI.Sprite(i._lineTexture),i._lineFilters=[],i._lineFiltersDarkened=[];var n=new PIXI.filters.DropShadowFilter;n.distance=8,n.angle=Math.PI/4,n.alpha=.9,n.blur=2;var o=new PIXI.filters.ColorMatrixFilter;return o.brightness(.7),i._lineFilters[0]=n,i._lineFiltersDarkened[0]=o,i._lineFiltersDarkened[1]=n,i.addChild(i._lineSprite),i}return __extends(i,e),i.prototype.drawLine=function(e,t){this._context.clearRect(0,0,this._context.canvas.width,this._context.canvas.height);var i=this._gameSettings.linesCoords[t].coords,n=this._gameSettings.linesCoords[t].color;this._context.strokeStyle=o(n),this._context.lineWidth=8,this._context.lineJoin="round",this._context.lineCap="round",this._context.beginPath();for(var s,a,r=Math.floor(this._gameSettings.reelHeight/this._gameSettings.numReelCards),l=i.length,c=0;c<l;c+=2)0==c?this._context.moveTo(i[c],i[c+1]):this._context.lineTo(i[c],i[c+1]);this._context.stroke();for(var u=e.length,h=0;h<u;h+=2){var d=e[h],p=e[h+1];s=this._gameSettings.reelCoordX+d*(this._gameSettings.reelWidth+this._gameSettings.reelSpacing),a=this._gameSettings.reelCoordY+p*r,this._context.clearRect(s,a,this._gameSettings.reelWidth,r),this._context.strokeRect(s,a,this._gameSettings.reelWidth,r)}this._lineTexture.update(),this._lineSprite.filters=this._lineFilters},i.prototype.clear=function(){this._context.clearRect(0,0,this._context.canvas.width,this._context.canvas.height),this.linesDrawn=0,this._lineTexture.update()},i.prototype.drawLines=function(e,t){this.linesDrawn=e;for(var i=0;i<e;i++){var n=t[i].coords,s=t[i].color;this._context.strokeStyle=o(s),this._context.lineWidth=8,this._context.lineJoin="round",this._context.lineCap="round",this._context.beginPath(),this._context.moveTo(n[0],n[1]);for(var a=2;a<n.length;a+=2)this._context.lineTo(n[a],n[a+1]);this._context.stroke()}this._lineTexture.update()},i.prototype.drawCells=function(e,t){void 0===t&&(t=1697302),this._context.clearRect(0,0,this._context.canvas.width,this._context.canvas.height),this._context.strokeStyle=o(t),this._context.lineWidth=8,this._context.lineJoin="round";for(var i,n,s=Math.floor(this._gameSettings.reelHeight/this._gameSettings.numReelCards),a=e.length,r=0;r<a;r+=2){var l=e[r],c=e[r+1];i=this._gameSettings.reelCoordX+l*(this._gameSettings.reelWidth+this._gameSettings.reelSpacing),n=this._gameSettings.reelCoordY+c*s,this._context.strokeRect(i,n,this._gameSettings.reelWidth,s)}this._lineTexture.update(),this._lineSprite.filters=this._lineFilters},i.prototype.startBlinking=function(e){this._lineSprite.filters=this._lineFilters,this._isLineDarkened=!1,this._targetBlinkCount=e?1:3,this._currentBlinkCount=0,this._blinkTimer||(this._blinkTimer=new n(.3,0),this._blinkTimer.addEventListener(n.TIMER,this.onBlinkTimer,this)),this._blinkTimer.start()},i.prototype.dispose=function(){this._blinkTimer.stop(),this.destroy(!0)},i.prototype.onBlinkTimer=function(){this._isLineDarkened?(this._lineSprite.filters=this._lineFilters,this._currentBlinkCount++):this._lineSprite.filters=this._lineFiltersDarkened,this._isLineDarkened=!this._isLineDarkened,this._isLineDarkened||this._currentBlinkCount!=this._targetBlinkCount||(this._blinkTimer.stop(),this.emit(i.BLINKING_COMPLETE))},i.BLINKING_COMPLETE="blinkingComplete",i}(PIXI.Container);i.LinesView=s}(i.winvisualization||(i.winvisualization={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.loading.Loader,o=e.egt.library.Utils,s=e.egt.library.widgets.MoneyText,a=e.egt.library.widgets.Text,r=function(e){function i(){var i=e.call(this)||this;i._isFreespinGame=!1,i._isInfoLineHidden=!1;var o=t.bottle.container.GameSettings;return i.linesView=t.bottle.container.LinesView.instance(),i._lineLabel=new a({bounds:{width:460,height:16}},"",{fontSize:16,fill:16777215,fontWeight:"bold"}),i._lineLabel.y=606,i._moneyLabel=new s({currency:o.currencyISO,moneyFontSize:16,currencyFontSize:9,shouldFitToBounds:!1,shouldHideWhenMoneyValueIsZero:!0,bounds:{width:0,height:16},diamond:o.diamondPlay?n.getLoader("gameImages").getTexture("diamond.png"):null,diamondPlay:o.diamondPlay,hideCents:o.currencyHideCents,diamondScaleCoef:.6,keepCurrencySize:!0}),i._moneyLabel.style={fill:16777215,fontWeight:"bold"},i._moneyLabel.y=i._lineLabel.y,i._moneyLabel.money=0,i._smallImagesContainer=new PIXI.Container,i.addChild(i.linesView),i.addChild(i._lineLabel),i.addChild(i._moneyLabel),i.addChild(i._smallImagesContainer),i}return __extends(i,e),Object.defineProperty(i.prototype,"isFreespinGame",{set:function(e){this._isFreespinGame=e,this.positionInfoLineWin()},enumerable:!0,configurable:!0}),i.prototype.setIsDisplayingCredits=function(e){this._moneyLabel.isShowingCredits=e,this.positionInfoLineWin()},i.prototype.updateInfoLineWin=function(e,i,n,o,s,a,r,l,c,u,h){void 0===h&&(h="");var d=t.bottle.container.GameSettings;if(this._lineLabel.visible=0!=r&&!this._isInfoLineHidden,this._moneyLabel.visible=this._lineLabel.visible,this._smallImagesContainer.visible=this._lineLabel.visible,0!=r&&!this._isInfoLineHidden){var p="";p=o?"Scatter ":n?""!=h?h:u>1?u+" x":" ":d.localization.Line+" "+s,this._lineLabel.text=p,this._moneyLabel.isShowingCredits=l,this._moneyLabel.denomination=c,this._moneyLabel.money=r,this.createSmallImages(e,i),this.positionInfoLineWin()}},i.prototype.hideInfoLineView=function(){this._lineLabel.visible=!1,this._moneyLabel.visible=!1,this._smallImagesContainer.visible=!1,this._isInfoLineHidden=!0},i.prototype.dispose=function(){this.linesView.dispose(),this._lineLabel.destroy(!0),this._moneyLabel.destroy(!0)},i.prototype.createSmallImages=function(e,t){var i=n.getLoader("gameImages"),s=o.convertToSequenceString(e),a=i.getTexture("s"+s+".png");this._smallImagesContainer.removeChildren(0,this._smallImagesContainer.children.length);for(var r=0;r<t;r++){var l=new PIXI.Sprite(a);l.x=r*(l.width+2),this._smallImagesContainer.addChild(l)}},i.prototype.positionInfoLineWin=function(){var e=this._lineLabel.width+this._moneyLabel.width+this._smallImagesContainer.width+2*i.SPACING;this._isFreespinGame?this._lineLabel.x=i.START_X_IN_FREESPIN+(i.INFO_LINE_WIDTH_IN_FREESPIN-e)/2:this._lineLabel.x=i.START_X+(i.INFO_LINE_WIDTH-e)/2,this._smallImagesContainer.x=this._lineLabel.x+this._lineLabel.width+i.SPACING,this._moneyLabel.x=this._smallImagesContainer.x+this._smallImagesContainer.width+i.SPACING,this._smallImagesContainer.y=this._lineLabel.y+(this._lineLabel.height-this._smallImagesContainer.height)/2-1},i.START_X=324,i.INFO_LINE_WIDTH=601,i.START_X_IN_FREESPIN=550,i.INFO_LINE_WIDTH_IN_FREESPIN=375,i.SPACING=5,i}(PIXI.Container);i.WinVisualizationView=r}(i.winvisualization||(i.winvisualization={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=e.egt.library.Utils,o=function(e){function t(){var o=e.call(this)||this;o._loader=i.getLoader("gameImages"),o._coinAnimationTextures=new Array;for(var s=0;s<t.TEXTURES_COUNT;s++)o._coinAnimationTextures.push(o._loader.getTexture("coin_"+n.convertToSequenceString(s)+".png"));return o._coin=new PIXI.extras.MovieClip(o._coinAnimationTextures),o._coin.anchor.set(.5,.5),o.addChild(o._coin),o}return __extends(t,e),Object.defineProperty(t.prototype,"coin",{get:function(){return this._coin},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.removeChild(this._coin),this._coinAnimationTextures.length=0,this._coinAnimationTextures=null,this.destroy()},t.TEXTURES_COUNT=63,t}(PIXI.Container);t.Coin=o}(t.coinAnimation||(t.coinAnimation={}))}(t.winvisualization||(t.winvisualization={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(t){function i(){var e=t.call(this)||this;e.tweensArray=new Array;for(var i=0;i<32;i++)e.tweenCoin(e.getCoinContainer(),e.getRandom(0,1));return e}return __extends(i,t),i.prototype.dispose=function(){for(;this.tweensArray.length>0;)this.tweensArray.pop().kill();for(var e=0,t=this.children;e<t.length;e++){var i=t[e];this.removeChild(i);var n=i;n.dispose(),n=null}},i.prototype.tweenCoin=function(e,t){e.x=this.getRandom(550,660),e.y=720+e.height,e.rotation=360*Math.random();var i=TweenMax.to(e,2.5,{physics2D:{velocity:this.getRandom(1500,1800),angle:this.getRandom(-105,-75),gravity:2400,friction:0},rotation:e.rotation+this.getRandom(1,5),onComplete:this.tweenCoin,onCompleteParams:[e,0],onCompleteScope:this,delay:t,ease:Linear.easeNone});this.tweensArray.push(i)},i.prototype.getCoinContainer=function(){var t=new e.Coin;return t.coin.gotoAndPlay(this.getRandom(1,63)),this.addChild(t),t},i.prototype.getRandom=function(e,t){return Math.random()*(t-e)+e},i.COINS_COUNT=32,i}(PIXI.Container);e.CoinAnimation=t}(e.coinAnimation||(e.coinAnimation={}))}(e.winvisualization||(e.winvisualization={}))}(e.views||(e.views={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(t){!function(i){var n=function(i){function n(){var e=i.call(this)||this;return e.reset(!1),e}return __extends(n,i),Object.defineProperty(n.prototype,"mainModel",{get:function(){return e.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"betResponse",{get:function(){return this.mainModel.betResponse},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"gameSettings",{get:function(){return this.mainModel.gameSettings},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cells",{get:function(){return this._isLineCombination?this.betResponse.complex.lines[this._currentIndex].cells:this.betResponse.complex.scatters[this._currentIndex].cells},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineNumber",{get:function(){return this._isLineCombination?this.mainModel.gameSettings.lineGame?this.betResponse.complex.lines[this._currentIndex].line:this._currentIndex:-1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"card",{get:function(){return this._isLineCombination?this.betResponse.complex.lines[this._currentIndex].card:this.betResponse.complex.scatters[this._currentIndex].scatterName},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cardsCount",{get:function(){return this.mainModel.gameSettings.lineGame?this.cells.length/2:this.combinationLen},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"combinationLen",{get:function(){return this.isLineCombination?this.betResponse.complex.lines[this._currentIndex].len:this.betResponse.complex.scatters[this._currentIndex].cells.length/2},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"lineWinAmount",{get:function(){return this._isLineCombination?this.betResponse.complex.lines[this._currentIndex].winAmount:this.betResponse.complex.scatters[this._currentIndex].winAmount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLineCombination",{get:function(){return this._isLineCombination},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isCycleComplete",{get:function(){return this._isCycleComplete},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"shouldDisplayMultiplierImage",{get:function(){return!!(this.gameSettings.hasMultiplierImages&&this.currentMultiplier>1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentMultiplier",{get:function(){return this.betResponse.complex.lines.length?this.betResponse.complex.lines[0].multiplier:-1},enumerable:!0,configurable:!0}),n.prototype.calculateReelsWidth=function(){var e=this.betResponse.complex.lines.length,t=this.betResponse.complex.lines,i=0;if(this.gameSettings.lineGame&&e){var n=t[0].cells.length;i=n;for(var o=1;o<e;o++)(n=t[o].cells.length)<i&&(i=n);i/=2}else i=this.gameSettings.numReels;return this.gameSettings.reelWidth*i+this.gameSettings.reelSpacing*(i-1)},n.prototype.getWinSound=function(){if(void 0===this._winSound){var e=this.betResponse.complex.freespinScatters;if(0!=this.betResponse.complex.freespins&&e)for(var t=e.length,i=0;i<t;i++){var n=this.gameSettings.getScatterConfig(e[i]);this.mainModel.isFreespinGame&&void 0!=n.freespinSoundInFs?this._winSound=n.freespinSoundInFs:this._winSound=n.freespinSound;break}else{this._winSound=null;var o=this.mainModel.spinAnalyzer.fullLineCard,s=this.mainModel.spinAnalyzer.strongestCard;if(-1!=o){for(var a=this.gameSettings.fullLineSounds.length,i=0;i<a;i++)if(this.gameSettings.fullLineSounds[i].card==o){this._winSound=this.gameSettings.fullLineSounds[i].name;break}this._winSound||(this._winSound="win"+o)}else this._winSound="win"+s}}return this._winSound},n.prototype.reset=function(e){this._isLineCombination=0==this.betResponse.complex.scatters.length,this._currentIndex=0,this._isCycleComplete=e,this._winSound=void 0},n.prototype.gotoNextWinningCombination=function(){this._currentIndex++;var e=!1;this._isLineCombination&&this._currentIndex==this.betResponse.complex.lines.length?(this.betResponse.complex.scatters.length&&(this._isLineCombination=!1),e=!0,this._currentIndex=0):this._isLineCombination||this._currentIndex!=this.betResponse.complex.scatters.length||(this.betResponse.complex.lines.length?this._isLineCombination=!0:e=!0,this._currentIndex=0),e&&(this._isCycleComplete=!0,this.sendNotification(t.Notifications.WIN_VISUALIZATION_CYCLE_COMPLETE))},n}(Pluck.Model);i.WinVisualizationModel=n}(t.winvisualization||(t.winvisualization={}))}(e.models||(e.models={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.views.winvisualization.LinesView,o=e.egt.baseslot.models.server.response.BaseResponse,s=e.egt.baseslot.models.Notifications,a=e.egt.library.utils.log,r=function(e){function i(){var i=e.call(this)||this;return i._isCardSoundPlaying=!1,i._isWinMoneyAnimationComplete=!1,i.log("Initializing..."),i._view=t.bottle.container.WinVisualizationView.instance(),i._model=t.bottle.container.WinVisualizationModel.instance(),i.view.isFreespinGame=i.mainModel.isFreespinGame,i.view.linesView.on(n.BLINKING_COMPLETE,i.onBlinkingComplete,i),i.processCurrentState(),i.mainModel.isNoConnection&&i.view.hideInfoLineView(),i.mainModel.shouldPlayFullVisualization||i.start(),i}return __extends(i,e),i.prototype.getInterests=function(){return[s.SPIN_CLICKED,s.GAMBLE_CLICKED,s.WIN_COLLECTED,s.EXPAND_COMPLETE,s.WIN_MONEY_ANIMATION_COMPLETE,s.WIN_VISUALIZATION_CYCLE_COMPLETE,s.JACKPOT_STARTED,s.FREESPIN_INTRO_REFRESH_SCREEN,s.FREESPIN_RETRIGGER_REFRESH_SCREEN,s.FREESPIN_OUTRO_REFRESH_SCREEN,s.FREESPIN_OUTRO_STARTED,s.NO_CONNECTION,s.CURRENCY_CHANGED]},i.prototype.handleNotification=function(e){switch(this.log("Handle notification[%s]",e.name),e.name){case s.SPIN_CLICKED:case s.GAMBLE_CLICKED:case s.WIN_COLLECTED:case s.JACKPOT_STARTED:this.completeWinVisualization();break;case s.EXPAND_COMPLETE:this.start(!0);break;case s.WIN_MONEY_ANIMATION_COMPLETE:this._isWinMoneyAnimationComplete=!0,this._isCardSoundPlaying||0!=this.mainModel.betResponse.complex.freespins||(null!=this._winSound&&this._winSound.stop(),this.soundManager.play("moneyAnimationEndSound")),this.mainModel.betResponse.state==o.STATE_GAMBLE||0!=this.mainModel.betResponse.complex.freespins||this.mainModel.isAutoplayGame||this.view.hideInfoLineView();break;case s.WIN_VISUALIZATION_CYCLE_COMPLETE:this.checkEnterFreespinsScenarionComplete();break;case s.FREESPIN_INTRO_REFRESH_SCREEN:case s.FREESPIN_RETRIGGER_REFRESH_SCREEN:this.completeWinVisualization();break;case s.FREESPIN_OUTRO_REFRESH_SCREEN:this.view.isFreespinGame=!1,this.gameSettings.restoreReels&&(this.mainModel.betResponse.state==o.STATE_GAMBLE?this.start():this.completeWinVisualization());break;case s.FREESPIN_OUTRO_STARTED:this._winSound&&this._winSound.stop();break;case s.NO_CONNECTION:this.view.hideInfoLineView();break;case s.CURRENCY_CHANGED:this.view.setIsDisplayingCredits(this.mainModel.isDisplayingCredits)}},i.prototype.dispose=function(){this.log("Disposing..."),this.view.linesView.off(n.BLINKING_COMPLETE,this.onBlinkingComplete,this),this._winSound&&(this._winSound.removeEventListener("ended",this.onWinSoundEnded,this),this._winSound.stop())},Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameSettings",{get:function(){return this.mainModel.gameSettings},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundManager",{get:function(){return this.mainModel.soundManager},enumerable:!0,configurable:!0}),i.prototype.start=function(e){void 0===e&&(e=!1),this.log("Start, full visualization[%s]",e),this.model.reset(!e),this.showCurrentWinCombination(),e&&(this.createMultiplierImages(),this.mainModel.shouldPlayCoins()?(this._isCardSoundPlaying=!1,this._winSound=this.soundManager.play("coinsSound")):(this._isCardSoundPlaying=!0,this._winSound=this.soundManager.play(this.model.getWinSound())),this._winSound?this._winSound.addEventListener("ended",this.onWinSoundEnded,this):this.onWinSoundEnded())},i.prototype.createMultiplierImages=function(){this.model.shouldDisplayMultiplierImage&&this.sendNotification(s.WIN_CREATE_MULTIPLIER_IMAGES,{reelsWidth:this.model.calculateReelsWidth(),currentMultiplier:this.model.currentMultiplier})},i.prototype.processCurrentState=function(){this.mainModel.currentState&&this.mainModel.currentState.state==o.STATE_FREESPIN&&(this._freespinScenarioComplete=!0)},i.prototype.showCurrentWinCombination=function(){this.log("Show current win combinations");var e=0,t="",i=this.model.lineNumber;if(this.model.isLineCombination)if(this.gameSettings.lineGame)i+=1,this.view.linesView.drawLine(this.model.cells,this.model.lineNumber);else{var n=this.gameSettings.comboColors[this.gameSettings.comboColors.length-this.mainModel.betResponse.complex.lines.length+this.model.lineNumber];if(this.view.linesView.drawCells(this.model.cells,n),this.mainModel.betResponse.complex.lines[this.model.lineNumber].multipliersWinInfo){for(var o=0;o<this.mainModel.betResponse.complex.lines[this.model.lineNumber].multipliersWinInfo.length;o++)0!=o&&(t+=" + "),t+=this.mainModel.betResponse.complex.lines[this.model.lineNumber].multipliersWinInfo[o].multiplier+" x ",t+=""+this.mainModel.betResponse.complex.lines[this.model.lineNumber].multipliersWinInfo[o].count;t+=" x "}else e=this.mainModel.betResponse.complex.lines[this.model.lineNumber].count}else this.gameSettings.scattersWithoutCells&&-1!=this.gameSettings.scattersWithoutCells.indexOf(this.model.card)?this.view.linesView.clear():this.view.linesView.drawCells(this.model.cells);this.view.linesView.startBlinking(!this.model.isCycleComplete),this.view.updateInfoLineWin(this.model.card,this.model.cardsCount,!this.mainModel.gameSettings.lineGame,!this.model.isLineCombination,i,1,this.model.lineWinAmount,this.mainModel.isDisplayingCredits,this.mainModel.denomination,e,t)},i.prototype.checkEnterFreespinsScenarionComplete=function(){0!=this.mainModel.betResponse.complex.freespins&&!this._freespinScenarioComplete&&this.model.isCycleComplete&&this._freespinSoundEnded&&(this._freespinScenarioComplete=!0,this.sendNotification(s.ENTER_FREESPINS_SCENARIO_COMPLETE))},i.prototype.completeWinVisualization=function(){this.log("Win visualization completed, removing controller..."),this.mainModel.shouldPlayFullVisualization=!1,this.parent.removeChildViewController(this)},i.prototype.onBlinkingComplete=function(){this.model.gotoNextWinningCombination(),this.showCurrentWinCombination()},i.prototype.onWinSoundEnded=function(){this.log("Win sound ended"),this._isCardSoundPlaying=!1,0!=this.mainModel.betResponse.complex.freespins||this._isWinMoneyAnimationComplete?(this._freespinSoundEnded=!0,this.checkEnterFreespinsScenarionComplete()):this._winSound=this.soundManager.play("creditAnimationSound")},i=__decorate([a.decorator],i)}(Pluck.ViewController);i.WinVisualizationController=r}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.library.utils.Timer,n=e.egt.library.loading.Loader,o=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.displayMultiplierImage=function(e,t,i,o,s){var a=n.getLoader("gameImages"),r=new PIXI.Sprite(a.getTexture("x"+s.toString()+".png"));r.x=i+(e-r.width)/2,r.y=o+(t-r.height)/2,this.xImageContainer.addChild(r)},t.prototype.startBlinkIntervalxImage=function(){this._blinkTimer&&this._blinkTimer.stop(),this.xImageContainer.visible=!0,this._blinkTimer||(this._blinkTimer=new i(.5,0),this._blinkTimer.addEventListener(i.TIMER,this.blinkxImage,this)),this._blinkTimer.start()},t.prototype.blinkxImage=function(){this.xImageContainer.visible=!this.xImageContainer.visible},t.prototype.stopBlinkIntervalxImage=function(){this._blinkTimer&&this._blinkTimer.stop(),this._xImageContainer&&(this._xImageContainer.parent.removeChild(this._xImageContainer),this._xImageContainer=null)},Object.defineProperty(t.prototype,"xImageContainer",{get:function(){return this._xImageContainer||(this._xImageContainer=new PIXI.Container,this._xImageContainer.visible=!1,this.addChildAt(this._xImageContainer,0)),this._xImageContainer},enumerable:!0,configurable:!0}),t}(PIXI.Container);t.MultiplierXImageView=o}(t.winvisualization||(t.winvisualization={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.models.server.response.BaseResponse,o=e.egt.baseslot.models.Notifications,s=e.egt.library.utils.log,a=function(e){function i(){var i=e.call(this)||this;return i._view=t.bottle.container.MultiplierXImageView.instance(),i}return __extends(i,e),i.prototype.getInterests=function(){return[o.SPIN_CLICKED,o.GAMBLE_CLICKED,o.WIN_COLLECTED,o.JACKPOT_STARTED,o.WIN_MONEY_ANIMATION_COMPLETE,o.FREESPIN_INTRO_REFRESH_SCREEN,o.FREESPIN_RETRIGGER_REFRESH_SCREEN,o.FREESPIN_OUTRO_REFRESH_SCREEN,o.WIN_CREATE_MULTIPLIER_IMAGES,o.WIN_STOP_BLINK_INTERVAL_X_IMAGES]},i.prototype.handleNotification=function(e){switch(this.log("Handle notification[%s]",e.name),e.name){case o.WIN_CREATE_MULTIPLIER_IMAGES:this.createMultiplierImages(e.body);break;case o.WIN_STOP_BLINK_INTERVAL_X_IMAGES:this.view.stopBlinkIntervalxImage();break;case o.SPIN_CLICKED:case o.GAMBLE_CLICKED:case o.WIN_COLLECTED:case o.JACKPOT_STARTED:case o.FREESPIN_RETRIGGER_REFRESH_SCREEN:case o.FREESPIN_INTRO_REFRESH_SCREEN:case o.WIN_MONEY_ANIMATION_COMPLETE:this.completeWinVisualization();break;case o.FREESPIN_OUTRO_REFRESH_SCREEN:this.gameSettings.restoreReels&&this.mainModel.betResponse.state!=n.STATE_GAMBLE&&this.completeWinVisualization()}},i.prototype.dispose=function(){this.log("Disposing...")},Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameSettings",{get:function(){return this.mainModel.gameSettings},enumerable:!0,configurable:!0}),i.prototype.createMultiplierImages=function(e){this.view.displayMultiplierImage(e.reelsWidth,this.gameSettings.reelHeight,this.gameSettings.reelCoordX,this.gameSettings.reelCoordY,e.currentMultiplier),this.view.startBlinkIntervalxImage()},i.prototype.completeWinVisualization=function(){this.log("Win visualization completed, removing controller..."),this.parent.removeChildViewController(this)},i=__decorate([s.decorator],i)}(Pluck.ViewController);i.MultiplierXImageController=a}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.models.Notifications,o=e.egt.library.loading.Loader,s=e.egt.library.Utils,a=e.egt.baseslot.models.server.response.BaseResponse,r=e.egt.baseslot.models.Resources,l=e.egt.library.utils.log,c=e.egt.baseslot.views.VideoPlayer,u=e.egt.baseslot.views.VideoPlayerConfig,h=function(e){function i(){var t=e.call(this)||this;return t._videos=[],t._requestedVideos={},t._winVideosStarted=!1,t._nonWinningExpandCells=[],t._nonWinningExpandImages=[],t._createdInstances=[],t._cellsForEachVideo=[],t._expandSoundName="expandSound",t._view=new PIXI.Container,t.autoDispose=!0,t.defineVideos(t.mainModel.shouldPlayFullVisualization),t.mainModel.shouldPlayFullVisualization?t.playExpandVideo():t.playWinVideos(!0),t}return __extends(i,e),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameSettings",{get:function(){return this.mainModel.gameSettings},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),i.prototype.getInterests=function(){return[n.WIN_COLLECTED,n.SPIN_CLICKED,n.GAMBLE_CLICKED,n.VIDEO_LOADED,n.JACKPOT_STARTED,n.FREESPIN_INTRO_REFRESH_SCREEN,n.FREESPIN_RETRIGGER_REFRESH_SCREEN,n.FREESPIN_OUTRO_REFRESH_SCREEN,n.EXPAND_COMPLETE]},i.prototype.handleNotification=function(e){switch(e.name){case n.SPIN_CLICKED:case n.GAMBLE_CLICKED:case n.WIN_COLLECTED:case n.JACKPOT_STARTED:this.parent.removeChildViewController(this);break;case n.EXPAND_COMPLETE:this.playWinVideos();break;case n.VIDEO_LOADED:this.onVideoLoaded(e.body.loader);break;case n.FREESPIN_INTRO_REFRESH_SCREEN:case n.FREESPIN_RETRIGGER_REFRESH_SCREEN:this.parent.removeChildViewController(this);break;case n.FREESPIN_OUTRO_REFRESH_SCREEN:this.gameSettings.restoreReels&&(this.mainModel.betResponse.state==a.STATE_GAMBLE?(this.destroyAllVideos(),this.defineVideos(!1),this.playWinVideos(!0)):this.parent.removeChildViewController(this))}},i.prototype.dispose=function(){this.sendNotification(n.SHOW_ALL_CELLS),this.destroyAllVideos(),e.prototype.dispose.call(this)},i.prototype.playExpandVideo=function(){if(this.shouldPlayExpand()){var e=this.mainModel.betResponse.complex.expand;if(null!=e&&e.length)if(this._videos[this.gameSettings.reelVideos.length])this.mainModel.soundManager.play(this._expandSoundName),this.playVideo(this.gameSettings.reelVideos.length,!1);else{var t=0;this.mainModel.soundManager.play(this._expandSoundName)&&(t=this.mainModel.soundManager.getSoundDuration(this._expandSoundName)),TweenMax.delayedCall(t,this.onExpandComplete,null,this)}else TweenMax.delayedCall(0,this.onExpandComplete,null,this)}},i.prototype.getVideoIndex=function(e,t,i){var n=i?this.gameSettings.reelVideos.length:this.mainModel.spinAnalyzer.getCardAfterExpand(e,t),o=this.gameSettings.getScatterConfig(n),s=this.mainModel.betResponse.complex.freespinScatters;if(s&&o&&-1!=o.freespinVideoIndex)for(var a=s.length,r=0;r<a;r++)if(s[r]==n){n=this.mainModel.isFreespinGame&&void 0!=o.freespinVideoIndexInFs?o.freespinVideoIndexInFs:o.freespinVideoIndex;break}return n},i.prototype.createVideo=function(e,t,i){var n=this.getVideoIndex(e,t,i),s=this.getVideoConfig(n);if(!s)return!1;if(!this._videos[n]){var a=o.getLoader(s.loaderId);if(!a)throw"Unable to find loader for ID["+s.loaderId+"]";if(!a.isLoaded())return i||(this._requestedVideos[n]||(this._requestedVideos[n]=[]),this._requestedVideos[n].push({row:t,col:e})),!1;delete this._requestedVideos[n];var r=a.getTextureSequence(s.frameName,"png"),l=new u(s);void 0===s.loop&&(l.loop=!i);var h=new c(r,l);this._cellsForEachVideo[n]=[],this._videos[n]=h,i&&this._videos[n].addEventListener(c.VIDEO_COMPLETE,this.onExpandComplete,this)}return this.createVideoInstance(e,t,n,i),!0},i.prototype.getWinVideoLoaderIdPrefix=function(){return r.WIN_VIDEO_LOADER_ID_PREFIX},i.prototype.createVideoInstance=function(e,t,i,n){var o=this.getVideoConfig(i);if(o.onWholeReel&&(t=0),null==this._createdInstances[this.getCellIndex(e,t)]){var s=new PIXI.Sprite,a=this.gameSettings.reelWidth,r=o.onWholeReel?this.gameSettings.reelHeight:this.gameSettings.reelHeight/this.gameSettings.numReelCards,l=o.offsetX?o.offsetX:0,c=o.offsetY?o.offsetY:0;s.x=this.gameSettings.reelCoordX+e*(this.gameSettings.reelWidth+this.gameSettings.reelSpacing)-(this._videos[i].width-a)/2+l,s.y=this.gameSettings.reelCoordY+t*r-(this._videos[i].height-r)/2+c,this._videos[i].addInstance(s);for(var u=o.onWholeReel?this.gameSettings.numReelCards:t+1,h=t;h<u;h++)this._cellsForEachVideo[i].push(e),this._cellsForEachVideo[i].push(h);n||(this._createdInstances[this.getCellIndex(e,t)]=s),this._videos[i].width>this.gameSettings.reelWidth||this._videos[i].height>this.gameSettings.reelHeight/this.gameSettings.numReelCards?this.view.addChild(s):this.view.addChildAt(s,0)}},i.prototype.defineVideos=function(e){var t=this.mainModel.betResponse.complex.expand,i=this.mainModel.betResponse.complex.lines,n=this.mainModel.betResponse.complex.scatters;t&&this.defineVideoCells(t,!0,e);for(var o=i.length,s=0;s<o;s++)this.defineVideoCells(i[s].cells,!1);o=n.length;for(s=0;s<o;s++)this.defineVideoCells(n[s].cells,!1)},i.prototype.defineVideoCells=function(e,t,i){for(var n=e.length,o=0;o<n;o+=2){var s=e[o],a=e[o+1];null!=this.getVideoConfig(this.getVideoIndex(s,a,t))&&(t?(this._nonWinningExpandCells.push(this.getCellIndex(s,a)),i&&this.createVideo(s,a,t)):this.createVideo(s,a,!1)&&this.removeNonWinningExpandCell(s,a))}},i.prototype.getVideoConfig=function(e){var t=null;if(e==this.gameSettings.reelVideos.length){if(null==(t=this.gameSettings.expandVideo))return null;t.loaderId="expand",t.frameName="expand_"}else{if(null==(t=this.gameSettings.reelVideos[e]))return null;t.loaderId||(t.loaderId=this.getWinVideoLoaderIdPrefix()+e),t.frameName||(t.frameName=s.convertToSequenceString(e)+"_")}var i=this.resolveVideoConfig(t);return null!=i&&null!=i.suffix&&(i.loaderId||(i.loaderId=t.loaderId+i.suffix),i.frameName||(i.frameName=t.frameName.replace("_",i.suffix+"_"))),i},i.prototype.resolveVideoConfig=function(e){var t=null;return e.hasOwnProperty("top")||e.hasOwnProperty("bottom")?e.hasOwnProperty("bottom")&&((t=e.bottom).suffix=e.hasOwnProperty("top")?"bottom":""):t=e,t},i.prototype.shouldPlayExpand=function(){return this.getVideoConfig(this.gameSettings.reelVideos.length)||null==this.gameSettings.expandVideo},i.prototype.destroyAllVideos=function(){for(var e=this._videos.length,t=0;t<e;t++)this._videos[t]&&this._videos[t].dispose();this._videos.length=0,this._requestedVideos={},this._winVideosStarted=!1,this._nonWinningExpandCells.length=0,this._createdInstances.length=0,this._cellsForEachVideo.length=0,e=this._nonWinningExpandImages.length;for(t=0;t<e;t++)this._nonWinningExpandImages[t]&&(this.view.removeChild(this._nonWinningExpandImages[t]),this._nonWinningExpandImages[t]=null);this._nonWinningExpandImages.length=0},i.prototype.createNonWinningExpandImages=function(){if(0!=this._nonWinningExpandCells.length&&!this.gameSettings.expandVideo.onWholeReel)for(var e=o.getLoader("gameImages"),t=s.convertToSequenceString(this.gameSettings.wildIndex),i=e.getTexture(t+".png"),n=this._nonWinningExpandCells.length,a=0;a<n;a++){var r=new PIXI.Sprite,l=this._nonWinningExpandCells[a]%this.gameSettings.numReels,c=Math.floor(this._nonWinningExpandCells[a]/this.gameSettings.numReels);r.x=this.gameSettings.reelCoordX+l*(this.gameSettings.reelWidth+this.gameSettings.reelSpacing),r.y=this.gameSettings.reelCoordY+c*(this.gameSettings.reelHeight/this.gameSettings.numReelCards),r.texture=i;var u=this.getCellIndex(l,c);this._nonWinningExpandImages[u]=r,this.view.addChild(r)}},i.prototype.removeNonWinningExpandImage=function(e,t){var i=this.getCellIndex(e,t);this._nonWinningExpandImages[i]&&(this.view.removeChild(this._nonWinningExpandImages[i]),this._nonWinningExpandImages[i]=null)},i.prototype.playWinVideos=function(e){void 0===e&&(e=!1),this._videos[this.gameSettings.reelVideos.length]&&(this._videos[this.gameSettings.reelVideos.length].dispose(),this._videos[this.gameSettings.reelVideos.length]=null),this.createNonWinningExpandImages();for(var t=this._videos.length,i=0;i<t;i++)i==this.gameSettings.wildIndex&&this.getVideoCells(this.gameSettings.reelVideos.length).length&&this.sendNotification(n.SHOW_CELLS,{cells:this.getVideoCells(this.gameSettings.reelVideos.length)}),this.playVideo(i,e);this._winVideosStarted=!0},i.prototype.playVideo=function(e,t){var i=!!this._videos[e],o=i&&this._videos[e].isPlaying;if(i&&!o){var s=this.getVideoConfig(e);this._videos[e].play(t),(void 0===s.shouldClearCells||s.shouldClearCells)&&this.sendNotification(n.CLEAR_CELLS,{cells:this.getVideoCells(e)})}},i.prototype.getVideoCells=function(e){return this._cellsForEachVideo[e]?this._cellsForEachVideo[e].slice():[]},i.prototype.removeNonWinningExpandCell=function(e,t){var i=this.getCellIndex(e,t),n=this._nonWinningExpandCells.indexOf(i);-1!=n&&this._nonWinningExpandCells.splice(n,1)},i.prototype.getCellIndex=function(e,t){return t*this.gameSettings.numReels+e},i.prototype.onExpandComplete=function(){this.sendNotification(n.EXPAND_COMPLETE)},i.prototype.onVideoLoaded=function(e){if(-1!=e.id.indexOf(r.WIN_VIDEO_LOADER_ID_PREFIX)){var t=parseInt(e.id.split(this.getWinVideoLoaderIdPrefix())[1]),i=this._requestedVideos[t];if(i){for(var n=i.length,o=0;o<n;o++)this.createVideo(i[o].col,i[o].row,!1),this._winVideosStarted?this.removeNonWinningExpandImage(i[o].col,i[o].row):this.removeNonWinningExpandCell(i[o].col,i[o].row);this._winVideosStarted&&this.playVideo(t,!0)}}},i=__decorate([l.decorator],i)}(Pluck.ViewController);i.VideoController=h}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(){var t=e.call(this)||this,i=new PIXI.Graphics;i.beginFill(0,0),i.drawRect(0,0,PIXI.renderer.width,PIXI.renderer.height),i.endFill(),i.interactive=!0,t.addChild(i);var n=new PIXI.Container,o=new PIXI.Graphics;o.lineStyle(4,10395294),o.beginFill(0,.8),o.drawRoundedRect(0,0,1280,330,16),o.endFill(),o.scale.set(.5),o.cacheAsBitmap=!0,n.addChild(o),n.x=(t.width-n.width)/2,n.y=(t.height-n.height)/2,t.addChild(i),t.addChild(n);var s={fontFamily:"Arial",fontSize:35,fill:16777215},a=new PIXI.Text("Play Sounds?",s);a.x=Math.round((n.width-a.width)/2),a.y=20,n.addChild(a),t.yesButton=t.createButton("Yes"),t.noButton=t.createButton("No");var r=2*t.yesButton.width+20;return t.yesButton.x=Math.round((n.width-r)/2),t.yesButton.y=85,t.noButton.x=t.yesButton.x+t.yesButton.width+20,t.noButton.y=t.yesButton.y,n.addChild(t.yesButton),n.addChild(t.noButton),t}return __extends(t,e),t.prototype.createButton=function(e){var t=new PIXI.Graphics;t.lineStyle(4,10395294),t.beginFill(3947580,.8),t.drawRoundedRect(0,0,380,116,16),t.endFill();var i={fontFamily:"Arial",fontSize:56,fill:16777215},n=new PIXI.Text(e,i);return n.x=Math.round((t.width-n.width)/2),n.y=Math.round((t.height-n.height)/2),t.addChild(n),t.scale.set(.5),t.cacheAsBitmap=!0,t.interactive=!0,t.buttonMode=!0,t},t}(PIXI.Container);e.SoundPopUpView=t}(e.views||(e.views={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.views.SoundPopUpView,o=e.egt.library.loading.Loader,s=e.egt.library.Device,a=e.egt.baseslot.models.Notifications,r=function(e){function i(){var t=e.call(this)||this;return t._view=t.provideView(),t.view.yesButton.on(s.resolveEvent("click"),t.onButtonClick,t),t.view.noButton.on(s.resolveEvent("click"),t.onButtonClick,t),t}return __extends(i,e),i.prototype.dispose=function(){this.view.yesButton.off(s.resolveEvent("click"),this.onButtonClick,this),this.view.noButton.off(s.resolveEvent("click"),this.onButtonClick,this)},i.prototype.provideView=function(){return new n},Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),i.prototype.onButtonClick=function(e){e.target==this.view.yesButton&&(this.mainModel.soundManager.loadAll(),this.mainModel.soundManager.isMuted=!0,this.sendNotification(a.SOUND_YES_CLICKED)),this.mainModel.soundManager.playDummySound(o.getLoader("dummySound").getData()),this.parent.removeChildViewController(this)},i}(Pluck.ViewController);i.SoundPopUpController=r}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.Device,o=function(e){function i(){var i=e.call(this)||this;i._currentSelectedToolTipIndex=-1,i._tooltipEventRectangles=new Array;for(var o=i.getBoxesConfig(),s=0;s<4;s++){var a=new PIXI.Graphics;a.beginFill(16711680,0),a.name=s.toString(),a.drawRect(0,0,1,1),a.endFill(),a.position.set(o[s].x,o[s].y),a.scale.set(o[s].width,o[s].height),a.interactive=!0,a.on(n.resolveEvent("mouseover"),i.showToolTip,i),a.on(n.resolveEvent("mouseout"),i.hideToolTip,i),i._tooltipEventRectangles.push(a),i.addChild(a)}return i._tooltip=t.bottle.container.JackpotToolTip,i._tooltip.setBoxesConfig(o),i.addChild(i._tooltip),i}return __extends(i,e),i.prototype.updateToolTip=function(){-1!==this._currentSelectedToolTipIndex&&this._tooltip.update(this._currentSelectedToolTipIndex)},i.prototype.dispose=function(){for(var e=0,t=this._tooltipEventRectangles;e<t.length;e++){var i=t[e];i.off(n.resolveEvent("mousedown"),this.showToolTip,this),i.off(n.resolveEvent("mouseout"),this.showToolTip,this)}},i.prototype.showToolTip=function(e){-1!==this._currentSelectedToolTipIndex&&this._currentSelectedToolTipIndex.toString()!==e.target.name&&this._tooltip.hideToolTip();var t=e.target;this._currentSelectedToolTipIndex=Number(t.name),this._tooltip.showToolTip(this._currentSelectedToolTipIndex)},i.prototype.hideToolTip=function(e){e.target.name===this._currentSelectedToolTipIndex.toString()&&(this._currentSelectedToolTipIndex=-1,this._tooltip.hideToolTip())},i.prototype.getBoxesConfig=function(){return[{x:105,y:5,width:155,height:50},{x:264,y:5,width:180,height:50},{x:809,y:5,width:174,height:50},{x:988,y:5,width:186,height:50}]},i}(PIXI.Container);i.JackpotDropDownView=o}(i.jackpotstatistics||(i.jackpotstatistics={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.loading.Loader,o=e.egt.library.widgets.MoneyText,s=e.egt.library.widgets.Text,a=function(e){function i(){var i=e.call(this)||this;return i.ROMAN_NUMBERS=["I","II","III","IV"],i.MASK_START_Y=55,i._TEXTS_IN_DEBUG=!1,i._gameSettings=t.bottle.container.GameSettings,i._localisation=i._gameSettings.localization,i._popUpContainer=i.createPopUP(),i._popUpContainer.y-=i._popUpContainer.height,i.addChild(i._popUpContainer),i.initTextValues(),i}return __extends(i,e),i.prototype.setBoxesConfig=function(e){this._boxesConfig=e,this.addMask()},i.prototype.showToolTip=function(e){this._tweenHide&&(this.completeTweenAnimation(this._tweenHide),this._tweenHide=null);var t="lastWinLevel"+this.ROMAN_NUMBERS[e];if(0!=this.jackpotStatistics[t]){this.update(e),this._isOpen=!0;var i=this._boxesConfig[0].y+this._boxesConfig[0].height;this._tweenShow=TweenMax.to(this._popUpContainer,.4,{y:i,ease:Back.easeOut,onComplete:this.onShowComplete.bind(this)})}},i.prototype.hideToolTip=function(){this._tweenShow&&(this.completeTweenAnimation(this._tweenShow),this._tweenShow=null),this._tweenHide=TweenMax.to(this._popUpContainer,.4,{y:-this._popUpContainer.height,ease:Back.easeIn,onComplete:this.onHideComplete.bind(this)}),this._isOpen=!1},i.prototype.update=function(e){var t="largestWinDateLevel"+this.ROMAN_NUMBERS[e],i="largestWinLevel"+this.ROMAN_NUMBERS[e],n="lastWinDateLevel"+this.ROMAN_NUMBERS[e],o="lastWinUserLevel"+this.ROMAN_NUMBERS[e],s="lastWinLevel"+this.ROMAN_NUMBERS[e],a="winsLevel"+this.ROMAN_NUMBERS[e];this._winAmountlargestWinner.isShowingCredits=this.isDisplayingCredits,this._winAmountlargestWinner.denomination=this.denomination,this._winAmountlargestWinner.money=this.jackpotStatistics[i],this._largestWinnerDate.text=this.getDateToMMDDYYYY(this.jackpotStatistics[t]),this._lastWinnerDate.text=this.getDateToMMDDYYYY(this.jackpotStatistics[n]),this._winAmountlastWinner.isShowingCredits=this.isDisplayingCredits,this._winAmountlastWinner.denomination=this.denomination,this._winAmountlastWinner.money=this.jackpotStatistics[s],this._usernamelastWinner.text=this.jackpotStatistics[o],this._winAmountNumberOfWinners.text=this.jackpotStatistics[a],this.x=this._boxesConfig[e].x+(this._boxesConfig[e].width-this._popUpContainer.width)/2},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._tweenShow&&this._tweenShow.kill(),this._tweenHide&&this._tweenHide.kill()},i.prototype.onShowComplete=function(){this._tweenShow.kill(),this._tweenShow=null},i.prototype.onHideComplete=function(){this._tweenHide.kill(),this._tweenHide=null},i.prototype.createPopUP=function(){var e=n.getLoader("gameImages"),t=new PIXI.Sprite(e.getTexture("jackpotPopUp.png")),i=new PIXI.Container;return i.addChild(t),i},i.prototype.initTextValues=function(){this._textsContainer=new PIXI.Container,this._popUpContainer.addChild(this._textsContainer);var e={text:this._localisation.LargestWinner,style:{fontSize:11,fill:this._gameSettings.toolTipMainTextColor,fontFamily:"Arial"},x:6,y:23},t={debug:this._TEXTS_IN_DEBUG,bounds:{width:60,height:23},text:"",style:{fontSize:10,fill:this._gameSettings.toolTipDateTextColor,align:"right",fontFamily:"Arial"},align:"right",x:87,y:19},i={debug:this._TEXTS_IN_DEBUG,currency:this._gameSettings.currencyISO,bounds:{width:148,height:30},isShowingCredits:!1,shouldHideWhenMoneyValueIsZero:!0,hideCents:this._gameSettings.currencyHideCents,moneyFontSize:18,currencyFontSize:11,align:"center",x:2,y:51,diamond:this._gameSettings.diamondPlay?n.getLoader("gameImages").getTexture("diamond.png"):null,diamondPlay:this._gameSettings.diamondPlay,diamondScaleCoef:.5},a={text:this._localisation.NumberOfWinners,style:{fontSize:11,fill:this._gameSettings.toolTipMainTextColor,fontFamily:"Arial"},x:6,y:89},r={debug:this._TEXTS_IN_DEBUG,bounds:{width:60,height:40},text:"",style:{fontSize:18,fill:this._gameSettings.toolTipNumberOfWinnersTextColor,align:"center",fontFamily:"Arial"},align:"center",x:89,y:84},l={text:this._localisation.LastWinner,style:{fontSize:11,fill:this._gameSettings.toolTipMainTextColor,fontFamily:"Arial"},x:6,y:133},c={debug:this._TEXTS_IN_DEBUG,bounds:{width:60,height:23},text:"",style:{fontSize:10,fill:this._gameSettings.toolTipDateTextColor,fontFamily:"Arial"},align:"right",x:87,y:129},u={debug:this._TEXTS_IN_DEBUG,bounds:{width:170,height:20},text:"",style:{fontSize:10,fill:this._gameSettings.toolTipUsernameTextColor,fontFamily:"Arial"},x:6,y:158},h={debug:this._TEXTS_IN_DEBUG,currency:this._gameSettings.currencyISO,bounds:{width:148,height:30},isShowingCredits:!1,shouldHideWhenMoneyValueIsZero:!0,hideCents:this._gameSettings.currencyHideCents,moneyFontSize:18,currencyFontSize:11,align:"center",x:2,y:172,diamond:this._gameSettings.diamondPlay?n.getLoader("gameImages").getTexture("diamond.png"):null,diamondPlay:this._gameSettings.diamondPlay,diamondScaleCoef:.5};this._largestWinner=new PIXI.Text(e.text,e.style),this._largestWinner.x=e.x,this._largestWinner.y=e.y,this._largestWinnerDate=new s(t,t.text,t.style),this._largestWinnerDate.x=t.x,this._largestWinnerDate.y=t.y,this._winAmountlargestWinner=new o(i),this._winAmountlargestWinner.style={fill:this._gameSettings.toolTipWinAmountTextColor},this._winAmountlargestWinner.currencyStyle={fill:this._gameSettings.toolTipCurrencyTextColor},this._winAmountlargestWinner.x=i.x,this._winAmountlargestWinner.y=i.y,this._numberOfWinners=new PIXI.Text(a.text,a.style),this._numberOfWinners.x=a.x,this._numberOfWinners.y=a.y,this._winAmountNumberOfWinners=new s(r,r.text,r.style),this._winAmountNumberOfWinners.x=r.x,this._winAmountNumberOfWinners.y=r.y,this._lastWinner=new PIXI.Text(l.text,l.style),this._lastWinner.x=l.x,this._lastWinner.y=l.y,this._lastWinnerDate=new s(c,c.text,c.style),this._lastWinnerDate.x=c.x,this._lastWinnerDate.y=c.y,this._usernamelastWinner=new s(u,u.text,u.style),this._usernamelastWinner.x=u.x,this._usernamelastWinner.y=u.y,this._winAmountlastWinner=new o(h),this._winAmountlastWinner.style={fill:this._gameSettings.toolTipWinAmountTextColor},this._winAmountlastWinner.currencyStyle={fill:this._gameSettings.toolTipCurrencyTextColor},this._winAmountlastWinner.x=h.x,this._winAmountlastWinner.y=h.y,this._textsContainer.addChild(this._largestWinner),this._textsContainer.addChild(this._largestWinnerDate),this._textsContainer.addChild(this._winAmountlargestWinner),this._textsContainer.addChild(this._lastWinner),this._textsContainer.addChild(this._lastWinnerDate),this._textsContainer.addChild(this._usernamelastWinner),this._textsContainer.addChild(this._winAmountlastWinner),this._textsContainer.addChild(this._numberOfWinners),this._textsContainer.addChild(this._winAmountNumberOfWinners)},i.prototype.addMask=function(){null!=this.mask&&this.removeChild(this.mask);var e=new PIXI.Graphics;e.beginFill(16711680,.5),e.drawRect(0,this._boxesConfig[0].y+this._boxesConfig[0].height,this._popUpContainer.width,this._popUpContainer.height+40),e.endFill(),this.mask=e,this.addChild(e)},i.prototype.completeTweenAnimation=function(e){e.totalTime(e.totalDuration())},i.prototype.getDateToMMDDYYYY=function(e){var t=new Date(e),i=t.getDate(),n=t.getMonth()+1,o=t.getFullYear();return i+this._gameSettings.toolTipDateSeparator+n+this._gameSettings.toolTipDateSeparator+o},Object.defineProperty(i.prototype,"jackpotStatistics",{get:function(){return t.bottle.container.MainModel.jackpotStatistics},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDisplayingCredits",{get:function(){return t.bottle.container.MainModel.isDisplayingCredits},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"denomination",{get:function(){return t.bottle.container.MainModel.denomination},enumerable:!0,configurable:!0}),i}(PIXI.Container);i.JackpotToolTip=a}(i.jackpotstatistics||(i.jackpotstatistics={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.widgets.Text,o=e.egt.library.loading.Loader,s=e.egt.library.utils.Timer,a=e.egt.library.widgets.RollingNumberView,r=function(e){function i(){var i=e.call(this)||this;return i._gameSettings=t.bottle.container.GameSettings,i}return __extends(i,e),i.prototype.init=function(e){null==this._config&&(this._config=this.jackpotStatisticsBoxConfig,this._config.serialize(e),this.createElements())},Object.defineProperty(i.prototype,"jackpotStatisticsBoxConfig",{get:function(){return this._config?this._config:new l},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"denomination",{set:function(e){this._valueField.denomination(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDisplayingCredits",{set:function(e){this._valueField.currency(!e&&!this._gameSettings.diamondPlay),this._currencyField.visible=!e&&!this._gameSettings.diamondPlay},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isBlinking",{get:function(){return null!=this._blinkTimer&&this._blinkTimer.running},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"playerName",{set:function(e){this._playerName.text=e},enumerable:!0,configurable:!0}),i.prototype.setValue=function(e,t,i){this._currentValue=e,this.isBlinking||this._valueField.setValue(e,t,i)},i.prototype.startBlinking=function(){this._blinkTimer&&this.stopBlinking(),this._playerName.visible=!0,this._valueField.visible=!0,this._blinkTimer=new s(.5,10),this._blinkTimer.addEventListener(s.TIMER,this.onTimerTick,this),this._blinkTimer.addEventListener(s.TIMER_COMPLETE,this.onBlinkComplete,this),this._blinkTimer.start()},i.prototype.destroy=function(t){this.stopBlinking(),e.prototype.destroy.call(this,t)},i.prototype.onTimerTick=function(){this._valueField.visible=!this._valueField.visible,this._playerName.visible=!this._playerName.visible},i.prototype.onBlinkComplete=function(){this._valueField.visible=!0,this._valueField.setValue(this._currentValue),this._blinkTimer.removeEventListener(s.TIMER,this.onTimerTick,this),this._blinkTimer.removeEventListener(s.TIMER_COMPLETE,this.onBlinkComplete,this),this._blinkTimer.addEventListener(s.TIMER_COMPLETE,this.stopBlinking,this),this._blinkTimer.reset(),this._blinkTimer.delay=10,this._blinkTimer.repeatCount=1,this._blinkTimer.start()},i.prototype.stopBlinking=function(){this._blinkTimer&&(this._blinkTimer.removeEventListener(s.TIMER,this.onTimerTick,this),this._blinkTimer.removeEventListener(s.TIMER_COMPLETE,this.onBlinkComplete,this),this._blinkTimer.removeEventListener(s.TIMER_COMPLETE,this.stopBlinking,this),this._blinkTimer.stop(),this._blinkTimer=null),this._valueField.visible=!0,this._playerName.visible=!1},i.prototype.createElements=function(){if(this._valueField=new a(this.getRollingNumberConfig()),this._currencyField=new PIXI.Text(this.insertSymbolAt(this._gameSettings.currencyISO,"\n",[1,3]),this.getCurrencyFieldConfig()),this._currencyField.visible=!this._gameSettings.diamondPlay,this._playerName=new n(this.getPlayerNameConfig(),"",this.getPlayerNameStyle()),this._gameSettings.diamondPlay){var e=o.getLoader("gameImages").getTexture("diamond.png");this._diamond=new PIXI.Sprite(e);var t=this.getDiamondConfig();this._diamond.anchor.set(t.anchor),this._diamond.scale.set(t.scale),this._diamond.position.set(t.x,t.y),this.addChild(this._diamond)}this._currencyField.position.set(this._config.currencyOffsetX,this._config.currencyOffsetY),this._playerName.position.set(this._config.playerNameOffsetX,this._config.playerNameOffsetY),this.addChild(this._valueField,this._currencyField,this._playerName)},i.prototype.getRollingNumberConfig=function(){return{numberOfCents:this._gameSettings.currencyHideCents||this._gameSettings.currencyHideCentsOnlyInJackpotBoxes?0:2,bounds:this._config.bounds,digitsCount:this._config.digitsCount,font:"Arial",isDiamondPlay:this._gameSettings.diamondPlay,size:22,denomination:1,currency:!0,horizontalSpacing:-3,bold:"bolder"}},i.prototype.getCurrencyFieldConfig=function(){return{fontSize:12,lineHeight:13,fill:16777215,align:"center",fontWeight:"bold"}},i.prototype.getPlayerNameConfig=function(){return{align:"center",bounds:{width:this._config.bounds.width,height:12}}},i.prototype.getPlayerNameStyle=function(){return{fontSize:12,fill:16777215,fontFamily:"Arial"}},i.prototype.getDiamondConfig=function(){return{anchor:.5,scale:.1,x:this._config.currencyOffsetX+6,y:this._config.currencyOffsetY+this._config.bounds.height/2}},i.prototype.insertSymbolAt=function(e,t,i){for(var n=e,o=0;o<i.length;o++)n=n.substr(0,i[o])+t+n.substr(i[o]);return n},i}(PIXI.Container);i.JackpotStatisticsBox=r;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bounds=null,t.currencyOffsetX=-1,t.currencyOffsetY=-1,t.playerNameOffsetX=-1,t.playerNameOffsetY=-1,t.digitsCount=-1,t.currencyISO=null,t.isDiamondPlay=!1,t}return __extends(t,e),t}(Pluck.External);i.JackpotStatisticsBoxConfig=l}(i.jackpotstatistics||(i.jackpotstatistics={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.loading.Loader,o=function(e){function i(){var i=e.call(this)||this;i.boxes=[];var o=t.bottle.container.GameSettings,s=n.getLoader("gameImages");i._background=new PIXI.Sprite(s.getTexture("jackpotPanel.png")),i._background.x=(PIXI.renderer.width-i._background.width)/2,i._background.y=5,i.addChild(i._background);for(var a=i.getBoxesConfig(),r=0;r<4;r++){var l=t.bottle.container.JackpotStatisticsBox.instance(),c=a[r];c.isDiamondPlay=o.diamondPlay,c.currencyISO=o.currencyISO,l.init(c),l.position.set(c.x,c.y),i.boxes[r]=l,i.addChild(l)}return i}return __extends(i,e),Object.defineProperty(i.prototype,"denomination",{set:function(e){for(var t=0;t<4;t++)this.boxes[t].denomination=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isDisplayingCredits",{set:function(e){for(var t=0;t<4;t++)this.boxes[t].isDisplayingCredits=e},enumerable:!0,configurable:!0}),i.prototype.getBoxesConfig=function(){return[{x:152,y:7,currencyOffsetX:92,currencyOffsetY:1,playerNameOffsetY:0,bounds:{width:88,height:44},digitsCount:6},{x:307,y:7,currencyOffsetX:121,currencyOffsetY:1,playerNameOffsetY:0,bounds:{width:117,height:44},digitsCount:8},{x:856,y:7,currencyOffsetX:111,currencyOffsetY:1,playerNameOffsetY:0,bounds:{width:107,height:44},digitsCount:8},{x:1031,y:7,currencyOffsetX:127,currencyOffsetY:1,playerNameOffsetY:0,bounds:{width:123,height:44},digitsCount:9}]},i}(PIXI.Container);i.JackpotStatisticsView=o}(i.jackpotstatistics||(i.jackpotstatistics={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.models.Notifications,o=e.egt.baseslot.models.server.response.BaseResponse,s=function(e){function i(){var i=e.call(this)||this;return i._romanNumbers=["I","II","III","IV"],i._freezeIndex=-1,i._blinkingComplete=!0,i._view=t.bottle.container.JackpotStatisticsView,i.view.denomination=i.mainModel.denomination,i.view.isDisplayingCredits=i.mainModel.isDisplayingCredits,i.updateValues(!1),i}return __extends(i,e),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),i.prototype.getInterests=function(){return[n.JACKPOT_STATISTIC_RECEIVED,n.DENOMINATION_CHANGED,n.JACKPOT_COMPLETED,n.JACKPOT_RECEIVED,n.JACKPOT_WIN_MONEY_ANIMATION_START,n.CURRENCY_CHANGED]},i.prototype.handleNotification=function(e){switch(e.name){case n.JACKPOT_STATISTIC_RECEIVED:-1!=this.mainModel.jackpotStatistics.winLevel&&this._freezeIndex!=this.mainModel.jackpotStatistics.winLevel?(this.mainModel.soundManager.play("jackpotShowWinnerSound"),this.startBlinking()):this.updateValues(!0);break;case n.DENOMINATION_CHANGED:this.view.denomination=this.mainModel.denomination;break;case n.JACKPOT_COMPLETED:this.updateValue(this._freezeIndex),this._freezeIndex=-1;break;case n.JACKPOT_RECEIVED:this.mainModel.jackpotResponse.state==o.STATE_IDLE&&(this._freezeIndex=this.mainModel.jackpotResponse.complex.winLevel,this.view.boxes[this._freezeIndex].stopBlinking(),this.view.boxes[this._freezeIndex].setValue(this.mainModel.jackpotResponse.winAmount));break;case n.JACKPOT_WIN_MONEY_ANIMATION_START:var t=this.mainModel.gameSettings.jackpotWinMoneyAnimationTimes[this.mainModel.jackpotResponse.complex.winLevel];this.view.boxes[this._freezeIndex].setValue(0,!0,t);break;case n.CURRENCY_CHANGED:this.view.isDisplayingCredits=this.mainModel.isDisplayingCredits}},i.prototype.updateValues=function(e){for(var t=0;t<this.view.boxes.length;t++)t!=this._freezeIndex&&this.updateValue(t,e)},i.prototype.updateValue=function(e,t){this.view.boxes[e].setValue(this.mainModel.jackpotStatistics["level"+this._romanNumbers[e]],t,5)},i.prototype.startBlinking=function(){var e=this.view.boxes[this.mainModel.jackpotStatistics.winLevel],t=this.mainModel.jackpotStatistics.screenName;t.length>10&&(t=t.substr(0,10),t+="..."),e.setValue(this.mainModel.jackpotStatistics.winAmount),e.playerName=t,e.startBlinking()},i}(Pluck.ViewController);i.JackpotStatisticsController=s}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.models.Notifications,o=function(e){function i(){var i=e.call(this)||this;return i._view=t.bottle.container.JackpotDropDownView,i}return __extends(i,e),i.prototype.getInterests=function(){return[n.JACKPOT_STATISTIC_RECEIVED,n.DENOMINATION_CHANGED,n.JACKPOT_COMPLETED,n.CURRENCY_CHANGED]},i.prototype.handleNotification=function(e){switch(e.name){case n.JACKPOT_STATISTIC_RECEIVED:case n.DENOMINATION_CHANGED:case n.CURRENCY_CHANGED:case n.JACKPOT_COMPLETED:this._view.updateToolTip()}},i}(Pluck.ViewController);i.JackpotDropDownController=o}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.loading.Loader,o=e.egt.library.widgets.Text,s=function(e){function i(){var s=e.call(this)||this;s._leftLines=[],s._rightLines=[],s._fixedLabels=[],s._linesLabels=[],s._currentIndex=0,s._beginLineOfsetY=506,s._lineRowOfsetY=99,s._loader=n.getLoader("gameImages"),s._gameSettings=t.bottle.container.GameSettings;for(var a={fontFamily:"Arial",fontSize:18,fill:s._gameSettings.linesSelectActiveColor,stroke:s._gameSettings.linesSelectActiveGlowColor,fontWeight:"bold",strokeThickness:8,lineJoin:"round"},r={fontFamily:"Arial",fontSize:13,fill:s._gameSettings.linesSelectActiveColor,stroke:s._gameSettings.linesSelectActiveGlowColor,fontWeight:"bold",strokeThickness:8,lineJoin:"round"},l=[{align:"center",bounds:{width:66,height:18}},{align:"center",bounds:{width:66,height:18}},{align:"center",bounds:{width:66,height:13}},{align:"center",bounds:{width:66,height:13}}],c=0;c<2;c++){s._linesLabels[c]=new o(l[c],"LINES",a),s._fixedLabels[c]=new o(l[c+2],"Fixed",r);var u=0==c?i.LEFT_LINES_X:i.RIGHT_LINES_X;s._linesLabels[c].position.set(u,0),s._fixedLabels[c].position.set(u,0),s.addChild(s._linesLabels[c]),s.addChild(s._fixedLabels[c])}for(c=0;c<5;c++){var h={fontSize:30,fill:s._gameSettings.linesSelectInactiveColor,stroke:s._gameSettings.linesSelectInactiveGlowColor,fontWeight:"bold",lineJoin:"round",strokeThickness:7},d=new o({align:"center",bounds:{width:66,height:30}},s._gameSettings.linesCount[c].toString(),h);d.position.set(i.LEFT_LINES_X,s._beginLineOfsetY-s._lineRowOfsetY*c),h={fontFamily:"Arial",fontSize:30,fill:s._gameSettings.linesSelectInactiveColor,stroke:s._gameSettings.linesSelectInactiveGlowColor,fontWeight:"bold",lineJoin:"round",strokeThickness:7};var p=new o({align:"center",bounds:{width:66,height:30}},s._gameSettings.linesCount[c].toString(),h);p.position.set(i.RIGHT_LINES_X,s._beginLineOfsetY-s._lineRowOfsetY*c),s._leftLines[c]=d,s._rightLines[c]=p,s.addChild(d,p)}for(var m=0;m<5;m++)s.setLines(m);return s._fixedLabels[0].style=s._fixedLabels[0].style,s._fixedLabels[1].style=s._fixedLabels[1].style,s.linesView=t.bottle.container.LinesView.instance(),s.addChild(s.linesView),s}return __extends(i,e),i.prototype.setLines=function(e){this.changeState(this._leftLines[this._currentIndex],!1),this.changeState(this._rightLines[this._currentIndex],!1),this._currentIndex=e,this.changeState(this._leftLines[this._currentIndex],!0),this.changeState(this._rightLines[this._currentIndex],!0),this._linesLabels[0].text=0==e?"LINE":"LINES",this._linesLabels[1].text=0==e?"LINE":"LINES";var t=this._leftLines[e].position.y;this._linesLabels[0].position.y=t+30,this._linesLabels[1].position.y=t+30},i.prototype.setFixedLines=function(e){if(-1==e)return this._fixedLabels[0].visible=!1,void(this._fixedLabels[1].visible=!1);var t=this._leftLines[e].position.y;this._fixedLabels[0].position.y=t+47,this._fixedLabels[0].visible=!0,this._fixedLabels[1].position.y=t+47,this._fixedLabels[1].visible=!0},i.prototype.linesViewClear=function(){this.linesView.clear()},i.prototype.linesViewLinesDrawn=function(){return this.linesView.linesDrawn},i.prototype.linesViewDrawLines=function(e,t){this.linesView.drawLines(e,t)},i.prototype.addLeftAndRightLine=function(e,t,n){var s={fontSize:30,fill:this._gameSettings.linesSelectInactiveColor,stroke:this._gameSettings.linesSelectInactiveGlowColor,fontWeight:"bold",lineJoin:"round",strokeThickness:7},a=new o({align:"center",bounds:{width:66,height:30}},this._gameSettings.linesCount[e].toString(),s);a.position.set(i.LEFT_LINES_X,this._beginLineOfsetY-this._lineRowOfsetY*e),s={fontFamily:"Arial",fontSize:30,fill:this._gameSettings.linesSelectInactiveColor,stroke:this._gameSettings.linesSelectInactiveGlowColor,fontWeight:"bold",lineJoin:"round",strokeThickness:7};var r=new o({align:"center",bounds:{width:66,height:30}},this._gameSettings.linesCount[e].toString(),s);r.position.set(i.RIGHT_LINES_X,this._beginLineOfsetY-this._lineRowOfsetY*e),this._leftLines[e]=a,this._rightLines[e]=r,this.addChild(a,r)},i.prototype.changeState=function(e,t){t?(e.style.fill=this._gameSettings.linesSelectActiveColor,e.style.stroke=this._gameSettings.linesSelectActiveGlowColor,e.style=e.style):(e.style.fill=this._gameSettings.linesSelectInactiveColor,e.style.stroke=this._gameSettings.linesSelectInactiveGlowColor,e.style=e.style)},i.LEFT_LINES_X=99,i.RIGHT_LINES_X=1123,i}(PIXI.Container);i.BulbsLinesView=s}(i.bulbs||(i.bulbs={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(t){var i=function(t){function i(){var i=t.call(this)||this;i._gameSettings=e.bottle.container.GameSettings;var n=i._gameSettings.reelWidth,o=i._gameSettings.reelHeight/i._gameSettings.numReelCards;i._darkSquares=[];for(var s=0;s<i._gameSettings.numReels;s++){i._darkSquares[s]=[];for(var a=0;a<i._gameSettings.numReelCards;a++){var r,l,c;r=i._gameSettings.reelCoordX+s*(i._gameSettings.reelWidth+i._gameSettings.reelSpacing),l=i._gameSettings.reelCoordY+a*(i._gameSettings.reelHeight/i._gameSettings.numReelCards),(c=new PIXI.Graphics).beginFill(0,.8),c.drawRect(r,l,n,o),c.endFill(),c.visible=!1,i._darkSquares[s][a]=c,i.addChild(i._darkSquares[s][a])}}return i}return __extends(i,t),i.prototype.hideDarkSquares=function(){for(var e=0;e<this._gameSettings.numReels;e++)for(var t=0;t<this._gameSettings.numReelCards;t++)this._darkSquares[e][t].visible=!1},i.prototype.showDarkSquare=function(e){for(var t=0;t<this._gameSettings.waysCells[e].length;t+=2)this._darkSquares[this._gameSettings.waysCells[e][t]][this._gameSettings.waysCells[e][t+1]].visible=!0},i}(PIXI.Container);t.WaysView=i}(e.views||(e.views={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.loading.Loader,o=e.egt.library.widgets.Text,s=function(e){function i(){var s=e.call(this)||this;s._leftLines=[],s._rightLines=[],s._currentIndex=0,s._waysPayIMG=[],s._beginLineOfsetY=486,s._lineRowOfsetY=90,s._loader=n.getLoader("gameImages"),s._gameSettings=t.bottle.container.GameSettings,s._waysView=t.bottle.container.WaysView.instance(),s.addChild(s._waysView);s._gameSettings.linesSelectActiveColor,s._gameSettings.linesSelectActiveGlowColor,s._gameSettings.linesSelectActiveColor,s._gameSettings.linesSelectActiveGlowColor;s._waysPayIMG[0]=new PIXI.Sprite(s._loader.getTexture("waysPayBox.png")),s._waysPayIMG[1]=new PIXI.Sprite(s._loader.getTexture("waysPayBox.png")),s._waysPayIMG[0].anchor.x=.5,s._waysPayIMG[1].anchor.x=.5,s._waysPayIMG[0].position.set(i.LEFT_LINES_X-2+s._waysPayIMG[0].width/2,s._beginLineOfsetY-0*s._lineRowOfsetY-52),s._waysPayIMG[1].position.set(i.RIGHT_LINES_X-3+s._waysPayIMG[1].width/2,s._beginLineOfsetY-4*s._lineRowOfsetY-52),s.addChild(s._waysPayIMG[0]),s.addChild(s._waysPayIMG[1]),console.log("--- this._waysPayIMG[0].width"+s._waysPayIMG[0].width);for(var a=0;a<5;a++){var r={fontSize:30,fill:s._gameSettings.linesSelectInactiveColor,stroke:s._gameSettings.linesSelectInactiveGlowColor,fontWeight:"bold",lineJoin:"round",strokeThickness:7},l=new o({align:"center",bounds:{width:66,height:30}},s._gameSettings.linesCount[a].toString(),r);l.position.set(i.LEFT_LINES_X,s._beginLineOfsetY-s._lineRowOfsetY*a),r={fontFamily:"Arial",fontSize:30,fill:s._gameSettings.linesSelectInactiveColor,stroke:s._gameSettings.linesSelectInactiveGlowColor,fontWeight:"bold",lineJoin:"round",strokeThickness:7};var c=new o({align:"center",bounds:{width:66,height:30}},s._gameSettings.linesCount[a].toString(),r);c.position.set(i.RIGHT_LINES_X,s._beginLineOfsetY-s._lineRowOfsetY*a),s._leftLines[a]=l,s._rightLines[a]=c,s.addChild(l,c)}for(var u=0;u<5;u++)s.setLines(u);return s}return __extends(i,e),i.prototype.setLines=function(e){this.changeState(this._leftLines[this._currentIndex],!1),this.changeState(this._rightLines[this._currentIndex],!1),this._currentIndex=e,this.changeState(this._leftLines[this._currentIndex],!0),this.changeState(this._rightLines[this._currentIndex],!0),this._waysView.hideDarkSquares(),this._waysView.showDarkSquare(e),this._waysPayIMG[0].position.set(i.LEFT_LINES_X-2+this._waysPayIMG[0].width/2,this._beginLineOfsetY-this._lineRowOfsetY*e-52),this._waysPayIMG[1].position.set(i.RIGHT_LINES_X-3+this._waysPayIMG[1].width/2,this._beginLineOfsetY-this._lineRowOfsetY*e-52)},i.prototype.setFixedLines=function(e){if(-1!=e){for(var t=0;t<this._leftLines.length;t++)t!=this._leftLines.length-1&&(this._rightLines[t].visible=!1,this._leftLines[t].visible=!1,this._rightLines[t].position.x=-2e3,this._leftLines[t].position.x=-2e3);this._rightLines[this._rightLines.length-1].position.set(i.RIGHT_LINES_X,this._beginLineOfsetY-2*this._lineRowOfsetY),this._leftLines[this._rightLines.length-1].position.set(i.LEFT_LINES_X,this._beginLineOfsetY-2*this._lineRowOfsetY),this._waysPayIMG[0].position.set(i.LEFT_LINES_X-2+this._waysPayIMG[0].width/2,this._beginLineOfsetY-2*this._lineRowOfsetY-52),this._waysPayIMG[1].position.set(i.RIGHT_LINES_X-3+this._waysPayIMG[1].width/2,this._beginLineOfsetY-2*this._lineRowOfsetY-52)}},i.prototype.linesViewClear=function(){},i.prototype.linesViewLinesDrawn=function(){return 0},i.prototype.linesViewDrawLines=function(e,t){},i.prototype.addLeftAndRightLine=function(e,t,n){var s={fontSize:30,fill:this._gameSettings.linesSelectInactiveColor,stroke:this._gameSettings.linesSelectInactiveGlowColor,fontWeight:"bold",lineJoin:"round",strokeThickness:7},a=new o({align:"center",bounds:{width:66,height:30}},this._gameSettings.linesCount[e].toString(),s);a.position.set(i.LEFT_LINES_X,this._beginLineOfsetY-this._lineRowOfsetY*e),s={fontFamily:"Arial",fontSize:30,fill:this._gameSettings.linesSelectInactiveColor,stroke:this._gameSettings.linesSelectInactiveGlowColor,fontWeight:"bold",lineJoin:"round",strokeThickness:7};var r=new o({align:"center",bounds:{width:66,height:30}},this._gameSettings.linesCount[e].toString(),s);r.position.set(i.RIGHT_LINES_X,this._beginLineOfsetY-this._lineRowOfsetY*e),this._leftLines[e]=a,this._rightLines[e]=r,this.addChild(a,r)},i.prototype.changeState=function(e,t){t?(e.style.fill=this._gameSettings.linesSelectActiveColor,e.style.stroke=this._gameSettings.linesSelectActiveGlowColor,e.style=e.style):(e.style.fill=this._gameSettings.linesSelectInactiveColor,e.style.stroke=this._gameSettings.linesSelectInactiveGlowColor,e.style=e.style)},i.LEFT_LINES_X=99,i.RIGHT_LINES_X=1123,i}(PIXI.Container);i.BulbsWaysView=s}(i.bulbs||(i.bulbs={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){!function(i){var n=e.egt.library.widgets.Text,o=function(e){function i(){var i=e.call(this)||this,o=t.bottle.container.GameSettings;return o.lineGame?i._view=t.bottle.container.BulbsLinesView:i._view=t.bottle.container.BulbsWaysView,i.gameNumberLabel=new n({align:"center",bounds:{width:88,height:11},shouldScale:!0},"0",{fontSize:11,fill:o.gameNumberTimeHelpColor}),i.gameNumberLabel.position.set(84,56),i.timeLabel=new n({align:"center",bounds:{width:66,height:11}},"",{fontSize:11,fill:o.gameNumberTimeHelpColor}),i.timeLabel.position.set(1118,56),i.helpButton=new t.bottle.container.HelpButtonConstructor(o.localization.Help,o.gameNumberTimeHelpColor),i.helpButton.position.set(89,578),i.addChild(i.timeLabel),i.addChild(i._view),i}return __extends(i,e),i.prototype.linesViewDrawLines=function(e,t){this._view.linesViewDrawLines(e,t)},i.prototype.linesViewLinesDrawn=function(){return this._view.linesViewLinesDrawn()},i.prototype.linesViewClear=function(){this._view.linesViewClear()},i.prototype.setLines=function(e){this._view.setLines(e)},i.prototype.setFixedLines=function(e){this._view.setFixedLines(e)},i.prototype.dispose=function(){this.destroy(!0)},i}(PIXI.Container);i.BulbsView=o}(i.bulbs||(i.bulbs={}))}(t.views||(t.views={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.models.Notifications,o=e.egt.library.Device,s=e.egt.library.Utils,a=function(e){function i(){var i=e.call(this)||this;return i._view=t.bottle.container.BulbsView,i.view.setLines(i.mainModel.currentLineIndex),i.setFixedLines(),-1!=i.mainModel.response.gameNumber&&(i.view.gameNumberLabel.text=i.mainModel.response.gameNumber.toString()),i.view.helpButton.on(o.resolveEvent("click"),i.onHelpClick,i),i.startTimeUpdate(),null!=i.mainModel.currentState&&i.processCurrentState(),i}return __extends(i,e),i.prototype.getInterests=function(){return[n.LINES_CHANGED,n.RESPONSE_RECEIVED,n.SPIN_CLICKED,n.FREESPIN_INTRO_REFRESH_SCREEN,n.FREESPIN_OUTRO_REFRESH_SCREEN]},i.prototype.handleNotification=function(e){switch(e.name){case n.LINES_CHANGED:this.view.setLines(this.mainModel.currentLineIndex),this.mainModel.response.complex.jackpot||this.drawLines();break;case n.RESPONSE_RECEIVED:this.view.gameNumberLabel.text=this.mainModel.response.gameNumber.toString();break;case n.SPIN_CLICKED:this.view.linesViewLinesDrawn()>0&&this.view.linesViewClear();break;case n.FREESPIN_INTRO_REFRESH_SCREEN:this.setFreespinFixedLines();break;case n.FREESPIN_OUTRO_REFRESH_SCREEN:this.setFixedLines(),this.view.setLines(this.mainModel.currentLineIndex)}},Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameSettings",{get:function(){return this.mainModel.gameSettings},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){clearInterval(this._timeUpdateTimer),this.view.helpButton.off(o.resolveEvent("click"),this.onHelpClick,this),e.prototype.dispose.call(this)},i.prototype.processCurrentState=function(){this.mainModel.isFreespinGame&&this.setFreespinFixedLines()},i.prototype.setFreespinFixedLines=function(){-1!=this.gameSettings.freespinFixedLinesIndex&&(this.view.setFixedLines(this.gameSettings.freespinFixedLinesIndex),this.view.setLines(this.gameSettings.freespinFixedLinesIndex))},i.prototype.setFixedLines=function(){this.gameSettings.fixedLinesCount?this.view.setFixedLines(this.mainModel.currentLineIndex):this.view.setFixedLines(-1)},i.prototype.startTimeUpdate=function(){var e=this;this._timeUpdateTimer=setInterval(function(){e.onTimeUpdate()},1e3),this.onTimeUpdate()},i.prototype.parseURLParams=function(e){var t="";for(var i in e)t+=i+"="+encodeURIComponent(e[i])+"&";return t},i.prototype.onTimeUpdate=function(){var e=new Date,t=e.getHours()+":";e.getMinutes()<10&&(t+="0"),t+=e.getMinutes(),this.view.timeLabel.text=t},i.prototype.onHelpClick=function(e){var t={};this.gameSettings.rtp&&(t.rtp=this.gameSettings.rtp),t.currencyType=this.gameSettings.currencyISO,t.shouldHideStopAll=this.gameSettings.minimumSpinTime>0,t.hasAutoplayLimit=this.gameSettings.hasAutoplayLimit(),t.hasTotalsInfo=this.gameSettings.sendTotalsInfo,t.jackpotAllowed=this.gameSettings.jackpot,t.lineGame=this.gameSettings.lineGame,t.gameVersion=this.gameSettings.gameVersion,t.isAutoplayDisabled=this.gameSettings.isAutoplayDisabled(),t.currencyDoNotDisplayCredits=this.gameSettings.currencyDoNotDisplayCredits;var i=this.mainModel.linesCoefficientMin*this.gameSettings.denominations[0][0]*this.gameSettings.bets[0];t.minBet=s.formatMoney(i,100,!0)+" "+this.gameSettings.currencyISO;var n=this.mainModel.linesCoefficientMax*this.gameSettings.denominations[this.gameSettings.denominations.length-1][0]*this.gameSettings.bets[this.gameSettings.bets.length-1];t.maxBet=s.formatMoney(n,100,!0)+" "+this.gameSettings.currencyISO,this.gameSettings.jackpot&&(t.qBets=s.formatMoney(this.gameSettings.jackpotMinBet,100,!0)+" "+this.gameSettings.currencyISO+" - "+s.formatMoney(this.gameSettings.jackpotMaxBet,100,!0)+" "+this.gameSettings.currencyISO);var o="?"+this.parseURLParams(t),a=this.gameSettings.helpLanguages.indexOf(this.gameSettings.language)<0?this.gameSettings.defaultLanguage:this.gameSettings.language,r="games/"+this.gameSettings.engineType+"/assets/"+this.gameSettings.gameType+"/help/help_"+a+".html"+o;window.open(r,"popUp","width=400,height=400,toolbar=no,scrollbars=yes,resizable=yes"),this.mainModel.soundManager.play("paytableSound")},i.prototype.drawLines=function(){this.view.linesViewLinesDrawn()>0?this.view.linesViewLinesDrawn()==this.mainModel.lines?this.view.linesViewClear():(this.view.linesViewClear(),this.view.linesViewDrawLines(this.mainModel.lines,this.mainModel.gameSettings.linesCoords)):this.view.linesViewDrawLines(this.mainModel.lines,this.mainModel.gameSettings.linesCoords)},i}(Pluck.ViewController);i.BulbsController=a}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.views.winvisualization.coinAnimation.CoinAnimation,o=e.egt.baseslot.models.Notifications,s=e.egt.baseslot.models.server.response.BaseResponse,a=function(e){function i(){var t=e.call(this)||this;return t._view=new PIXI.Container,t}return __extends(i,e),i.prototype.getInterests=function(){return[o.SPIN_CLICKED,o.GAMBLE_CLICKED,o.WIN_COLLECTED,o.JACKPOT_STARTED,o.EXPAND_COMPLETE,o.WIN_MONEY_ANIMATION_COMPLETE,o.FREESPIN_INTRO_REFRESH_SCREEN,o.FREESPIN_RETRIGGER_REFRESH_SCREEN,o.FREESPIN_OUTRO_REFRESH_SCREEN]},Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameSettings",{get:function(){return this.mainModel.gameSettings},enumerable:!0,configurable:!0}),i.prototype.handleNotification=function(e){switch(e.name){case o.EXPAND_COMPLETE:this.start();break;case o.WIN_MONEY_ANIMATION_COMPLETE:this.stopCoinAnimation();break;case o.SPIN_CLICKED:case o.GAMBLE_CLICKED:case o.WIN_COLLECTED:case o.JACKPOT_STARTED:case o.FREESPIN_INTRO_REFRESH_SCREEN:case o.FREESPIN_RETRIGGER_REFRESH_SCREEN:this.parent.removeChildViewController(this);break;case o.FREESPIN_OUTRO_REFRESH_SCREEN:this.gameSettings.restoreReels&&this.mainModel.betResponse.state!=s.STATE_GAMBLE&&this.parent.removeChildViewController(this)}},i.prototype.dispose=function(){this.stopCoinAnimation()},i.prototype.start=function(){this.mainModel.shouldPlayCoins()&&(this._coinAnimation=new n,this.view.addChild(this._coinAnimation))},i.prototype.stopCoinAnimation=function(){this._coinAnimation&&(this.view.removeChild(this._coinAnimation),this._coinAnimation.dispose(),this._coinAnimation=null)},i}(Pluck.ViewController);i.CoinsController=a}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i._mainModel=t,i}return __extends(t,e),Object.defineProperty(t.prototype,"isDisplayingCredits",{set:function(e){},enumerable:!0,configurable:!0}),t.START_CLICKED="startClicked",t.REFRESH_SCREEN="refreshScreen",t.INTRO_ENDED="introEnded",t.RETRIGGER_ENDED="retriggerEnded",t.OUTRO_ENDED="outroEnded",t}(PIXI.Container);e.FreespinAnimation=t}(e.freespin||(e.freespin={}))}(e.views||(e.views={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.views.freespin.FreespinAnimation,o=e.egt.baseslot.models.Notifications,s=e.egt.library.sound.SoundManager,a=e.egt.library.utils.log,r=function(e){function i(){var t=e.call(this)||this;return t.mainModel.saveFreespinBetResponse(),t._view=new window.com.egt.freespinAnimation.Main(t.mainModel),t._view.interactive=!0,t.mainModel.isFreespinGame?t.startFreespinBackgroundSound():(t.activateFreespinView(),t.playInitialAnimation()),t.soundManager.addEventListener(s.SOUND_LOADED,t.onSoundsLoaded,t),t}return __extends(i,e),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameSettings",{get:function(){return this.mainModel.gameSettings},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundManager",{get:function(){return this.mainModel.soundManager},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),i.prototype.getInterests=function(){return[o.FREESPIN_ANIMATION_START_CLICKED,o.REELS_STOPPED,o.WIN_MONEY_ANIMATION_COMPLETE,o.ENTER_FREESPINS_SCENARIO_COMPLETE,o.SPIN_CLICKED,o.BET_RECEIVED,o.CURRENCY_CHANGED]},i.prototype.handleNotification=function(e){switch(this.log("Handle notification[%s]",e.name),e.name){case o.FREESPIN_ANIMATION_START_CLICKED:this.view.playIntro();break;case o.REELS_STOPPED:this._isWaitingForBetResult||(0!=this.mainModel.spinAnalyzer.numberOfWins?this.freespinBackgroundSoundVolume=.5:!this.mainModel.hasMoreFreespinsToPlay&&this.mainModel.isFreespinGame&&this.playOutro());break;case o.WIN_MONEY_ANIMATION_COMPLETE:this._isWaitingForBetResult||this.mainModel.hasMoreFreespinsToPlay||!this.mainModel.isFreespinGame||this.playOutro();break;case o.ENTER_FREESPINS_SCENARIO_COMPLETE:this.mainModel.isFreespinGame&&(this.stopFreespinBackgroundSound(),this.activateFreespinView(),this.view.playRetrigger());break;case o.SPIN_CLICKED:this._isWaitingForBetResult=!0,this.freespinBackgroundSoundVolume=1;break;case o.BET_RECEIVED:this._isWaitingForBetResult=!1;break;case o.CURRENCY_CHANGED:this.view.isDisplayingCredits=this.mainModel.isDisplayingCredits}},i.prototype.dispose=function(){this.soundManager.removeEventListener(s.SOUND_LOADED,this.onSoundsLoaded,this),this.deactivateFreespinView(),this.stopFreespinBackgroundSound(),this.view.dispose(),e.prototype.dispose.call(this)},i.prototype.playInitialAnimation=function(){this.view.playStart()},i.prototype.activateFreespinView=function(){this.view.on(n.START_CLICKED,this.onStartClick,this),this.view.on(n.REFRESH_SCREEN,this.onRefreshScreen,this),this.view.on(n.INTRO_ENDED,this.onIntroEnded,this),this.view.on(n.RETRIGGER_ENDED,this.onRetriggerEnded,this),this.view.on(n.OUTRO_ENDED,this.onOutroEnded,this),this.view.visible=!0},i.prototype.deactivateFreespinView=function(){this.view.off(n.START_CLICKED,this.onStartClick,this),this.view.off(n.REFRESH_SCREEN,this.onRefreshScreen,this),this.view.off(n.INTRO_ENDED,this.onIntroEnded,this),this.view.off(n.RETRIGGER_ENDED,this.onRetriggerEnded,this),this.view.off(n.OUTRO_ENDED,this.onOutroEnded,this),this.view.visible=!1},i.prototype.playOutro=function(){this.stopFreespinBackgroundSound(),this.activateFreespinView(),this.view.playOutro(),this.sendNotification(o.FREESPIN_OUTRO_STARTED)},i.prototype.startFreespinBackgroundSound=function(){this._freespinBackgroundSound||(this._freespinBackgroundSound=this.soundManager.play("freeSpinsBackgroundSound",!0),null==this._freespinBackgroundSound&&this.soundManager.hasSound("freeSpinsBackgroundSound")&&(this._isFreespinBackgroundSoundRequested=!0))},i.prototype.stopFreespinBackgroundSound=function(){this._isFreespinBackgroundSoundRequested=!1,this._freespinBackgroundSound&&(this._freespinBackgroundSound.stop(),this._freespinBackgroundSound=null)},Object.defineProperty(i.prototype,"freespinBackgroundSoundVolume",{set:function(e){this._freespinBackgroundSoundRequestedVolume=e,this._freespinBackgroundSound&&(this._freespinBackgroundSound.volume=e)},enumerable:!0,configurable:!0}),i.prototype.onStartClick=function(){this.mainModel.isNoConnection||this.sendNotification(o.FREESPIN_ANIMATION_START_CLICKED)},i.prototype.onRefreshScreen=function(){console.log("REFRESH SCREEN"),this.mainModel.isFreespinGame?0!=this.mainModel.betResponse.complex.freespins?(this.mainModel.addNewFreespins(),this.sendNotification(o.FREESPIN_RETRIGGER_REFRESH_SCREEN)):(this.mainModel.restoreFreespinBetResponse(),this.mainModel.isFreespinGame=!1,this.gameSettings.restoreReels&&this.sendNotification(o.SHOW_ALL_CELLS),this.sendNotification(o.FREESPIN_OUTRO_REFRESH_SCREEN)):(this.mainModel.isFreespinGame=!0,this.mainModel.addNewFreespins(),this.sendNotification(o.FREESPIN_INTRO_REFRESH_SCREEN))},i.prototype.onIntroEnded=function(){this.deactivateFreespinView(),this.startFreespinBackgroundSound(),this.sendNotification(o.FREESPIN_INTRO_ENDED)},i.prototype.onRetriggerEnded=function(){this.deactivateFreespinView(),this.startFreespinBackgroundSound(),this.sendNotification(o.FREESPIN_RETRIGGER_ENDED)},i.prototype.onOutroEnded=function(){this.parent.removeChildViewController(this),this.sendNotification(o.FREESPIN_OUTRO_ENDED)},i.prototype.onSoundsLoaded=function(e){"freespinSounds"==e.data.soundId&&this._isFreespinBackgroundSoundRequested&&(this.startFreespinBackgroundSound(),this.freespinBackgroundSoundVolume=this._freespinBackgroundSoundRequestedVolume)},i=__decorate([a.decorator],i)}(Pluck.ViewController);i.FreespinController=r}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.library.Device,n=function(){function e(){this._isKeyDown=!1,this.isKeyboardEnabled=!0,this._boundOnKeyDown=this.onKeyDown.bind(this),this._boundOnKeyUp=this.onKeyUp.bind(this),this._boundOnBlur=this.onBlur.bind(this),$(window).on("keydown",this._boundOnKeyDown),$(window).on("keyup",this._boundOnKeyUp),$(window).on("blur",this._boundOnBlur)}return Object.defineProperty(e.prototype,"view",{set:function(e){this._view=e},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){$(window).off("keydown",this._boundOnKeyDown),$(window).off("keyup",this._boundOnKeyUp),$(window).off("blur",this._boundOnBlur)},e.prototype.pressDown=function(e){e.interactive&&this.isKeyboardEnabled&&e.emit(i.resolveEvent("mousedown"),{target:e})},e.prototype.click=function(e){e.emit(i.resolveEvent("mouseup"),{target:e}),e.interactive&&this.isKeyboardEnabled&&e.emit(i.resolveEvent("click"),{target:e})},e.prototype.onKeyDown=function(e){this._isKeyDown||(this._isKeyDown=!0,this._keyCode=e.keyCode,67==e.keyCode&&this._view.buttons[0]?this.pressDown(this._view.buttons[0]):86==e.keyCode&&this._view.buttons[1]?this.pressDown(this._view.buttons[1]):66==e.keyCode&&this._view.buttons[2]?this.pressDown(this._view.buttons[2]):78==e.keyCode&&this._view.buttons[3]?this.pressDown(this._view.buttons[3]):77==e.keyCode&&this._view.buttons[4]&&this.pressDown(this._view.buttons[4]))},e.prototype.onKeyUp=function(e){e.keyCode==this._keyCode&&(this._isKeyDown=!1,this._keyCode=-1,67==e.keyCode&&this._view.buttons[0]?this.click(this._view.buttons[0]):86==e.keyCode&&this._view.buttons[1]?this.click(this._view.buttons[1]):66==e.keyCode&&this._view.buttons[2]?this.click(this._view.buttons[2]):78==e.keyCode&&this._view.buttons[3]?this.click(this._view.buttons[3]):77==e.keyCode&&this._view.buttons[4]&&this.click(this._view.buttons[4]))},e.prototype.onBlur=function(){var e={};e.keyCode=this._keyCode,this.onKeyUp(e)},e}();t.SmallDenomKeyboardManager=n}(t.ui||(t.ui={}))}(t.models||(t.models={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(t){var i=function(i){function n(){var o=i.call(this)||this,s=e.bottle.container.GameSettings;o.buttons=[];for(var a=s.denominations.length,r=0;r<a;r++){var l=e.bottle.container.DenominationButton.instance();l.init(s.currencyISO,t.DenominationButton.TYPE_SECONDARY,s.diamondPlay,s.currencyHideCents),l.topText="1 "+s.localization.Credit,l.money=s.denominations[r][0],l.position.set(n.BUTTONS_START_X,n.BUTTONS_START_Y-(r+1)*(l.height+n.BUTTONS_BOTTOM_MARGIN)),o.addChild(l),o.buttons[r]=l}return o}return __extends(n,i),n.BUTTONS_START_X=322,n.BUTTONS_START_Y=638,n.BUTTONS_BOTTOM_MARGIN=6,n}(PIXI.Container);t.SmallDenominationsView=i}(e.views||(e.views={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.models.Notifications,o=e.egt.library.Device,s=function(e){function i(){var i=e.call(this)||this;return i._view=t.bottle.container.SmallDenominationsView.instance(),i._keyboardManager=t.bottle.container.SmallDenomKeyboardManager.instance(),i._keyboardManager.view=i.view,i.view.buttons[i.mainModel.currentDenomIndex].isActive=!0,i.configureListeners(!0),i.soundManager.play("showDenominationsSound"),i.sendNotification(n.SMALL_DENOMINATIONS_OPENED),i}return __extends(i,e),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundManager",{get:function(){return this.mainModel.soundManager},enumerable:!0,configurable:!0}),i.prototype.getInterests=function(){return[n.DENOMINATION_CLICKED,n.SPIN_CLICKED,n.GAMBLE_CLICKED,n.WIN_COLLECTED,n.NO_CONNECTION,n.INSUFFICIENT_BALANCE,n.SELECT_AUTOPLAY_BUTTONS_OPENED]},i.prototype.handleNotification=function(e){switch(e.name){case n.DENOMINATION_CLICKED:this.soundManager.play("hideDenominationsSound"),this.close();break;case n.SPIN_CLICKED:case n.GAMBLE_CLICKED:case n.WIN_COLLECTED:case n.NO_CONNECTION:case n.SELECT_AUTOPLAY_BUTTONS_OPENED:case n.INSUFFICIENT_BALANCE:this.close()}},i.prototype.dispose=function(){this.configureListeners(!1),this._keyboardManager.dispose(),e.prototype.dispose.call(this)},i.prototype.close=function(){this.parent&&(this.parent.removeChildViewController(this),this.sendNotification(n.SMALL_DENOMINATIONS_CLOSED))},i.prototype.configureListeners=function(e){for(var t=e?"on":"off",i=this.view.buttons.length,n=0;n<i;n++)this.view.buttons[n][t](o.resolveEvent("click"),this.onButtonClick,this)},i.prototype.onButtonClick=function(e){var t=this.view.buttons.indexOf(e.target);this.mainModel.currentDenomIndex!=t&&(this.mainModel.currentDenomIndex=t,this.sendNotification(n.DENOMINATION_CHANGED)),this.soundManager.play("changeDenominationSound"),this.close()},i}(Pluck.ViewController);i.SmallDenominationsController=s}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=e.egt.library.Utils,o=e.egt.baseslot.models.Notifications,s=e.egt.baseslot.models.Resources,a=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.handleNotification=function(t){switch(t.name){case o.EXPAND_COMPLETE:this.showNonWinningTopCardImages(),e.prototype.handleNotification.call(this,t);break;case o.FREESPIN_OUTRO_REFRESH_SCREEN:this.removeAllNonWinningTopCardImages(),e.prototype.handleNotification.call(this,t);break;default:e.prototype.handleNotification.call(this,t)}},t.prototype.arrangeCardsOnTop=function(){var e,t,i,n,o,s;this.gameSettings.cardsOnTopArrangeTopToBottom?(e=0,t=this.gameSettings.numReelCards,i=1):(e=this.gameSettings.numReelCards-1,t=0,i=-1),this.gameSettings.cardsOnTopArrangeLeftToRight?(n=0,o=this.gameSettings.numReels,s=1):(n=this.gameSettings.numReels-1,o=0,s=-1);for(var a=e;i>0?a<t:a>=t;a+=i)for(var r=n;s>0?r<o:r>=o;r+=s)this._createdInstances[this.getCellIndex(r,a)]&&this.view.addChild(this._createdInstances[this.getCellIndex(r,a)])},t.prototype.createVideo=function(t,i,n){var o=e.prototype.createVideo.call(this,t,i,n);if(null!=this._nonWinningTopCardImages){var s=this.getVideoConfig(this.getVideoIndex(t,i,n));if(o&&null!=s)if(s.onWholeReel)for(var a=0;a<this.gameSettings.numReelCards;a++)this.removeNonWinningTopCardImage(t,a);else this.removeNonWinningTopCardImage(t,i)}return o},t.prototype.removeAllNonWinningTopCardImages=function(){for(var e=this._nonWinningTopCardImages.length,t=0;t<e;t++)null!=this._nonWinningTopCardImages[t]&&(this.view.removeChild(this._nonWinningTopCardImages[t]),this._nonWinningTopCardImages[t]=null);this._nonWinningTopCardImages=[]},t.prototype.removeNonWinningTopCardImage=function(e,t){var i=this.getCellIndex(e,t),n=this._nonWinningTopCardImages[i];this._nonWinningTopCardImages[i]=null,null!=n&&this.view.removeChild(n),this.sendNotification(o.SHOW_CELLS,{cells:[e,t]})},t.prototype.defineVideos=function(t){if(this._nonWinningTopCardImages=[],this._cellsFornonWinningTopCardImages=[],null!=this.gameSettings.cardsOnTopIndexes)for(var o=0;o<this.gameSettings.numReels;o++)for(var s=0;s<this.gameSettings.numReelCards;s++){var a=this.mainModel.spinAnalyzer.getCardAfterExpand(o,s);if(-1!=this.gameSettings.cardsOnTopIndexes.indexOf(a)){var r=i.getLoader("gameImages"),l=n.convertToSequenceString(a),c=new PIXI.Sprite(r.getTexture(l+".png"));this.view.addChild(c),c.x=this.gameSettings.reelCoordX+o*(this.gameSettings.reelWidth+this.gameSettings.reelSpacing)-(c.width-this.gameSettings.reelWidth)/2;var u=this.gameSettings.reelHeight/this.gameSettings.numReelCards;c.y=this.gameSettings.reelCoordY+s*u-(c.height-u)/2,c.visible=!1,this._nonWinningTopCardImages[this.getCellIndex(o,s)]=c,this._cellsFornonWinningTopCardImages.push(o),this._cellsFornonWinningTopCardImages.push(s)}}e.prototype.defineVideos.call(this,t),this.arrangeCardsOnTop()},t.prototype.showNonWinningTopCardImages=function(){for(var e=this._nonWinningTopCardImages.length,t=0;t<e;t++)null!=this._nonWinningTopCardImages[t]&&(this._nonWinningTopCardImages[t].visible=!0);this.sendNotification(o.CLEAR_CELLS,{cells:this.getNonWinningTopCells()})},t.prototype.getNonWinningTopCells=function(){return this._cellsFornonWinningTopCardImages.length?this._cellsFornonWinningTopCardImages.slice():[]},t.prototype.resolveVideoConfig=function(e){var t=null;return e.hasOwnProperty("top")&&((t=e.top).suffix=e.hasOwnProperty("bottom")?"top":""),t},t.prototype.shouldPlayExpand=function(){return this.getVideoConfig(this.gameSettings.reelVideos.length)},t.prototype.onVideoLoaded=function(e){if(-1!=e.id.indexOf(s.WIN_VIDEO_LOADER_ID_PREFIX)){var t=parseInt(e.id.split(this.getWinVideoLoaderIdPrefix())[1]),i=this._requestedVideos[t];if(i){for(var n=i.length,o=0;o<n;o++)this.createVideo(i[o].col,i[o].row,!1),this._winVideosStarted?this.removeNonWinningExpandImage(i[o].col,i[o].row):this.removeNonWinningExpandCell(i[o].col,i[o].row);this.arrangeCardsOnTop(),this._winVideosStarted&&this.playVideo(t,!0)}}},t}(t.VideoController);t.TopVideoController=a}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(t){!function(t){var i=function(t){function i(){var i=t.call(this)||this,n=e.bottle.container.GameSettings;i.autoplayButtons=[];for(var o=n.autoplayLimit.length,s=0;s<o;s++){var a=e.bottle.container.AutoplayButton.instance();a.count(n.autoplayLimit[s]),a.position.set(245,609-s*(a.height+11)),i.autoplayButtons[s]=a,i.addChild(a)}return i}return __extends(i,t),i}(PIXI.Container);t.AutoplaySelectView=i}(t.ui||(t.ui={}))}(e.views||(e.views={}))}(e.baseslot||(e.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.library.Device,n=function(){function e(){this._isKeyDown=!1,this.isKeyboardEnabled=!0,this._boundOnKeyDown=this.onKeyDown.bind(this),this._boundOnKeyUp=this.onKeyUp.bind(this),this._boundOnBlur=this.onBlur.bind(this),$(window).on("keydown",this._boundOnKeyDown),$(window).on("keyup",this._boundOnKeyUp),$(window).on("blur",this._boundOnBlur)}return Object.defineProperty(e.prototype,"view",{set:function(e){this._view=e},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){$(window).off("keydown",this._boundOnKeyDown),$(window).off("keyup",this._boundOnKeyUp),$(window).off("blur",this._boundOnBlur)},e.prototype.pressDown=function(e){e.interactive&&this.isKeyboardEnabled&&e.emit(i.resolveEvent("mousedown"),{target:e})},e.prototype.click=function(e){e.emit(i.resolveEvent("mouseup"),{target:e}),e.interactive&&this.isKeyboardEnabled&&e.emit(i.resolveEvent("click"),{target:e})},e.prototype.onKeyDown=function(e){this._isKeyDown||(this._isKeyDown=!0,this._keyCode=e.keyCode,67==e.keyCode&&this._view.autoplayButtons[0]?this.pressDown(this._view.autoplayButtons[0]):86==e.keyCode&&this._view.autoplayButtons[1]?this.pressDown(this._view.autoplayButtons[1]):66==e.keyCode&&this._view.autoplayButtons[2]?this.pressDown(this._view.autoplayButtons[2]):78==e.keyCode&&this._view.autoplayButtons[3]?this.pressDown(this._view.autoplayButtons[3]):77==e.keyCode&&this._view.autoplayButtons[4]&&this.pressDown(this._view.autoplayButtons[4]))},e.prototype.onKeyUp=function(e){e.keyCode==this._keyCode&&(this._isKeyDown=!1,this._keyCode=-1,67==e.keyCode&&this._view.autoplayButtons[0]?this.click(this._view.autoplayButtons[0]):86==e.keyCode&&this._view.autoplayButtons[1]?this.click(this._view.autoplayButtons[1]):66==e.keyCode&&this._view.autoplayButtons[2]?this.click(this._view.autoplayButtons[2]):78==e.keyCode&&this._view.autoplayButtons[3]?this.click(this._view.autoplayButtons[3]):77==e.keyCode&&this._view.autoplayButtons[4]&&this.click(this._view.autoplayButtons[4]))},e.prototype.onBlur=function(){var e={};e.keyCode=this._keyCode,this.onKeyUp(e)},e}();t.AutoplaySelectKeyboardManager=n}(t.ui||(t.ui={}))}(t.models||(t.models={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.models.Notifications,o=e.egt.library.Device,s=function(e){function i(){var i=e.call(this,t.bottle.container.AutoplaySelectView.instance())||this;return i._keyboardManager=t.bottle.container.AutoplaySelectKeyboardManager.instance(),i._keyboardManager.view=i.view,i.setUpListeners(!0),i.sendNotification(n.SELECT_AUTOPLAY_BUTTONS_OPENED),i}return __extends(i,e),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mainModel",{get:function(){return t.bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameSettings",{get:function(){return t.bottle.container.GameSettings},enumerable:!0,configurable:!0}),i.prototype.getInterests=function(){return[n.START_AUTOPLAY_BUTTON_CLICKED,n.SPIN_CLICKED,n.GAMBLE_CLICKED,n.WIN_COLLECTED,n.NO_CONNECTION,n.SMALL_DENOMINATIONS_OPENED,n.INSUFFICIENT_BALANCE]},i.prototype.handleNotification=function(e){switch(e.name){case n.START_AUTOPLAY_BUTTON_CLICKED:case n.SPIN_CLICKED:case n.GAMBLE_CLICKED:case n.WIN_COLLECTED:case n.NO_CONNECTION:case n.SMALL_DENOMINATIONS_OPENED:case n.INSUFFICIENT_BALANCE:this.close()}},i.prototype.dispose=function(){e.prototype.dispose.call(this),this._keyboardManager.dispose(),this.setUpListeners(!1)},i.prototype.close=function(){this.sendNotification(n.SELECT_AUTOPLAY_BUTTONS_CLOSED),this.parent.removeChildViewController(this)},i.prototype.setUpListeners=function(e){for(var t=this.view.autoplayButtons.length,i=0;i<t;i++)this.view.autoplayButtons[i][e?"on":"off"](o.resolveEvent("click"),this.onButtonClick,this)},i.prototype.onButtonClick=function(e){var t=this.view.autoplayButtons.indexOf(e.target);this.mainModel.remainingAutoplays=this.gameSettings.autoplayLimit[t],this.sendNotification(n.SELECT_AUTOPLAY_BUTTON_CLICKED)},i}(Pluck.ViewController);i.AutoplaySelectController=s}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(i){var n=e.egt.baseslot.models.Notifications,o=e.egt.baseslot.models.server.response.BaseResponse,s=e.egt.baseslot.models.server.response.GambleResponse,a=e.egt.baseslot.models.server.response.JackpotResponse,r=e.egt.library.Device,l=e.egt.library.events.LoaderEvent,c=e.egt.library.loading.Loader,u=e.egt.library.utils.log,h=function(e){function i(i){var n=e.call(this,i,t.bottle.container.MainModel)||this;n.mainModel.init(),n.mainModel.eventDispatcher=i;return n}return __extends(i,e),i.prototype.animate=function(){PIXI.renderer.render(this.view),requestAnimationFrame(this._boundAnimate)},Object.defineProperty(i.prototype,"mainModel",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"gameSettings",{get:function(){return this.mainModel.gameSettings},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),i.prototype.getInterests=function(){return[n.RESOURCES_LOADED,n.RESOURCES_PROGRESS,n.RESOURCES_ERROR,n.GAMBLE_CLICKED,n.DENOMINATION_CLICKED,n.REELS_STOPPED,n.WIN_MONEY_ANIMATION_COMPLETE,n.WIN_MONEY_COLLECT_ANIMATION_COMPLETE,n.COLLECT_RECEIVED,n.GAMBLE_COMPLETED,n.PAYTABLE_CLICKED,n.ENTER_FREESPINS_SCENARIO_COMPLETE,n.FREESPIN_OUTRO_REFRESH_SCREEN,n.FREESPIN_OUTRO_ENDED,n.START_AUTOPLAY_BUTTON_CLICKED]},i.prototype.handleNotification=function(e){switch(this.log("Handle notification[%s]",e.name),e.name){case n.RESOURCES_LOADED:this.mainModel.initFromCurrentState(),this.mainModel.resources.registerSounds(this.mainModel.soundManager),this.mainModel.resources.loadVideos(),r.isSoundSupported()&&(this.mainModel.soundManager.loadAll(),this.mainModel.soundManager.isMuted=gpts.muted),this.makeSpaceForTotalLabels(),this.createBackground(),this.createInitialControllers(),this.mainModel.currentState=null,TweenMax.delayedCall(this.gameSettings.gameReadyDelay,function(){this.view.dispatchEvent(new l(t.Main.COMPLETE_INTEGRATION))},null,this);break;case n.RESOURCES_PROGRESS:this.mainModel.eventDispatcher.dispatchEvent(new l(t.Main.INTEGRATED_PROGRESS,e.body));break;case n.RESOURCES_ERROR:this.mainModel.eventDispatcher.dispatchEvent(new l(t.Main.FAIL_INTEGRATION));break;case n.GAMBLE_CLICKED:this.startGamble();break;case n.DENOMINATION_CLICKED:if(!this.getController(t.bottle.container.SmallDenominationsControllerConstructor)){var i=t.bottle.container.SmallDenominationsController.instance();this.addChildViewController(i)}break;case n.REELS_STOPPED:0!=this.mainModel.spinAnalyzer.numberOfWins?(this.mainModel.shouldPlayFullVisualization=!0,this.startWinVisualization()):this.mainModel.betResponse.state!=o.STATE_JACKPOT||this.mainModel.isFreespinGame||this.startJackpot();break;case n.WIN_MONEY_ANIMATION_COMPLETE:this.mainModel.response.state!=o.STATE_JACKPOT||this.mainModel.isFreespinGame||TweenMax.delayedCall(this.gameSettings.jackpotShowDelay,this.startJackpot,null,this);break;case n.WIN_MONEY_COLLECT_ANIMATION_COMPLETE:this.mainModel.response.state!=o.STATE_JACKPOT||this.mainModel.commManager.isWaitingForCollect||this.startJackpot();break;case n.COLLECT_RECEIVED:this.mainModel.response.state!=o.STATE_JACKPOT||this._bottomLabelsController.isWinMoneyAnimating||this.startJackpot();break;case n.GAMBLE_COMPLETED:this.mainModel.isInGamble=!1,this.mainModel.response.state==o.STATE_JACKPOT&&0==this.mainModel.response.winAmount&&this.startJackpot();break;case n.PAYTABLE_CLICKED:if(!this.getController(t.bottle.container.PaytableControllerConstructor)){var s=t.bottle.container.PaytableController.instance();this.addChildViewController(s),null!=this.getController(t.bottle.container.JackpotDropDownControllerConstructor)?s.zIndex=this.getController(t.bottle.container.JackpotDropDownControllerConstructor).zIndex:null!=this.getController(t.bottle.container.SmallDenominationsControllerConstructor)&&(s.zIndex=this.getController(t.bottle.container.SmallDenominationsControllerConstructor).zIndex)}break;case n.ENTER_FREESPINS_SCENARIO_COMPLETE:this.createFreespinController();break;case n.FREESPIN_OUTRO_REFRESH_SCREEN:this.gameSettings.restoreReels&&this.mainModel.betResponse.state==o.STATE_GAMBLE&&this.startWinVisualization();break;case n.FREESPIN_OUTRO_ENDED:this.mainModel.response.state==o.STATE_JACKPOT&&this.startJackpot();break;case n.START_AUTOPLAY_BUTTON_CLICKED:this.gameSettings.hasAutoplayLimit()&&null==this.getController(t.bottle.container.AutoplaySelectControllerConstructor)&&this.addChildViewController(t.bottle.container.AutoplaySelectController.instance())}},i.prototype.createBackground=function(){var e=c.getLoader("gameImages");this._background=new PIXI.Sprite(e.getTexture("background.jpg")),this._gameTitle=new PIXI.Sprite(e.getTexture(this.gameSettings.jackpot?"gameTitle.png":"gameTitleNoJackpot.png")),this._gameTitle.position.set(this.gameSettings.jackpot?444:(PIXI.renderer.width-this._gameTitle.width)/2,0),this.view.addChild(this._background),this.view.addChild(this._gameTitle);var t=e.getTexture("reelBorder.png");null!=t&&(this._reelBorder=new PIXI.Sprite(t),this.view.addChild(this._reelBorder))},i.prototype.createInitialControllers=function(){this._bottomLabelsController=t.bottle.container.BottomLabelsController;var e,i,n=t.bottle.container.ReelsController,o=t.bottle.container.UIController,s=t.bottle.container.BulbsController;this.mainModel.gameSettings.jackpot&&(e=t.bottle.container.JackpotStatisticsController,i=t.bottle.container.JackpotDropDownController),e&&this.addChildViewController(e),this.addChildViewController(this._bottomLabelsController),this.addChildViewController(n),this.addChildViewController(s),this.addChildViewController(o),i&&this.addChildViewController(i),null!=this._reelBorder&&(n.zIndex=this.view.getChildIndex(this._reelBorder),this.gameSettings.lineGame||(s.zIndex=this.view.getChildIndex(this._reelBorder))),this.createControllersFromCurrentState()},i.prototype.createControllersFromCurrentState=function(){this.mainModel.response instanceof s?this.startGamble():this.mainModel.response instanceof a?this.startJackpot():this.mainModel.currentState.state==o.STATE_GAMBLE?this.startWinVisualization():this.mainModel.currentState.state==o.STATE_FREESPIN&&(this.mainModel.isFreespinGame||this.startWinVisualization(),this.createFreespinController())},i.prototype.startWinVisualization=function(){var e=this;if(!this.getController(t.bottle.container.WinVisualizationControllerConstructor)&&0!=this.mainModel.spinAnalyzer.numberOfWins){var i=t.bottle.container.MultiplierXImageController.instance();this.addChildViewController(i);var o=t.bottle.container.WinVisualizationController.instance();this.addChildViewController(o),o.zIndex=this.getController(t.bottle.container.UIControllerConstructor).zIndex+1,this.addVideoController(),this.addTopVideoController();var s=this.getController(t.bottle.container.TopVideoControllerConstructor),a=t.bottle.container.CoinsController.instance();this.addChildViewController(a),i.zIndex=s.zIndex+1,a.zIndex=s.zIndex+2;var r=null!==this.mainModel.currentState;setTimeout(function(){return e.sendNotification(n.START_WIN_VISUALIZATION,{isRecovery:r})},0)}},i.prototype.addVideoController=function(){var e=this.getController(t.bottle.container.VideoControllerConstructor),i=this.getController(t.bottle.container.WinVisualizationControllerConstructor);e?this.warn("Video controller already added..."):(this.log("Adding video controller..."),e=t.bottle.container.VideoController.instance(),this.addChildViewController(e)),null!=this._reelBorder?e.zIndex=this.view.getChildIndex(this._reelBorder):i&&(e.zIndex=i.zIndex)},i.prototype.addTopVideoController=function(){this.log("Adding top video controller...");var e=this.getController(t.bottle.container.WinVisualizationControllerConstructor),i=this.getController(t.bottle.container.VideoControllerConstructor),n=t.bottle.container.TopVideoController.instance();this.addChildViewController(n),e?n.zIndex=e.zIndex+1:i&&(n.zIndex=i.zIndex+1)},i.prototype.startJackpot=function(){if(!this.mainModel.isNoConnection&&this.mainModel.response.state==o.STATE_JACKPOT&&null==this.getController(t.bottle.container.JackpotControllerConstructor)){var e=t.bottle.container.JackpotController.instance();this.addChildViewController(e),e.zIndex=this.getController(t.bottle.container.JackpotDropDownControllerConstructor).zIndex,this.sendNotification(n.JACKPOT_STARTED)}},i.prototype.startGamble=function(){var e=t.bottle.container.GambleController.instance();this.mainModel.isInGamble=!0,this.addChildViewController(e),null!=this.getController(t.bottle.container.JackpotDropDownControllerConstructor)&&(e.zIndex=this.getController(t.bottle.container.JackpotDropDownControllerConstructor).zIndex)},i.prototype.createFreespinController=function(){if(null==this.getController(t.bottle.container.FreespinControllerConstructor)){var e=t.bottle.container.FreespinController.instance();this.addChildViewController(e);var i=this.getController(t.bottle.container.CustomResultControllerConstructor);i&&(e.zIndex=i.zIndex)}},i.prototype.makeSpaceForTotalLabels=function(){if(this.gameSettings.sendTotalsInfo){var e=(PIXI.renderer.height-this.gameSettings.totalLabelsPanelHeight)/PIXI.renderer.height;this.view.scale.set(e),this.view.x=(PIXI.renderer.width-PIXI.renderer.width*e)/2;var t=new PIXI.Graphics;t.beginFill(16711680),t.drawRect(0,0,PIXI.renderer.width,PIXI.renderer.height/e),t.endFill(),this.view.addChild(t),this.view.mask=t}},i=__decorate([u.decorator],i)}(Pluck.ViewController);i.RootController=h}(t.controllers||(t.controllers={}))}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){var i=e.egt.library.events.EventDispatcher,n=e.egt.baseslot.models.server.BaseComplex,o=Pluck.ViewController,s=e.egt.library.utils.log;s.isEnabled=void 0,s.isStylized=void 0;var a=function(a){function r(){var e=a.call(this)||this;return e.setupBottle(),e.events=[n.BET,n.COLLECT,n.GAMBLE,n.JACKPOT,n.SET_RESULT,l.HIDE_GAME],e._eventDispatcher=new i,e._rootController=t.bottle.container.RootController,o.setRoot(e._rootController),e}return __extends(r,a),l=r,Object.defineProperty(r.prototype,"data",{set:function(e){"event"!==e.command&&this.warn("Received state[%s] command[%s] game command[%s] data[%o]",e.state,e.command,e.complex?e.complex.gameCommand:null,e),t.bottle.container.MainModel.setData(e)},enumerable:!0,configurable:!0}),r.prototype.addEventListener=function(e,t,i){this._eventDispatcher.addEventListener(e,t,i)},r.prototype.dispatchEvent=function(e,t){this.warn("Send[%s] data[%o]",e.type,e.data),this._eventDispatcher.dispatchEvent(e,t)},r.prototype.hasEventListener=function(e){return this._eventDispatcher.hasEventListener(e)},r.prototype.removeEventListener=function(e,t,i){this._eventDispatcher.removeEventListener(e,t,i)},r.prototype.dispose=function(){this._eventDispatcher.dispose(),o.disposeRootController(),this.destroy(!0),Bottle.clear("slot"),delete e.egt.baseslot.bottle,delete e.egt.baseslot,delete window.com.egt.freespinAnimation},r.prototype.setupBottle=function(){this.defineBottleConstructors(),this.setupBottleClasses()},r.prototype.defineBottleConstructors=function(){t.bottle.value("RootControllerConstructor",e.egt.baseslot.controllers.RootController),t.bottle.value("ReelsControllerConstructor",e.egt.baseslot.controllers.ReelsController),t.bottle.value("UIControllerConstructor",e.egt.baseslot.controllers.UIController),t.bottle.value("JackpotDropDownControllerConstructor",e.egt.baseslot.controllers.JackpotDropDownController),t.bottle.value("JackpotStatisticsControllerConstructor",e.egt.baseslot.controllers.JackpotStatisticsController),t.bottle.value("CustomResultControllerConstructor",e.egt.baseslot.controllers.CustomResultController),t.bottle.value("BulbsControllerConstructor",e.egt.baseslot.controllers.BulbsController),t.bottle.value("BottomLabelsControllerConstructor",e.egt.baseslot.controllers.BottomLabelsController),t.bottle.value("FreespinControllerConstructor",e.egt.baseslot.controllers.FreespinController),t.bottle.value("GambleControllerConstructor",e.egt.baseslot.controllers.GambleController),t.bottle.value("JackpotControllerConstructor",e.egt.baseslot.controllers.JackpotController),t.bottle.value("PaytableControllerConstructor",e.egt.baseslot.controllers.PaytableController),t.bottle.value("SmallDenominationsControllerConstructor",e.egt.baseslot.controllers.SmallDenominationsController),t.bottle.value("SoundPopUpControllerConstructor",e.egt.baseslot.controllers.SoundPopUpController),t.bottle.value("TopVideoControllerConstructor",e.egt.baseslot.controllers.TopVideoController),t.bottle.value("VideoControllerConstructor",e.egt.baseslot.controllers.VideoController),t.bottle.value("WinVisualizationControllerConstructor",e.egt.baseslot.controllers.WinVisualizationController),t.bottle.value("MultiplierXImageControllerConstructor",e.egt.baseslot.controllers.MultiplierXImageController),t.bottle.value("CoinsControllerConstructor",e.egt.baseslot.controllers.CoinsController),t.bottle.value("AutoplaySelectControllerConstructor",e.egt.baseslot.controllers.AutoplaySelectController),t.bottle.value("MainModelConstructor",e.egt.baseslot.models.MainModel),t.bottle.value("CommunicationManagerConstructor",e.egt.baseslot.models.server.CommunicationManager),t.bottle.value("GameSettingsConstructor",e.egt.baseslot.models.GameSettings),t.bottle.value("CurrentStateConstructor",e.egt.baseslot.models.server.response.CurrentState),t.bottle.value("SpinAnalyzerConstructor",e.egt.baseslot.models.SpinAnalyzer),t.bottle.value("ResourcesConstructor",e.egt.baseslot.models.Resources),t.bottle.value("ReelsModelConstructor",e.egt.baseslot.models.reels.ReelsModel),t.bottle.value("JackpotModelConstructor",e.egt.baseslot.models.jackpot.JackpotModel),t.bottle.value("CustomResultModelConstructor",e.egt.baseslot.models.customresult.CustomResultModel),t.bottle.value("BaseResponseConstructor",e.egt.baseslot.models.server.response.BaseResponse),t.bottle.value("BetResponseConstructor",e.egt.baseslot.models.server.response.BetResponse),t.bottle.value("GambleResponseConstructor",e.egt.baseslot.models.server.response.GambleResponse),t.bottle.value("JackpotResponseConstructor",e.egt.baseslot.models.server.response.JackpotResponse),t.bottle.value("JackpotStatisticsConstructor",e.egt.baseslot.models.server.response.JackpotStatistics),t.bottle.value("BaseComplexConstructor",e.egt.baseslot.models.server.BaseComplex),t.bottle.value("BetComplexConstructor",e.egt.baseslot.models.server.BetComplex),t.bottle.value("GambleComplexConstructor",e.egt.baseslot.models.server.GambleComplex),t.bottle.value("JackpotComplexConstructor",e.egt.baseslot.models.server.JackpotComplex),t.bottle.value("WinVisualizationModelConstructor",e.egt.baseslot.models.winvisualization.WinVisualizationModel),t.bottle.value("MoneyAnimationConstructor",e.egt.baseslot.models.MoneyAnimation),t.bottle.value("SmallDenomKeyboardManagerConstructor",e.egt.baseslot.models.ui.SmallDenomKeyboardManager),t.bottle.value("UIKeyboardManagerConstructor",e.egt.baseslot.models.ui.UIKeyboardManager),t.bottle.value("UIStateManagerConstructor",e.egt.baseslot.models.ui.UIStateManager),t.bottle.value("AutoplaySelectKeyboardManagerConstructor",e.egt.baseslot.models.ui.AutoplaySelectKeyboardManager),t.bottle.value("ReelViewConstructor",e.egt.baseslot.views.ReelView),t.bottle.value("UIViewConstructor",e.egt.baseslot.views.UIView),t.bottle.value("JackpotDropDownViewConstructor",e.egt.baseslot.views.jackpotstatistics.JackpotDropDownView),t.bottle.value("JackpotToolTipConstructor",e.egt.baseslot.views.jackpotstatistics.JackpotToolTip),t.bottle.value("JackpotStatisticsViewConstructor",e.egt.baseslot.views.jackpotstatistics.JackpotStatisticsView),t.bottle.value("CustomResultViewConstructor",e.egt.baseslot.views.CustomResultView),t.bottle.value("BulbsViewConstructor",e.egt.baseslot.views.bulbs.BulbsView),t.bottle.value("BulbsLinesViewConstructor",e.egt.baseslot.views.bulbs.BulbsLinesView),t.bottle.value("BulbsWaysViewConstructor",e.egt.baseslot.views.bulbs.BulbsWaysView),t.bottle.value("BottomLabelsViewConstructor",e.egt.baseslot.views.bottomlabels.BottomLabelsView),t.bottle.value("FreespinCountViewConstructor",e.egt.baseslot.views.bottomlabels.FreespinCountView),t.bottle.value("GambleViewConstructor",e.egt.baseslot.views.gamble.GambleView),t.bottle.value("JackpotViewConstructor",e.egt.baseslot.views.jackpot.JackpotView),t.bottle.value("JackpotShowAnimationConstructor",e.egt.baseslot.views.jackpot.JackpotShowAnimation),t.bottle.value("JackpotStatisticsBoxConstructor",e.egt.baseslot.views.jackpotstatistics.JackpotStatisticsBox),t.bottle.value("SmallDenominationsViewConstructor",e.egt.baseslot.views.SmallDenominationsView),t.bottle.value("PaytableViewConstructor",e.egt.baseslot.views.PaytableView),t.bottle.value("WinVisualizationViewConstructor",e.egt.baseslot.views.winvisualization.WinVisualizationView),t.bottle.value("MultiplierXImageViewConstructor",e.egt.baseslot.views.winvisualization.MultiplierXImageView),t.bottle.value("LinesViewConstructor",e.egt.baseslot.views.winvisualization.LinesView),t.bottle.value("WaysViewConstructor",e.egt.baseslot.views.WaysView),t.bottle.value("SoundPopUpViewConstructor",e.egt.baseslot.views.SoundPopUpView),t.bottle.value("AutoplaySelectViewConstructor",e.egt.baseslot.views.ui.AutoplaySelectView),t.bottle.value("BetControlButtonConstructor",e.egt.baseslot.views.BetControlButton),t.bottle.value("AutoplayButtonConstructor",e.egt.baseslot.views.AutoplayButton),t.bottle.value("DenominationButtonConstructor",e.egt.baseslot.views.DenominationButton),t.bottle.value("SoundButtonConstructor",e.egt.baseslot.views.SoundButton),t.bottle.value("FullscreenButtonConstructor",e.egt.baseslot.views.FullscreenButton),t.bottle.value("HelpButtonConstructor",e.egt.baseslot.views.HelpButton)},r.prototype.setupBottleClasses=function(){var e=this;t.bottle.factory("RootController",function(t){return new t.RootControllerConstructor(e)}),t.bottle.factory("ReelsController",function(e){return new e.ReelsControllerConstructor}),t.bottle.factory("UIController",function(e){return new e.UIControllerConstructor}),t.bottle.factory("JackpotDropDownController",function(e){return new e.JackpotDropDownControllerConstructor}),t.bottle.factory("JackpotStatisticsController",function(e){return new e.JackpotStatisticsControllerConstructor}),t.bottle.factory("CustomResultController",function(e){return new e.CustomResultControllerConstructor}),t.bottle.factory("BulbsController",function(e){return new e.BulbsControllerConstructor}),t.bottle.factory("BottomLabelsController",function(e){return new e.BottomLabelsControllerConstructor}),t.bottle.instanceFactory("FreespinController",function(e){return new e.FreespinControllerConstructor}),t.bottle.instanceFactory("GambleController",function(e){return new e.GambleControllerConstructor}),t.bottle.instanceFactory("JackpotController",function(e){return new e.JackpotControllerConstructor}),t.bottle.instanceFactory("PaytableController",function(e){return new e.PaytableControllerConstructor}),t.bottle.instanceFactory("SmallDenominationsController",function(e){return new e.SmallDenominationsControllerConstructor}),t.bottle.instanceFactory("SoundPopUpController",function(e){return new e.SoundPopUpControllerConstructor}),t.bottle.instanceFactory("TopVideoController",function(e){return new e.TopVideoControllerConstructor}),t.bottle.instanceFactory("VideoController",function(e){return new e.VideoControllerConstructor}),t.bottle.instanceFactory("WinVisualizationController",function(e){return new e.WinVisualizationControllerConstructor}),t.bottle.instanceFactory("MultiplierXImageController",function(e){return new e.MultiplierXImageControllerConstructor}),t.bottle.instanceFactory("CoinsController",function(e){return new e.CoinsControllerConstructor}),t.bottle.instanceFactory("AutoplaySelectController",function(e){return new e.AutoplaySelectControllerConstructor}),t.bottle.factory("MainModel",function(e){return new e.MainModelConstructor}),t.bottle.factory("CommunicationManager",function(e){return new e.CommunicationManagerConstructor}),t.bottle.factory("GameSettings",function(e){return new e.GameSettingsConstructor}),t.bottle.factory("CurrentState",function(e){return new e.CurrentStateConstructor}),t.bottle.factory("SpinAnalyzer",function(e){return new e.SpinAnalyzerConstructor}),t.bottle.factory("Resources",function(e){return new e.ResourcesConstructor}),t.bottle.factory("SoundManager",function(e){return new e.SoundManagerConstructor}),t.bottle.factory("ReelsModel",function(e){return new e.ReelsModelConstructor}),t.bottle.factory("CustomResultModel",function(e){return new e.CustomResultModelConstructor}),t.bottle.factory("UIKeyboardManager",function(e){return new e.UIKeyboardManagerConstructor}),t.bottle.factory("UIStateManager",function(e){return new e.UIStateManagerConstructor}),t.bottle.instanceFactory("JackpotModel",function(e){return new e.JackpotModelConstructor}),t.bottle.instanceFactory("BaseResponse",function(e){return new e.BaseResponseConstructor}),t.bottle.instanceFactory("BetResponse",function(e){return new e.BetResponseConstructor}),t.bottle.instanceFactory("GambleResponse",function(e){return new e.GambleResponseConstructor}),t.bottle.instanceFactory("JackpotResponse",function(e){return new e.JackpotResponseConstructor}),t.bottle.instanceFactory("JackpotStatistics",function(e){return new e.JackpotStatisticsConstructor}),t.bottle.instanceFactory("BaseComplex",function(e){return new e.BaseComplexConstructor}),t.bottle.instanceFactory("BetComplex",function(e){return new e.BetComplexConstructor}),t.bottle.instanceFactory("GambleComplex",function(e){return new e.GambleComplexConstructor}),t.bottle.instanceFactory("JackpotComplex",function(e){return new e.JackpotComplexConstructor}),t.bottle.instanceFactory("WinVisualizationModel",function(e){return new e.WinVisualizationModelConstructor}),t.bottle.instanceFactory("MoneyAnimation",function(e){return new e.MoneyAnimationConstructor}),t.bottle.instanceFactory("SmallDenomKeyboardManager",function(e){return new e.SmallDenomKeyboardManagerConstructor}),t.bottle.instanceFactory("AutoplaySelectKeyboardManager",function(e){return new e.AutoplaySelectKeyboardManagerConstructor}),t.bottle.factory("ReelView",function(e){return new e.ReelViewConstructor}),t.bottle.factory("UIView",function(e){return new e.UIViewConstructor}),t.bottle.factory("JackpotDropDownView",function(e){return new e.JackpotDropDownViewConstructor}),t.bottle.factory("JackpotStatisticsView",function(e){return new e.JackpotStatisticsViewConstructor}),t.bottle.factory("JackpotToolTip",function(e){return new e.JackpotToolTipConstructor}),t.bottle.factory("CustomResultView",function(e){return new e.CustomResultViewConstructor}),t.bottle.factory("BulbsView",function(e){return new e.BulbsViewConstructor}),t.bottle.factory("BulbsLinesView",function(e){return new e.BulbsLinesViewConstructor}),t.bottle.factory("BulbsWaysView",function(e){return new e.BulbsWaysViewConstructor}),t.bottle.factory("BottomLabelsView",function(e){return new e.BottomLabelsViewConstructor}),t.bottle.factory("FreespinCountView",function(e){return new e.FreespinCountViewConstructor}),t.bottle.instanceFactory("GambleView",function(e){return new e.GambleViewConstructor}),t.bottle.instanceFactory("JackpotView",function(e){return new e.JackpotViewConstructor}),t.bottle.instanceFactory("JackpotShowAnimation",function(e){return new e.JackpotShowAnimationConstructor}),t.bottle.instanceFactory("JackpotStatisticsBox",function(e){return new e.JackpotStatisticsBoxConstructor}),t.bottle.instanceFactory("SmallDenominationsView",function(e){return new e.SmallDenominationsViewConstructor}),t.bottle.instanceFactory("PaytableView",function(e){return new e.PaytableViewConstructor}),t.bottle.instanceFactory("WinVisualizationView",function(e){return new e.WinVisualizationViewConstructor}),t.bottle.instanceFactory("MultiplierXImageView",function(e){return new e.MultiplierXImageViewConstructor}),t.bottle.instanceFactory("LinesView",function(e){return new e.LinesViewConstructor}),t.bottle.instanceFactory("WaysView",function(e){return new e.WaysViewConstructor}),t.bottle.instanceFactory("SoundPopUpView",function(e){return new e.SoundPopUpViewConstructor}),t.bottle.instanceFactory("AutoplaySelectView",function(e){return new e.AutoplaySelectViewConstructor}),t.bottle.instanceFactory("BetControlButton",function(e){return new e.BetControlButtonConstructor}),t.bottle.instanceFactory("AutoplayButton",function(e){return new e.AutoplayButtonConstructor}),t.bottle.instanceFactory("DenominationButton",function(e){return new e.DenominationButtonConstructor}),t.bottle.instanceFactory("SoundButton",function(e){return new e.SoundButtonConstructor}),t.bottle.instanceFactory("FullscreenButton",function(e){return new e.FullscreenButtonConstructor})},r.INTEGRATED_PROGRESS="IntegratedProgress",r.COMPLETE_INTEGRATION="CompleteIntegration",r.FAIL_INTEGRATION="FailIntegration",r.HIDE_GAME="HideGame",r=l=__decorate([s.decorator],r);var l}(PIXI.Container);t.Main=a}(t.baseslot||(t.baseslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){!function(t){var i=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.STATE_CHOICE="choice",t}(e.egt.baseslot.models.server.response.BaseResponse);t.BaseResponse=i}(t.response||(t.response={}))}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.CHOICE="choice",t.SET_CHOICE_RESULT="setChoice",t}(e.egt.baseslot.models.server.BaseComplex);t.BaseComplex=i}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.freespins=0,t.closed=null,t.mult=0,t.multiplier=0,t.fs=0,t.pos=0,t.choiceInfo=null,t.figures=null,t.selectedChoice=0,t.holdReels=null,t.currentCredits=0,t.credits=0,t.totalBet=0,t.choice=null,t.freespinCard=-1,t}return __extends(t,e),t}(e.BaseComplex);e.ChoiceComplex=t}(e.server||(e.server={}))}(e.models||(e.models={}))}(e.choiceslot||(e.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){!function(t){var i=e.egt.baseslot.bottle,n=function(e){function t(){var t=e.call(this)||this;return t.complex=i.container.ChoiceComplex.instance(),t}return __extends(t,e),t.prototype.serialize=function(t){e.prototype.serialize.call(this,t)},t}(t.BaseResponse);t.ChoiceResponse=n}(t.response||(t.response={}))}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.additional=null,t.choices=-1,t.freespinCard=-1,t}return __extends(t,e),t.prototype.serialize=function(t){e.prototype.serialize.call(this,t),this.choices>0&&(this.freespins=1)},t}(e.egt.baseslot.models.server.BetComplex);t.BetComplex=i}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){!function(t){var i=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.serialize=function(t){e.prototype.serialize.call(this,t),this.complex.additional&&this.complex.additional.length&&(this.complex.additional[0].additional=!0,this.complex.lines.push(this.complex.additional[0]))},t}(e.egt.baseslot.models.server.response.BetResponse);t.BetResponse=i}(t.response||(t.response={}))}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){!function(t){var i=e.egt.baseslot.models.server.response.CurrentState,n=e.egt.baseslot.bottle,o=function(e){function i(){var t=e.call(this)||this;return t.choicesObject=null,t.wildIndexes=null,t}return __extends(i,e),i.prototype.getResponseForState=function(){return this.state==t.BaseResponse.STATE_CHOICE?n.container.ChoiceResponse.instance():e.prototype.getResponseForState.call(this)},i}(i);t.CurrentState=o}(t.response||(t.response={}))}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.baseslot.bottle,n=e.egt.library.events,o=e.egt.baseslot.models.server.CommunicationManager,s=e.egt.choiceslot.models.server.response.BaseResponse,a=function(e){function o(){var t=e.call(this)||this;return t._mainModel=i.container.MainModel,t._gameCommandMap.choice=i.container.ChoiceResponse,t._gameCommandMap.setChoice=i.container.ChoiceResponse,t}return __extends(o,e),o.prototype.sendChoice=function(e){switch(this._mainModel.response.state){case s.STATE_CHOICE:this._reguestChoiceData=e,this._mainModel.setChoiceResultRequest?this.requestSetChoice():this.requestChoice();break;default:throw new Error("Trying to send choice in state: "+this._mainModel.response.state)}},o.prototype.handleResponse=function(){var i=this._mainModel.response.complex.gameCommand;switch(this.log("Handle response game command[%s] is bet requested[%s] set result[%s]",i,this._isBetRequested,this._mainModel.setResultRequest),e.prototype.handleResponse.call(this),i){case t.BaseComplex.SET_CHOICE_RESULT:this.requestChoice()}},o.prototype.requestChoice=function(){this._reguestChoiceData.gameCommand=t.BaseComplex.CHOICE,this._mainModel.eventDispatcher.dispatchEvent(new n.Event(t.BaseComplex.CHOICE,this._reguestChoiceData))},o.prototype.requestSetChoice=function(){console.log("--Dispatch Event---"),console.log(t.BaseComplex.SET_CHOICE_RESULT),console.dir(this._mainModel.setResultRequest),this._mainModel.eventDispatcher.dispatchEvent(new n.Event(t.BaseComplex.SET_CHOICE_RESULT,this._mainModel.setChoiceResultRequest))},o}(o);t.CommunicationManager=a}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.CHOICE_CLICKED="choiceClicked",t.CHOICE_REFRESH_SCREEN="choiceRefreshScreen",t.CHOICE_ENDED="choiceEnded",t}(e.egt.baseslot.views.freespin.FreespinAnimation);t.FreespinAnimation=i}(t.freespin||(t.freespin={}))}(t.views||(t.views={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){var t=function(){function e(){}return e.CHOICE_RECEIVED="choiceReceived",e.CHOICE_REFRESH_SCREEN="choiceRefreshScreen",e.CHOICE_ENDED="choiceEnded",e}();e.NotificationsChoice=t}(e.models||(e.models={}))}(e.choiceslot||(e.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.baseslot.controllers.FreespinController,n=e.egt.baseslot.models.Notifications,o=e.egt.choiceslot.models.NotificationsChoice,s=e.egt.baseslot.bottle,a=e.egt.choiceslot.views.freespin.FreespinAnimation,r=e.egt.choiceslot.models.server.response.BaseResponse,l=e.egt.choiceslot.models.server.BaseComplex,c=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.getInterests=function(){return e.prototype.getInterests.call(this).concat(o.CHOICE_RECEIVED,n.FREESPIN_RETRIGGER_REFRESH_SCREEN,n.NO_CONNECTION)},t.prototype.handleNotification=function(t){switch(t.name){case n.FREESPIN_ANIMATION_START_CLICKED:this.mainModel.response.state==r.STATE_CHOICE&&this.mainModel.response.complex.gameCommand!=l.CHOICE&&(this.view.dispose(),this.playChoice());break;case n.REELS_STOPPED:this._isWaitingForBetResult||0!=this.mainModel.spinAnalyzer.numberOfWins||this.mainModel.response.state!=r.STATE_CHOICE?e.prototype.handleNotification.call(this,t):(this.stopFreespinBackgroundSound(),this.playChoice());break;case n.WIN_MONEY_ANIMATION_COMPLETE:this._isWaitingForBetResult||this.mainModel.response.state!=r.STATE_CHOICE||this.mainModel.isPlayingChoiceAfterRetrigger?e.prototype.handleNotification.call(this,t):(this.stopFreespinBackgroundSound(),this.playChoice());break;case n.ENTER_FREESPINS_SCENARIO_COMPLETE:this.mainModel.isNoConnection&&this.mainModel.isPlayingChoiceAfterRetrigger||e.prototype.handleNotification.call(this,t);break;case n.FREESPIN_RETRIGGER_REFRESH_SCREEN:this.mainModel.response.state==r.STATE_CHOICE&&(this.playChoice(),this.activateFreespinView());break;case o.CHOICE_RECEIVED:this.view.on(a.CHOICE_CLICKED,this.onChoiceClicked,this),this.view.animateChoice();break;case n.NO_CONNECTION:this.showNoConnectionMessage();break;default:e.prototype.handleNotification.call(this,t)}},t.prototype.showNoConnectionMessage=function(){this.mainModel.isChoiceGame&&this.mainModel.response.state==r.STATE_CHOICE&&gpts.Alert.show(this.gameSettings.localization.OnLostConnectionMessage,0,{okLabelCallback:function(){this.mainModel.sendHideGame()}.bind(this)})},Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mainModel",{get:function(){return s.container.MainModel},enumerable:!0,configurable:!0}),t.prototype.playChoice=function(){this.deactivateFreespinView(),this.mainModel.isChoiceGame=!0,this.mainModel.isNoConnection&&this.showNoConnectionMessage(),this.activateChoice(),this.view.playChoice(),this.view.visible=!0},t.prototype.onChoiceEnded=function(){this.sendNotification(o.CHOICE_ENDED),this.deactivateChoice(),this.mainModel.isChoiceGame=!1,this.activateFreespinView(),this.view.playIntro()},t.prototype.playInitialAnimation=function(){this.mainModel.currentState?this.playChoice():e.prototype.playInitialAnimation.call(this)},t.prototype.onChoiceClicked=function(){this.view.off(a.CHOICE_CLICKED,this.onChoiceClicked,this),this.mainModel.commManager.sendChoice({choice:this.onChoiceClicked.arguments[0]})},t.prototype.activateChoice=function(){this.view.on(a.CHOICE_CLICKED,this.onChoiceClicked,this),this.view.on(a.CHOICE_REFRESH_SCREEN,this.onChoiceRefreshScreen,this),this.view.on(a.CHOICE_ENDED,this.onChoiceEnded,this)},t.prototype.deactivateChoice=function(){this.view.off(a.CHOICE_ENDED,this.onChoiceEnded,this),this.view.off(a.CHOICE_REFRESH_SCREEN,this.onChoiceRefreshScreen,this),this.view.off(a.CHOICE_CLICKED,this.onChoiceClicked,this)},t.prototype.onChoiceRefreshScreen=function(){console.log("CHOICE_REFRESH_SCREEN!!!!"),this.sendNotification(o.CHOICE_REFRESH_SCREEN)},t.prototype.onRetriggerEnded=function(){this.mainModel.response.state!=r.STATE_CHOICE?(console.log("RETRIGGER ENDED KOLKO PYTI SE VIKA"),e.prototype.onRetriggerEnded.call(this)):(this.deactivateFreespinView(),this.view.visible=!0),console.log("interactive li sym ----????"),console.dir(this.view)},t}(i);t.FreespinController=c}(t.controllers||(t.controllers={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.baseslot.views.winvisualization.WinVisualizationView,n=e.egt.library.loading.Loader,o=e.egt.library.widgets.MoneyText,s=e.egt.baseslot.bottle,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isAdditionalLineWin=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"isAdditionalLineWin",{set:function(e){this._isAdditionalLineWin=e},enumerable:!0,configurable:!0}),t.prototype.updateInfoLineWin=function(t,i,n,o,s,a,r,l,c,u){e.prototype.updateInfoLineWin.call(this,t,i,n,o,s,a,r,l,c,u),this._totalBetLabel&&(this._totalBetLabel.visible=!1)},t.prototype.updateInfoWithAdditionalWin=function(e,t,i,a){var r=s.container.GameSettings;this._totalBetLabel||(this._totalBetLabel=new o({currency:r.currencyISO,moneyFontSize:16,currencyFontSize:9,shouldFitToBounds:!1,shouldHideWhenMoneyValueIsZero:!0,bounds:{width:0,height:16},diamond:r.diamondPlay?n.getLoader("gameImages").getTexture("diamond.png"):null,diamondPlay:r.diamondPlay,diamondScaleCoef:.6,keepCurrencySize:!0}),this._totalBetLabel.style={fill:16777215,fontWeight:"bold"},this._totalBetLabel.y=this._lineLabel.y,this.addChild(this._totalBetLabel)),this._totalBetLabel.visible=this._lineLabel.visible,this._totalBetLabel.isShowingCredits=i,this._totalBetLabel.denomination=a,this._totalBetLabel.money=e,this._lineLabel.text=" x "+t+" = ",this._smallImagesContainer.visible=!1,this.positionAdditionalLineWin()},t.prototype.hideInfoLineView=function(){e.prototype.hideInfoLineView.call(this),this._totalBetLabel&&(this._totalBetLabel.visible=this._lineLabel.visible),console.log("---totalBet-a visible li e???"),console.log(this._totalBetLabel)},t.prototype.setIsDisplayingCredits=function(t){e.prototype.setIsDisplayingCredits.call(this,t),this._totalBetLabel&&this._totalBetLabel.visible&&(this._totalBetLabel.isShowingCredits=t,this.positionAdditionalLineWin())},t.prototype.positionAdditionalLineWin=function(){var e=this._totalBetLabel.width+this._moneyLabel.width+this._lineLabel.width;this._totalBetLabel.x=t.START_X_IN_FREESPIN+(t.INFO_LINE_WIDTH_IN_FREESPIN-e)/2,this._lineLabel.x=this._totalBetLabel.x+this._totalBetLabel.width,this._moneyLabel.x=this._lineLabel.x+this._lineLabel.width},t}(i);t.WinVisualizationView=a}(t.winvisualization||(t.winvisualization={}))}(t.views||(t.views={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"currentMultiplier",{get:function(){return this.isLineCombination&&this.betResponse.complex.lines.length&&this.betResponse.complex.lines[this.lineNumber]?this.betResponse.complex.lines[this.lineNumber].multiplier:-1},enumerable:!0,configurable:!0}),t.prototype.isAdditional=function(){return this.isLineCombination&&this.betResponse.complex.lines[this._currentIndex].additional},t}(e.egt.baseslot.models.winvisualization.WinVisualizationModel);t.WinVisualizationModel=i}(t.winvisualization||(t.winvisualization={}))}(t.models||(t.models={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.baseslot.controllers.WinVisualizationController,n=e.egt.choiceslot.models.NotificationsChoice,o=e.egt.baseslot.models.Notifications,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getInterests=function(){return e.prototype.getInterests.call(this).concat(n.CHOICE_REFRESH_SCREEN)},t.prototype.handleNotification=function(t){switch(t.name){case n.CHOICE_REFRESH_SCREEN:this.completeWinVisualization();break;default:e.prototype.handleNotification.call(this,t)}},t.prototype.createMultiplierImages=function(){this.sendNotification(o.WIN_STOP_BLINK_INTERVAL_X_IMAGES),this.model.shouldDisplayMultiplierImage&&this.sendNotification(o.WIN_CREATE_MULTIPLIER_IMAGES,{cells:this.model.cells,currentMultiplier:this.model.currentMultiplier})},t.prototype.onBlinkingComplete=function(){e.prototype.onBlinkingComplete.call(this),this.createMultiplierImages()},Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),t.prototype.showCurrentWinCombination=function(){this.view.isAdditionalLineWin=this.model.isAdditional(),e.prototype.showCurrentWinCombination.call(this),this.model.isAdditional()&&this.view.updateInfoWithAdditionalWin(this.mainModel.betPerLine*this.mainModel.linesCoefficient,this.mainModel.betResponse.complex.lines[this.model.lineNumber].count,this.mainModel.isDisplayingCredits,this.mainModel.denomination),console.log("--additional--"+this.model.isAdditional())},t}(i);t.WinVisualizationController=s}(t.controllers||(t.controllers={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.baseslot.controllers.VideoController,n=e.egt.choiceslot.models.NotificationsChoice,o=e.egt.baseslot.bottle,s=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.getInterests=function(){return e.prototype.getInterests.call(this).concat(n.CHOICE_REFRESH_SCREEN)},t.prototype.handleNotification=function(t){switch(t.name){case n.CHOICE_REFRESH_SCREEN:this.parent.removeChildViewController(this);break;default:e.prototype.handleNotification.call(this,t)}},t.prototype.getVideoIndex=function(t,i,n){var o=e.prototype.getVideoIndex.call(this,t,i,n),s=this.mainModel.getWildIndexes();return this.mainModel.isFreespinGame&&s&&s.indexOf(o)>-1&&(o=this.gameSettings.numImages+o),o},Object.defineProperty(t.prototype,"mainModel",{get:function(){return o.container.MainModel},enumerable:!0,configurable:!0}),t}(i);t.VideoController=s}(t.controllers||(t.controllers={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.baseslot.controllers.ReelsController,n=e.egt.baseslot.models.Notifications,o=e.egt.baseslot.bottle,s=e.egt.choiceslot.models.NotificationsChoice,a=function(e){function t(){var t=e.call(this)||this;if(t.mainModel.currentState&&t.mainModel.getWildIndexes()&&(t.model.swapTextures(),t.redrawReels()),t.mainModel.currentState&&t.mainModel.isFreespinGame&&-1!=t.mainModel.getFreespinCard()&&t.gameSettings.freespinFakeReels)for(var i=t.getNewFreespinFakeReels(),n=0;n<t._reels.length;n++)t._reels[n].setFakeReel(i[n]);return t.setWildSymbolsOnHoldedReels(),t}return __extends(t,e),Object.defineProperty(t.prototype,"mainModel",{get:function(){return o.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),t.prototype.getInterests=function(){return e.prototype.getInterests.call(this).concat(s.CHOICE_ENDED,s.CHOICE_REFRESH_SCREEN)},t.prototype.handleNotification=function(t){switch(t.name){case s.CHOICE_ENDED:this.model.swapTextures(),this.redrawReels(),this.setWildSymbolsOnHoldedReels();break;case s.CHOICE_REFRESH_SCREEN:this.model.swapTextures();break;case n.FREESPIN_OUTRO_REFRESH_SCREEN:this.model.swapTextures(),this.mainModel.resetWildIndexes(),e.prototype.handleNotification.call(this,t);break;default:e.prototype.handleNotification.call(this,t)}},t.prototype.getNewFreespinFakeReels=function(){var e;e=this.gameSettings.freespinFakeReels.slice();for(var t=[],i=0;i<e.length;i++){t[i]=e[i].slice();for(var n=0;n<t[i].length;n++)0===t[i][n]&&(t[i][n]=this.mainModel.getFreespinCard())}return t},t.prototype.setWildSymbolsOnHoldedReels=function(){var e=this.mainModel.betResponse.complex,t=this.gameSettings,i=e.holdReels||[],n=this.gameSettings.wildsOnHoldedReels;if(e.freespins&&n)for(var o=Array.apply(null,Array((t.numReelCards+2)*t.numReels)).map(function(){return t.wildIndex}),s=0;s<i.length;s++)this._reels[i[s]].setResult(o,!0)},t.prototype.setFreespinFakeReels=function(){if(this.gameSettings.freespinFakeReels)for(var e=-1!=this.mainModel.getFreespinCard()?this.getNewFreespinFakeReels():this.gameSettings.freespinFakeReels,t=0;t<this._reels.length;t++)this._reels[t].changeFakeReel(e[t])},t}(i);t.ReelsController=a}(t.controllers||(t.controllers={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.baseslot.controllers.RootController,n=e.egt.choiceslot.models.server.response.BaseResponse,o=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.createControllersFromCurrentState=function(){this.mainModel.currentState.state==n.STATE_CHOICE?this.createFreespinController():e.prototype.createControllersFromCurrentState.call(this)},t}(i);t.RootController=o}(t.controllers||(t.controllers={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.baseslot.controllers.CustomResultController,n=e.egt.library.Device,o=e.egt.baseslot.bottle,s=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.setupListeners=function(t){var i=t?"on":"off";e.prototype.setupListeners.call(this,t);for(var o=this.view.specialWildImages.length,s=0;s<o;s++)this.view.specialWildImages[s][i](n.resolveEvent("click"),this.onSpecialWildClick,this);this.view.multipleSpecialWildsButton[i](n.resolveEvent("click"),this.onMultipleSpecialWildsButtonClick,this),this.view.singleSpecialWildButton[i](n.resolveEvent("click"),this.onSpecialWildButtonClick,this),this.view.upButton[i](n.resolveEvent("click"),this.onIncreaseFreespinsButtonClick,this),this.view.downButton[i](n.resolveEvent("click"),this.onDecreaseFreespinsButtonClick,this),this.view.textField[i](n.resolveEvent("click"),this.onTextFieldClicked,this)},t.prototype.onTextFieldClicked=function(){this.model.setRequestCreditsActive(),this.view.textFieldLabel=this._model.isCredits},t.prototype.onIncreaseFreespinsButtonClick=function(){this.model.increaseFreespins(),this.view.textFieldCount=this.model.freespins},t.prototype.onDecreaseFreespinsButtonClick=function(){this.model.decreaseFreespins(),this.view.textFieldCount=this.model.freespins},t.prototype.onSpecialWildButtonClick=function(){this.model.setIsMultipleSpecialWildsActive(!1),this.view.updateActivationMultipleSpecialWildsButton(this.model.getIsMultipleSpecialWildsActive()),this.model.setIsSingleSpecialWildActive(!this.model.getIsSpecialWildActive()),this.view.updateActivationSingleSpecialWildButton(this.model.getIsSpecialWildActive())},t.prototype.onSpecialWildClick=function(e){var t=this.view.specialWildImages.indexOf(e.target);this.model.setSpecialWild(t),this.view.setSpecialWildImage(t,this.model.selectedImageIndex)},t.prototype.onMultipleSpecialWildsButtonClick=function(e){this.model.setIsSingleSpecialWildActive(!1),this.view.updateActivationSingleSpecialWildButton(!1),this.model.setIsMultipleSpecialWildsActive(!this.model.getIsMultipleSpecialWildsActive()),this.view.updateActivationMultipleSpecialWildsButton(this.model.getIsMultipleSpecialWildsActive())},Object.defineProperty(t.prototype,"model",{get:function(){return o.container.CustomResultModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return o.container.CustomResultView},enumerable:!0,configurable:!0}),t}(i);t.CustomResultController=s}(t.controllers||(t.controllers={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.baseslot.models.customresult.CustomResultModel,n=e.egt.baseslot.bottle,o=function(e){function t(){var t=e.call(this)||this;return t._isSingleSpecialWildActive=!1,t._isMultipleSpecialWildsActive=!1,t._activeSpecialWildIndices=[],t._freespins=1,t._isCredits=!1,t._specialWildIndices=[],t._requestMultipleWilds={specialWild:t._activeSpecialWildIndices,freespins:t._freespins,gameCommand:"setChoice"},t._requestSingleWild={choice:void 0,gameCommand:"setChoice"},t._requestCredits={choice:t._freespins,gameCommand:"setChoice"},t}return __extends(t,e),t.prototype.setIsSingleSpecialWildActive=function(e){this._isSingleSpecialWildActive=e,this.mainModel.setChoiceResultRequest=null,this._isSingleSpecialWildActive&&(this.mainModel.setChoiceResultRequest=this._requestSingleWild)},t.prototype.increaseFreespins=function(){this._freespins++,this._requestMultipleWilds.freespins=this._freespins,this._requestCredits.choice=this._freespins,console.log("increase freespins---"),console.log(this.mainModel.setChoiceResultRequest)},t.prototype.decreaseFreespins=function(){this._freespins>1&&(this._freespins--,this._requestMultipleWilds.freespins=this._freespins,this._requestCredits.choice=this._freespins,console.log("decrease freespins---"),console.log(this.mainModel.setChoiceResultRequest))},Object.defineProperty(t.prototype,"freespins",{get:function(){return this._freespins},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCredits",{get:function(){return this._isCredits},enumerable:!0,configurable:!0}),t.prototype.getIsSpecialWildActive=function(){return this._isSingleSpecialWildActive},t.prototype.setRequestCreditsActive=function(){this._isCredits=!this._isCredits,console.log("isCredits---"),console.log(this._isCredits),this._isCredits?this.mainModel.setChoiceResultRequest=this._requestCredits:this.mainModel.setChoiceResultRequest=null,console.log(this.mainModel.setChoiceResultRequest),console.log(this._requestCredits)},t.prototype.setIsMultipleSpecialWildsActive=function(e){this._isMultipleSpecialWildsActive=e,this.mainModel.setChoiceResultRequest=null,this._isMultipleSpecialWildsActive&&(this.mainModel.setChoiceResultRequest=this._requestMultipleWilds)},t.prototype.getIsMultipleSpecialWildsActive=function(){return this._isMultipleSpecialWildsActive},t.prototype.setSpecialWild=function(e){this.selectedImageIndex>=this.gameSettings.numImages?this._specialWildIndices[e]=this.selectedImageIndex-this.gameSettings.numImages:this._specialWildIndices[e]=void 0,this.updateRequestedSpecialWilds()},t.prototype.updateRequestedSpecialWilds=function(){this._activeSpecialWildIndices=this._specialWildIndices.filter(function(e){return void 0!=e}),this._requestSingleWild.choice=this._activeSpecialWildIndices[0],this._requestMultipleWilds.specialWild=this._activeSpecialWildIndices,console.log("--request Single wild---"),console.dir(this._requestSingleWild),console.log("---request multiple wilds---"),console.dir(this._requestMultipleWilds)},Object.defineProperty(t.prototype,"gameSettings",{get:function(){return n.container.GameSettings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mainModel",{get:function(){return n.container.MainModel},enumerable:!0,configurable:!0}),t}(i);t.CustomResultModel=o}(t.customresult||(t.customresult={}))}(t.models||(t.models={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.baseslot.views.CustomResultView,n=e.egt.baseslot.bottle,o=function(e){function t(){var t=e.call(this)||this;t.specialWildImages=[],t.singleSpecialWildButton=new PIXI.Graphics,t.updateActivationSingleSpecialWildButton(!1),t.singleSpecialWildButton.position.set(500,350),t.singleSpecialWildButton.interactive=!0,t.addChild(t.singleSpecialWildButton);var i=new PIXI.Text("SingleWild",{fontSize:23,align:"center"});i.y=(t.singleSpecialWildButton.height-i.height)/2,t.singleSpecialWildButton.addChild(i),t.multipleSpecialWildsButton=new PIXI.Graphics,t.updateActivationMultipleSpecialWildsButton(!1),t.multipleSpecialWildsButton.position.set(t.singleSpecialWildButton.x+t.singleSpecialWildButton.width+10,t.singleSpecialWildButton.y),t.multipleSpecialWildsButton.interactive=!0,t.addChild(t.multipleSpecialWildsButton);var n=new PIXI.Text("MultipleWilds",{fontSize:23,align:"center"});return n.y=(t.singleSpecialWildButton.height-i.height)/2,t.multipleSpecialWildsButton.addChild(n),t.upButton=new PIXI.Graphics,t.upButton.beginFill(16711680),t.upButton.drawPolygon([0,20,20,20,10,0,0,20]),t.upButton.endFill(),t.addChild(t.upButton),t.upButton.position.set(640,290),t.downButton=t.upButton.clone(),t.downButton.position.set(640,333),t.addChild(t.downButton),t.downButton.scale.y=-1,t.upButton.interactive=!0,t.downButton.interactive=!0,t.textField=new PIXI.Text("Freespins: 1",{fontSize:23,fill:16777215}),t.textField.interactive=!0,t.addChild(t.textField),t.textField.position.set(450,300),t.createAdditionalImages(),t.createSpecialWildImages(),t.openButton.x=t.width,t.fpsCounter.x=t.width-50,t}return __extends(t,e),Object.defineProperty(t.prototype,"textFieldCount",{set:function(e){var t=this.textField.text.split(" ");this.textField.text=t[0]+" "+e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textFieldLabel",{set:function(e){var t="Freespins:";e&&(t="Credits:");var i=this.textField.text.split(" ");this.textField.text=t+" "+i[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameSettings",{get:function(){return n.container.GameSettings},enumerable:!0,configurable:!0}),t.prototype.updateActivationSingleSpecialWildButton=function(e){this.singleSpecialWildButton.beginFill(e?16711680:65280),this.singleSpecialWildButton.drawRect(0,0,110,52),this.singleSpecialWildButton.endFill()},t.prototype.updateActivationMultipleSpecialWildsButton=function(e){this.multipleSpecialWildsButton.beginFill(e?16711680:65280),this.multipleSpecialWildsButton.drawRect(0,0,135,52),this.multipleSpecialWildsButton.endFill()},t.prototype.setSpecialWildImage=function(e,t){this.specialWildImages[e].texture=this.selectImages[t].texture},t.prototype.getScaleFactor=function(){var e=this.gameSettings.numImages;return this.gameSettings.numAdditionalImages>-1&&(e+=this.gameSettings.numAdditionalImages),this._background.width/(e*this.gameSettings.reelWidth)},t.prototype.createAdditionalImages=function(){for(var e=this.gameSettings.numImages,t=this.gameSettings.numImages+this.gameSettings.numAdditionalImages,i=e;i<t;i++){var n=i<10?"0"+i:i,o=new PIXI.Sprite(this.gameImagesLoader.getTexture(n+".png"));o.scale.set(this.getScaleFactor()),o.interactive=!0,o.x=this.selectImages[i-1].x+this.selectImages[i-1].width,o.y=this.selectImages[i-1].y,this.selectImages[i]=o,this.addChild(o)}},t.prototype.createSpecialWildImages=function(){for(var e=0;e<3;e++){var t=new PIXI.Sprite(this.gameImagesLoader.getTexture("00.png"));t.scale.set(.4),t.interactive=!0,t.x=this.specialWildImages.length>0?this.specialWildImages[e-1].x+this.specialWildImages[e-1].width:450,t.y=this.specialWildImages.length>0?this.specialWildImages[e-1].y:200,this.specialWildImages[e]=t,this.addChild(t)}},t}(i);t.CustomResultView=o}(t.views||(t.views={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.baseslot.models.MainModel,n=e.egt.choiceslot.models.server.response.BaseResponse,o=e.egt.choiceslot.models.server.BaseComplex,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isChoiceGame=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"choiceResponse",{get:function(){return this.response},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"betResponse",{get:function(){return this.response},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayingChoiceAfterRetrigger",{get:function(){return this.isFreespinGame&&this.response.state==n.STATE_CHOICE&&0!=this.betResponse.complex.freespins},enumerable:!0,configurable:!0}),t.prototype.addNewFreespins=function(){(this.response.complex.gameCommand==o.CHOICE&&this.response.state==n.STATE_FREESPIN||0==this.betResponse.complex.choices)&&(console.log("--this._totalFreespinsBefore--"+this._totalFreespins),this._totalFreespins+=this.response.complex.freespins,console.log("--this._totalFreespinsAfter--"+this._totalFreespins))},t.prototype.getWildIndexes=function(){return this.currentState&&this.currentState.wildIndexes?this._wildIndexes=this.currentState.wildIndexes.slice():this.choiceResponse&&this.choiceResponse.complex.figures&&(this._wildIndexes=this.choiceResponse.complex.figures[this.choiceResponse.complex.selectedChoice].wildIndexes.slice()),this._wildIndexes},t.prototype.getFreespinCard=function(){return this.currentState&&null!=this.currentState.choicesObject?this.currentState.choicesObject.freespinCard:this.choiceResponse.complex.freespinCard},t.prototype.resetWildIndexes=function(){this._wildIndexes=null},t.prototype.initFromCurrentState=function(){e.prototype.initFromCurrentState.call(this),this.currentState.state!=n.STATE_FREESPIN&&this.currentState.state!=n.STATE_CHOICE||(this._currentFreespin=this.currentState.freespinsUsed,this._totalFreespins=this.currentState.freespinsUsed,this.setFreespinsLineIndex(),this.currentState.state==n.STATE_FREESPIN&&(this.isFreespinGame=!0,this._totalFreespins+=this.currentState.freespins))},t}(i);t.MainModel=s}(t.models||(t.models={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.baseslot.bottle,n=e.egt.baseslot.models.reels.ReelsModel,o=e.egt.library.Utils,s=e.egt.library.loading.Loader,a=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"gameSettings",{get:function(){return i.container.GameSettings},enumerable:!0,configurable:!0}),t.prototype.swapTextures=function(){for(var e=this.mainModel.getWildIndexes(),t=e?e.length:0,i=0;i<t;i++){var n=this.mainModel.getWildIndexes()[i];if(n<0||n>=this._reelTextures.length||void 0==this._reelTextures[this.gameSettings.numImages+n])break;var o=this._reelTextures[n];this._reelTextures[n]=this._reelTextures[this.gameSettings.numImages+n],this._reelTextures[this.gameSettings.numImages+n]=o}},Object.defineProperty(t.prototype,"mainModel",{get:function(){return i.container.MainModel},enumerable:!0,configurable:!0}),t.prototype.getReelTextures=function(){if(this._reelTextures)return this._reelTextures;e.prototype.getReelTextures.call(this);for(var t=s.getLoader("gameImages"),i=0;i<this.gameSettings.numAdditionalImages;i++){var n=o.convertToSequenceString(this.gameSettings.numImages+i);this._reelTextures[this.gameSettings.numImages+i]=t.getTexture(n+".png")}return this._reelTextures},t}(n);t.ReelsModel=a}(t.reels||(t.reels={}))}(t.models||(t.models={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numAdditionalImages=-1,t.wildsOnHoldedReels=!1,t}return __extends(t,e),t}(e.egt.baseslot.models.GameSettings);t.GameSettings=i}(t.models||(t.models={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.library.loading.Loader,n=e.egt.library.utils.Timer,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.displayMultiplierImage=function(e,t,n,o,s,a,r,l){var c=i.getLoader("gameImages"),u=new PIXI.Sprite(c.getTexture("x"+s.toString()+".png"));u.x=n+r*(e+l),u.y=o+a*t,this.xImageContainer.addChild(u),this.xImageContainer.visible=!0},t.prototype.startBlinkIntervalxImage=function(){this._blinkTimer&&this._blinkTimer.stop(),this.xImageContainer.visible=!0,this._blinkTimer||(this._blinkTimer=new n(.3,0),this._blinkTimer.addEventListener(n.TIMER,this.blinkxImage,this)),this._blinkTimer.start()},t}(e.egt.baseslot.views.winvisualization.MultiplierXImageView);t.MultiplierXImageView=o}(t.winvisualization||(t.winvisualization={}))}(t.views||(t.views={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.baseslot.controllers.UIController,n=e.egt.choiceslot.models.server.response.BaseResponse,o=e.egt.baseslot.models.ui.UIStateManager,s=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.processCurrentState=function(){this.mainModel.currentState.state==n.STATE_CHOICE?this._stateManager.state(o.WAITING_FOR_FREESPIN_ANIMATION_COMPLETE):e.prototype.processCurrentState.call(this)},t}(i);t.UIController=s}(t.controllers||(t.controllers={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.baseslot.controllers.BottomLabelsController,n=e.egt.baseslot.models.Notifications,o=e.egt.baseslot.bottle,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.handleNotification=function(t){switch(t.name){case n.FREESPIN_INTRO_REFRESH_SCREEN:console.log("current freespin???"),console.log(this.mainModel.currentFreespin),this.view.winMoney=this.mainModel.response.winAmount,e.prototype.handleNotification.call(this,t);break;default:e.prototype.handleNotification.call(this,t)}},Object.defineProperty(t.prototype,"mainModel",{get:function(){return o.container.MainModel},enumerable:!0,configurable:!0}),t}(i);t.BottomLabelsController=s}(t.controllers||(t.controllers={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.choiceslot.models.NotificationsChoice,n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getInterests=function(){return e.prototype.getInterests.call(this).concat(i.CHOICE_REFRESH_SCREEN)},Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),t.prototype.handleNotification=function(t){switch(t.name){case i.CHOICE_REFRESH_SCREEN:this.completeWinVisualization();break;default:e.prototype.handleNotification.call(this,t)}},t.prototype.createMultiplierImages=function(e){for(var t=e.cells,i=t.length,n=0;n<i;n+=2)this.view.displayMultiplierImage(this.gameSettings.reelWidth,this.gameSettings.reelHeight/this.gameSettings.numReelCards,this.gameSettings.reelCoordX,this.gameSettings.reelCoordY,e.currentMultiplier,t[n+1],t[n],this.gameSettings.reelSpacing);this.view.startBlinkIntervalxImage()},t}(e.egt.baseslot.controllers.MultiplierXImageController);t.MultiplierXImageController=n}(t.controllers||(t.controllers={}))}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){var i=e.egt.baseslot.Main,n=e.egt.baseslot.bottle,o=e.egt.choiceslot.models.server.BaseComplex,s=function(t){function i(){var e=t.call(this)||this;return e.events.push(o.CHOICE),e.events.push(o.SET_CHOICE_RESULT),e}return __extends(i,t),i.prototype.setupBottleClasses=function(){t.prototype.setupBottleClasses.call(this),n.instanceFactory("ChoiceComplex",function(e){return new e.ChoiceComplexConstructor}),n.instanceFactory("ChoiceResponse",function(e){return new e.ChoiceResponseConstructor})},i.prototype.defineBottleConstructors=function(){t.prototype.defineBottleConstructors.call(this),n.value("BaseResponseConstructor",e.egt.choiceslot.models.server.response.BaseResponse),n.value("ChoiceResponseConstructor",e.egt.choiceslot.models.server.response.ChoiceResponse),n.value("BetResponseConstructor",e.egt.choiceslot.models.server.response.BetResponse),n.value("CurrentStateConstructor",e.egt.choiceslot.models.server.response.CurrentState),n.value("BaseComplexConstructor",e.egt.choiceslot.models.server.BaseComplex),n.value("BetComplexConstructor",e.egt.choiceslot.models.server.BetComplex),n.value("ChoiceComplexConstructor",e.egt.choiceslot.models.server.ChoiceComplex),n.value("MainModelConstructor",e.egt.choiceslot.models.MainModel),n.value("CommunicationManagerConstructor",e.egt.choiceslot.models.server.CommunicationManager),n.value("FreespinControllerConstructor",e.egt.choiceslot.controllers.FreespinController),n.value("WinVisualizationControllerConstructor",e.egt.choiceslot.controllers.WinVisualizationController),n.value("VideoControllerConstructor",e.egt.choiceslot.controllers.VideoController),n.value("ReelsControllerConstructor",e.egt.choiceslot.controllers.ReelsController),n.value("RootControllerConstructor",e.egt.choiceslot.controllers.RootController),n.value("WinVisualizationViewConstructor",e.egt.choiceslot.views.winvisualization.WinVisualizationView),n.value("WinVisualizationModelConstructor",e.egt.choiceslot.models.winvisualization.WinVisualizationModel),n.value("ReelsModelConstructor",e.egt.choiceslot.models.reels.ReelsModel),n.value("GameSettingsConstructor",e.egt.choiceslot.models.GameSettings),n.value("CustomResultControllerConstructor",e.egt.choiceslot.controllers.CustomResultController),n.value("CustomResultModelConstructor",e.egt.choiceslot.models.customresult.CustomResultModel),n.value("CustomResultViewConstructor",e.egt.choiceslot.views.CustomResultView),n.value("UIControllerConstructor",e.egt.choiceslot.controllers.UIController),n.value("BottomLabelsControllerConstructor",e.egt.choiceslot.controllers.BottomLabelsController),n.value("MultiplierXImageViewConstructor",e.egt.choiceslot.views.winvisualization.MultiplierXImageView),n.value("MultiplierXImageControllerConstructor",e.egt.choiceslot.controllers.MultiplierXImageController)},i}(i);t.Main=s}(t.choiceslot||(t.choiceslot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.baseslot.models.Resources,n=e.egt.library.loading.ScriptLoader,o=e.egt.library.loading.LayoutLoader,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initResourcesLoading=function(){e.prototype.initResourcesLoading.call(this),this._resourcesLoadingQueue.addLoader(new n(this._gameTypePath+"BonusAnimation.min.js",this._gameSettings.cacheTimestamp));var i=this._gameSettings.bonusLanguages.indexOf(this._gameSettings.language)<0?this._gameSettings.defaultLanguage:this._gameSettings.language;this._resourcesLoadingQueue.addLoader(new o(this._gameTypeAssetsPath+"bonus/animation_"+i+".json",this._gameSettings.cacheTimestamp,null,t.BONUS_ANIMATION_LAYOUT_LOADER))},t.BONUS_ANIMATION_LAYOUT_LOADER="bonusAnimationLayoutLoader",t}(i);t.Resources=s}(t.models||(t.models={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){!function(t){var i=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.STATE_BONUS_CHOICE="bonuschoice",t.STATE_FREESPIN_CHOICE="freespinchoice",t.STATE_MULTIPLIER_CHOICE="multiplierchoice",t}(e.egt.choiceslot.models.server.response.BaseResponse);t.BaseResponse=i}(t.response||(t.response={}))}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.BONUS_CHOICE="bonuschoice",t.FREESPIN_CHOICE="freespinchoice",t.MULTIPLIER_CHOICE="multiplierchoice",t}(e.egt.choiceslot.models.server.BaseComplex);t.BaseComplex=i}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.baseslot.bottle,n=function(e){function t(){var t=e.call(this)||this;return t.freespins=0,t.multiplier=0,t.gambles=0,t.bonuschoiceObject=i.container.BonusChoiceObject.instance(),t}return __extends(t,e),t}(t.BaseComplex);t.BonusChoiceComplex=n}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){!function(t){var i=e.egt.baseslot.bottle,n=function(e){function t(){var t=e.call(this)||this;return t.complex=i.container.BonusChoiceComplex.instance(),t}return __extends(t,e),t}(t.BaseResponse);t.BonusChoiceResponse=n}(t.response||(t.response={}))}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.multilineOffsetY=0,t.bonusLanguages=null,t.scatterCoef=null,t.changedReelVideosAndImagesInFreespinsIndexes=null,t}return __extends(t,e),t.prototype.serialize=function(t){e.prototype.serialize.call(this,t);for(var i in this.scatterCoef)this.scatterCoef[i].withoutBonus.sort(function(e,t){return e-t}),this.scatterCoef[i].bonus&&this.scatterCoef[i].bonus.sort(function(e,t){return e-t})},t}(e.egt.choiceslot.models.GameSettings);t.GameSettings=i}(t.models||(t.models={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=e.egt.baseslot.bottle,n=e.egt.library.events,o=e.egt.choiceslot.models.server.CommunicationManager,s=e.egt.actionMoneySlot.models.server.response.BaseResponse,a=function(e){function o(){var t=e.call(this)||this;return t._mainModel=i.container.MainModel,t._gameCommandMap.bonuschoice=i.container.BonusChoiceResponse,t._gameCommandMap.multiplierchoice=i.container.ChoiceResponse,t._gameCommandMap.freespinchoice=i.container.ChoiceResponse,t}return __extends(o,e),o.prototype.sendBonusChoice=function(e){switch(this._mainModel.response.state){case s.STATE_BONUS_CHOICE:this._reguestBonusChoiceData=e,this.requestBonusChoice();break;default:throw"Trying to send choice in state: "+this._mainModel.response.state}},o.prototype.sendChoice=function(t){switch(this._mainModel.response.state){case s.STATE_MULTIPLIER_CHOICE:this._reguestChoiceData=t,this.requestMultiplierChoice();break;case s.STATE_FREESPIN_CHOICE:this._reguestChoiceData=t,this.requestFreespinChoice();break;default:e.prototype.sendChoice.call(this,t)}},o.prototype.requestBonusChoice=function(){this._reguestBonusChoiceData.gameCommand=t.BaseComplex.BONUS_CHOICE,this._mainModel.eventDispatcher.dispatchEvent(new n.Event(t.BaseComplex.BONUS_CHOICE,this._reguestBonusChoiceData))},o.prototype.requestMultiplierChoice=function(){this._reguestChoiceData.gameCommand=t.BaseComplex.MULTIPLIER_CHOICE,this._mainModel.eventDispatcher.dispatchEvent(new n.Event(t.BaseComplex.MULTIPLIER_CHOICE,this._reguestChoiceData))},o.prototype.requestFreespinChoice=function(){this._reguestChoiceData.gameCommand=t.BaseComplex.FREESPIN_CHOICE,this._mainModel.eventDispatcher.dispatchEvent(new n.Event(t.BaseComplex.FREESPIN_CHOICE,this._reguestChoiceData))},o}(o);t.CommunicationManager=a}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bonuschoiceObject=null,t.isBonus=!1,t}return __extends(t,e),t.prototype.serialize=function(t){if(e.prototype.serialize.call(this,t),this.bonuschoiceObject&&this.bonuschoiceObject.bonusScatterIndex){var i=this.scatters.length;this.isBonus=!0;for(var n=0;n<i;n++)if(this.scatters[n].scatterName==this.bonuschoiceObject.bonusScatterIndex){this.bonuschoiceObject.bonusScatterCells=this.scatters[n].cells.slice();break}}},t}(e.egt.choiceslot.models.server.BetComplex);t.BetComplex=i}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){var t=function(){function e(){}return e.ENTER_BONUS_SCENARIO_COMPLETE="enterBonusScenarioComplete",e.BONUS_CHOICE_CLICKED="bonusChoiceClicked",e.BONUS_CHOICE_RECEIVED="bonuschoiceReceived",e.FREESPIN_CHOICE_RECEIVED="freespinchoiceReceived",e.MULTIPLIER_CHOICE_RECEIVED="multiplierchoiceReceived",e.BONUS_CHOICE_REFRESH_SCREEN="bonusChoiceRefreshScreen",e.BONUS_CHOICE_ENDED="bonusChoiceEnded",e.BONUS_WIN_MONEY_ANIMATION_COMPLETE="bonusWinMoneyAnimationComplete",e}();e.ActionMoneyNotifications=t}(e.models||(e.models={}))}(e.actionMoneySlot||(e.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.choiceslot.controllers.RootController,n=e.egt.actionMoneySlot.models.ActionMoneyNotifications,o=e.egt.actionMoneySlot.models.server.response.BaseResponse,s=Pluck.Notification,a=e.egt.baseslot.bottle,r=e.egt.baseslot.models.Notifications,l=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.getInterests=function(){return e.prototype.getInterests.call(this).concat(n.ENTER_BONUS_SCENARIO_COMPLETE,n.BONUS_CHOICE_ENDED)},t.prototype.handleNotification=function(t){switch(this.log("Handle notification[%s]",t.name),t.name){case n.BONUS_CHOICE_ENDED:this.startWinVisualization(),this.mainModel.isFreespinGame||e.prototype.handleNotification.call(this,new s(r.FREESPIN_OUTRO_ENDED,null)),this.mainModel.response.state!=o.STATE_CHOICE&&this.mainModel.response.state!=o.STATE_MULTIPLIER_CHOICE&&this.mainModel.response.state!=o.STATE_FREESPIN_CHOICE||this.createFreespinController();break;case n.ENTER_BONUS_SCENARIO_COMPLETE:this.mainModel.betResponse.state==o.STATE_BONUS_CHOICE?(console.log("??????ENTER_BONUS_SCENARIO_COMPLETE"),this.createBonusController()):e.prototype.handleNotification.call(this,t);break;default:e.prototype.handleNotification.call(this,t)}},t.prototype.createBonusController=function(){if(null==this.getController(a.container.BonusControllerConstructor)){console.log("--syzdadoh controllera----");var e=a.container.BonusController.instance();this.addChildViewController(e);var t=this.getController(a.container.CustomResultControllerConstructor);t&&(e.zIndex=t.zIndex);var i=this.getController(a.container.JackpotDropDownControllerConstructor);i&&(e.zIndex=i.zIndex)}},t.prototype.createControllersFromCurrentState=function(){this.mainModel.currentState.state==o.STATE_BONUS_CHOICE?(0!=this.mainModel.currentState.freespinsUsed&&this.createFreespinController(),this.createBonusController()):this.mainModel.currentState.state==o.STATE_MULTIPLIER_CHOICE||this.mainModel.currentState.state==o.STATE_FREESPIN_CHOICE?this.createFreespinController():e.prototype.createControllersFromCurrentState.call(this)},t}(i);t.RootController=l}(t.controllers||(t.controllers={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.choiceslot.controllers.WinVisualizationController,n=e.egt.baseslot.models.Notifications,o=e.egt.actionMoneySlot.models.ActionMoneyNotifications,s=e.egt.actionMoneySlot.models.server.response.BaseResponse,a=e.egt.actionMoneySlot.models.server.BaseComplex,r=function(e){function t(){var t=e.call(this)||this;return t._bonusScenarioComplete=!1,t._bonusSoundEnded=!1,t.mainModel.response.state==s.STATE_IDLE&&t.mainModel.response.complex.gameCommand==a.BONUS_CHOICE&&t.view.hideInfoLineView(),t}return __extends(t,e),t.prototype.getInterests=function(){return e.prototype.getInterests.call(this).concat(o.ENTER_BONUS_SCENARIO_COMPLETE)},Object.defineProperty(t.prototype,"betComplex",{get:function(){return this.mainModel.betResponse.complex},enumerable:!0,configurable:!0}),t.prototype.handleNotification=function(t){switch(this.log("Handle notification[%s]",t.name),t.name){case n.WIN_VISUALIZATION_CYCLE_COMPLETE:this.checkEnterBonusScenarionComplete(),e.prototype.handleNotification.call(this,t);break;case o.ENTER_BONUS_SCENARIO_COMPLETE:this.completeWinVisualization();break;default:e.prototype.handleNotification.call(this,t)}},t.prototype.checkEnterBonusScenarionComplete=function(){this.betComplex.isBonus&&!this._bonusScenarioComplete&&this.model.isCycleComplete&&this._bonusSoundEnded&&(console.log("stigam li do tuka???"),this._bonusScenarioComplete=!0,this.sendNotification(o.ENTER_BONUS_SCENARIO_COMPLETE))},t.prototype.onBlinkingComplete=function(){this.betComplex.isBonus?(this.model.gotoNextWinningCombination(),this.model&&this.view&&this.showCurrentWinCombination()):e.prototype.onBlinkingComplete.call(this)},t.prototype.onWinSoundEnded=function(){this.betComplex.isBonus?(this._bonusSoundEnded=!0,this.checkEnterBonusScenarionComplete()):e.prototype.onWinSoundEnded.call(this)},t}(i);t.WinVisualizationController=r}(t.controllers||(t.controllers={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var MainModel=com.egt.actionMoneySlot.models.MainModel,bottle=com.egt.baseslot.bottle,com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.choiceslot.controllers.BottomLabelsController,n=e.egt.actionMoneySlot.models.ActionMoneyNotifications,o=e.egt.baseslot.models.MoneyAnimation,s=e.egt.baseslot.models.Notifications,a=e.egt.actionMoneySlot.models.server.response.BaseResponse,r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getInterests=function(){return e.prototype.getInterests.call(this).concat(n.ENTER_BONUS_SCENARIO_COMPLETE,n.BONUS_CHOICE_REFRESH_SCREEN,n.BONUS_CHOICE_CLICKED,n.BONUS_CHOICE_ENDED)},t.prototype.handleNotification=function(i){switch(i.name){case n.ENTER_BONUS_SCENARIO_COMPLETE:this.view.completeAnimations(!0),this.infoLineText=this.mainModel.gameSettings.localization.selectScatterSymbol;break;case n.BONUS_CHOICE_REFRESH_SCREEN:var r=this.mainModel.bonusChoiceResponse.winAmount,l=o.getAnimationTime(Math.abs(this.view.winMoney-r),this.mainModel.denomination)/1e3;this.animateWinMoney(r,Math.min(l,t.MAX_BONUS_ANIMATION_TIME),n.BONUS_WIN_MONEY_ANIMATION_COMPLETE);break;case n.BONUS_CHOICE_CLICKED:this.infoLineText="";break;case n.BONUS_CHOICE_ENDED:this.mainModel.response.state==a.STATE_IDLE&&(this.infoLineText=this.mainModel.gameSettings.localization.PlaceBet);break;case s.WIN_MONEY_ANIMATION_COMPLETE:this.mainModel.response.state!=a.STATE_BONUS_CHOICE&&e.prototype.handleNotification.call(this,i);break;default:e.prototype.handleNotification.call(this,i)}},Object.defineProperty(t.prototype,"mainModel",{get:function(){return bottle.container.MainModel},enumerable:!0,configurable:!0}),t.prototype.processCurrentState=function(){this.mainModel.currentState.state==a.STATE_BONUS_CHOICE?(this.infoLineText=this.mainModel.gameSettings.localization.selectScatterSymbol,this.mainModel.isFreespinGame&&(this.infoLineText="",this.view.freespinCountView.updateFreespinCount(this.mainModel.currentFreespin,this.mainModel.totalFreespins),this.view.freespinCountView.visible=!0,this.view.infoLine.visible=!1)):e.prototype.processCurrentState.call(this)},t.MAX_BONUS_ANIMATION_TIME=10,t}(i);t.BottomLabelsController=r}(t.controllers||(t.controllers={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.choiceslot.controllers.FreespinController,n=e.egt.actionMoneySlot.models.ActionMoneyNotifications,o=Pluck.Notification,s=e.egt.baseslot.models.Notifications,a=e.egt.actionMoneySlot.models.server.response.BaseResponse,r=e.egt.choiceslot.views.freespin.FreespinAnimation,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getInterests=function(){return e.prototype.getInterests.call(this).concat(n.BONUS_CHOICE_ENDED,n.MULTIPLIER_CHOICE_RECEIVED,n.FREESPIN_CHOICE_RECEIVED)},t.prototype.handleNotification=function(t){switch(t.name){case s.FREESPIN_ANIMATION_START_CLICKED:this.mainModel.response.state==a.STATE_MULTIPLIER_CHOICE||this.mainModel.response.state==a.STATE_FREESPIN_CHOICE?(this.view.dispose(),this.playChoice()):e.prototype.handleNotification.call(this,t);break;case s.ENTER_FREESPINS_SCENARIO_COMPLETE:!this.mainModel.isNoConnection&&this.mainModel.response.state==a.STATE_FREESPIN_CHOICE&&this.mainModel.isFreespinGame?this.playChoice():e.prototype.handleNotification.call(this,t);break;case n.MULTIPLIER_CHOICE_RECEIVED:this.mainModel.setWinningMultiplier(),this.animateChoice();break;case n.FREESPIN_CHOICE_RECEIVED:this.mainModel.setWinningFreespins(),this.animateChoice();break;case n.BONUS_CHOICE_ENDED:0!=this.mainModel.betResponse.complex.freespins?e.prototype.handleNotification.call(this,new o(s.ENTER_FREESPINS_SCENARIO_COMPLETE,null)):this._isWaitingForBetResult||this.mainModel.hasMoreFreespinsToPlay||!this.mainModel.isFreespinGame||this.playOutro();break;case s.REELS_STOPPED:case s.WIN_MONEY_ANIMATION_COMPLETE:this.mainModel.response.state!=a.STATE_BONUS_CHOICE&&e.prototype.handleNotification.call(this,t);break;default:e.prototype.handleNotification.call(this,t)}},t.prototype.showNoConnectionMessage=function(){!this.mainModel.isChoiceGame||this.mainModel.response.state!=a.STATE_MULTIPLIER_CHOICE&&this.mainModel.response.state!=a.STATE_FREESPIN_CHOICE?e.prototype.showNoConnectionMessage.call(this):gpts.Alert.show(this.gameSettings.localization.OnLostConnectionMessage,0,{okLabelCallback:function(){this.mainModel.sendHideGame()}.bind(this)})},Object.defineProperty(t.prototype,"mainModel",{get:function(){return bottle.container.MainModel},enumerable:!0,configurable:!0}),t.prototype.animateChoice=function(){this.view.on(r.CHOICE_CLICKED,this.onChoiceClicked,this),this.view.animateChoice()},t}(i);t.FreespinController=l}(t.controllers||(t.controllers={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.choiceslot.controllers.VideoController,n=e.egt.actionMoneySlot.models.ActionMoneyNotifications,o=e.egt.actionMoneySlot.models.server.response.BaseResponse,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getInterests=function(){return e.prototype.getInterests.call(this).concat(n.ENTER_BONUS_SCENARIO_COMPLETE,n.BONUS_CHOICE_ENDED)},t.prototype.handleNotification=function(t){switch(t.name){case n.ENTER_BONUS_SCENARIO_COMPLETE:this.parent.removeChildViewController(this);break;case n.BONUS_CHOICE_ENDED:this.destroyAllVideos(),this.defineVideos(!1),this.playWinVideos(!0);break;default:e.prototype.handleNotification.call(this,t)}},t.prototype.getVideoIndex=function(t,i,n){var s=e.prototype.getVideoIndex.call(this,t,i,n),a=this.gameSettings.getScatterConfig(s);return this.mainModel.response.state==o.STATE_BONUS_CHOICE&&a&&a.bonusVideoIndex&&(s=a.bonusVideoIndex),s},t}(i);t.VideoController=s}(t.controllers||(t.controllers={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i._mainModel=t,i}return __extends(t,e),Object.defineProperty(t.prototype,"isDisplayingCredits",{set:function(e){},enumerable:!0,configurable:!0}),t.BONUS_CLICKED="bonusClicked",t.BONUS_ENDED="bonusEnded",t.BONUS_REFRESH_SCREEN="bonusRefreshScreen",t}(PIXI.Container);e.BonusAnimation=t}(e.bonus||(e.bonus={}))}(e.views||(e.views={}))}(e.actionMoneySlot||(e.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.actionMoneySlot.views.bonus.BonusAnimation,n=e.egt.baseslot.bottle,o=e.egt.actionMoneySlot.models.ActionMoneyNotifications,s=e.egt.baseslot.models.Notifications,a=function(e){function t(){var t=e.call(this)||this;return t.mainModel.saveBetResponseBeforeBonusChoice(),t._view=new window.com.egt.bonusAnimation.Main(t.mainModel),t.activateBonus(),t.view.startBonus(),t.view.interactiveChildren=!t.mainModel.isNoConnection,t}return __extends(t,e),Object.defineProperty(t.prototype,"mainModel",{get:function(){return n.container.MainModel},enumerable:!0,configurable:!0}),t.prototype.getInterests=function(){return[o.BONUS_CHOICE_RECEIVED,o.BONUS_WIN_MONEY_ANIMATION_COMPLETE,s.CURRENCY_CHANGED,s.NO_CONNECTION]},t.prototype.handleNotification=function(e){switch(e.name){case o.BONUS_CHOICE_RECEIVED:this.view.animateBonusWin();break;case o.BONUS_WIN_MONEY_ANIMATION_COMPLETE:this.view.finishBonus(),null!=this._creditAnimationSound&&this._creditAnimationSound.stop(),this.soundManager.play("moneyAnimationEndSound");break;case s.CURRENCY_CHANGED:this.view.isDisplayingCredits=this.mainModel.isDisplayingCredits,console.log("controller is display credits???"),console.dir(this.mainModel.isDisplayingCredits);break;case s.NO_CONNECTION:this.view.interactiveChildren=!1}},t.prototype.activateBonus=function(){this.view.on(i.BONUS_CLICKED,this.onBonusClicked,this),this.view.on(i.BONUS_REFRESH_SCREEN,this.onBonusRefreshScreen,this),this.view.on(i.BONUS_ENDED,this.onBonusEnded,this)},t.prototype.deactivateBonus=function(){this.view.off(i.BONUS_CLICKED,this.onBonusClicked,this),this.view.off(i.BONUS_REFRESH_SCREEN,this.onBonusRefreshScreen,this),this.view.off(i.BONUS_ENDED,this.onBonusEnded,this)},t.prototype.onBonusRefreshScreen=function(){this._creditAnimationSound=this.soundManager.play("creditAnimationSound",!0),console.log("abe do tuka idvam li????"),this.sendNotification(o.BONUS_CHOICE_REFRESH_SCREEN)},t.prototype.onBonusEnded=function(){console.log("--Bonus ENDED!!!----"),this.mainModel.restoreBetResponseAfterBonusChoice(),this.parent.removeChildViewController(this),this.sendNotification(o.BONUS_CHOICE_ENDED)},t.prototype.onBonusClicked=function(){this.view.off(i.BONUS_CLICKED,this.onBonusClicked,this),this.mainModel.isNoConnection||(this.mainModel.commManager.sendBonusChoice({choice:this.onBonusClicked.arguments[0]}),this.sendNotification(o.BONUS_CHOICE_CLICKED))},Object.defineProperty(t.prototype,"soundManager",{get:function(){return this.mainModel.soundManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),t}(Pluck.ViewController);t.BonusController=a}(t.controllers||(t.controllers={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.baseslot.views.PaytableView,n=e.egt.library.loading.Loader,o=e.egt.library.widgets.MoneyText,s=function(e){function t(){var t=e.call(this)||this;return t._scatterWinAmounts={},t._scatterLimitWon={},t.defineScattersContainer(),t.defineScatterLimitsWons(),t}return __extends(t,e),t.prototype.defineWinAmounts=function(t){t.match(/card_\d+/)&&e.prototype.defineWinAmounts.call(this,t)},t.prototype.defineScatterLimitsWons=function(){var e=this.gameSettings.scatterCoef;for(var t in e){var i=this._elementsWithID["downLimitWonScatter_"+t];i.winAmount.style.lineJoin="round";var n=this.createScatterMoneyText(i.winAmount,null,i.width,i.height);n.x=i.x,n.y=i.y,this._scatterLimitWon[t]={},this._scatterLimitWon[t].downLimitScatterWon=n,this._moneyAmountsContainers[0].addChild(n);var o=this._elementsWithID["upLimitWonScatter_"+t];o.winAmount.style.lineJoin="round",(n=this.createScatterMoneyText(o.winAmount,null,o.width,o.height)).x=o.x,n.y=o.y,this._scatterLimitWon[t].upLimitScatterWon=n,this._moneyAmountsContainers[0].addChild(n)}console.dir(this._scatterLimitWon)},t.prototype.defineScattersContainer=function(){this._scatterWinAmountsContainer=new PIXI.Container,this.addChild(this._scatterWinAmountsContainer),this._scatterWinAmountsContainer.visible=!1,this._moneyAmountsContainers[1]=this._scatterWinAmountsContainer;for(var e in this._elementsWithID)this.defineScatterWinAmounts(e)},t.prototype.defineScatterWinAmounts=function(e){var t=e.match(/bonusContainer_\d+/);if(t){var i=this._elementsWithID[e],n=this.gameSettings,o=t[0].substring(t[0].indexOf("_")+1),s=this._elementsWithID.withoutBonusWinAmount,a=this._elementsWithID.withoutBonusCurrency,r=n.scatterCoef[o].withoutBonus.length;this._scatterWinAmounts[o]={},this._scatterWinAmounts[o].withoutBonus=[];var l=new PIXI.Container;l.name=o,this._scatterWinAmountsContainer.addChild(l),l.x=i.x,l.y=i.y,this.createScattersWinAmounts(this._scatterWinAmounts[o].withoutBonus,l,r,s,a);var c=this._elementsWithID.bonusWinAmount,u=this._elementsWithID.bonusCurrency;if(n.scatterCoef[o].bonus){var h=n.scatterCoef[o].bonus.length;this._scatterWinAmounts[o].bonus=[];var d=this._elementsWithID.or,p=new PIXI.Text(" "+this.gameSettings.localization.or+" ",d.style);this._scatterWinAmounts[o].or=p,l.addChild(p);var m=this._elementsWithID["bonusText_"+this._language],_=new PIXI.Text(m.text,m.style);this._scatterWinAmounts[o].bonusText=_,l.addChild(_),this.createScattersWinAmounts(this._scatterWinAmounts[o].bonus,l,h,c,u)}}},t.prototype.createScattersWinAmounts=function(e,t,i,n,o){for(var s=0;s<i;s++){var a=this.createScatterMoneyText(n,o,0,0,!1);t.addChild(a),e[s]=a,e[s].suffix=", "}if(e[e.length-1].suffix="",this.gameSettings.diamondPlay){var r=this._elementsWithID.diamonds;e[e.length-1].suffix=" "+this.gameSettings.localization.diamonds,e[e.length-1].suffixStyle=r.style}},t.prototype.createScatterMoneyText=function(e,t,i,n,s){void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=!0);var a=new o(this.moneyTextConfig(t,e,i,n,s));if(a.style=e.style,t)a.currencyStyle=t.style;else{var r=jQuery.extend(!0,{},e.style);r.strokeThickness=Math.round(.5*e.style.strokeThickness),a.currencyStyle=r}return a},t.prototype.updateScatterWinAmounts=function(e,t,i,n,o,s){this.updateMoneyText(this._scatterWinAmounts[t][i][n],e,o,s)},t.prototype.updateLimitsScatterWons=function(e,t,i,n,o){this.updateMoneyText(this._scatterLimitWon[e].downLimitScatterWon,t,n,o),this.updateMoneyText(this._scatterLimitWon[e].upLimitScatterWon,i,n,o)},t.prototype.positionScatterWinAmounts=function(){for(var e in this._scatterWinAmounts){var t=this._elementsWithID["bonusContainer_"+e].width,i=this._scatterWinAmounts[e].withoutBonus;this.calculateScatterWinAmountsPositions(i,t);var n=this._scatterWinAmounts[e].bonus;if(n){var o=this._scatterWinAmounts[e].or,s=this._scatterWinAmounts[e].bonusText,a=i[i.length-1];o.x=a.x+a.textWidth,o.y=a.y,o.x+o.width>t&&(o.x=0,o.y=a.y+a.height+this.gameSettings.multilineOffsetY),n[0].x=o.x+o.width,n[0].y=o.y,n[0].x+n[0].textWidth>t&&(n[0].x=0,n[0].y=a.y+a.height+this.gameSettings.multilineOffsetY),this.calculateScatterWinAmountsPositions(n,t),a=n[n.length-1],s.x=a.x+a.textWidth,s.y=a.y,s.x+s.width>t&&(s.x=0,s.x=0,s.y=a.y+a.height+this.gameSettings.multilineOffsetY)}}},t.prototype.calculateScatterWinAmountsPositions=function(e,t){for(var i=1;i<e.length;i++)e[i].x=e[i-1].x+e[i-1].textWidth,e[i].y=e[i-1].y,e[i].x+e[i].textWidth>t&&(e[i].x=0,e[i].y=e[i-1].y+e[i-1].height+this.gameSettings.multilineOffsetY)},t.prototype.moneyTextConfig=function(e,t,i,o,s){var a=this.gameSettings,r=a.diamondPlay,l=n.getLoader("gameImages"),c=r&&s?l.getTexture("diamond.png"):null;return{currency:a.currencyISO,centerAlignOnlyMoney:!1,isShowingCredits:!1,moneyFontSize:t.style.fontSize,currencyFontSize:e?e.style.fontSize:.5*t.style.fontSize,shouldFitToBounds:!1,diamond:c,diamondPlay:r,shouldShowCurrency:!this.gameSettings.diamondPlay||s,diamondScaleCoef:r?.5:0,suffixFontSize:.9*t.style.fontSize,hideCents:a.currencyHideCents,align:t.style.align,bounds:{width:i,height:o}}},Object.defineProperty(t.prototype,"gameSettings",{get:function(){return bottle.container.GameSettings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return bottle.container.PaytableView},enumerable:!0,configurable:!0}),t.SPACE_BETWEEN_SCATTER_WINAMOUNTS=5,t}(i);t.PaytableView=s}(t.views||(t.views={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.choiceslot.controllers.UIController,n=e.egt.baseslot.models.Notifications,o=Pluck.Notification,s=e.egt.baseslot.bottle,a=e.egt.baseslot.models.ui.UIStateManager,r=e.egt.actionMoneySlot.models.ActionMoneyNotifications,l=e.egt.actionMoneySlot.models.server.response.BaseResponse,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getInterests=function(){return e.prototype.getInterests.call(this).concat(r.ENTER_BONUS_SCENARIO_COMPLETE,r.BONUS_CHOICE_REFRESH_SCREEN,r.BONUS_WIN_MONEY_ANIMATION_COMPLETE,r.BONUS_CHOICE_ENDED)},t.prototype.handleNotification=function(t){switch(this.log("Handle notification[%s]",t.name),t.name){case n.EXPAND_COMPLETE:e.prototype.handleNotification.call(this,t),this.mainModel.betComplex.isBonus&&this._stateManager.state(a.WAITING_FOR_FREESPIN_SCENARIO_COMPLETE);break;case r.ENTER_BONUS_SCENARIO_COMPLETE:console.log("ENTER_BONUS_SCENARIO_COMPLETE---"),this._stateManager.state(a.WAITING_FOR_FREESPIN_ANIMATION_COMPLETE);break;case r.BONUS_CHOICE_REFRESH_SCREEN:this._isWinMoneyAnimating=!0,this._stateManager.state(a.WAITING_FOR_COLLECT);break;case r.BONUS_WIN_MONEY_ANIMATION_COMPLETE:this._isWinMoneyAnimating=!1,this._stateManager.state(a.WAITING_FOR_FREESPIN_ANIMATION_COMPLETE);break;case r.BONUS_CHOICE_ENDED:console.log("bonus choice ended!!!!"),console.log(this.mainModel.response.state),this.mainModel.response.state==l.STATE_CHOICE||this.mainModel.response.state==l.STATE_MULTIPLIER_CHOICE||this.mainModel.response.state==l.STATE_FREESPIN_CHOICE?this._stateManager.state(a.WAITING_FOR_FREESPIN_ANIMATION_START):this.mainModel.isFreespinGame?e.prototype.handleNotification.call(this,new o(n.WIN_MONEY_ANIMATION_COMPLETE,null)):e.prototype.handleNotification.call(this,new o(n.FREESPIN_OUTRO_ENDED,null));break;case n.WIN_MONEY_ANIMATION_COMPLETE:this.mainModel.betComplex.isBonus||e.prototype.handleNotification.call(this,t);break;default:e.prototype.handleNotification.call(this,t)}},t.prototype.checkForAutoplayStopCondition=function(){this.mainModel.response.state==l.STATE_BONUS_CHOICE?this.stopAutoplay(!0):e.prototype.checkForAutoplayStopCondition.call(this)},Object.defineProperty(t.prototype,"mainModel",{get:function(){return s.container.MainModel},enumerable:!0,configurable:!0}),t.prototype.processCurrentState=function(){this.mainModel.currentState.state==l.STATE_BONUS_CHOICE||this.mainModel.currentState.state==l.STATE_MULTIPLIER_CHOICE||this.mainModel.currentState.state==l.STATE_FREESPIN_CHOICE?this._stateManager.state(a.WAITING_FOR_FREESPIN_ANIMATION_COMPLETE):e.prototype.processCurrentState.call(this)},t}(i);t.UIController=c}(t.controllers||(t.controllers={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=e.egt.choiceslot.models.MainModel,n=e.egt.actionMoneySlot.models.server.response.BaseResponse,o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._winningFreespins=0,t._winningMultiplier=0,t}return __extends(t,e),t.prototype.shouldPlayCoins=function(){return!this.betComplex.isBonus&&e.prototype.shouldPlayCoins.call(this)},Object.defineProperty(t.prototype,"betComplex",{get:function(){return this.betResponse.complex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bonusChoiceResponse",{get:function(){return this.response},enumerable:!0,configurable:!0}),t.prototype.saveBetResponseBeforeBonusChoice=function(){this._betResponseBeforeBonusChoice||(this._betResponseBeforeBonusChoice=this.response)},t.prototype.restoreBetResponseAfterBonusChoice=function(){null!=this._betResponseBeforeBonusChoice&&(this.bonusChoiceResponse.complex.jackpot=this._betResponseBeforeBonusChoice.complex.jackpot,this._betResponseBeforeBonusChoice.serialize(this.bonusChoiceResponse),this.response=this._betResponseBeforeBonusChoice,this._betResponseBeforeBonusChoice=null)},t.prototype.initFromCurrentState=function(){e.prototype.initFromCurrentState.call(this),this.currentState.state==n.STATE_BONUS_CHOICE&&0!=this.currentState.freespinsUsed&&(this._currentFreespin=this.currentState.freespinsUsed,this._totalFreespins=this.currentState.freespinsUsed+this.currentState.freespins,this.isFreespinGame=!0,this.setFreespinsLineIndex()),this.currentState.state!=n.STATE_MULTIPLIER_CHOICE&&this.currentState.state!=n.STATE_FREESPIN_CHOICE||0==this.currentState.freespinsUsed||(this._currentFreespin=this.currentState.freespinsUsed,this._totalFreespins=this.currentState.freespinsUsed+this.currentState.freespins,this.setFreespinsLineIndex()),this.currentState.choiceObject&&this.currentState.choiceObject.freespins&&(this._winningFreespins=this.currentState.choiceObject.freespins),this.currentState.choiceObject&&this.currentState.choiceObject.multiplier&&(this._winningMultiplier=this.currentState.choiceObject.multiplier)},t.prototype.addNewFreespins=function(){var e=0==this.betResponse.complex.freespins?this.getWinnigFreespins():this.betResponse.complex.freespins;this._totalFreespins+=e},t.prototype.getWildIndexes=function(){return this.gameSettings.changedReelVideosAndImagesInFreespinsIndexes&&(this.response.state==n.STATE_FREESPIN||this.isFreespinGame)?this._wildIndexes=this.gameSettings.changedReelVideosAndImagesInFreespinsIndexes:this.choiceResponse&&this.choiceResponse.complex.choice&&this.choiceResponse.complex.choice.wildcard?(this._wildIndexes||(this._wildIndexes=[]),this._wildIndexes[0]=this.choiceResponse.complex.choice.wildcard):e.prototype.getWildIndexes.call(this),this._wildIndexes},Object.defineProperty(t.prototype,"gameSettings",{get:function(){return bottle.container.GameSettings},enumerable:!0,configurable:!0}),t.prototype.getWinnigFreespins=function(){return this._winningFreespins},t.prototype.setWinningFreespins=function(){this._winningFreespins=this.response.complex.choice.freespins},t.prototype.getWinningMultiplier=function(){return this._winningMultiplier},t.prototype.setWinningMultiplier=function(){console.log("multiplier!!!"),this._winningMultiplier=this.response.complex.choice.multiplier},t.prototype.resetWinningFreespins=function(){this._winningFreespins=0},t.prototype.resetWinningMultiplier=function(){this._winningMultiplier=0},t}(i);t.MainModel=o}(t.models||(t.models={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getWinSound=function(){if(this.betComplex.isBonus){var t=this.betComplex.bonuschoiceObject.bonusScatterIndex,i=this.gameSettings.getScatterConfig(t);this._winSound=i.bonusScatterSound}else this._winSound=e.prototype.getWinSound.call(this);return this._winSound},Object.defineProperty(t.prototype,"betComplex",{get:function(){return this.mainModel.betResponse.complex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameSettings",{get:function(){return this.mainModel.gameSettings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mainModel",{get:function(){return bottle.container.MainModel},enumerable:!0,configurable:!0}),t}(e.egt.choiceslot.models.winvisualization.WinVisualizationModel);t.WinVisualizationModel=i}(t.winvisualization||(t.winvisualization={}))}(t.models||(t.models={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){!function(t){!function(t){var i=function(e){function i(){var t=e.call(this)||this;return t.bonuschoiceObject=null,t.choiceObject=null,t}return __extends(i,e),i.prototype.getResponseForState=function(){return this.state==t.BaseResponse.STATE_BONUS_CHOICE?bottle.container.BetResponse.instance():this.state==t.BaseResponse.STATE_MULTIPLIER_CHOICE||this.state==t.BaseResponse.STATE_FREESPIN_CHOICE?bottle.container.ChoiceResponse.instance():e.prototype.getResponseForState.call(this)},i}(e.egt.choiceslot.models.server.response.CurrentState);t.CurrentState=i}(t.response||(t.response={}))}(t.server||(t.server={}))}(t.models||(t.models={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(e){!function(e){!function(e){!function(e){var t=function(){return function(){this.selectedIndex=-1,this.options=null,this.totalBet=0}}();e.BonusChoiceObject=t}(e.server||(e.server={}))}(e.models||(e.models={}))}(e.actionMoneySlot||(e.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){!function(t){var i=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"gameSettings",{get:function(){return bottle.container.GameSettings},enumerable:!0,configurable:!0}),t.prototype.updateScatterWinAmounts=function(){console.log("scatterCoeficiens---???"),console.dir(this.gameSettings.paytableCoef);for(var e in this.gameSettings.scatterCoef){console.dir(this.gameSettings.scatterCoef);var t=this.gameSettings.scatterCoef[e].withoutBonus;this.setScatterWinAmounts(e,t,"withoutBonus");var i=this.gameSettings.scatterCoef[e].bonus,n=this.mainModel.totalBet*t[0],o=i?this.mainModel.totalBet*i[i.length-1]:this.mainModel.totalBet*t[t.length-1];this.view.updateLimitsScatterWons(e,n,o,this.mainModel.denomination,this.mainModel.isDisplayingCredits),this.setScatterWinAmounts(e,i,"bonus"),this.view.positionScatterWinAmounts()}},t.prototype.setScatterWinAmounts=function(e,t,i){var n=this.mainModel.denomination,o=this.mainModel.isDisplayingCredits,s=this.mainModel.totalBet;if(t)for(var a=0;a<t.length;a++)this.view.updateScatterWinAmounts(s*t[a],e,i,a,n,o)},t.prototype.updateValues=function(){e.prototype.updateValues.call(this),this.updateScatterWinAmounts()},Object.defineProperty(t.prototype,"mainModel",{get:function(){return bottle.container.MainModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},enumerable:!0,configurable:!0}),t}(e.egt.baseslot.controllers.PaytableController);t.PaytableController=i}(t.controllers||(t.controllers={}))}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));var com;!function(e){!function(t){!function(t){var i=e.egt.choiceslot.Main,n=e.egt.baseslot.bottle,o=e.egt.actionMoneySlot.models.server.BaseComplex,s=function(t){function i(){var e=t.call(this)||this;return e.events.push(o.BONUS_CHOICE),e.events.push(o.FREESPIN_CHOICE),e.events.push(o.MULTIPLIER_CHOICE),e}return __extends(i,t),i.prototype.defineBottleConstructors=function(){t.prototype.defineBottleConstructors.call(this),n.value("BaseResponseConstructor",e.egt.actionMoneySlot.models.server.response.BaseResponse),n.value("BonusChoiceResponseConstructor",e.egt.actionMoneySlot.models.server.response.BonusChoiceResponse),n.value("BaseComplexConstructor",e.egt.actionMoneySlot.models.server.BaseComplex),n.value("BetComplexConstructor",e.egt.actionMoneySlot.models.server.BetComplex),n.value("BonusChoiceComplexConstructor",e.egt.actionMoneySlot.models.server.BonusChoiceComplex),n.value("ResourcesConstructor",e.egt.actionMoneySlot.models.Resources),n.value("RootControllerConstructor",e.egt.actionMoneySlot.controllers.RootController),n.value("MainModelConstructor",e.egt.actionMoneySlot.models.MainModel),n.value("CommunicationManagerConstructor",e.egt.actionMoneySlot.models.server.CommunicationManager),n.value("WinVisualizationControllerConstructor",e.egt.actionMoneySlot.controllers.WinVisualizationController),n.value("VideoControllerConstructor",e.egt.actionMoneySlot.controllers.VideoController),n.value("FreespinControllerConstructor",e.egt.actionMoneySlot.controllers.FreespinController),n.value("WinVisualizationModelConstructor",e.egt.actionMoneySlot.models.winvisualization.WinVisualizationModel),n.value("BonusControllerConstructor",e.egt.actionMoneySlot.controllers.BonusController),n.value("BonusAnimationConstructor",e.egt.actionMoneySlot.views.bonus.BonusAnimation),n.value("CurrentStateConstructor",e.egt.actionMoneySlot.models.server.response.CurrentState),n.value("PaytableViewConstructor",e.egt.actionMoneySlot.views.PaytableView),n.value("GameSettingsConstructor",e.egt.actionMoneySlot.models.GameSettings),n.value("UIControllerConstructor",e.egt.actionMoneySlot.controllers.UIController),n.value("BottomLabelsControllerConstructor",e.egt.actionMoneySlot.controllers.BottomLabelsController),n.value("BonusChoiceObjectConstructor",e.egt.actionMoneySlot.models.server.BonusChoiceObject),n.value("PaytableControllerConstructor",e.egt.actionMoneySlot.controllers.PaytableController)},i.prototype.setupBottleClasses=function(){t.prototype.setupBottleClasses.call(this),n.instanceFactory("BonusChoiceComplex",function(e){return new e.BonusChoiceComplexConstructor}),n.instanceFactory("FreespinChoiceResponse",function(e){return new e.FreespinChoiceResponseConstructor}),n.instanceFactory("MultiplierChoiceResponse",function(e){return new e.MultiplierChoiceResponseConstructor}),n.instanceFactory("BonusController",function(e){return new e.BonusControllerConstructor}),n.instanceFactory("BonusAnimation",function(e){return new e.BonusAnimationConstructor}),n.instanceFactory("BonusChoiceResponse",function(e){return new e.BonusChoiceResponseConstructor}),n.instanceFactory("BonusChoiceObject",function(e){return new e.BonusChoiceObjectConstructor})},i}(i);t.Main=s}(t.actionMoneySlot||(t.actionMoneySlot={}))}(e.egt||(e.egt={}))}(com||(com={}));
//# sourceMappingURL=Game.min.js.map