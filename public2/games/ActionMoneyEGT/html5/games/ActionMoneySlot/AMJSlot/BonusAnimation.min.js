var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),com;!function(a){!function(b){!function(b){var c=a.egt.library.loading.Loader,d=a.egt.actionMoneySlot.models.Resources,e=function(a){function b(){var b=a.call(this)||this;return b._layoutLoader=c.getLoader(d.BONUS_ANIMATION_LAYOUT_LOADER),b._layoutRoot=b._layoutLoader.getData().mainContainer,b._elementsWithID=b._layoutLoader.getData().elementsWithID,b.addChild(b._layoutRoot),b}return __extends(b,a),Object.defineProperty(b.prototype,"isDisplayingCredits",{set:function(a){},enumerable:!0,configurable:!0}),b.prototype.dispose=function(){},b}(PIXI.Container);b.AnimationLayout=e}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){var c=a.egt.library.widgets.MoneyText,d=a.egt.freespinAnimation.AnimationLayout,e=a.egt.library.loading.Loader,f=a.egt.library.widgets.BitmapMoneyText,g=function(a){function b(d,g){var h=a.call(this)||this,i=bottle.container.GameSettings,j=d.splice(8);h._textures={firstPart:d,secondPart:j},h._bgrDarken=new PIXI.Graphics,h._bgrDarken.beginFill(0),h._bgrDarken.drawRect(i.reelCoordX,i.reelCoordY,i.reelWidth*i.numReels+(i.numReels-1)*i.reelSpacing,i.reelHeight),h._bgrDarken.endFill(),h._bgrDarken.alpha=.7,h._bgrDarken.visible=!1,h.addChild(h._bgrDarken),h._animatingObjs=[],h._video=new PIXI.extras.MovieClip(h._textures.firstPart),h.addChild(h._video),h._video.gotoAndStop(0),h._video.animationSpeed=.16667,h._video.loop=!1,h._video.onComplete=function(){h._video.stop(),h.emit(b.ON_FIRST_PART_VIDEO_ENDED)},h._video.visible=!1;var k=new PIXI.Sprite(h._layoutLoader.getTexture("scatter.png"));h.addChild(k),h._animatingObjs.push(k),k.alpha=0;var l=new PIXI.Sprite(h._layoutLoader.getTexture("win.png"));h.addChild(l),l.alpha=0,h._animatingObjs.push(l);var m=e.getLoader("gameImages"),n=i.diamondPlay,o=n?m.getTexture("diamond.png"):null,p=h._elementsWithID.tolalWin;p.visible=!1,h._totalWin=new f({currency:i.currencyISO,denomination:g.denomination,align:"center",fontFamily:p.font.name,moneyFontSize:p.font.size,currencyFontSize:p.font.size,centerAlignOnlyMoney:!1,isShowingCredits:g.isDisplayingCredits,shouldFitToBounds:!1,spaceBetweenMoneyAndDiamond:15,diamond:o,diamondPlay:n,diamondScaleCoef:n?.5:0,hideCents:i.currencyHideCents,bounds:{width:370,height:p.height}}),h.addChild(h._totalWin),h._totalWin.y=p.y,h._totalWin.position.x=(PIXI.renderer.width-h._totalWin.width)/2,h._totalWin.alpha=0,h._animatingObjs.push(h._totalWin);var q=h._elementsWithID.coefAndtotalBet;q.visible=!1;var r=q.style;return h._coefAndtotalBet=new c({currency:i.currencyISO,denomination:g.denomination,centerAlignOnlyMoney:!1,align:"center",isShowingCredits:g.isDisplayingCredits,moneyFontSize:r.fontSize,currencyFontSize:Math.round(.5*r.fontSize),shouldFitToBounds:!1,diamond:null,diamondPlay:n,diamondScaleCoef:n?.5:0,shouldShowCurrency:!1,suffixFontSize:r.fontSize,hideCents:i.currencyHideCents,bounds:{width:370,height:q.height}}),h._coefAndtotalBet.style=r,h._coefAndtotalBet.suffixStyle=r,h.addChild(h._coefAndtotalBet),h._coefAndtotalBet.x=(PIXI.renderer.width-h._coefAndtotalBet.bounds.width)/2,h._coefAndtotalBet.y=q.y,h._coefAndtotalBet.alpha=0,h._animatingObjs.push(h._coefAndtotalBet),h._animatingWonTween=new TimelineMax,h._animatingWonTween.staggerTo(h._animatingObjs,.1,{alpha:1,ease:Expo.easeIn},.3),h._animatingWonTween.pause(),h}return __extends(b,a),b.prototype.playVideo=function(){this._bgrDarken.visible=!0,this._video.visible=!0,this._video.play()},b.prototype.showWon=function(a,b){var c=this;this._video.textures=this._textures.secondPart,this._video.gotoAndPlay(0),this._totalWin.money=a*b,this._coefAndtotalBet.money=b,this._coefAndtotalBet.suffix=" x "+a,TweenMax.delayedCall(.4,function(){c._animatingWonTween.resume()})},Object.defineProperty(b.prototype,"isDisplayingCredits",{set:function(a){this._coefAndtotalBet.isShowingCredits=a,this._totalWin.isShowingCredits=a},enumerable:!0,configurable:!0}),b.prototype.dispose=function(){this._video&&(this._video.onComplete=null,this._video=null),this._animatingWonTween&&this._animatingWonTween.kill()},b.ON_ANIMATION_ENDED="onAnimationEnded",b.ON_FIRST_PART_VIDEO_ENDED="onFirstPartVideoEnded",b}(d);b.Suitcase=g}(b.bonusAnimation||(b.bonusAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(a){!function(a){var b=function(a){function b(b,c){var d=a.call(this)||this;return d._scatterTextures=b,d._bankBonusTextures=c,d._video=new PIXI.extras.MovieClip(d._scatterTextures.select),d.addChild(d._video),d._video.animationSpeed=.33333,d.setInteractivity(!0),d._winCoef=new PIXI.extras.BitmapText("x 1000",{font:"52px scatterNumbers_inactive-export"}),d._bankBonusVideo=new PIXI.extras.MovieClip([c.unActive]),d._bankBonusVideo.animationSpeed=.333333,d._bankBonusVideo.visible=!1,d.addChild(d._bankBonusVideo,d._winCoef),d._winCoef.visible=!1,d._video.play(),d}return __extends(b,a),b.prototype.showWon=function(a,b,c){var d=this;void 0===c&&(c=!1),this._winCoef.text="x "+b,this._winCoef.x=(this.width-this._winCoef.width)/2,this._winCoef.y=(this.height-this._winCoef.height)/2,this._video.stop(),this._video.textures=this._scatterTextures.inActivePart,this._video.loop=!1,this._video.onComplete=function(){return d.onTransformationComplete(c,a)},this._video.gotoAndPlay(0)},b.prototype.onTransformationComplete=function(a,b){var c=this;this._winCoef.visible=!0;var d=1;a&&(this._winCoef.font="52px scatterNumbers_active-export",this._video.textures=this._scatterTextures.activePart,this._bankBonusVideo.textures=this._bankBonusTextures.active,this._video.gotoAndStop(0)),b?(this._winCoef.y=15,this._bankBonusVideo.visible=!0,this._bankBonusVideo.gotoAndPlay(0),this._bankBonusVideo.loop=!1,this._bankBonusVideo.onComplete=function(){a&&(d=.2),TweenMax.delayedCall(d,c.onTransformationEnded,null,c)}):TweenMax.delayedCall(d,this.onTransformationEnded,null,this)},b.prototype.onTransformationEnded=function(){console.log("traansformation ENded!!!!"),this.emit(b.TRANSFORMATION_ENDED)},b.prototype.stopVideo=function(a){a>=0&&a<this._video.textures.length?this._video.gotoAndStop(a):this._video.stop()},b.prototype.setInteractivity=function(a){this.interactive=a,this.buttonMode=a},b.prototype.dispose=function(){this._video&&(this._video.onComplete=null,this._video=null),this._bankBonusVideo&&(this._bankBonusVideo.onComplete=null,this._bankBonusVideo=null)},b.TRANSFORMATION_ENDED="transformationEnded",b}(PIXI.Container);a.Scatter=b}(a.bonusAnimation||(a.bonusAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){var c=a.egt.actionMoneySlot.views.bonus.BonusAnimation,d=a.egt.library.Utils,e=a.egt.freespinAnimation.AnimationLayout,f=a.egt.library.Device,g=a.egt.baseslot.bottle,h=a.egt.library.sound.SoundManager,i=function(a){function e(c,d){var e=a.call(this)||this;e._isScatterWaitSelectSoundRequested=!1;var i=g.container.GameSettings;e._mainModel=c,e._eventEmitter=d,e._soundManager=c.soundManager;var j=e.getTextureSequence("scatterTransformation_",32,".png",3),k=j.splice(j.length-1),l={select:e.getTextureSequence("selectScatter_",35,".png",3),activePart:k,inActivePart:j},m={active:e.getTextureSequence("bankBonus_",30,".png",3),unActive:e._layoutLoader.getTexture("unActiveBankBonus.png")};e._scatters=[];for(var n=e._mainModel.betComplex.bonuschoiceObject.bonusScatterCells,o=n.length,p=0;p<o;p+=2){var q=n[p+1],r=n[p],s=new b.Scatter(l,m);e.addChild(s),s.x=i.reelCoordX+r*i.reelWidth+r*i.reelSpacing,s.y=i.reelCoordY+q*i.reelHeight/i.numReelCards,e._scatters.push(s),s.on(f.resolveEvent("click"),e.onScatterClick,e)}var t=e.getTextureSequence("suitcase_",25,".png",3);return e._suitcase=new b.Suitcase(t,c),e._suitcase.on(b.Suitcase.ON_FIRST_PART_VIDEO_ENDED,e.onSuitcaseFirstPartVideoComplete,e),e.addChild(e._suitcase),e._scatterWaitSelect=e._soundManager.play("scatterWaitSelectSound",!0),e._isScatterWaitSelectSoundRequested=null==e._scatterWaitSelect,e._soundManager.addEventListener(h.SOUND_LOADED,e.onSoundsLoaded,e),e}return __extends(e,a),e.prototype.onSoundsLoaded=function(a){"freespinSounds"==a.data.soundId&&this._isScatterWaitSelectSoundRequested&&(this._scatterWaitSelect=this._soundManager.play("scatterWaitSelectSound",!0))},e.prototype.onScatterClick=function(a){this._isScatterWaitSelectSoundRequested=!1,this._scatterWaitSelect&&this._scatterWaitSelect.stop(),this._soundManager.play("scatterSelectSound"),this.interactiveChildren=!1;var b=this._scatters.indexOf(a.target);this._eventEmitter.emit(c.BONUS_CLICKED,b.toString())},e.prototype.animateWon=function(){var a=this.bonuschoiceObject.options,c=this.bonuschoiceObject.selectedIndex,d=(a.length,this._scatters[c]);d.on(b.Scatter.TRANSFORMATION_ENDED,this.onSelectedScatterTransformationEnded,this),this._soundManager.play("scatterFonSound"),d.showWon(a[c].bonus,a[c].coef,!0)},e.prototype.onSelectedScatterTransformationEnded=function(){var a=this.bonuschoiceObject,c=a.options,d=a.selectedIndex;this._scatters[d].off(b.Scatter.TRANSFORMATION_ENDED,this.onSelectedScatterTransformationEnded,this);var e=this._scatters.length-1==d?this._scatters.length-2:this._scatters.length-1;this._scatters[e].on(b.Scatter.TRANSFORMATION_ENDED,this.onUnSelectedScattersTransformationEnded,this);for(var f=c.length,g=0;g<f;g++)this._scatters.length,d!=g&&this._scatters[g].showWon(c[g].bonus,c[g].coef,!1)},e.prototype.onSuitcaseFirstPartVideoComplete=function(){this._suitcase.off(b.Suitcase.ON_FIRST_PART_VIDEO_ENDED,this.onSuitcaseFirstPartVideoComplete,this);var a=this.bonuschoiceObject,d=a.options,e=a.selectedIndex;this._suitcase.showWon(d[e].coef,a.totalBet),this._eventEmitter.emit(c.BONUS_REFRESH_SCREEN)},e.prototype.onUnSelectedScattersTransformationEnded=function(){var a=this;console.log("do tuka li sym???"),this._scatters[this._scatters.length-1].off(b.Scatter.TRANSFORMATION_ENDED,this.onUnSelectedScattersTransformationEnded,this),TweenMax.delayedCall(1.5,function(){for(var b=a._scatters.length,c=0;c<b;c++)a._scatters[c].visible=!1;a._soundManager.play("suitcaseSound"),a._suitcase.playVideo()})},Object.defineProperty(e.prototype,"bonuschoiceObject",{get:function(){return this._mainModel.bonusChoiceResponse.complex.bonuschoiceObject},enumerable:!0,configurable:!0}),e.prototype.finishBonus=function(){this._eventEmitter.emit(c.BONUS_ENDED)},e.prototype.getTextureSequence=function(a,b,c,e){for(var f=[],g=0;g<b;g++)f[g]=this._layoutLoader.getTexture(a+d.convertToSequenceString(g,e)+c);return f},e.prototype.dispose=function(){if(this._soundManager.removeEventListener(h.SOUND_LOADED,this.onSoundsLoaded,this),this._scatterWaitSelect&&this._scatterWaitSelect.stop(),this._scatters)for(var c=0;c<this._scatters.length;c++)this._scatters[c].off(f.resolveEvent("click"),this.onScatterClick,this),this._scatters[c].off(b.Scatter.TRANSFORMATION_ENDED,this.onSelectedScatterTransformationEnded,this),this._scatters[c].off(b.Scatter.TRANSFORMATION_ENDED,this.onUnSelectedScattersTransformationEnded,this),this._scatters[c].dispose();this._suitcase.off(b.Suitcase.ON_FIRST_PART_VIDEO_ENDED,this.onSuitcaseFirstPartVideoComplete,this),this._suitcase.dispose(),a.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"isDisplayingCredits",{set:function(a){this._suitcase.isDisplayingCredits=a},enumerable:!0,configurable:!0}),e}(e);b.Animation=i}(b.bonusAnimation||(b.bonusAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){var c=a.egt.actionMoneySlot.views.bonus.BonusAnimation,d=function(a){function c(b){var c=a.call(this,b)||this;return c._mainModel=b,c}return __extends(c,a),c.prototype.startBonus=function(){this._animation=new b.Animation(this._mainModel,this),this.addChild(this._animation)},c.prototype.animateBonusWin=function(){this._animation.animateWon()},c.prototype.finishBonus=function(){this._animation.finishBonus()},c.prototype.destroyAnimations=function(){this._animation&&(this.removeChild(this._animation),this._animation.dispose(),this._animation=null)},Object.defineProperty(c.prototype,"isDisplayingCredits",{set:function(a){this._animation&&(this._animation.isDisplayingCredits=a)},enumerable:!0,configurable:!0}),c.prototype.dispose=function(){this.destroyAnimations()},c}(c);b.Main=d}(b.bonusAnimation||(b.bonusAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));