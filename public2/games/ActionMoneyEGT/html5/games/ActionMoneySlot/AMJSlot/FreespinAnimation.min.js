var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),com;!function(a){!function(b){!function(b){var c=a.egt.library.loading.Loader,d=a.egt.actionMoneySlot.models.Resources,e=function(a){function b(b,e){var f=a.call(this)||this;return f._mainModel=e,f._soundManager=f._mainModel.soundManager,f._eventEmitter=b,f._layoutLoader=c.getLoader(d.FREESPIN_ANIMATION_LAYOUT_LOADER),f._elementsWithID=f._layoutLoader.getData().elementsWithID,f._shadow=new PIXI.Graphics,f._shadow.beginFill(0),f._shadow.drawRect(0,0,1280,720),f._shadow.endFill(),f}return __extends(b,a),b.prototype.hideElements=function(a){for(var b=0;b<a.children.length;b++)a.children[b].visible=!1},b.prototype.showElements=function(a){for(var b=0;b<a.children.length;b++)a.children[b].visible=!0},Object.defineProperty(b.prototype,"currentState",{get:function(){return this._mainModel.currentState},enumerable:!0,configurable:!0}),b.prototype.darken=function(){this._darkenTween=TweenMax.to(this._shadow,1,{alpha:1,ease:Quad.easeIn,onComplete:this.onDarkenComplete,onReverseComplete:this.onUnDarkenComplete,callbackScope:this})},b.prototype.unDarken=function(){this._darkenTween&&this._darkenTween.kill(),this._darkenTween=TweenMax.to(this._shadow,1,{alpha:0,ease:Quad.easeIn,onComplete:this.onUnDarkenComplete,callbackScope:this})},b.prototype.onDarkenComplete=function(){this.unDarken()},b.prototype.onUnDarkenComplete=function(){},b.prototype.dispose=function(){this._darkenTween&&(this._darkenTween.kill(),this._darkenTween=null)},b.NAME_WILD_CARDS={7:"old man",5:"car",6:"lady"},b}(PIXI.Container);b.Animation=e}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){var c=a.egt.choiceslot.views.freespin.FreespinAnimation,d=function(a){function b(b,c){var d=a.call(this,b,c)||this;console.log("kolko pyti me vikash tuka ve???");var e=d.freespinsTextField;return e&&(d._animationTextContainer=new PIXI.Container,d._freespinsTextFieldBounds=new PIXI.Graphics,d._freespinsTextFieldBounds.beginFill(16711680,.5),d._freespinsTextFieldBounds.drawRect(0,0,e.width,e.height),d._freespinsTextFieldBounds.endFill(),d._freespinsTextFieldBounds.x=e.x,d._freespinsTextFieldBounds.y=e.y),d._leftDoor=new PIXI.Sprite(d._layoutLoader.getTexture("glass_door.png")),d.addChild(d._leftDoor),d._leftDoor.x=-1*d._leftDoor.width,d._rightDoor=new PIXI.Sprite(d._layoutLoader.getTexture("glass_door.png")),d.addChild(d._rightDoor),d._rightDoor.x=2*d._rightDoor.width,d._animatingDoorTween=new TimelineMax({ease:Linear.easeNone,onReverseComplete:d.onOpenDoorsComplete,callbackScope:d}),d._animatingDoorTween.to(d._leftDoor,.68,{x:0}),d._animatingDoorTween.to(d._rightDoor,.68,{x:d._rightDoor.width,onComplete:d.onClosedDoorsComplete,callbackScope:d},"-=0.7"),d._soundManager.play(d.soundName,!1,.7),d._soundManager.play("doorSound"),d}return __extends(b,a),b.prototype.onClosedDoorsComplete=function(){var a=this;console.log("closed door!!!"),this._animatingDoorTween.to(this.antimationText,.5,{alpha:1,onComplete:function(){console.log("tva kolko pyti se vika???"),a._eventEmitter.emit(c.REFRESH_SCREEN),TweenMax.delayedCall(a.delayTime,a.onDelayTimeComplete,null,a)}})},Object.defineProperty(b.prototype,"delayTime",{get:function(){return 1},enumerable:!0,configurable:!0}),b.prototype.onDelayTimeComplete=function(){var a=this;console.log("tva kolko pyti se vika???"),this._animatingDoorTween.reverse(),TweenMax.delayedCall(.5,function(){a._soundManager.play("doorSound")})},b.prototype.onOpenDoorsComplete=function(){},Object.defineProperty(b.prototype,"antimationText",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"freespinsTextField",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"soundName",{get:function(){return null},enumerable:!0,configurable:!0}),b}(b.Animation);b.BackgroundAnimation=d}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){var c=a.egt.choiceslot.views.freespin.FreespinAnimation,d=function(a){function d(b,c){var d=a.call(this,b,c)||this;console.log();var e=d._elementsWithID.introTextBase;return d._multiplierTextField=d._elementsWithID.introWonMultiplier,d._multiplierTextFieldBounds=new PIXI.Graphics,d._multiplierTextFieldBounds.beginFill(16711680,.5),d._multiplierTextFieldBounds.drawRect(0,0,d._multiplierTextField.width,d._multiplierTextField.height),d._multiplierTextFieldBounds.endFill(),d._multiplierTextFieldBounds.x=d._multiplierTextField.x,d._multiplierTextFieldBounds.y=d._multiplierTextField.y,d._animationTextContainer.addChild(e,d._multiplierTextField,d.freespinsTextField),d.addChild(d._animationTextContainer),d._animationTextContainer.alpha=0,d}return __extends(d,a),Object.defineProperty(d.prototype,"delayTime",{get:function(){return 3.16},enumerable:!0,configurable:!0}),d.prototype.onOpenDoorsComplete=function(){this._eventEmitter.emit(c.INTRO_ENDED)},Object.defineProperty(d.prototype,"antimationText",{get:function(){var a=this._mainModel.choiceResponse.complex.choice,c=(a.multiplier,a.freespins);if(this._multiplierTextField.text=this._elementsWithID.multiplierCount.text.slice(1),this._multiplierTextField.x=this._multiplierTextFieldBounds.x,this.freespinsTextField.text=c,this.freespinsTextField.x=this._freespinsTextFieldBounds.x+(this._freespinsTextFieldBounds.width-this.freespinsTextField.width),a.wildcard>-1){this._elementsWithID.introWonExtraWild.texture=this._layoutLoader.getTexture(b.Animation.NAME_WILD_CARDS[a.wildcard]+"_active.png"),this._animationTextContainer.addChild(this._elementsWithID.introTextAdditional,this._elementsWithID.introWonExtraWild)}return this._animationTextContainer},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"freespinsTextField",{get:function(){return this._elementsWithID.introWonFreespins},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"soundName",{get:function(){return"introSound"},enumerable:!0,configurable:!0}),d}(b.BackgroundAnimation);b.IntroAnimation=d}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){!function(b){var c=a.egt.library.events.EventDispatcher,d=a.egt.library.events,e=a.egt.baseslot.views.VideoPlayerConfig,f=function(a){function b(b,c){var d=a.call(this)||this;return d._instances=[],d._frames=[],d._videoObj={frame:0},d._startFrame=0,c instanceof e||(c=new e(c)),d._config=c,d._frames=b,d}return __extends(b,a),b.prototype.addInstance=function(a){this._instances.push(a),this.isPlaying&&this.setCurrentFrame(a)},b.prototype.removeInstance=function(a,b){void 0===b&&(b=!0);var c=this._instances.indexOf(a);-1!=c&&(b&&this._instances[c].parent&&this._instances[c].parent.removeChild(this._instances[c]),this._instances.splice(c,1))},b.prototype.play=function(a){void 0===a&&(a=!1),this.isPlaying||(a?this.loopTween.restart():this.tween.play(),this.updateFrame(),this._config.alphaTime>0&&this.alphaTween.play())},b.prototype.playReversed=function(){this.tween.reverse(),this.updateFrame()},b.prototype.gotoAndStop=function(a){if(!(a>=this._frames.length&&a<0)){var b=(a+1)/this._config.fps;if(console.log("pausedTime---"+b),this.tween.pause(b),this._config.alphaTime>0){var c=b*this.alphaTween.totalDuration()/this.tween.totalDuration();console.log("pausedTimeAlphaTween---"+c),this.alphaTween.pause(c)}this.updateFrame()}},Object.defineProperty(b.prototype,"isPlaying",{get:function(){return this.tween.isActive()},enumerable:!0,configurable:!0}),b.prototype.stop=function(){this.killTween(),this._alphaTween&&(this._alphaTween.kill(),this._alphaTween=null)},b.prototype.pause=function(){console.log("paused tween!!!"),this.tween.pause(),this._config.alphaTime>0&&this.alphaTween.pause()},b.prototype.toString=function(){return this.constructor.name+" "+this._config.loaderId},Object.defineProperty(b.prototype,"currentFrame",{get:function(){return this._videoObj.frame},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"width",{get:function(){return this._frames[0].width},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"height",{get:function(){return this._frames[0].height},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"length",{get:function(){return this._frames.length/this._config.fps},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"totalLength",{get:function(){var a=this.length;return a+a*(this._config.repeatCount<0?0:this._config.repeatCount)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"tween",{get:function(){if(!this._tween){this._lastFrame=this._videoObj.frame-1,console.log("helllo"+this._lastFrame);var a=this._frames.length/this._config.fps;this._tween=new TweenMax(this._videoObj,a,{frame:this._frames.length-1,repeat:this._config.repeatCount,ease:Linear.easeNone,roundProps:["frame"],paused:!0,onUpdate:this.updateFrame,onComplete:this.onVideoEnded,onReverseComplete:this.onVideoReverseComplete,callbackScope:this})}return this._tween},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"loopTween",{get:function(){if(!(this._config.loopIndex<0||this._config.loopIndex>=this._frames.length)){this.tween.invalidate(),this._videoObj.frame=this._config.loopIndex,this._lastFrame=this._videoObj.frame-1;var a=(this._frames.length-this._config.loopIndex)/this._config.fps;return this.tween.duration(a),this.tween.repeat(-1),this.tween}},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"alphaTween",{get:function(){if(!this._alphaTween){var a=Math.max(0,Math.min(1,this._config.startAlpha)),b=Math.max(0,Math.min(1,this._config.endAlpha));this._alphaTween=TweenMax.fromTo(this._instances,this._config.alphaTime,{alpha:a},{alpha:b,ease:Linear.easeNone,paused:!0})}return this._alphaTween},enumerable:!0,configurable:!0}),b.prototype.onVideoEnded=function(){console.log(" AZ ENDED-----"),this.dispatchEvent(new d.Event(b.VIDEO_COMPLETE)),this._config.loop&&(this.loopTween.restart(),this.updateFrame())},b.prototype.onVideoReverseComplete=function(){this.dispatchEvent(new d.Event(b.VIDEO_REVERSE_COMPLETE))},b.prototype.setCurrentFrame=function(a){a.texture=this._frames[this._videoObj.frame]},b.prototype.updateFrame=function(){if(this._videoObj.frame!=this._lastFrame){for(var a=0;a<this._instances.length;a++)this.setCurrentFrame(this._instances[a]);for(;this._videoObj.frame!=this._lastFrame;)this.isPlaying?this.tween.reversed()?this._lastFrame--:(this._videoObj.frame<this._lastFrame&&(this._lastFrame=this._config.loopIndex-1),this._lastFrame++):this._lastFrame=this._videoObj.frame,console.log("DE"+this._lastFrame),this.dispatchEvent(new d.Event(b.VIDEO_FRAME,{currentFrame:this._lastFrame}))}},b.prototype.killTween=function(){this._tween&&(this._tween.kill(),this._tween=null)},b.VIDEO_COMPLETE="videoComplete",b.VIDEO_FRAME="videoFrame",b.VIDEO_REVERSE_COMPLETE="videoReverseComplete",b}(c);b.VideoPlayerProba=f}(b.views||(b.views={}))}(b.actionMoneySlot||(b.actionMoneySlot={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){!function(c){var d=a.egt.library.sound.SoundManager,e=function(a){function b(b,c){return a.call(this,b,c)||this}return __extends(b,a),b.prototype.animateChoice=function(){},Object.defineProperty(b.prototype,"choiceInfo",{get:function(){return this._mainModel.choiceResponse.complex.choice},enumerable:!0,configurable:!0}),b.prototype.getBlinkTween=function(a,b,c){return TweenMax.to(a,c,{alpha:b,yoyo:!0,repeat:-1,paused:!0,ease:Quad.easeOut})},b.prototype.playBgrSound=function(){this._bgrSound=this._soundManager.play(this.bgrSoundName,!0,.3),this._soundManager.addEventListener(d.SOUND_LOADED,this.onSoundsLoaded,this)},b.prototype.onSoundsLoaded=function(a){"freespinSounds"==a.data.soundId&&null==this._bgrSound&&this.playBgrSound()},Object.defineProperty(b.prototype,"bgrSoundName",{get:function(){return null},enumerable:!0,configurable:!0}),b.prototype.stopBgrSound=function(){this._soundManager.removeEventListener(d.SOUND_LOADED,this.onSoundsLoaded,this),this._bgrSound&&this._bgrSound.stop()},b.prototype.dispose=function(){this.stopBgrSound()},b}(b.Animation);c.ChoiceAnimation=e}(b.choiceAnimation||(b.choiceAnimation={}))}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){!function(b){var c=a.egt.choiceslot.views.freespin.FreespinAnimation,d=a.egt.library.Device,e=function(a){function b(e,f){var g=a.call(this,e,f)||this;g._banks=[],g._activeTextBanks=[],g._isChoiceEnded=!1,b.BANK_NAMES=["bankAmerica","bankJapan","bankEgypt","bankRussia","bankFrance"],b.COLOR_BANKS=["c5dd23","313f2e","4baf37","6a37af","af3737"];var h=new PIXI.RenderTexture(PIXI.renderer,PIXI.renderer.width,PIXI.renderer.height),i=new PIXI.Sprite(g._layoutLoader.getTexture("preview.png")),j=new PIXI.Container;j.addChild(i,g._elementsWithID.unClickableArea),h.render(j),g._data=h.getCanvas().getContext("2d").getImageData(0,0,h.width,h.height).data,g._choiceContainer=g._elementsWithID.multiplierChoiceContainer,g.addChild(g._choiceContainer);var k=g._layoutLoader.getTextureSequence("asfalt_anim_","png",32);g._explosionVideo=new PIXI.extras.MovieClip(k),g._explosionVideo.onComplete=function(){g.onExplosionVideoComplete()},g._explosionVideo.loop=!1,g._explosionVideo.visible=!1,g._explosionVideo.gotoAndStop(0),g.on(d.resolveEvent("mousemove"),g.onMouseMove,g),g.on(d.resolveEvent("click"),g.onBankClicked,g),g._timeLine=new TimelineMax({onComplete:g.onBankAnimationComplete,callbackScope:g});var l=g._elementsWithID.wonTexts;l.y=-144,g._selectedText=g._elementsWithID.selectBankText,g._selectedText.x=(PIXI.renderer.width-g._selectedText.width)/2,g._selectedText.visible=!0,g._selectedText.alpha=0;var m=g._elementsWithID.textBanks;m.alpha=0;var n=g._elementsWithID.multiplierCountBox;g._wonMultiplierCount=g._elementsWithID.multiplierCount,g._wonMultiplierCount.text="x0",g._wonMultiplierCount.x=n.x+(n.width-g._wonMultiplierCount.width)/2;var o=g._elementsWithID.freespinsCountBox,p=g._elementsWithID.freespinCount;p.text="0",p.x=o.x+(o.width-p.width)/2;for(var q=b.BANK_NAMES.length,r=0;r<q;r++){g._banks[r]=g._elementsWithID[b.BANK_NAMES[r]],g._banks[r].alpha=.8,g._elementsWithID[b.BANK_NAMES[r]+"_container"].alpha=0;var s=new PIXI.Sprite(g._layoutLoader.getTexture(b.BANK_NAMES[r]+"ActiveText.png"));g._activeTextBanks[r]=s,g.addChild(s),s.alpha=0;var t=g._elementsWithID[b.BANK_NAMES[r]+"BlackText"];s.x=t.x,s.y=t.y}g._blinkTextBanksTween=g.getBlinkTween(g._activeTextBanks,.8,1),g._blinkSelectTextTween=g.getBlinkTween(g._selectedText,1,.5),g._shadow.alpha=0,g.addChild(g._explosionVideo);var u=g._elementsWithID.multiplierText;u.visible=!1,g._multiplierText=new PIXI.Sprite(u.texture),g.addChild(g._multiplierText),g._multiplierText.visible=!1,g._multiplierWinnerCoefs=[];var v=g._elementsWithID.wonMultiplierCoef;v.visible=!1;for(var r=0;r<5;r++){var w=new PIXI.extras.BitmapText("x 1",{font:{name:"numbersMultiplierInactive-export",size:g._elementsWithID.wonMultiplierCoef.font.size}});w.visible=!1,g._multiplierWinnerCoefs[r]=w,g.addChild(w),w.x=g._activeTextBanks[r].x+(g._activeTextBanks[r].width-w.width)/2,w.y=v.y+Math.abs(b.EXPLOSION_VIDEO_POS_Y[2]-b.EXPLOSION_VIDEO_POS_Y[r])}g.addChild(g._shadow,l);var x=[g._elementsWithID.bankAmerica_container,g._elementsWithID.bankRussia_container,g._elementsWithID.bankJapan_container,g._elementsWithID.bankFrance_container,g._elementsWithID.bankEgypt_container];return g._timeLine.to(g._elementsWithID.asfalt,.2,{pixi:{x:0,y:0},ease:Sine.easeIn,onComplete:function(){g._appearBanksSound=g._soundManager.play("buildingsAppearSound"),g.playBgrSound()}}),g._timeLine.staggerTo(x,.35,{pixi:{y:0,alpha:1},ease:Sine.easeIn},.07,"-=0.2"),g._timeLine.to(l,.2,{pixi:{y:0,alpha:1},ease:Sine.easeIn,onComplete:function(){this._eventEmitter.emit(c.CHOICE_REFRESH_SCREEN),this._blinkSelectTextTween.resume(),this.interactive=!0},callbackScope:g}),g._timeLine.to(m,.2,{alpha:1,ease:Sine.easeIn}),g._timeLine.to(g._activeTextBanks,.2,{alpha:.5,ease:Sine.easeIn}),g}return __extends(b,a),b.prototype.onBankAnimationComplete=function(){this._blinkTextBanksTween.resume()},b.prototype.onDarkenComplete=function(){this.stopBgrSound(),this.emit(b.MULTIPLIER_CHOICE_ENDED)},b.prototype.onBankClicked=function(a){console.log("CLICKED???");var b=a.data.global;if(!(b.y<0||b.y>PIXI.renderer.height||b.x<0||b.x>PIXI.renderer.width)){var e=this.getPixelData(b,this._data);console.log("data????"),console.log(this._data),console.log("point????"),console.log(a.data.global),console.log("currPixelData????"),console.log(e);var f=this.getPixelColor(e),g=this.getBankIndex(f);g>-1&&(this.interactive=!1,this.off(d.resolveEvent("mousemove"),this.onMouseMove,this),this.off(d.resolveEvent("click"),this.onBankClicked,this),this._eventEmitter.emit(c.CHOICE_CLICKED,g))}},b.prototype.onMouseMove=function(a){this.buttonMode=!1;var b=a.data.global;if(!(b.y<0||b.y>PIXI.renderer.height||b.x<0||b.x>PIXI.renderer.width)){var c=this.getPixelData(b,this._data);console.log("data????"),console.log(this._data),console.log("point????"),console.log(a.data.global),console.log("currPixelData????"),console.log(c);var d=this.getPixelColor(c);this.getBankIndex(d)>-1&&(this.buttonMode=!0)}},b.prototype.animateChoice=function(){var a=this.choiceInfo.pos;this._blinkTextBanksTween.kill(),this._blinkSelectTextTween.kill(),this._selectedText.visible=!1;for(var b=0;b<this._activeTextBanks.length;b++)a==b?TweenMax.to([this._activeTextBanks[b],this._banks[b]],.3,{alpha:1,ease:Linear.easeNone,onComplete:this.onShinedChosenBankComplete,callbackScope:this}):TweenMax.to([this._activeTextBanks[b],this._banks[b]],.3,{alpha:.5,ease:Linear.easeNone})},b.prototype.onShinedChosenBankComplete=function(){var a=this,c=this.choiceInfo.pos;this._explosionVideo.x=this._activeTextBanks[c].x+this._activeTextBanks[c].width/2-210,this._explosionVideo.y=b.EXPLOSION_VIDEO_POS_Y[c],TweenMax.delayedCall(1,function(){a._explosionVideo.visible=!0,a._soundManager.play("explosionSound"),a._explosionVideo.play()})},b.prototype.onExplosionVideoComplete=function(){var a=this,c=this.choiceInfo,d=this._multiplierWinnerCoefs[c.pos],e=c.closed;d.font=this._elementsWithID.wonMultiplierCoef.font,d.text="x"+this.choiceInfo.multiplier,d.visible=!0;var f=this._elementsWithID.multiplierText;this._multiplierText.visible=!0,this._multiplierText.x=this._activeTextBanks[c.pos].x+(this._activeTextBanks[c.pos].width-this._multiplierText.width)/2,this._multiplierText.y=f.y+Math.abs(b.EXPLOSION_VIDEO_POS_Y[2]-b.EXPLOSION_VIDEO_POS_Y[c.pos]);var g=this._elementsWithID.multiplierCountBox;this._soundManager.play("multiplierSound"),this._wonMultiplierCount.text="x"+this.choiceInfo.multiplier,this._wonMultiplierCount.x=g.x+(g.width-this._wonMultiplierCount.width)/2,TweenMax.delayedCall(.5,function(){for(var b=0;b<e.length;b++){var c=e[b];a._multiplierWinnerCoefs[c.pos].text="x"+c.multiplier,a._multiplierWinnerCoefs[c.pos].visible=!0}TweenMax.delayedCall(1,function(){return a.darken()})})},b.prototype.getPixelData=function(a,b){var c=[],d=Math.floor(a.x)+Math.floor(a.y)*PIXI.renderer.width;d*=4;for(var e=d;e<d+4;e++){var f=b[e];f&&c.push(f)}return c},b.prototype.getBankIndex=function(a){return b.COLOR_AREA_BANKS.indexOf(a)},b.prototype.getPixelColor=function(a){for(var b="",c=0;c<a.length;c++)b+=a[c].toString(16);return b},Object.defineProperty(b.prototype,"bgrSoundName",{get:function(){return"bankFonSound"},enumerable:!0,configurable:!0}),b.prototype.dispose=function(){this._timeLine&&(this._timeLine.pause(0),this._timeLine.kill(),this._timeLine=null),this._blinkTextBanksTween&&(this._blinkTextBanksTween.pause(0),this._blinkTextBanksTween.kill(),this._blinkTextBanksTween=null),this._blinkSelectTextTween&&(this._blinkSelectTextTween.pause(0),this._blinkSelectTextTween.kill(),this._blinkSelectTextTween=null),this._explosionVideo&&(this._explosionVideo.onComplete=null,this._explosionVideo=null),a.prototype.dispose.call(this)},b.MULTIPLIER_CHOICE_ENDED="multiplierChoiceEnded",b.BANK_NAMES=[],b.COLOR_BANKS=[],b.COLOR_AREA_BANKS=["c5dd23ff","313f2eff","4baf37ff","6a37afff","af3737ff"],b.EXPLOSION_VIDEO_POS_Y=[423,410,402,406,427],b}(b.ChoiceAnimation);b.MultiplierChoiceAnimation=e}(b.choiceAnimation||(b.choiceAnimation={}))}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){!function(c){var d=a.egt.choiceslot.views.freespin.FreespinAnimation,e=a.egt.library.Device,f=function(a){function c(d,f){var g=a.call(this,d,f)||this;g._wildCardImages={},g._envelopes=[],g._freespinsTextFields=[];var h=g._elementsWithID.multiplierCountBox,i=g._elementsWithID.multiplierCount,j=g.currentState&&g.currentState.choiceObject?g.currentState.choiceObject.multiplier:g.choiceInfo.multiplier;i.text="x"+j,i.x=h.x+(h.width-i.width)/2,g._indexBgr=g.currentState&&g.currentState.choiceObject?g.currentState.choiceObject.previewChoiceNumber:g.choiceInfo.pos,g._choiceContainer=new PIXI.Sprite(g._layoutLoader.getTexture("secretary_"+c.STATES[g._indexBgr]+".png")),g._choiceContainer.interactive=!0,g.addChild(g._choiceContainer),g._selectEnvelopeText=new PIXI.Sprite(g._layoutLoader.getTexture("select_an_envelope.png")),g._wonFreespinsCount=g._elementsWithID.freespinCount;for(var k=0;k<8;k++){var l=new PIXI.Container,m=new PIXI.extras.BitmapText("3",{font:{name:"numbers_inactive-export",size:g._elementsWithID.unSelectedFreespins.font.size}}),n=new PIXI.Sprite(g._layoutLoader.getTexture("freespins_inactive.png")),o=new PIXI.Graphics;o.beginFill(16711680,.5),o.drawRect(0,0,m.width,m.height),o.endFill(),m.x=(n.width-m.width)/2,n.y=m.height-8,l.addChild(o,m,n),o.x=m.x,o.y=m.y,o.alpha=0,l.alpha=0,g.addChild(l),g._freespinsTextFields[k]=l}for(var p in b.Animation.NAME_WILD_CARDS){var l=new PIXI.Container,q=new PIXI.Sprite(g._layoutLoader.getTexture(b.Animation.NAME_WILD_CARDS[p]+"_inactive.png")),r=new PIXI.Sprite(g._layoutLoader.getTexture("extra_wild_inactive.png"));l.addChild(q,r),q.x=(r.width-q.width)/2,g.addChild(l),l.alpha=0,g._wildCardImages[p]=l}for(var s=[],t=[],u=g._layoutLoader.getTexture("envelope.png"),k=0;k<8;k++){var v=new PIXI.Sprite(u);g.addChild(v),v.on(e.resolveEvent("click"),g.onEnvelopeClicked,g),v.interactive=!0,v.hitArea=new PIXI.Rectangle(25,31,114,50),v.buttonMode=!0,g._envelopes[k]=v,v.x=(PIXI.renderer.width-(8*v.width-231))/2+k*(v.width-33),v.y=PIXI.renderer.height-v.height,k%2==0?t.push(v):s.push(v)}var w=g._elementsWithID.wonTexts;return w.y=0,g.addChild(g._selectEnvelopeText,g._shadow,w),g._selectEnvelopeText.x=(PIXI.renderer.width-g._selectEnvelopeText.width)/2,g._selectEnvelopeText.y=g._envelopes[0].y-g._selectEnvelopeText.height,g._selectEnvelopeText.alpha=0,g._selectEnvelopeTextBlinkTween=g.getBlinkTween(g._selectEnvelopeText,1,.5),g._evenEnvelopeTween=TweenMax.to(t,.2,{y:PIXI.renderer.height-u.height-.1*u.height,yoyo:!0,repeat:-1,ease:Linear.easeNone}),g._oddEnvelopeTween=TweenMax.to(s,.2,{y:PIXI.renderer.height-u.height-.1*u.height,yoyo:!0,repeat:-1,delay:.2,ease:Linear.easeNone}),g.unDarken(),g.playBgrSound(),g}return __extends(c,a),c.prototype.onUnDarkenComplete=function(){this._shadow.visible=!1,this.parent.interactive=!1,this._selectEnvelopeTextBlinkTween.resume()},c.prototype.animateChoice=function(){var a=this;this._oddEnvelopeTween.pause(0),this._evenEnvelopeTween.pause(0),this._oddEnvelopeTween.kill(),this._evenEnvelopeTween.kill();var b=this._envelopes[this.choiceInfo.pos],c=b.x-b.width/2*(1.19-1),d=b.y-b.height/2*(1.18-1),e=new PIXI.Sprite(this._layoutLoader.getTexture("envelope_glow.png"));this.addChild(e),e.x=b.x,e.y=b.y,e.alpha=0,this._soundManager.play("envelopeSound");var f=[],g=[],h=this.choiceInfo,i=this.setFreespinsTextFieldValue(h.pos,h.freespins,!0);h.wildcard>-1&&(f.push(i),g.push(this.setWildCardImage(h.pos,h.wildcard.toString(),!0)));for(var j=h.closed,k=0;k<j.length;k++){var l=this.setFreespinsTextFieldValue(j[k].pos,j[k].freespins);j[k].wildcard>-1&&(f.push(l),g.push(this.setWildCardImage(j[k].pos,j[k].wildcard.toString())))}this._scaleTween=new TimelineMax({onReverseComplete:function(){TweenMax.to(a._envelopes,.5,{alpha:0,delay:.5,onComplete:function(){TweenMax.to(a._freespinsTextFields,.5,{alpha:1,onComplete:function(){var b=a.choiceInfo,c=a._elementsWithID.freespinsCountBox;if(a._soundManager.play("multiplierSound"),a._wonFreespinsCount.text=b.freespins,a._wonFreespinsCount.x=c.x+(c.width-a._wonFreespinsCount.width)/2,b.wildcard>-1){var d=a._elementsWithID.extraWildCountBox,e=new PIXI.Sprite(a._wildCardImages[b.wildcard].children[0].texture);e.x=d.x+(d.width-e.width)/2,e.y=5,a.addChild(e)}a.animateWons(f,g)},ease:Quad.easeIn})},ease:Quad.easeIn})},onComplete:function(){e.visible=!1,a._scaleTween.pause(0),b.texture=e.texture,b.x=e.x,b.y=e.y,a._scaleTween.reverse()},ease:Quad.easeIn}),this._scaleTween.to(b,.5,{pixi:{scaleX:1.19,scaleY:1.18,x:c,y:d}}),this._scaleTween.to(e,.2,{alpha:1})},c.prototype.animateWons=function(a,b){var c=this,e=new TimelineMax({repeat:5,yoyo:!0,onComplete:function(){c.stopBgrSound(),c._eventEmitter.emit(d.CHOICE_ENDED)}});e.to(a,.5,{alpha:0}),e.to(b,.5,{alpha:1})},c.prototype.onEnvelopeClicked=function(a){this.parent.interactive=!0,this._selectEnvelopeTextBlinkTween.pause(0),this._selectEnvelopeTextBlinkTween.kill();var b=this._envelopes.indexOf(a.target);b>-1&&this._eventEmitter.emit(d.CHOICE_CLICKED,b)},c.prototype.setFreespinsTextFieldValue=function(a,b,c){void 0===c&&(c=!1);var d=this._freespinsTextFields[a];return c&&(d.children[1].font={name:this._elementsWithID.freespinCount.font.name,size:this._elementsWithID.selectedFreespins.font.size},d.children[1].y=d.children[0].y+(d.children[0].height-d.children[1].height)/2,d.children[2].texture=this._layoutLoader.getTexture("freespins.png")),d.children[1].text=b,d.children[1].x=d.children[0].x+(d.children[0].width-d.children[1].width)/2,d.x=this._envelopes[a].x+(this._envelopes[a].width-this._freespinsTextFields[a].width)/2,d.y=this._envelopes[a].y+(this._envelopes[a].height-this._freespinsTextFields[a].height)/2-10,d},c.prototype.setWildCardImage=function(a,c,d){void 0===d&&(d=!1);var e=this._wildCardImages[c];return d&&(e.children[0].texture=this._layoutLoader.getTexture(b.Animation.NAME_WILD_CARDS[c]+"_active.png"),e.children[1].texture=this._layoutLoader.getTexture("extra_wild.png")),e.x=this._freespinsTextFields[a].x+(this._freespinsTextFields[a].width-e.width)/2,e.y=this._freespinsTextFields[a].y,e.children[0].y=this._freespinsTextFields[a].children[1].y,e.children[1].y=this._freespinsTextFields[a].children[2].y,e},Object.defineProperty(c.prototype,"bgrSoundName",{get:function(){return c.STATES[this._indexBgr]+"Sound"},enumerable:!0,configurable:!0}),c.prototype.dispose=function(){a.prototype.dispose.call(this),this._selectEnvelopeTextBlinkTween&&this._selectEnvelopeTextBlinkTween.kill(),this._scaleTween&&this._scaleTween.kill(),this._evenEnvelopeTween&&this._evenEnvelopeTween.kill(),this._oddEnvelopeTween&&this._oddEnvelopeTween.kill()},c.STATES=["US","JP","EG","RU","FR"],c}(c.ChoiceAnimation);c.FreespinsChoiceAnimation=f}(b.choiceAnimation||(b.choiceAnimation={}))}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){var c=a.egt.choiceslot.views.freespin.FreespinAnimation,d=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d._animationTextContainer.addChild(d._elementsWithID.retriggerText,d.freespinsTextField),d.addChild(d._animationTextContainer),d._animationTextContainer.alpha=0,d}return __extends(b,a),b.prototype.onOpenDoorsComplete=function(){this._eventEmitter.emit(c.RETRIGGER_ENDED)},Object.defineProperty(b.prototype,"freespinsTextField",{get:function(){return this._elementsWithID.retriggerWonFreespins},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"antimationText",{get:function(){return this.freespinsTextField.text=this._mainModel.response.complex.freespins,this.freespinsTextField.x=this._freespinsTextFieldBounds.x+(this._freespinsTextFieldBounds.width-this.freespinsTextField.width)/2,this._animationTextContainer},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"soundName",{get:function(){return"retriggerSound"},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"delayTime",{get:function(){return 9.33},enumerable:!0,configurable:!0}),b}(b.BackgroundAnimation);b.RetriggerAnimation=d}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){var c=a.egt.choiceslot.views.freespin.FreespinAnimation,d=a.egt.library.widgets.BitmapMoneyText,e=a.egt.library.loading.Loader,f=function(a){function b(b,c){var f=a.call(this,b,c)||this;f._container=new PIXI.Container;var g=new PIXI.Sprite(f._layoutLoader.getTexture("AM_sp_fg_bgr.png")),h=f._elementsWithID.outroText;h.visible=!0;var i=e.getLoader("gameImages"),j=bottle.container.GameSettings,k=j.diamondPlay,l=k?i.getTexture("diamond.png"):null,m=f._elementsWithID.outroWinAmount;return f._totalWinAmount=new d({currency:j.currencyISO,denomination:f._mainModel.denomination,align:"center",fontFamily:m.font.name,moneyFontSize:m.font.size,currencyFontSize:m.font.size,centerAlignOnlyMoney:!1,isShowingCredits:c.isDisplayingCredits,shouldFitToBounds:!0,spaceBetweenMoneyAndDiamond:30,diamond:l,diamondPlay:k,diamondScaleCoef:k?.6:0,hideCents:j.currencyHideCents,bounds:{width:1200,height:m.height}}),f._totalWinAmount.money=c.betResponse.winAmount,f._totalWinAmount.visible=!0,f._totalWinAmount.position.y=m.y,f._totalWinAmount.position.x=(PIXI.renderer.width-f._totalWinAmount.width)/2,f._container.addChild(g,h,f._totalWinAmount,f._shadow),f.addChild(f._container),f._container.visible=!1,f._shadow.alpha=0,f.darken(),f._darkenTween.duration(.5),f}return __extends(b,a),b.prototype.onDarkenComplete=function(){console.log("tui vika li sa???"),this._container.visible=!0,this._soundManager.play("outroSound"),this._eventEmitter.emit(c.REFRESH_SCREEN),a.prototype.onDarkenComplete.call(this)},b.prototype.onUnDarkenComplete=function(){var a=this;TweenMax.delayedCall(6,function(){TweenMax.to(a._container,1,{alpha:0,onComplete:function(){a._eventEmitter.emit(c.OUTRO_ENDED)}})})},b.prototype.isDisplayingCredits=function(a){this._totalWinAmount.isShowingCredits=a},b}(b.Animation);b.OutroAnimation=f}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(b){!function(b){var c=a.egt.library.Device,d=a.egt.freespinAnimation.choiceAnimation.MultiplierChoiceAnimation,e=a.egt.freespinAnimation.choiceAnimation.FreespinsChoiceAnimation,f=a.egt.choiceslot.views.freespin.FreespinAnimation,g=a.egt.actionMoneySlot.models.server.response.BaseResponse,h=function(a){function h(b){var c=a.call(this,b)||this;return c._mainModel=b,c}return __extends(h,a),h.prototype.playStart=function(){this.destroyAnimations(),this._currentAnimation=new b.StartAnimation(this._mainModel),this._currentAnimation.on(c.resolveEvent("click"),this.onStartClick,this),this._currentAnimation.interactive=!0,this._currentAnimation.buttonMode=!0,this.addChild(this._currentAnimation)},h.prototype.playIntro=function(){this._currentAnimation=new b.IntroAnimation(this,this._mainModel),this.on(f.REFRESH_SCREEN,this.onIntroRefreshScreen,this),this.on(f.INTRO_ENDED,this.onIntroEnded,this),this.addChild(this._currentAnimation)},h.prototype.playRetrigger=function(){this.destroyAnimations(),this._currentAnimation=new b.RetriggerAnimation(this,this._mainModel),this.addChild(this._currentAnimation)},h.prototype.playChoice=function(){
console.log("create multiplier choice!!!!"),this.destroyAnimations(),this._mainModel.response.state==g.STATE_MULTIPLIER_CHOICE?this.playMultiplierChoice():this.playFreespinChoice()},h.prototype.animateChoice=function(){this._choiceAnimation.animateChoice()},h.prototype.playFreespinChoice=function(){this._choiceAnimation=new e(this,this._mainModel),this.addChildAt(this._choiceAnimation,0)},h.prototype.playMultiplierChoice=function(){this._choiceAnimation=new d(this,this._mainModel),this._choiceAnimation.on(d.MULTIPLIER_CHOICE_ENDED,this.onMultiplierChoiceAnimationEnded,this),this.addChildAt(this._choiceAnimation,0)},h.prototype.onMultiplierChoiceAnimationEnded=function(){this._choiceAnimation.off(d.MULTIPLIER_CHOICE_ENDED,this.onMultiplierChoiceAnimationEnded,this),this.destroyChoiceAnimations(),this.playFreespinChoice()},h.prototype.playOutro=function(){this.destroyAnimations(),this._currentAnimation=new b.OutroAnimation(this,this._mainModel),this.addChild(this._currentAnimation)},h.prototype.destroyAnimations=function(){this._currentAnimation&&(this.removeChild(this._currentAnimation),this._currentAnimation.dispose(),this._currentAnimation.off(c.resolveEvent("click"),this.onStartClick,this),this._currentAnimation=null)},h.prototype.destroyChoiceAnimations=function(){this._choiceAnimation&&(this.removeChild(this._choiceAnimation),this._choiceAnimation.dispose(),this._choiceAnimation=null)},h.prototype.onIntroRefreshScreen=function(){console.log("---intro-reg=fresh"),this.off(f.REFRESH_SCREEN,this.onIntroRefreshScreen,this),this.destroyChoiceAnimations()},h.prototype.onIntroEnded=function(){console.log("---intro-reg=fresh"),this.off(f.INTRO_ENDED,this.onIntroEnded,this),this.destroyChoiceAnimations()},h.prototype.onStartClick=function(){console.log("start clicked---"),this.emit(f.START_CLICKED)},h.prototype.dispose=function(){this.destroyChoiceAnimations(),this.destroyAnimations()},h}(f);b.Main=h}(b.freespinAnimation||(b.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));var com;!function(a){!function(a){!function(a){var b=function(a){function b(c){var d=a.call(this,null,c)||this;return d._pressStartOn=d._elementsWithID.pressStartOn,d.addChild(d._elementsWithID.pressStartOff,d._pressStartOn),d._pressStartSound=d._mainModel.soundManager.play("pressStartSound",!0),d._pressStartTween=TweenMax.delayedCall(b.START_VISIBLE_TIME,d.startTextBlink,null,d),d._blinkCount=0,d}return __extends(b,a),b.prototype.dispose=function(){this._pressStartSound&&this._pressStartSound.stop(),this._pressStartTween&&this._pressStartTween.kill(),a.prototype.dispose.call(this)},b.prototype.startTextBlink=function(){this._pressStartOn.visible=!this._pressStartOn.visible;var a=this._pressStartOn.visible?b.START_VISIBLE_TIME:b.START_HIDDEN_TIME;this._pressStartTween=TweenMax.delayedCall(a,this.startTextBlink,null,this)},b.START_VISIBLE_TIME=.9,b.START_HIDDEN_TIME=.4,b}(a.Animation);a.StartAnimation=b}(a.freespinAnimation||(a.freespinAnimation={}))}(a.egt||(a.egt={}))}(com||(com={}));