/**
 * BottleJS v1.6.1 - 2017-05-17
 * A powerful dependency injection micro container
 *
 * Copyright (c) 2017 Stephen Young
 * Licensed MIT
 */

(function(a){"use strict";var b=0,c=Array.prototype.slice,d=function(b,c){var d=b[c];if(d===a&&I.strict)throw new Error("Bottle was unable to resolve a service.  `"+c+"` is undefined.");return d},e=function(a){return this.nested[a]||(this.nested[a]=H.pop())},f=function(a){return a.split(".").reduce(d,this)},g=function(a,b){var c=a.split(".");return a=c.pop(),h.call(c.reduce(F,this.container),a,b),this},h=function(a,b){Object.defineProperty(this,a,{configurable:!1,enumerable:!0,value:b,writable:!1})},i=function(a,b){var c,d;return"function"==typeof a&&(b=a,a="__global__"),c=a.split("."),d=c.shift(),c.length?e.call(this,d).decorator(c.join("."),b):(this.decorators[d]||(this.decorators[d]=[]),this.decorators[d].push(b)),this},j=function(a){return this.deferred.push(a),this},k=function(a){return(a||[]).map(f,this.container)},l=function(a,b){return v.call(this,a,function(){this.$get=b})},m=function(a,b){return l.call(this,a,function(a){return{instance:b.bind(b,a)}})},n=function(a){return!/^\$(?:decorator|register|list)$|Provider$/.test(a)},o=function(a){return Object.keys(a||this.container||{}).filter(n)},p=function(a,b,c,d){var e={configurable:!0,enumerable:!0};return a.length?e.get=function(){var b=0,d=function(e){if(e)throw e;a[b]&&a[b++](c,d)};return d(),c}:(e.value=c,e.writable=!0),Object.defineProperty(d,b,e),d[b]},q=function(a,b){var c,d;return"function"==typeof a&&(b=a,a="__global__"),c=a.split("."),d=c.shift(),c.length?e.call(this,d).middleware(c.join("."),b):(this.middlewares[d]||(this.middlewares[d]=[]),this.middlewares[d].push(b)),this},r={},s=function(a){var b;return"string"==typeof a?(b=r[a],b||(r[a]=b=new H,b.constant("BOTTLE_NAME",a)),b):new H},t=function(a){"string"==typeof a?delete r[a]:r={}},u=function(a,b){return b(a)},v=function(a,b){var c,d;if(c=a.split("."),!this.providerMap[a]||1!==c.length||this.container[a+"Provider"])return this.originalProviders[a]=b,this.providerMap[a]=!0,d=c.shift(),c.length?(y.call(this,d,b,c),this):x.call(this,d,b)},w=function(a,b){return(a[b]||[]).concat(a.__global__||[])},x=function(b,c){var d,e,f,g,h,i;return g=this.id,f=this.container,h=this.decorators,i=this.middlewares,d=b+"Provider",e=Object.create(null),e[d]={configurable:!0,enumerable:!0,get:function(){var a=new c;return delete f[d],f[d]=a,a}},e[b]={configurable:!0,enumerable:!0,get:function(){var c,e=f[d];return e&&(c=w(h,b).reduce(u,e.$get(f)),delete f[d],delete f[b]),c===a?c:p(w(i,b),b,c,f)}},Object.defineProperties(f,e),this},y=function(a,b,c){var d;return d=e.call(this,a),this.factory(a,function(){return d.container}),d.provider(c.join("."),b)},z=function(b){var c=b.$value===a?b:b.$value;return this[b.$type||"service"].apply(this,[b.$name,c].concat(b.$inject||[]))},A=function(a){delete this.providerMap[a],delete this.container[a],delete this.container[a+"Provider"]},B=function(){var a=this.originalProviders;Object.keys(this.originalProviders).forEach(function(b){var c=b.split(".");c.length>1&&(A.call(this,c[0]),c.forEach(A,e.call(this,c[0]))),A.call(this,b),this.provider(b,a[b])},this)},C=function(a){return this.deferred.forEach(function(b){b(a)}),this},D=function(a,b){var d=arguments.length>2?c.call(arguments,2):null,e=this;return l.call(this,a,function(){var a=b;if(d){var c=d.map(f,e.container);c.unshift(b),a=b.bind.apply(b,c)}return new a})},E=function(a,b){var c;return c=a.split("."),a=c.pop(),G.call(c.reduce(F,this.container),a,b),this},F=function(a,b){var c=a[b];return c||(c={},G.call(a,b,c)),c},G=function(a,b){Object.defineProperty(this,a,{configurable:!0,enumerable:!0,value:b,writable:!0})},H=function a(c){return this instanceof a?(this.id=b++,this.decorators={},this.middlewares={},this.nested={},this.providerMap={},this.originalProviders={},this.deferred=[],void(this.container={$decorator:i.bind(this),$register:z.bind(this),$list:o.bind(this)})):a.pop(c)};H.prototype={constant:g,decorator:i,defer:j,digest:k,factory:l,instanceFactory:m,list:o,middleware:q,provider:v,resetProviders:B,register:z,resolve:C,service:D,value:E},H.pop=s,H.clear=t,H.list=o;var I=H.config={strict:!1},J={function:!0,object:!0};!function(a){var b=J[typeof exports]&&exports&&!exports.nodeType&&exports,c=J[typeof module]&&module&&!module.nodeType&&module,d=c&&c.exports===b&&b,e=J[typeof global]&&global;!e||e.global!==e&&e.window!==e||(a=e),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(a.Bottle=H,define(function(){return H})):b&&c?d?(c.exports=H).Bottle=H:b.Bottle=H:a.Bottle=H}(J[typeof window]&&window||this)}).call(this);
//# sourceMappingURL=bottle.min.js.map