View("JackpotView",{CARD_WIDTH:118,CARD_HEIGHT:165,CARD_HSPACING:29,CARD_VSPACING:10,LEVEL1_ANIMATION_TIME:4,LEVEL2_ANIMATION_TIME:8,LEVEL3_ANIMATION_TIME:12,LEVEL4_ANIMATION_TIME:16,JACKPOT_SHOWN:"jackpotShown",JACKPOT_CARD_CLICK:"jackpotCardClick"},function(){function g(c){for(var b=0;12>b;b++)c.target==this._cards[b]&&(this._lastClickedCard=b,this._cards[b].removeEventListener(MouseEvent.CLICK,g,this),this._cards[b].highlight(!0)),this._cards[b].enabled(!1);this.dispatchEvent(new Event(JackpotView.JACKPOT_CARD_CLICK))}
function h(){for(var c=this._prevLights.length,b=0;b<c;b++)this._prevLights[b].removeClass("off");this._prevLights.length=0;c=Math.round(1+3*Math.random());for(b=0;b<c;b++){var a=Math.round(Math.random()*(this._lights.length/2-1));this._lights[2*a].addClass("off");this._prevLights.push(this._lights[2*a])}c=Math.round(1+3*Math.random());for(b=0;b<c;b++)a=Math.round(Math.random()*(this._lights.length/2-1)),this._lights[2*a+1].addClass("off"),this._prevLights.push(this._lights[2*a+1])}function k(){var c=
3*this._winCardType;if(this._smallSuites[c].hasClass("active"))for(var b=0;3>b;b++)this._smallSuites[c+b].removeClass("active");else for(b=0;3>b;b++)this._smallSuites[c+b].addClass("active");c=this._cards.length;for(b=0;b<c;b++)this._cards[b].getType()==this._winCardType&&this._cards[b].setGlow(!this._cards[b].getGlow())}return{init:function(c,b){this._config=c;this._maskView=null;this._maskViewParams={x:561,width:10};this._jackpotContentView=null;this._cards=[];this._smallSuites=[];this._suitesCount=
[0,0,0,0];this._lastClickedCard=-1;this._lights=[];this._prevLights=[];this._lightsAnimationTimer;this._suitesBlinkTimer;this._winCardType;this._super("jackpotView");this._maskView=new View("jackpotMaskView",this._maskViewParams.x,-26,!0);this._maskView.setSize(this._maskViewParams.width,564);this._jackpotContentView=new View("jackpotContentView",73,67,!0);this._jackpotContentView.setSize(1133,538);this._jackpotContentView.setMask(this._maskView);this._jackpotContentView.addChild(new View("jackpotGirl left",
30,137));this._jackpotContentView.addChild(new View("jackpotGirl right",888,137));this._jackpotContentView.addChild(new View("jackpotOrnament",15,31));var a=new View("jackpotOrnament",890,31);a.setScale(-1,1);this._jackpotContentView.addChild(a);for(var d,e,a=0;14>a;a++)d=new View("jackpotLights",231,36*a),e=new View("jackpotLights",838,36*a),this._lights[2*a]=d,this._lights[2*a+1]=e,this._jackpotContentView.addChildren(d,e);for(a=0;12>a;a++)d=new JackpotCard(284+a%4*(JackpotView.CARD_WIDTH+JackpotView.CARD_HSPACING),
8+Math.floor(a/4)*(JackpotView.CARD_HEIGHT+JackpotView.CARD_VSPACING)),this._cards[a]=d,d=Math.floor(a/3),this._smallSuites[a]=new View("smallSuites",(0==d?79:1==d?288:2==d?696:944)+a%3*35,-26),this._smallSuites[a].addClass("inactive suite"+d),void 0!=b[a]?(d=Math.floor(b[a]/13),this._suitesCount[d]++,this._cards[a].setType(d)):this._cards[a].addEventListener(MouseEvent.CLICK,g,this),this._jackpotContentView.addChildren(this._cards[a],this._smallSuites[a]);for(a=0;4>a;a++)for(d=this._suitesCount[a],
e=0;e<d;e++)this._smallSuites[3*a+e].addClass("active")},show:function(){if(this._config.animated){var c=new View("jackpotCardsLogo top",401,-20,!0),b=new View("jackpotCardsLogo bottom",401,4,!0);c.setScale(0.33,0.33);b.setScale(0.33,0.33);this.addChildren(c,b);var a=this;TweenMax.to(c.getInternalContainer(),0.9,{scaleX:1.1,scaleY:1.1,x:436,y:245,ease:Back.easeIn});TweenMax.to(b.getInternalContainer(),0.9,{scaleX:1.1,scaleY:1.1,x:436,y:355,ease:Back.easeIn,onComplete:function(){TweenMax.to(c.getInternalContainer(),
1.2,{scaleX:1.4,scaleY:1.4,ease:Elastic.easeOut});TweenMax.to(b.getInternalContainer(),1.2,{scaleX:1.4,scaleY:1.4,ease:Elastic.easeOut,onComplete:function(){TweenMax.to(c.getInternalContainer(),0.3,{delay:1.6,x:500,ease:Quad.easeOut});TweenMax.to(c.getInternalContainer(),0.3,{delay:1.6,rotation:90,y:296,ease:Linear.easeNone});TweenMax.to(b.getInternalContainer(),0.3,{delay:1.6,x:375,ease:Quad.easeOut});TweenMax.to(b.getInternalContainer(),0.3,{delay:1.6,rotation:90,y:294,ease:Linear.easeNone,onComplete:function(){a.addChild(a._jackpotContentView);
a._lightsAnimationTimer=setInterval(function(){h.call(a)},350);TweenMax.to(a._maskViewParams,0.2,{width:1133,x:0,roundProps:"width",ease:Linear.easeNone,onUpdate:function(){a._maskView.setPosition(a._maskViewParams.x,a._maskView.y());a._maskView.setSize(a._maskViewParams.width,a._maskView.getHeight())},onComplete:function(){a.dispatchEvent(new Event(JackpotView.JACKPOT_SHOWN))}});TweenMax.to(c.getInternalContainer(),0.227,{x:1133,ease:Linear.easeNone});TweenMax.to(b.getInternalContainer(),0.227,{x:-258,
ease:Linear.easeNone,onComplete:function(){a.removeChild(c);a.removeChild(b)}})}})}})}})}else this._maskView.setPosition(0,this._maskView.y()),this._maskView.setSize(1133,this._maskView.getHeight()),this.addChild(this._jackpotContentView),a=this,this._lightsAnimationTimer=setInterval(function(){h.call(a)},350),this.dispatchEvent(new Event(JackpotView.JACKPOT_SHOWN))},getCardPos:function(){return this._lastClickedCard},setCard:function(c,b,a,d){if(-1==this._lastClickedCard)throw"Trying to se jackpot card but the last clicked card is unknown!";
c=Math.floor(c/13);this._smallSuites[3*c+this._suitesCount[c]].addClass("active");this._suitesCount[c]++;this._cards[this._lastClickedCard].setType(c);this._cards[this._lastClickedCard].highlight(!1);if(b)this._winCardType=c;else for(c=0;12>c;c++)this._cards[c].enabled(!0)},startWinAnimation:function(){var c=this;this._suitesBlinkTimer=setInterval(function(){k.call(c)},300);for(var b=[],a=this._cards.length,d=0;d<a;d++)-1==this._cards[d].getType()&&b.push(this._cards[d]);for(d=0;4>d;d++)for(var a=
3-this._suitesCount[d],e=0;e<a;e++){var f=Math.round(Math.random()*(b.length-1));b[f].setType(d);b[f].darken();b.splice(f,1)}},performClickOnCard:function(c){this._cards[c].enabled()&&this._cards[c].dispatchEvent(new MouseEvent(MouseEvent.CLICK))},dispose:function(){clearInterval(this._lightsAnimationTimer);this._lightsAnimationTimer=0;clearInterval(this._suitesBlinkTimer);for(var c=this._cards.length,b=0;b<c;b++)this._cards[b].dispose()}}}());
