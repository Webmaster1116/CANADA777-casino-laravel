/**
 * @author    ThemePunch <info@themepunch.com>
 * @link      http://www.themepunch.com/
 * @copyright 2017 ThemePunch
 */
 
;(function(b){function X(a){var c=a.beforeafter||b.extend({},l);I.each(function(){c[this.getAttribute("name").split("beforeafter_")[1]]=this.value});a.beforeafter=c;r(a)}function Y(){this.value=this.getAttribute("data-beforeafter-value")}function Z(){var a="checkbox"!==this.type?this.value:this.hasAttribute("checked")?"true":"false";m[this.getAttribute("name").replace("beforeafter_","")]=a}function aa(){this.setAttribute("data-beforeafter-value",this.value);w.each(Z);t.val(JSON.stringify(m))}function r(a){a=
a.hasOwnProperty("beforeafter")?a.beforeafter.position:l.position;J.style.transform="before"===a?"none":"rotate(180deg)";var c=n.quicklayer;c.length&&c.removeClass("beforeafter-before beforeafter-after").addClass("beforeafter beforeafter-"+a);c=n.sorttable.layer.find(".mastertimer-timeline-zindex-row");c.length&&c.removeClass("beforeafter-before beforeafter-after").addClass("beforeafter beforeafter-"+a)}function ba(a){var c=b(this),d=c.val();d||(d="50%",c.val("50%"));if(-1!==d.search("%")){var e=
"%";d=d.replace("%","");d=isNaN(d)?"50":Math.min(Math.max(0,d),100)}else e=/[0-9]*\.?[0-9]+(px)?/.test(d)?"px":"";d=parseInt(d,10);isNaN(d)&&(d=50,e="%");d+=e;c.val(d);0!==a&&(u+="|");u+=d}function ca(){b(".beforeafter-visibility.selected").removeClass("selected");this.className="beforeafter-visibility selected";K=this.id.split("beforeafter-visibility-")[1];b(".quicksortlayer").each(da)}function da(){var a=b(this),c=a.hasClass("beforeafter-before")?"before":"after",a=a.find(".quick-layer-view");switch(K){case "all":a.hasClass("in-off")&&
a.click();break;case "before":"before"===c?a.hasClass("in-off")&&a.click():a.hasClass("in-off")||a.click();break;case "after":"after"===c?a.hasClass("in-off")&&a.click():a.hasClass("in-off")||a.click()}}function ea(){var a=parseInt(this.value,10);isNaN(a)?this.value=this.getAttribute("data-default-value"):this.value=a}function L(){this.checked?p.addClass("before-after-enabled"):p.removeClass("before-after-enabled")}function fa(){var a="none"!==this.value?"block":"none";document.getElementById("beforeafter-bounce-options").style.display=
a}function ga(){var a=RsAddonBeforeAfter.lang;l=RsAddonBeforeAfter.layers;m=RsAddonBeforeAfter.globals;M=b("#beforeafter-addon-wrap");J=document.getElementById("beforeafter-icon");I=b("#beforeafter-layer-settings").find("input, select");w=b(".beforeafter-globals").find("input, select").not(".beforeafter-pos").on("change",aa);t=b("<input name='beforeafter_globals' type='hidden' value='"+JSON.stringify(m)+"' />");document.getElementById("form_slide_params").appendChild(t[0]);document.getElementById("beforeafter_bouncearrows").addEventListener("change",
fa);var c=b('<span class="beforeafter-visibility tipsy_enabled_top" id="beforeafter-visibility-before" original-title="'+a.before+'" />'),d=b('<span class="beforeafter-visibility tipsy_enabled_top" id="beforeafter-visibility-after" original-title="'+a.after+'" />'),a=b('<span class="beforeafter-visibility tipsy_enabled_top" id="beforeafter-visibility-all" original-title="'+a.all+'" />');b([c[0],d[0],a[0]]).insertAfter(b("#layer-short-toolbar .quick-layer-lock")).tipsy({gravity:"s",delayIn:70}).on("click",
ca);b(".before-after-input").on("focusout",ea);N=b("#beforeafter_moveto");O=b(".beforeafter-moveto").on("focusout",function(){u="";O.each(ba);N.val(u).change()});p=b("body").on("click",".ui-dialog-titlebar-close",ha);c=b("#beforeafter_enabled").on("change",L);L.call(c[0])}function P(a,c){var b=document.getElementById("bg_"+a+"_x_beforeafter").value,e=document.getElementById("bg_"+a+"_y_beforeafter").value,b=parseInt(b,10),e=parseInt(e,10);isNaN(b)&&(b="fit"===a?"100":"0");isNaN(e)&&(e="fit"===a?"100":
"0");f.css("background-"+c,b+"% "+e+"%")}function x(){var a=this.getAttribute("data-styling"),b=this.value,d=this.name;-1!==d.search(/x_beforeafter|y_beforeafter/)&&(b="percentage",a=-1!==d.search("fit")?"size":"position");"percentage"===b?"size"===a?P("fit","size"):P("position","position"):("size"===a&&"normal"===b&&(b="auto"),f.css("background-"+a,b))}function ia(){f.css("background","");g.css("background","").removeClass("beforeafter-transparent beforeafter-image beforeafter-video");y.hide();z.hide();
switch(this.value){case "image":var a="video";var c="image";A.show();g.addClass("beforeafter-image");var d=B.value;d&&(g.css("background","url("+d+")"),f.css("background-image","url("+d+")"),C.each(x));break;case "solid":d=v.data("gradient")||v.val();-1!==d.search("&")&&(d=v.data("color"));g.css("background",d);f.css("background",d);break;case "trans":g.addClass("beforeafter-transparent");break;case "external":a="video";c="image";A.hide();g.addClass("beforeafter-image");d=document.getElementById("slide_bg_external_beforeafter");
d.value&&(g.css("background","url("+d.value+")"),f.css("background-image","url("+d.value+")"),C.each(x));break;case "youtube":a="image";c="video";y.show();g.addClass("beforeafter-video");break;case "vimeo":a="image";c="video";z.show();g.addClass("beforeafter-video");break;case "html5":a="image",c="video",g.addClass("beforeafter-video")}d=this.getAttribute("data-container");d=document.getElementById(d);D||(D=b(".bgsrcchanger-div-beforeafter"));D.hide();d&&(d.style.display="inline-block");a?(E.removeClass("hide-beforeafter-itm"),
document.getElementById("beforeafter_"+a+"_settings").style.display="none",document.getElementById("beforeafter_"+c+"_settings").style.display="block"):E.addClass("hide-beforeafter-itm")}function Q(){var a=b(".rs-layer-main-image-tabs .selected").removeClass("selected"),c=b(this).addClass("selected");document.getElementById(a.attr("data-content").replace("#","")).style.display="none";document.getElementById(c.attr("data-content").replace("#","")).style.display="inline-block"}function F(a,b){R.value=
b;B.value=a;S.innerHTML=a;g.css("background","url("+a+")")}function ja(a,b){F(a,b)}function ka(a,b){document.getElementById(T).value=a}function la(){UniteAdminRev.openAddImageDialog(h.lang.select_after_image,ja)}function ma(){T=this.getAttribute("data-input");UniteAdminRev.openAddImageDialog(h.lang.select_after_video,ka)}function na(a){a.stopImmediatePropagation();rs_plugin_validated?(a=b(this).closest(".objadd-single-item").attr("data-origsrc"),this.getAttribute("data-s"),-1===a.search("/")?UniteAdminRev.ajaxRequest("load_library_object",
{handle:a,type:"orig"},function(a){a&&a.success&&a.url?F(a.url,""):console.log("BeforeAfter Object Library image failed to load")}):F(a,"")):show_premium_dialog("register-to-acess-object-library");b("#dialog_addobj").dialog("close")}function oa(){b(".obj-item-size-selector").off("click.beforeafter").one("click.beforeafter",na)}function ha(){p.off(".beforeafter")}function pa(){setExampleButtons();UniteLayersRev.callObjectLibraryDialog("background");p.off("mouseover.beforeafter").one("mouseover.beforeafter",
".obj_lib_container_img",oa)}function U(a,b,d){if("undefined"!==typeof d){if("slide_bg_color_beforeafter"!==b[0].id)return;b=d}g.css("background",b);f.css("background",b)}function qa(){var a=document.getElementById("slide_bg_external_beforeafter").value;a&&(g.css("background","url("+a+")"),f.css("background-image","url("+a+")"))}function V(a,b){for(var d=b.length,c,W;d--;)c=b[d],W=new RegExp("{{"+c+"}}","g"),a=a.replace(W,h[c]);return a}function ra(){var a="percentage"!==this.value?"none":"inline-block";
document.getElementById(this.getAttribute("data-container")).style.display=a}function k(a,c){var d=h[c];b("#"+a).val(d).children('option[value="'+d+'"]').attr("selected",!0)}function sa(){"after"===this.value?(G.style.transform="rotate(180deg)",f.show()):(G.style.transform="none",f.hide())}function ta(){h=RsAddonBeforeAfterBgSources;H=V(H,"id image color youtube vimeo external mpeg webm ogv".split(" "));q=V(q,"image bgfitx bgfity bgposx bgposy startat endat videovolume youtubeparams vimeoparams".split(" "));
var a=b('select[name="image_source_type"]');q=q.replace("{{sizes}}",a.html());b("#slide-main-image-settings-content").append([H,q]);var a=h.imageSize||a.val(),c=b("#image_source_type_beforeafter").val(a);c.find("option:selected").attr("selected",!1);c.val(a).children('option[value="'+a+'"]').attr("selected",!0);k("slide_bg_fit_beforeafter","bgFit");k("slide_bg_position_beforeafter","bgPos");k("slide_bg_repeat_beforeafter","bgRepeat");k("video_dotted_overlay_beforeafter","overlay");k("video_ratio_beforeafter",
"aspect");k("video_loop_beforeafter","loopvideo");k("video_speed_beforeafter","videoSpeed");b(".beforeafter-change-container").on("change",ra).each(function(){b(this).change()});a=b('li[data-content="#mainbg-sub-source"]');a.clone().attr("data-content","#mainbg-sub-source-after").removeClass("selected").addClass("beforeafter-bgsource-menu").text('Source "After"').on("click",Q).insertAfter(a);a=b('li[data-content="#mainbg-sub-setting"]');E=a.clone().attr("data-content","#mainbg-sub-setting-after").attr("id",
"beforeafter-source-settings").removeClass("selected").addClass("beforeafter-bgsource-menu").text('Source Settings "After"').on("click",Q).insertAfter(a);v=b("#slide_bg_color_beforeafter").tpColorPicker({editing:'Background "After" Color',wrapper:'<span class="rev-colorpickerspan">',onEdit:U});b(document).on("revcolorpickerupdate",U);b("#button_change_external_beforeafter").on("click",qa);b(".button_change_video_beforeafter").on("click",ma);b("#button_change_image_objlib_beforeafter").on("click",
pa);b("#button_change_image_beforeafter").on("click",la);y=b(".youtube-beforeafter");z=b(".vimeo-beforeafter");A=b(".beforeafter-image-setting");S=document.getElementById("the_image_source_url_beforeafter");var d=JSON.parse(h.slideBgs),e=0;b(".list_slide_links li").each(function(){if(this.id){var a=d[e++];if(a.active){var c=b('<div class="beforeafter-bg-preview" />'),f=b(this);switch(a.type){case "image":a.source&&(c.addClass("beforeafter-image"),c.css("background","url("+a.source+")"));break;case "solid":a=
a.source;-1!==a.search("&")&&"undefined"!==typeof RevColor&&(a=RevColor.get(a));c.css("background",a);break;case "trans":c.addClass("beforeafter-transparent");break;case "external":a.source&&(c.addClass("beforeafter-image"),c.css("background","url("+a.source+")"))}f.hasClass("selected")&&(c[0].id="beforeafter-bg-preview",g=c);f=f.addClass("before-after-preview").find(".slide-media-container").addClass("beforeafter-default-img");c.insertAfter(f)}}});g||(a=b(".list_slide_links li.selected").addClass("before-after-preview").find(".slide-media-container").addClass("beforeafter-default-img"),
g=b('<div id="beforeafter-bg-preview" class="beforeafter-bg-preview" />').insertAfter(a));B=document.getElementById("image_url_beforeafter");R=document.getElementById("image_id_beforeafter");C=b(".beforeafter-source-option");f=b('<div id="beforeafter-editor-bg" />').insertBefore("#divLayers");G=document.getElementById("beforeafter-view-icon");document.getElementById("beforeafter_bg_view").addEventListener("change",sa);b(".bgsrcchanger-beforeafter").on("change",ia);b(".beforeafter-source-changeable").on("change",
x);b('.bgsrcchanger-beforeafter[value="'+h.bgType+'"]').attr("checked",!0).change()}if(b){var E,m,l,t,C,A,S,y,T,g,n,B,R,h,z,G,f,I,w,N,u,J,p,v,O,K,M,D,H='<div id="mainbg-sub-source-after" style="display: none;"><div class="bg-settings-block"><label>Main / Background Image</label> <input type="radio" name="background_type_beforeafter" value="image" class="bgsrcchanger-beforeafter" data-container="tp-bgimagewpsrc_beforeafter" id="radio_back_image_beforeafter" /> <span id="tp-bgimagewpsrc_beforeafter" class="bgsrcchanger-div-beforeafter"><a href="javascript:void(0)" id="button_change_image_beforeafter" class="button-primary revblue" original-title=""><i class="fa-icon-wordpress"></i>Media Library</a><a href="javascript:void(0)" id="button_change_image_objlib_beforeafter" class="button-primary revpurple" original-title=""><i class="fa-icon-book"></i>Object Library</a></span></div><div class="bg-settings-block"><label>External URL</label> <input type="radio" name="background_type_beforeafter" value="external" data-container="tp-bgimageextsrc_beforeafter" class="bgsrcchanger-beforeafter" id="radio_back_external_beforeafter" /> <span id="tp-bgimageextsrc_beforeafter" class="bgsrcchanger-div-beforeafter"><input type="text" name="bg_external_beforeafter" id="slide_bg_external_beforeafter" value="{{external}}" /><a href="javascript:void(0)" id="button_change_external_beforeafter" class="button-primary revblue" original-title="">Get External</a></span></div><div class="bg-settings-block"> <label>Transparent</label> <input type="radio" name="background_type_beforeafter" value="trans" data-container="" class="bgsrcchanger-beforeafter" id="radio_back_trans_beforeafter" /></div><div class="bg-settings-block"> <label>Colored</label> <input type="radio" name="background_type_beforeafter" value="solid" data-container="tp-bgcolorsrc_beforeafter" class="bgsrcchanger-beforeafter" id="radio_back_solid_beforeafter" /> <span id="tp-bgcolorsrc_beforeafter" class="bgsrcchanger-div-beforeafter"><input type="hidden" name="bg_color_beforeafter" id="slide_bg_color_beforeafter" value="{{color}}" /></span></div><div class="bg-settings-block"><label>YouTube Video</label> <input type="radio" name="background_type_beforeafter" value="youtube" data-container="tp-bgyoutubesrc_beforeafter" class="bgsrcchanger-beforeafter" id="radio_back_youtube_beforeafter" /> <span id="tp-bgyoutubesrc_beforeafter" class="bgsrcchanger-div-beforeafter"><input type="text" name="bg_youtube_beforeafter" id="slide_bg_youtube_beforeafter" placeholder="enter video id here.." value="{{youtube}}" /> example: OIJShHQlMx0</span></div><div class="bg-settings-block"><label>Vimeo Video</label> <input type="radio" name="background_type_beforeafter" value="vimeo" data-container="tp-bgvimeosrc_beforeafter" class="bgsrcchanger-beforeafter" id="radio_back_vimeo_beforeafter" /> <span id="tp-bgvimeosrc_beforeafter" class="bgsrcchanger-div-beforeafter"><input type="text" name="bg_vimeo_beforeafter" id="slide_bg_vimeo_beforeafter" placeholder="enter video id here.." value="{{vimeo}}" /> example: 30300114</span></div><div class="bg-settings-block"><label>HTML5 Video</label> <input type="radio" name="background_type_beforeafter" value="html5" data-container="tp-bghtml5src_beforeafter" class="bgsrcchanger-beforeafter" id="radio_back_html5_beforeafter" /> <br><div id="tp-bghtml5src_beforeafter" class="bgsrcchanger-div-beforeafter"><div><label>MPEG:</label><input type="text" name="bg_mpeg_beforeafter" id="slide_bg_mpeg_beforeafter" value="{{mpeg}}" /><a href="javascript:void(0)" data-input="slide_bg_mpeg_beforeafter" class="button_change_video_beforeafter button-primary revblue" original-title="">Change Video</a></div><div><label>WEBM:</label><input type="text" name="bg_webm_beforeafter" id="slide_bg_webm_beforeafter" value="{{webm}}" /><a href="javascript:void(0)" data-input="slide_bg_webm_beforeafter" class="button_change_video_beforeafter button-primary revblue" original-title="">Change Video</a></div><div><label>OGV:</label><input type="text" name="bg_ogv_beforeafter" id="slide_bg_ogv_beforeafter" value="{{ogv}}" /><a href="javascript:void(0)" data-input="slide_bg_ogv_beforeafter" class="button_change_video_beforeafter button-primary revblue" original-title="">Change Video</a></div></div></div><input type="hidden" id="image_url_beforeafter" name="image_url_beforeafter" value="{{image}}" /><input type="hidden" id="image_id_beforeafter" name="image_id_beforeafter" value="{{id}}" /></div>',
q='<div id="mainbg-sub-setting-after"><div id="beforeafter_image_settings" class="before-after-source-settings"><div class="bg-settings-block beforeafter-image-setting"><label>Source Info:</label> <span class="text-selectable" id="the_image_source_url_beforeafter">{{image}}</span> <span class="description">Read Only ! Image can be changed from "Source Tab"</span></div><div class="bg-settings-block beforeafter-image-setting"><label>Image Source Size:</label> <select id="image_source_type_beforeafter" name="image_source_type_beforeafter">{{sizes}}</select></div><div class="bg-settings-block"><label>Background Fit:</label> <select name="bg_fit_beforeafter" id="slide_bg_fit_beforeafter" class="beforeafter-change-container beforeafter-source-option beforeafter-source-changeable" data-styling="size" data-container="bg_fit_beforeafter_wrap"><option value="cover">cover</option><option value="contain">contain</option><option value="percentage">(%, %)</option><option value="normal">normal</option></select><span id="bg_fit_beforeafter_wrap"><input type="text" id="bg_fit_x_beforeafter" name="bg_fit_x_beforeafter" class="beforeafter-small-input beforeafter-source-changeable" value="{{bgfitx}}"><input type="text" id="bg_fit_y_beforeafter" name="bg_fit_y_beforeafter" class="beforeafter-small-input beforeafter-source-changeable" value="{{bgfity}}"></span></div><div class="bg-settings-block"><label>Background Position:</label> <select name="bg_position_beforeafter" id="slide_bg_position_beforeafter" class="beforeafter-change-container beforeafter-source-option beforeafter-source-changeable" data-container="bg_pos_beforeafter_wrap" data-styling="position"><option value="center top">center top</option><option value="center right">center right</option><option value="center bottom">center bottom</option><option value="center center">center center</option><option value="left top">left top</option><option value="left center">left center</option><option value="left bottom">left bottom</option><option value="right top">right top</option><option value="right center">right center</option><option value="right bottom">right bottom</option><option value="percentage">(x%, y%)</option></select><span id="bg_pos_beforeafter_wrap"><input type="text" id="bg_position_x_beforeafter" name="bg_position_x_beforeafter" class="beforeafter-small-input beforeafter-source-changeable" value="{{bgposx}}"><input type="text" id="bg_position_y_beforeafter" name="bg_position_y_beforeafter" class="beforeafter-small-input beforeafter-source-changeable" value="{{bgposy}}"></span></div><div class="bg-settings-block"><label>Background Repeat:</label> <select name="bg_repeat_beforeafter" id="slide_bg_repeat_beforeafter" class="beforeafter-source-option beforeafter-source-changeable" data-styling="repeat"><option value="no-repeat" selected="selected">no-repeat</option><option value="repeat">repeat</option><option value="repeat-x">repeat-x</option><option value="repeat-y">repeat-y</option></select></div></div><div id="beforeafter_video_settings" class="before-after-source-settings"><div id="beforeafter_video_force_cover" class="bg-settings-block"><label>Force Cover:</label></div><div class="bg-settings-block"><label>Dotted Overlay:</label><select id="video_dotted_overlay_beforeafter" name="video_dotted_overlay_beforeafter"><option value="none">none</option><option value="twoxtwo">2 x 2 Black</option><option value="twoxtwowhite">2 x 2 White</option><option value="threexthree">3 x 3 Black</option><option value="threexthreewhite">3 x 3 White</option></select></div><div class="bg-settings-block"><label>Aspect Ratio:</label><select id="video_ratio_beforeafter" name="video_ratio_beforeafter"><option value="16:9">16:9</option><option value="4:3">4:3</option></select></div><div class="bg-settings-block"><label>Start At:</label><input type="text" id="video_start_at_beforeafter" name="video_start_at_beforeafter" value="{{startat}}"> For Example: 00:17</div><div class="bg-settings-block"><label>End At:</label><input type="text" id="video_end_at_beforeafter" name="video_end_at_beforeafter" value="{{endat}}"> For Example: 02:17</div><div class="bg-settings-block"><label>Loop Video:</label><select id="video_loop_beforeafter" name="video_loop_beforeafter"><option value="none">Disable</option><option value="loop">Loop, Slide is paused</option><option value="loopandnoslidestop">Loop, Slide does not stop</option></select></div><div id="beforeafter_video_nextslide" class="bg-settings-block"><label>Next Slide on End:</label></div><div id="beforeafter_video_force_rewind" class="bg-settings-block"><label>Rewind at Slide Start:</label></div><div id="beforeafter_video_mute" class="bg-settings-block"><label>Mute Video:</label></div><div class="youtube-beforeafter vimeo-beforeafter bg-settings-block"><label>Video Volume:</label><input type="text" id="video_volume_beforeafter" name="video_volume_beforeafter" value="{{videovolume}}"></div><div class="youtube-beforeafter bg-settings-block"><label>Video Speed:</label><select id="video_speed_beforeafter" name="video_speed_beforeafter"><option value="0.25">0.25</option><option value="0.50">0.50</option><option value="1">1</option><option value="1.5">1.5</option><option value="2">2</option></select></div><div class="youtube-beforeafter bg-settings-block"><label>Arguments YouTube:</label><input type="text" id="video_arguments_beforeafter" class="beforeafter-video-param" name="video_arguments_beforeafter" value="{{youtubeparams}}"></div><div class="vimeo-beforeafter bg-settings-block"><label>Arguments Vimeo:</label><input type="text" id="video_arguments_vim_beforeafter" class="beforeafter-video-param" name="video_arguments_vim_beforeafter" value="{{vimeoparams}}"></div></div></div>';
b(function(){if("undefined"!==typeof RsAddonBeforeAfter&&"undefined"!==typeof RsAddonBeforeAfterBgSources&&"undefined"!==typeof UniteAdminRev&&"undefined"!==typeof UniteLayersRev){ta();ga();var a=UniteLayersRev.addon_callbacks,c=[],d=0;a[a.length]={environment:"updateLayerFormFields",function_position:"start",callback:function(a){if(a){var c=a.beforeafter||b.extend({},l),d;for(d in c)if(c.hasOwnProperty(d)){var e=c[d];M.find("*[name=beforeafter_"+d+"]").val(e)}n=a.references;r(a);w.each(Y);t.val(JSON.stringify(m))}return a}};
a[a.length]={environment:"updateLayerFromFields_Core",function_position:"start",callback:function(a){X(a);return a}};a[a.length]={environment:"add_layer_to_stage",function_position:"end",callback:function(a){n=a.references;r(a);return a}};for(var e in l)l.hasOwnProperty(e)&&(c[d++]="beforeafter."+e);UniteLayersRev.attributegroups.push({id:"beforeafter",icon:"arrow-combo",groupname:"BeforeAfter",keys:c});a=UniteLayersRev.arrLayers;for(e in a)a.hasOwnProperty(e)&&(c=a[e],n=c.references,r(c))}});b(window).on("load",
function(){b(".beforeafter-settings-onoff").each(function(){var a=b(this);document.getElementById(a.attr("data-placement")).appendChild(b(this).closest(".tp-onoffbutton")[0])})})}})("undefined"!==typeof jQuery?jQuery:!1);