if(function e(t,a,r){function i(n,s){if(!a[n]){if(!t[n]){var l="function"==typeof require&&require;if(!s&&l)return l(n,!0);if(o)return o(n,!0);var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}var c=a[n]={exports:{}};t[n][0].call(c.exports,function(e){var a=t[n][1][e];return i(a||e)},c,c.exports,e,t,a,r)}return a[n].exports}for(var o="function"==typeof require&&require,n=0;n<r.length;n++)i(r[n]);return i}({1:[function(e,t,a){"use strict";function r(e){e.fn.perfectScrollbar=function(e){return this.each(function(){if("object"==typeof e||void 0===e){var t=e;o.get(this)||i.initialize(this,t)}else{var a=e;"update"===a?i.update(this):"destroy"===a&&i.destroy(this)}})}}var i=e("../main"),o=e("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],r);else{var n=window.jQuery?window.jQuery:window.$;void 0!==n&&r(n)}t.exports=r},{"../main":7,"../plugin/instances":18}],2:[function(e,t,a){"use strict";a.add=function(e,t){var a,r,i;e.classList?e.classList.add(t):(r=t,(i=(a=e).className.split(" ")).indexOf(r)<0&&i.push(r),a.className=i.join(" "))},a.remove=function(e,t){var a,r,i,o;e.classList?e.classList.remove(t):(r=t,i=(a=e).className.split(" "),(o=i.indexOf(r))>=0&&i.splice(o,1),a.className=i.join(" "))},a.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},{}],3:[function(e,t,a){"use strict";var r={e:function(e,t){var a=document.createElement(e);return a.className=t,a},appendTo:function(e,t){return t.appendChild(e),e}};r.css=function(e,t,a){return"object"==typeof t?function(e,t){for(var a in t){var r=t[a];"number"==typeof r&&(r=r.toString()+"px"),e.style[a]=r}return e}(e,t):void 0===a?(n=e,s=t,window.getComputedStyle(n)[s]):(r=e,i=t,"number"==typeof(o=a)&&(o=o.toString()+"px"),r.style[i]=o,r);var r,i,o,n,s},r.matches=function(e,t){return void 0!==e.matches?e.matches(t):void 0!==e.matchesSelector?e.matchesSelector(t):void 0!==e.webkitMatchesSelector?e.webkitMatchesSelector(t):void 0!==e.mozMatchesSelector?e.mozMatchesSelector(t):void 0!==e.msMatchesSelector?e.msMatchesSelector(t):void 0},r.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},r.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return r.matches(e,t)})},t.exports=r},{}],4:[function(e,t,a){"use strict";var r=function(e){this.element=e,this.events={}};r.prototype.bind=function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},r.prototype.unbind=function(e,t){var a=void 0!==t;this.events[e]=this.events[e].filter(function(r){return!(!a||r===t)||(this.element.removeEventListener(e,r,!1),!1)},this)},r.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var i=function(){this.eventElements=[]};i.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return void 0===t&&(t=new r(e),this.eventElements.push(t)),t},i.prototype.bind=function(e,t,a){this.eventElement(e).bind(t,a)},i.prototype.unbind=function(e,t,a){this.eventElement(e).unbind(t,a)},i.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},i.prototype.once=function(e,t,a){var r=this.eventElement(e),i=function(e){r.unbind(t,i),a(e)};r.bind(t,i)},t.exports=i},{}],5:[function(e,t,a){"use strict";t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],6:[function(e,t,a){"use strict";var r=e("./class"),i=e("./dom"),o=a.toInt=function(e){return parseInt(e,10)||0},n=a.clone=function(e){if(null===e)return null;if(e.constructor===Array)return e.map(n);if("object"==typeof e){var t={};for(var a in e)t[a]=n(e[a]);return t}return e};a.extend=function(e,t){var a=n(e);for(var r in t)a[r]=n(t[r]);return a},a.isEditable=function(e){return i.matches(e,"input,[contenteditable]")||i.matches(e,"select,[contenteditable]")||i.matches(e,"textarea,[contenteditable]")||i.matches(e,"button,[contenteditable]")},a.removePsClasses=function(e){for(var t=r.list(e),a=0;a<t.length;a++){var i=t[a];0===i.indexOf("ps-")&&r.remove(e,i)}},a.outerWidth=function(e){return o(i.css(e,"width"))+o(i.css(e,"paddingLeft"))+o(i.css(e,"paddingRight"))+o(i.css(e,"borderLeftWidth"))+o(i.css(e,"borderRightWidth"))},a.startScrolling=function(e,t){r.add(e,"ps-in-scrolling"),void 0!==t?r.add(e,"ps-"+t):(r.add(e,"ps-x"),r.add(e,"ps-y"))},a.stopScrolling=function(e,t){r.remove(e,"ps-in-scrolling"),void 0!==t?r.remove(e,"ps-"+t):(r.remove(e,"ps-x"),r.remove(e,"ps-y"))},a.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(e,t,a){"use strict";var r=e("./plugin/destroy"),i=e("./plugin/initialize"),o=e("./plugin/update");t.exports={initialize:i,update:o,destroy:r}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(e,t,a){"use strict";t.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(e,t,a){"use strict";var r=e("../lib/helper"),i=e("../lib/dom"),o=e("./instances");t.exports=function(e){var t=o.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),r.removePsClasses(e),o.remove(e))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(e,t,a){"use strict";var r=e("../../lib/helper"),i=e("../instances"),o=e("../update-geometry"),n=e("../update-scroll");t.exports=function(e){!function(e,t){function a(e){return e.getBoundingClientRect()}var i=function(e){e.stopPropagation()};t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarY,"click",i),t.event.bind(t.scrollbarYRail,"click",function(i){var s=r.toInt(t.scrollbarYHeight/2),l=t.railYRatio*(i.pageY-window.pageYOffset-a(t.scrollbarYRail).top-s)/(t.railYRatio*(t.railYHeight-t.scrollbarYHeight));0>l?l=0:l>1&&(l=1),n(e,"top",(t.contentHeight-t.containerHeight)*l),o(e),i.stopPropagation()}),t.settings.stopPropagationOnClick&&t.event.bind(t.scrollbarX,"click",i),t.event.bind(t.scrollbarXRail,"click",function(i){var s=r.toInt(t.scrollbarXWidth/2),l=t.railXRatio*(i.pageX-window.pageXOffset-a(t.scrollbarXRail).left-s)/(t.railXRatio*(t.railXWidth-t.scrollbarXWidth));0>l?l=0:l>1&&(l=1),n(e,"left",(t.contentWidth-t.containerWidth)*l-t.negativeScrollAdjustment),o(e),i.stopPropagation()})}(e,i.get(e))}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(e,t,a){"use strict";function r(e,t){var a=null,r=null,i=function(i){(function(r){var i=a+r*t.railXRatio,n=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=0>i?0:i>n?n:i;var s=o.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;d(e,"left",s)})(i.pageX-r),l(e),i.stopPropagation(),i.preventDefault()},s=function(){o.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",i)};t.event.bind(t.scrollbarX,"mousedown",function(l){r=l.pageX,a=o.toInt(n.css(t.scrollbarX,"left"))*t.railXRatio,o.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",i),t.event.once(t.ownerDocument,"mouseup",s),l.stopPropagation(),l.preventDefault()})}function i(e,t){var a=null,r=null,i=function(i){(function(r){var i=a+r*t.railYRatio,n=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=0>i?0:i>n?n:i;var s=o.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));d(e,"top",s)})(i.pageY-r),l(e),i.stopPropagation(),i.preventDefault()},s=function(){o.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",i)};t.event.bind(t.scrollbarY,"mousedown",function(l){r=l.pageY,a=o.toInt(n.css(t.scrollbarY,"top"))*t.railYRatio,o.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",i),t.event.once(t.ownerDocument,"mouseup",s),l.stopPropagation(),l.preventDefault()})}var o=e("../../lib/helper"),n=e("../../lib/dom"),s=e("../instances"),l=e("../update-geometry"),d=e("../update-scroll");t.exports=function(e){var t=s.get(e);r(e,t),i(e,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(e,t,a){"use strict";function r(e,t){var a=!1;t.event.bind(e,"mouseenter",function(){a=!0}),t.event.bind(e,"mouseleave",function(){a=!1});t.event.bind(t.ownerDocument,"keydown",function(r){if(!r.isDefaultPrevented||!r.isDefaultPrevented()){var n=o.matches(t.scrollbarX,":focus")||o.matches(t.scrollbarY,":focus");if(a||n){var d=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(d){if("IFRAME"===d.tagName)d=d.contentDocument.activeElement;else for(;d.shadowRoot;)d=d.shadowRoot.activeElement;if(i.isEditable(d))return}var c=0,u=0;switch(r.which){case 37:c=-30;break;case 38:u=30;break;case 39:c=30;break;case 40:u=-30;break;case 33:u=90;break;case 32:u=r.shiftKey?90:-90;break;case 34:u=-90;break;case 35:u=r.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:u=r.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}l(e,"top",e.scrollTop-u),l(e,"left",e.scrollLeft+c),s(e),function(a,r){var i=e.scrollTop;if(0===a){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&0>r)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&0>a||o>=t.contentWidth-t.containerWidth&&a>0)return!t.settings.wheelPropagation}return!0}(c,u)&&r.preventDefault()}}})}var i=e("../../lib/helper"),o=e("../../lib/dom"),n=e("../instances"),s=e("../update-geometry"),l=e("../update-scroll");t.exports=function(e){r(e,n.get(e))}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(e,t,a){"use strict";function r(e,t){function a(a){var i,s,l,d=(s=(i=a).deltaX,l=-1*i.deltaY,void 0!==s&&void 0!==l||(s=-1*i.wheelDeltaX/6,l=i.wheelDeltaY/6),i.deltaMode&&1===i.deltaMode&&(s*=10,l*=10),s!=s&&l!=l&&(s=0,l=i.wheelDelta),[s,l]),c=d[0],u=d[1];(function(t,a){var r=e.querySelector("textarea:hover, .ps-child:hover");if(r){if("TEXTAREA"!==r.tagName&&!window.getComputedStyle(r).overflow.match(/(scroll|auto)/))return!1;var i=r.scrollHeight-r.clientHeight;if(i>0&&!(0===r.scrollTop&&a>0||r.scrollTop===i&&0>a))return!0;var o=r.scrollLeft-r.clientWidth;if(o>0&&!(0===r.scrollLeft&&0>t||r.scrollLeft===o&&t>0))return!0}return!1})(c,u)||(r=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(n(e,"top",u?e.scrollTop-u*t.settings.wheelSpeed:e.scrollTop+c*t.settings.wheelSpeed),r=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(n(e,"left",c?e.scrollLeft+c*t.settings.wheelSpeed:e.scrollLeft-u*t.settings.wheelSpeed),r=!0):(n(e,"top",e.scrollTop-u*t.settings.wheelSpeed),n(e,"left",e.scrollLeft+c*t.settings.wheelSpeed)),o(e),(r=r||function(a,r){var i=e.scrollTop;if(0===a){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&0>r)return!t.settings.wheelPropagation}var o=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===o&&0>a||o>=t.contentWidth-t.containerWidth&&a>0)return!t.settings.wheelPropagation}return!0}(c,u))&&(a.stopPropagation(),a.preventDefault()))}var r=!1;void 0!==window.onwheel?t.event.bind(e,"wheel",a):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",a)}var i=e("../instances"),o=e("../update-geometry"),n=e("../update-scroll");t.exports=function(e){r(e,i.get(e))}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(e,t,a){"use strict";var r=e("../instances"),i=e("../update-geometry");t.exports=function(e){var t,a=r.get(e);t=e,a.event.bind(t,"scroll",function(){i(t)})}},{"../instances":18,"../update-geometry":19}],15:[function(e,t,a){"use strict";function r(e,t){function a(){r&&(clearInterval(r),r=null),i.stopScrolling(e)}var r=null,l={top:0,left:0},d=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){var t;e.contains(0===(t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"").toString().length?null:t.getRangeAt(0).commonAncestorContainer)?d=!0:(d=!1,a())}),t.event.bind(window,"mouseup",function(){d&&(d=!1,a())}),t.event.bind(window,"mousemove",function(t){if(d){var c=t.pageX,u=t.pageY,m=e.offsetLeft,p=e.offsetLeft+e.offsetWidth,f=e.offsetTop,h=e.offsetTop+e.offsetHeight;c<m+3?(l.left=-5,i.startScrolling(e,"x")):c>p-3?(l.left=5,i.startScrolling(e,"x")):l.left=0,u<f+3?(l.top=f+3-u<5?-5:-20,i.startScrolling(e,"y")):u>h-3?(l.top=u-h+3<5?5:20,i.startScrolling(e,"y")):l.top=0,0===l.top&&0===l.left?a():r||(r=setInterval(function(){return o.get(e)?(s(e,"top",e.scrollTop+l.top),s(e,"left",e.scrollLeft+l.left),void n(e)):void clearInterval(r)},50))}})}var i=e("../../lib/helper"),o=e("../instances"),n=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){r(e,o.get(e))}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(e,t,a){"use strict";function r(e,t,a,r){function i(t,a){s(e,"top",e.scrollTop-a),s(e,"left",e.scrollLeft-t),n(e)}function l(){b=!0}function d(){b=!1}function c(e){return e.targetTouches?e.targetTouches[0]:e}function u(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function m(e){if(u(e)){_=!0;var t=c(e);h.pageX=t.pageX,h.pageY=t.pageY,y=(new Date).getTime(),null!==v&&clearInterval(v),e.stopPropagation()}}function p(a){if(!_&&t.settings.swipePropagation&&m(a),!b&&_&&u(a)){var r=c(a),o={pageX:r.pageX,pageY:r.pageY},n=o.pageX-h.pageX,s=o.pageY-h.pageY;i(n,s),h=o;var l=(new Date).getTime(),d=l-y;d>0&&(g.x=n/d,g.y=s/d,y=l),function(a,r){var i=e.scrollTop,o=e.scrollLeft,n=Math.abs(a),s=Math.abs(r);if(s>n){if(0>r&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return!t.settings.swipePropagation}else if(n>s&&(0>a&&o===t.contentWidth-t.containerWidth||a>0&&0===o))return!t.settings.swipePropagation;return!0}(n,s)&&(a.stopPropagation(),a.preventDefault())}}function f(){!b&&_&&(_=!1,clearInterval(v),v=setInterval(function(){return o.get(e)?Math.abs(g.x)<.01&&Math.abs(g.y)<.01?void clearInterval(v):(i(30*g.x,30*g.y),g.x*=.8,void(g.y*=.8)):void clearInterval(v)},10))}var h={},y=0,g={},v=null,b=!1,_=!1;a&&(t.event.bind(window,"touchstart",l),t.event.bind(window,"touchend",d),t.event.bind(e,"touchstart",m),t.event.bind(e,"touchmove",p),t.event.bind(e,"touchend",f)),r&&(window.PointerEvent?(t.event.bind(window,"pointerdown",l),t.event.bind(window,"pointerup",d),t.event.bind(e,"pointerdown",m),t.event.bind(e,"pointermove",p),t.event.bind(e,"pointerup",f)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",l),t.event.bind(window,"MSPointerUp",d),t.event.bind(e,"MSPointerDown",m),t.event.bind(e,"MSPointerMove",p),t.event.bind(e,"MSPointerUp",f)))}var i=e("../../lib/helper"),o=e("../instances"),n=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){(i.env.supportsTouch||i.env.supportsIePointer)&&r(e,o.get(e),i.env.supportsTouch,i.env.supportsIePointer)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(e,t,a){"use strict";var r=e("../lib/helper"),i=e("../lib/class"),o=e("./instances"),n=e("./update-geometry"),s={"click-rail":e("./handler/click-rail"),"drag-scrollbar":e("./handler/drag-scrollbar"),keyboard:e("./handler/keyboard"),wheel:e("./handler/mouse-wheel"),touch:e("./handler/touch"),selection:e("./handler/selection")},l=e("./handler/native-scroll");t.exports=function(e,t){t="object"==typeof t?t:{},i.add(e,"ps-container");var a=o.add(e);a.settings=r.extend(a.settings,t),i.add(e,"ps-theme-"+a.settings.theme),a.settings.handlers.forEach(function(t){s[t](e)}),l(e),n(e)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(e,t,a){"use strict";function r(e){return e.getAttribute("data-ps-id")}var i=e("../lib/helper"),o=e("../lib/class"),n=e("./default-setting"),s=e("../lib/dom"),l=e("../lib/event-manager"),d=e("../lib/guid"),c={};a.add=function(e){var t,a=d();return t=a,e.setAttribute("data-ps-id",t),c[a]=new function(e){function t(){o.add(e,"ps-focus")}function a(){o.remove(e,"ps-focus")}var r,d,c=this;c.settings=i.clone(n),c.containerWidth=null,c.containerHeight=null,c.contentWidth=null,c.contentHeight=null,c.isRtl="rtl"===s.css(e,"direction"),c.isNegativeScroll=(d=e.scrollLeft,e.scrollLeft=-1,r=e.scrollLeft<0,e.scrollLeft=d,r),c.negativeScrollAdjustment=c.isNegativeScroll?e.scrollWidth-e.clientWidth:0,c.event=new l,c.ownerDocument=e.ownerDocument||document,c.scrollbarXRail=s.appendTo(s.e("div","ps-scrollbar-x-rail"),e),c.scrollbarX=s.appendTo(s.e("div","ps-scrollbar-x"),c.scrollbarXRail),c.scrollbarX.setAttribute("tabindex",0),c.event.bind(c.scrollbarX,"focus",t),c.event.bind(c.scrollbarX,"blur",a),c.scrollbarXActive=null,c.scrollbarXWidth=null,c.scrollbarXLeft=null,c.scrollbarXBottom=i.toInt(s.css(c.scrollbarXRail,"bottom")),c.isScrollbarXUsingBottom=c.scrollbarXBottom==c.scrollbarXBottom,c.scrollbarXTop=c.isScrollbarXUsingBottom?null:i.toInt(s.css(c.scrollbarXRail,"top")),c.railBorderXWidth=i.toInt(s.css(c.scrollbarXRail,"borderLeftWidth"))+i.toInt(s.css(c.scrollbarXRail,"borderRightWidth")),s.css(c.scrollbarXRail,"display","block"),c.railXMarginWidth=i.toInt(s.css(c.scrollbarXRail,"marginLeft"))+i.toInt(s.css(c.scrollbarXRail,"marginRight")),s.css(c.scrollbarXRail,"display",""),c.railXWidth=null,c.railXRatio=null,c.scrollbarYRail=s.appendTo(s.e("div","ps-scrollbar-y-rail"),e),c.scrollbarY=s.appendTo(s.e("div","ps-scrollbar-y"),c.scrollbarYRail),c.scrollbarY.setAttribute("tabindex",0),c.event.bind(c.scrollbarY,"focus",t),c.event.bind(c.scrollbarY,"blur",a),c.scrollbarYActive=null,c.scrollbarYHeight=null,c.scrollbarYTop=null,c.scrollbarYRight=i.toInt(s.css(c.scrollbarYRail,"right")),c.isScrollbarYUsingRight=c.scrollbarYRight==c.scrollbarYRight,c.scrollbarYLeft=c.isScrollbarYUsingRight?null:i.toInt(s.css(c.scrollbarYRail,"left")),c.scrollbarYOuterWidth=c.isRtl?i.outerWidth(c.scrollbarY):null,c.railBorderYWidth=i.toInt(s.css(c.scrollbarYRail,"borderTopWidth"))+i.toInt(s.css(c.scrollbarYRail,"borderBottomWidth")),s.css(c.scrollbarYRail,"display","block"),c.railYMarginHeight=i.toInt(s.css(c.scrollbarYRail,"marginTop"))+i.toInt(s.css(c.scrollbarYRail,"marginBottom")),s.css(c.scrollbarYRail,"display",""),c.railYHeight=null,c.railYRatio=null}(e),c[a]},a.remove=function(e){delete c[r(e)],e.removeAttribute("data-ps-id")},a.get=function(e){return c[r(e)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(e,t,a){"use strict";function r(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}var i=e("../lib/helper"),o=e("../lib/class"),n=e("../lib/dom"),s=e("./instances"),l=e("./update-scroll");t.exports=function(e){var t,a=s.get(e);a.containerWidth=e.clientWidth,a.containerHeight=e.clientHeight,a.contentWidth=e.scrollWidth,a.contentHeight=e.scrollHeight,e.contains(a.scrollbarXRail)||((t=n.queryChildren(e,".ps-scrollbar-x-rail")).length>0&&t.forEach(function(e){n.remove(e)}),n.appendTo(a.scrollbarXRail,e)),e.contains(a.scrollbarYRail)||((t=n.queryChildren(e,".ps-scrollbar-y-rail")).length>0&&t.forEach(function(e){n.remove(e)}),n.appendTo(a.scrollbarYRail,e)),!a.settings.suppressScrollX&&a.containerWidth+a.settings.scrollXMarginOffset<a.contentWidth?(a.scrollbarXActive=!0,a.railXWidth=a.containerWidth-a.railXMarginWidth,a.railXRatio=a.containerWidth/a.railXWidth,a.scrollbarXWidth=r(a,i.toInt(a.railXWidth*a.containerWidth/a.contentWidth)),a.scrollbarXLeft=i.toInt((a.negativeScrollAdjustment+e.scrollLeft)*(a.railXWidth-a.scrollbarXWidth)/(a.contentWidth-a.containerWidth))):a.scrollbarXActive=!1,!a.settings.suppressScrollY&&a.containerHeight+a.settings.scrollYMarginOffset<a.contentHeight?(a.scrollbarYActive=!0,a.railYHeight=a.containerHeight-a.railYMarginHeight,a.railYRatio=a.containerHeight/a.railYHeight,a.scrollbarYHeight=r(a,i.toInt(a.railYHeight*a.containerHeight/a.contentHeight)),a.scrollbarYTop=i.toInt(e.scrollTop*(a.railYHeight-a.scrollbarYHeight)/(a.contentHeight-a.containerHeight))):a.scrollbarYActive=!1,a.scrollbarXLeft>=a.railXWidth-a.scrollbarXWidth&&(a.scrollbarXLeft=a.railXWidth-a.scrollbarXWidth),a.scrollbarYTop>=a.railYHeight-a.scrollbarYHeight&&(a.scrollbarYTop=a.railYHeight-a.scrollbarYHeight),function(e,t){var a={width:t.railXWidth};t.isRtl?a.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:a.left=e.scrollLeft,t.isScrollbarXUsingBottom?a.bottom=t.scrollbarXBottom-e.scrollTop:a.top=t.scrollbarXTop+e.scrollTop,n.css(t.scrollbarXRail,a);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,n.css(t.scrollbarYRail,r),n.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),n.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(e,a),a.scrollbarXActive?o.add(e,"ps-active-x"):(o.remove(e,"ps-active-x"),a.scrollbarXWidth=0,a.scrollbarXLeft=0,l(e,"left",0)),a.scrollbarYActive?o.add(e,"ps-active-y"):(o.remove(e,"ps-active-y"),a.scrollbarYHeight=0,a.scrollbarYTop=0,l(e,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(e,t,a){"use strict";var r,i,o=e("./instances"),n=document.createEvent("Event"),s=document.createEvent("Event"),l=document.createEvent("Event"),d=document.createEvent("Event"),c=document.createEvent("Event"),u=document.createEvent("Event"),m=document.createEvent("Event"),p=document.createEvent("Event"),f=document.createEvent("Event"),h=document.createEvent("Event");n.initEvent("ps-scroll-up",!0,!0),s.initEvent("ps-scroll-down",!0,!0),l.initEvent("ps-scroll-left",!0,!0),d.initEvent("ps-scroll-right",!0,!0),c.initEvent("ps-scroll-y",!0,!0),u.initEvent("ps-scroll-x",!0,!0),m.initEvent("ps-x-reach-start",!0,!0),p.initEvent("ps-x-reach-end",!0,!0),f.initEvent("ps-y-reach-start",!0,!0),h.initEvent("ps-y-reach-end",!0,!0),t.exports=function(e,t,a){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===a)throw"You must provide a value to the update-scroll function";"top"===t&&0>=a&&(e.scrollTop=a=0,e.dispatchEvent(f)),"left"===t&&0>=a&&(e.scrollLeft=a=0,e.dispatchEvent(m));var y=o.get(e);"top"===t&&a>=y.contentHeight-y.containerHeight&&((a=y.contentHeight-y.containerHeight)-e.scrollTop<=1?a=e.scrollTop:e.scrollTop=a,e.dispatchEvent(h)),"left"===t&&a>=y.contentWidth-y.containerWidth&&((a=y.contentWidth-y.containerWidth)-e.scrollLeft<=1?a=e.scrollLeft:e.scrollLeft=a,e.dispatchEvent(p)),r||(r=e.scrollTop),i||(i=e.scrollLeft),"top"===t&&r>a&&e.dispatchEvent(n),"top"===t&&a>r&&e.dispatchEvent(s),"left"===t&&i>a&&e.dispatchEvent(l),"left"===t&&a>i&&e.dispatchEvent(d),"top"===t&&(e.scrollTop=r=a,e.dispatchEvent(c)),"left"===t&&(e.scrollLeft=i=a,e.dispatchEvent(u))}},{"./instances":18}],21:[function(e,t,a){"use strict";var r=e("../lib/helper"),i=e("../lib/dom"),o=e("./instances"),n=e("./update-geometry"),s=e("./update-scroll");t.exports=function(e){var t=o.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=r.toInt(i.css(t.scrollbarXRail,"marginLeft"))+r.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=r.toInt(i.css(t.scrollbarYRail,"marginTop"))+r.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),n(e),s(e,"top",e.scrollTop),s(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]),window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext)var audioContext=new AudioContext,audiosource=audioContext.createBufferSource();else audiosource=null;var tpLayerTimelinesRev=new function(){var t=this,u=new Object,sortMode="time",__ctime,__ctimeb,__ctimei,__coffset=0;function checkAvailableAutoTimes(){var e=jQuery(".mastertimer-timeline-selector-row.selected").length;jQuery(".autotiming-action").addClass("notclickable"),e>1?jQuery(".autotiming-action").removeClass("notclickable"):1==e&&(jQuery(".autotiming-action-3").removeClass("notclickable"),jQuery(".autotiming-action-4").removeClass("notclickable"),jQuery(".autotiming-action-5").removeClass("notclickable"),jQuery(".autotiming-action-6").removeClass("notclickable"))}function addIconFunction(){jQuery("#tp-addiconbutton, .addbutton-icon").click(function(){jQuery("#dialog_insert_icon").dialog({width:491,height:500,dialogClass:"tpdialogs",resize:function(){var e=jQuery("#dialog_insert_icon");e.css({width:e.parent().width()-30,height:e.parent().height()-60})},modal:!0,create:function(e,t){var a=jQuery(e.target),r=document.styleSheets,i=jQuery("#dialog_insert_icon");i.parent().css({padding:"0px",border:"none",borderRadius:"0px"}),i.parent().find(".ui-dialog-titlebar.ui-widget-header.ui-corner-all.ui-helper-clearfix.ui-draggable-handle").addClass("tp-slider-new-dialog-title"),r&&jQuery.each(r,function(e,t){var r=!1,i="";try{null!==t.cssRules&null!=t.cssRules&&jQuery.each(t.cssRules,function(e,t){t&&null!==t&&"null"!==t&&null!=t.selectorText&&jQuery.each(rs_icon_sets,function(e,a){if(t.selectorText.split(a).length>1&&t.cssText.split("content").length>1){var o=t.selectorText.split("::before")[0].split(":before")[0];null!=o&&null!=(o=o.split(".")[1])&&(0==r&&(r=!0,i='<ul class="tp-icon-preview-list lastaddediconset">'),i=i+'<li><i class="'+o+'"></i></li>')}})})}catch(e){}if(r){i+="</ul>",a.append(i);var o=a.find(".lastaddediconset").find("li").first().find("i");a.find(".lastaddediconset").prepend("<h3>"+o.css("fontFamily")+"</h3>").removeClass("lastaddediconset")}}),a.on("click","li",function(){jQuery("#dialog_addbutton").length>0&&"none"!==jQuery("#dialog_addbutton").closest(".tpdialogs").css("display")?jQuery(".addbutton-icon:visible").length>0?(jQuery(".addbutton-icon").html(jQuery(this).html()),jQuery("#dialog_insert_icon").dialog("close"),setExampleButtons()):(jQuery(".lasteditedlayertext").length>0?jQuery(".lasteditedlayertext").val(jQuery(".lasteditedlayertext").val()+jQuery(this).html()).blur().focus():jQuery("#layer_text").val(jQuery("#layer_text").val()+jQuery(this).html()).blur().focus(),jQuery("#dialog_insert_icon").dialog("close")):(jQuery(".lasteditedlayertext").length>0?jQuery(".lasteditedlayertext").val(jQuery(".lasteditedlayertext").val()+jQuery(this).html()).blur().focus():jQuery(".layer_text").val(jQuery("#layer_text").val()+jQuery(this).html()).blur().focus(),jQuery("#dialog_insert_icon").dialog("close")),u.updateLayerFromFields()})}})})}function reBlurFocus(e,t,a){jQuery("#rs-animation-tab-button").hasClass("selected")||jQuery("#rs-loopanimation-tab-button").hasClass("selected")||(t=Number(t)+e,t=Math.round(100*t)/100,a.val(t),jQuery(":focus").blur(),a.focus())}function basicClicksAndHovers(){jQuery(".rs-staticcustomstylechange").change(function(){t.rebuildLayerIdle(jQuery(".slide_layer.layer_selected"))}),jQuery(".rs-layer-settings-tabs li").click(function(){var e=jQuery(this);"#rs-animation-tab-button"!=e.attr("id")&&0==e.closest("#rs-animation-tab-button").length&&"#rs-loopanimation-tab-button"!=e.attr("id")&&0==e.closest("#rs-loopanimation-tab-button").length?(t.stopAllLayerAnimation(),setTimeout(function(){u.removeCurrentLayerRotatable(),u.makeCurrentLayerRotatable(),jQuery("#hide_layer_content_editor").click()},19)):jQuery(this).hasClass("selected")||(t.stopAllLayerAnimation(),"#rs-animation-tab-button"==e.attr("id")||0!=e.closest("#rs-animation-tab-button").length?(t.animateCurrentSelectedLayer(3),u.removeCurrentLayerRotatable(),jQuery("#hide_layer_content_editor").click()):(t.callCaptionLoops(),u.removeCurrentLayerRotatable(),jQuery("#hide_layer_content_editor").click()))}),jQuery("#divLayers").click(function(){t.stopAllLayerAnimation(),u.removeCurrentLayerRotatable(),setTimeout(function(){t.checkAnimationTab()&&t.animateCurrentSelectedLayer(4),t.checkLoopTab()&&t.callCaptionLoops()},19)}),jQuery("#layeranimation-playpause").click(function(){var e=jQuery(this);e.hasClass("inpause")?(e.removeClass("inpause"),t.checkAnimationTab()&&(t.stopAllLayerAnimation(),t.animateCurrentSelectedLayer(5),u.removeCurrentLayerRotatable())):(e.addClass("inpause"),t.stopAllLayerAnimation())}),jQuery("#loopanimation-playpause").click(function(){var e=jQuery(this);e.hasClass("inpause")?(e.removeClass("inpause"),t.checkLoopTab()&&(t.stopAllLayerAnimation(),t.callCaptionLoops(),u.removeCurrentLayerRotatable())):(e.addClass("inpause"),t.stopAllLayerAnimation())}),jQuery("#rs-style-tab-button").click(function(){setTimeout(function(){jQuery(".slide_layer").each(function(){t.rebuildLayerIdle(jQuery(this));var e=jQuery(this).find(".innerslide_layer").first();if(e.length>0&&null!=e.data("hoveranim")){var a=e.data("hoveranim");a.seek(a.endTime())}})},19)}),jQuery("#toggle-idle-hover").click(function(){setTimeout(function(){t.rebuildLayerIdle(jQuery(".slide_layer.layer_selected"))},19)}),jQuery("#style_form_wrapper").on("colorchanged",function(){t.rebuildLayerIdle(jQuery(".slide_layer.layer_selected"))})}function preparePeviewAnimations(){jQuery(".rs-inoutanimationfield").on("change",function(){t.checkAnimationTab()&&(t.stopAllLayerAnimation(),setTimeout(function(){t.animateCurrentSelectedLayer(50)},19))})}function prepareLoopAnimations(){jQuery(".rs-loopanimationfield").on("change",function(){t.checkLoopTab()&&(t.stopAllLayerAnimation(),setTimeout(function(){t.callCaptionLoops()},19))})}t.timelinetype="absolute",t.mainMaxTimeLeft=0,t.layout="desktop",t.timercorrectur=0,t.init=function(){var e;u=UniteLayersRev,g_rebuildTimer=999,g_slideTime=u.getMaintime(),g_keyTimer=0,t.mainMaxTimeLeft=jQuery("#mastertimer-maxtime").position().left,initSlideDuration(),initSortbox(),initMasterTimer(),preparePeviewAnimations(),prepareLoopAnimations(),showHideTimeines(),basicClicksAndHovers(),addIconFunction(),t.addToSortbox(),jQuery("#slide_transition, #slot_amount, #transition_rotation").change(function(){setFakeAnim()}),jQuery(window).resize(function(){clearTimeout(e),e=setTimeout(function(){t.resetSlideAnimations(!1)},250)});var a=!1;jQuery("#thelayer-editor-wrapper").hover(function(){a=!0},function(){a=!1}),jQuery("#fake-select-title-wrapper").click(function(){jQuery("#slide-animation-settings-content-tab").click(),jQuery("html,body").animate({scrollTop:-100+jQuery("#slide-animation-settings-content-tab").offset().top},200)}),jQuery(".slide-trans-menu-element").each(function(){var e=jQuery(this);e.text(e.text().toLowerCase()),e.click(function(){var e=jQuery(this);jQuery(".slide-trans-menu-element").removeClass("selected"),e.addClass("selected"),jQuery(".slide-trans-checkelement").hide(),jQuery("."+e.data("reference")).show()})}),jQuery(".slide-trans-menu-element").first().click();"undefined"!=typeof choosen_slide_transition&&function(){var e=jQuery(".slide-trans-cur-ul");for(var t in choosen_slide_transition){var a="";a+=' data-duration="'+transition_settings.duration[t]+'"',a+=' data-ease_in="'+transition_settings.ease_in[t]+'"',a+=' data-ease_out="'+transition_settings.ease_out[t]+'"',a+=' data-rotation="'+transition_settings.rotation[t]+'"',a+=' data-slot="'+transition_settings.slot[t]+'"',e.append('<li value="'+choosen_slide_transition[t]+'"'+a+' class="justaddedtrans draggable-trans-element">'+jQuery('input[name="slide_transition[]"][value="'+choosen_slide_transition[t]+'"]').parent().text()+'<i class="remove-trans-from-list eg-icon-cancel"></i></li>'),jQuery(".justaddedtrans").data("animval",choosen_slide_transition[t]),jQuery(".justaddedtrans").removeClass("justaddedtrans")}setFakeAnim()}();var r=new punchgs.TimelineLite,i=jQuery("#form_slide_params").offset();jQuery("body").on("click",".remove-trans-from-list",function(){var e=jQuery(this).parent(),t=e.data("animval"),a=!1;return jQuery(".slide-trans-checkelement").each(function(){var e=jQuery(this).find("input");e.val()==t&&(e.removeAttr("checked"),a=!0)}),a&&jQuery(".remove-trans-from-list").length>1?(e.remove(),jQuery(".slide-trans-cur-ul li:first-child").click()):alert(rev_lang.cant_remove_last_transition),!1}),jQuery(".slide-trans-checkelement").on("mouseover",function(e){var t=jQuery(this).find('input[name="slide_transition[]"]'),a=jQuery(".slide-trans-example-inner .slotholder"),o=jQuery(".slide-trans-example-inner .oldslotholder"),n=jQuery(".slide-trans-example");a.find(".slot").each(function(){jQuery(this).remove()}),o.find(".slot").each(function(){jQuery(this).remove()}),r.kill(),punchgs.TweenLite.set(a,{clearProps:"transform"}),punchgs.TweenLite.set(o,{clearProps:"transform"}),punchgs.TweenLite.set(a.find(".defaultimg"),{clearProps:"transform",autoAlpha:1}),punchgs.TweenLite.set(o.find(".defaultimg"),{clearProps:"transform",autoAlpha:1}),(r=slideAnimation(a,o,t.val(),r,!0)).pause(.001),punchgs.TweenLite.to(n,.2,{top:e.pageY-i.top,overwrite:"all",autoAlpha:1,ease:punchgs.Power3.easeInOut,onComplete:function(){setTimeout(function(){r.play()},100)}})}),jQuery(".slide-trans-checkelement").on("mouseleave",function(){clearTimeout(void 0);jQuery(this).find('input[name="slide_transition[]"]'),jQuery(".slide-trans-example-inner .slotholder"),jQuery(".slide-trans-example-inner .oldslotholder");punchgs.TweenLite.to(jQuery(".slide-trans-example"),.2,{autoAlpha:0,delay:.2})}),jQuery('input[name="slide_transition[]"]').on("change",function(){if(jQuery(this).is(":checked")){' data-duration="default"',' data-ease_in="default"',' data-ease_out="default"',' data-rotation="0"',' data-slot="default"',jQuery(".slide-trans-cur-ul").append('<li value="'+jQuery(this).val()+'" data-duration="default" data-ease_in="default" data-ease_out="default" data-rotation="0" data-slot="default" class="justaddedtrans draggable-trans-element">'+jQuery(this).parent().text()+'<i class="remove-trans-from-list eg-icon-cancel"></i></li>'),jQuery(".justaddedtrans").data("animval",jQuery(this).val()),jQuery(".justaddedtrans").removeClass("justaddedtrans")}else jQuery(".remove-trans-from-list").length>1?(jQuery(".slide-trans-cur-ul").find("li:data[value="+jQuery(this).val()+"]").remove(),jQuery(".slide-trans-cur-ul li:first-child").click()):(jQuery(this).attr("checked",!0),alert(rev_lang.cant_remove_last_transition));setFakeAnim()}),jQuery("body").on("click",".slide-trans-cur-ul li",function(){jQuery(".slide-trans-cur-ul li").each(function(){jQuery(this).removeClass("selected")}),jQuery(this).addClass("selected"),jQuery('input[name="slot_amount"]').val(jQuery(this).data("slot")),jQuery('input[name="transition_rotation"]').val(jQuery(this).data("rotation")),jQuery('input[name="transition_duration"]').val(jQuery(this).data("duration")),jQuery('select[name="transition_ease_in"] option[value="'+jQuery(this).data("ease_in")+'"]').attr("selected",!0),jQuery('select[name="transition_ease_out"] option[value="'+jQuery(this).data("ease_out")+'"]').attr("selected",!0)}),jQuery(".slide-trans-cur-ul li:first-child").click(),jQuery('input[name="slot_amount"]').change(function(){jQuery(".slide-trans-cur-ul li.selected").data("slot",jQuery(this).val())}),jQuery('input[name="transition_rotation"]').change(function(){jQuery(".slide-trans-cur-ul li.selected").data("rotation",jQuery(this).val())}),jQuery("#transition_duration").change(function(){jQuery(".slide-trans-cur-ul li.selected").data("duration",jQuery(this).val()),t.setSlideTransitionTimerBar()}),jQuery("#delay").change(function(){t.mainMaxTimeLeft=this.value/10,t.setSlideTransitionTimerBar()}),jQuery('select[name="transition_ease_in"]').change(function(){jQuery(".slide-trans-cur-ul li.selected").data("ease_in",jQuery(this).val())}),jQuery('select[name="transition_ease_out"]').change(function(){jQuery(".slide-trans-cur-ul li.selected").data("ease_out",jQuery(this).val())}),jQuery(".slide-trans-cur-ul").sortable({containment:".slide-trans-cur-selected",stop:function(){setTimeout(function(){setFakeAnim()},200)}}),jQuery("#abs_rel_timeline").on("change",function(){t.timelinetype=jQuery(this).val(),t.updateAllLayerTimeline()}),jQuery(document).on("keydown",function(e){var t=jQuery("input:focus").length>0;if(e.ctrlKey||e.metaKey||e.shiftKey)switch(String.fromCharCode(e.which).toLowerCase()){case"s":e.shiftKey||(e.preventDefault(),jQuery("#button_save_static_slide-tb").length>0?jQuery("#button_save_static_slide-tb").click():jQuery("#button_save_slide-tb").click());break;case"z":!e.metaKey&&!e.ctrlKey||t||(e.preventDefault(),e.shiftKey?u.oneStepRedo():u.oneStepUndo());break;case"y":!e.ctrlKey&&!e.metaKey||t||(e.preventDefault(),u.oneStepRedo())}}),jQuery("body").on("keydown keyup",function(e){if(jQuery("#layer_text").is(":focus"))return!0;if(jQuery("#layer_text_toggle").is(":focus"))return!0;var t=e.keyCode?e.keyCode:e.which,r=null!=jQuery(document.activeElement).data("steps")?parseFloat(jQuery(document.activeElement).data("steps")):1;Number(parseInt(jQuery("#layer_left").val(),0)),Number(parseInt(jQuery("#layer_top").val(),0));switch(e.shiftKey&&(r*=10),jQuery(document.activeElement).get(0).tagName.toLowerCase()){case"INPUT":case"input":var i=parseFloat(jQuery(document.activeElement).val());if(null!=jQuery(document.activeElement).data("suffix")&&!jQuery(document.activeElement).data("suffix").match(/auto/g)&&(i=Number(i),jQuery.isNumeric(i)))switch(t){case 38:return"keyup"==e.type&&reBlurFocus(r,i,jQuery(document.activeElement)),!1;case 40:return"keyup"==e.type&&reBlurFocus(-r,i,jQuery(document.activeElement)),!1}break;case"textarea":return!0;default:switch(t){case 8:case 46:e.preventDefault(),"keydown"==e.type&&(jQuery("#button_delete_layer").click(),window.deletecalled=!0)}if(a)switch(t){case 40:return"keyup"==e.type?setTimeout(function(){u.updateMovedLayers()},50):u.adjustSelectedLayerPositions("top",r),!1;case 38:return"keyup"==e.type?setTimeout(function(){u.updateMovedLayers()},50):u.adjustSelectedLayerPositions("top",-1*r),!1;case 37:return"keyup"==e.type?setTimeout(function(){u.updateMovedLayers()},50):u.adjustSelectedLayerPositions("left",-1*r),!1;case 39:return"keyup"==e.type?setTimeout(function(){u.updateMovedLayers()},50):u.adjustSelectedLayerPositions("left",r),!1}}}),t.deepSelection(),jQuery(".input-deepselects").each(function(){var e=jQuery(this);e.wrap('<span class="inp-deep-wrapper"></span>'),e.parent().append('<div class="inp-deep-list"></div>');var t=e.parent().find(".inp-deep-list"),a='<span class="inp-deep-listitems">',r=e.data("reverse"),i=e.data("deepwidth"),o=null!=e.data("selects")?e.data("selects").split("||"):"",n=null!=e.data("svalues")?e.data("svalues").split("||"):"",s=null!=e.data("icons")?e.data("icons").split("||"):"",l=e.attr("id");void 0!==i&&punchgs.TweenLite.set(t,{minWidth:i+"px"}),"on"==r&&(a=a+"<span class='reverse_input_wrapper'><span class='reverse_input_text'>Direction Auto Reverse</span><input class='reverse_input_check tp-moderncheckbox' name='"+l+"_reverse' id='"+l+"_reverse' type='checkbox'></span>"),void 0!==o&&""!=o&&jQuery.each(o,function(e){var t=n[e]||"",r=o[e]||"";e=s[e]||"";a=a+"<span class='inp-deep-prebutton' data-val='"+t+"'><i class='eg-icon-"+e+"'></i>"+r+"</span>"}),a+="</span>",t.append(a),"on"==r&&RevSliderSettings.onoffStatus(jQuery('input[name="'+l+'_reverse"]'))}),jQuery("body").on("click",".inp-deep-prebutton",function(){var e=jQuery(this),t=e.closest(".inp-deep-wrapper").find("input");t.val(e.data("val")),t.blur(),t.focus(),t.trigger("change")}),jQuery("body").on("click",".input-deepselects",function(){jQuery(this).closest(".inp-deep-wrapper").find(".inp-deep-list").addClass("visible"),jQuery(this).closest(".inp-deep-wrapper").addClass("selected-deep-wrapper")}),jQuery(".inp-deep-wrapper").on("mouseleave",function(){jQuery(this).find(".inp-deep-list").removeClass("visible"),jQuery(this).removeClass("selected-deep-wrapper")}),jQuery('input[name="masking-start"]').on("change",function(){"checked"===jQuery(this).attr("checked")?jQuery(".mask-start-settings").show():jQuery(".mask-start-settings").hide()}),jQuery('input[name="masking-end"]').on("change",function(){"checked"===jQuery(this).attr("checked")?jQuery(".mask-end-settings").show():jQuery(".mask-end-settings").hide()}),jQuery("#use_text_color_start").on("change",function(){"checked"===jQuery(this).attr("checked")?jQuery(".use_text_color_wrap_start").show():jQuery(".use_text_color_wrap_start").hide()}),jQuery("#use_bg_color_start").on("change",function(){"checked"===jQuery(this).attr("checked")?jQuery(".use_bg_color_wrap_start").show():jQuery(".use_bg_color_wrap_start").hide()}),jQuery("#use_text_color_end").on("change",function(){"checked"===jQuery(this).attr("checked")?jQuery(".use_text_color_wrap_end").show():jQuery(".use_text_color_wrap_end").hide()}),jQuery("#use_bg_color_end").on("change",function(){"checked"===jQuery(this).attr("checked")?jQuery(".use_bg_color_wrap_end").show():jQuery(".use_bg_color_wrap_end").hide()}),jQuery("body").on("click",".show_timeline_helper",function(){var e=jQuery(this),t=e.closest("li"),a=e.closest(".timeline_frame"),r=jQuery("#timline-manual-dialog"),i=a.position().left,o=(t.width(),a.data("frameindex")),n=u.getLayerByUniqueId(t.data("uniqueid")),s=n.frames["frame_"+o].time,l=n.frames["frame_"+o].speed;r.appendTo(t),i=(i=999===o?i-r.width()+a.width()-20:0===o?i:i-r.width()/2+10)<20?20:i,r.css({left:i}),jQuery("#clayer_start_time").val(s),jQuery("#clayer_start_speed").val(l),r.data("frameindex",o),r.data("uniqueid",n.unique_id),r.show()}),jQuery("body").on("click","#timline-manual-closer",function(){var e=jQuery("#timline-manual-dialog");e.hide(),e.appendTo(jQuery("#thelayer-editor-wrapper"))}),jQuery("body").on("click","#timline-manual-apply",function(){jQuery(this);var e=jQuery("#timline-manual-dialog"),a=e.data("frameindex"),r=document.getElementById("tl_"+e.data("uniqueid")+"_frame_"+a);objLayer=u.getLayerByUniqueId(e.data("uniqueid")),objUpdate={frames:{}},t.recordFrameStatus(r),objUpdate.frames["frame_"+a]={},objUpdate.frames["frame_"+a].time=jQuery("#clayer_start_time").val(),objUpdate.frames["frame_"+a].speed=jQuery("#clayer_start_speed").val(),e.hide(),e.appendTo(jQuery("#thelayer-editor-wrapper")),u.updateLayer(objLayer.serial,objUpdate),t.updateLayerTimeline(objLayer),t.updateTLFrame(r,"trigger"),t.updateAllSelectedLayerTimeline(r),t.updateAllLayerTimeline()}),jQuery("body").on("click","#timing-all-onoff-checkbox",function(){"checked"!=jQuery(this).attr("checked")||jQuery(".mastertimer-timeline-selector-row.selected").length==jQuery(".layer-on-timeline-selector").length?(jQuery(".mastertimer-timeline-selector-row.selected").removeClass("selected"),jQuery(".layer-on-timeline-selector").removeAttr("checked")):(jQuery(".layer-on-timeline-selector").attr("checked","checked"),jQuery(".sortable_elements .mastertimer-timeline-selector-row").addClass("selected")),t.checkMultipleSelectedItems(),checkAvailableAutoTimes()}),jQuery("body").on("click",".list-of-layer-links",function(){jQuery(this).toggleClass("showmenow")}),jQuery("body").on("click",".timing-layer-link-type-element",function(){var e=jQuery(this).data("linktype");u.selectedLayers=[],jQuery(".layer-on-timeline-selector").each(function(){var t=jQuery(this),a=t.closest(".mastertimer-layer").data("uniqueid"),r=u.getLayerByUniqueId(a);r.groupLink==e?(t.attr("checked","checked"),u.selectedLayers.push(a),r.references.htmlLayer.addClass("multiplelayerselected")):(t.removeAttr("checked","checked"),r.references.htmlLayer.removeClass("multiplelayerselected"))})}),jQuery("body").on("change",".layer-on-timeline-selector",function(){t.checkMultipleSelectedItems()})},t.deepSelection=function(e){jQuery(".input-deepselects").each(function(){var e=jQuery(this);if(!e.hasClass("deepselection_ready")){e.addClass("deepselection_ready"),e.wrap('<span class="inp-deep-wrapper"></span>'),e.parent().append('<span class="inp-deep-list"></span>');var t=e.parent().find(".inp-deep-list"),a='<span class="inp-deep-listitems">',r=e.data("reverse"),i=e.data("deepwidth"),o=null!=e.data("selects")?e.data("selects").split("||"):"",n=null!=e.data("svalues")?e.data("svalues").split("||"):"",s=null!=e.data("icons")?e.data("icons").split("||"):"",l=e.attr("id");void 0!==i&&punchgs.TweenLite.set(t,{minWidth:i+"px"}),"on"==r&&(a=a+"<span class='reverse_input_wrapper'><span class='reverse_input_text'>Direction Auto Reverse</span><input class='reverse_input_check tp-moderncheckbox' name='"+l+"_reverse' id='"+l+"_reverse' type='checkbox'></span>"),void 0!==o&&""!=o&&jQuery.each(o,function(e){var t=n[e]||"",r=o[e]||"";e=s[e]||"";a=a+"<span class='inp-deep-prebutton' data-val='"+t+"'><i class='eg-icon-"+e+"'></i>"+r+"</span>"}),a+="</span>",t.append(a),"on"==r&&RevSliderSettings.onoffStatus(jQuery('input[name="'+l+'_reverse"]')),e.parent().on("mouseleave",function(){jQuery(this).find(".inp-deep-list").removeClass("visible"),jQuery(this).removeClass("selected-deep-wrapper")})}}),!0!==e&&(jQuery("body").on("click",".inp-deep-prebutton",function(){var e=jQuery(this),t=e.closest(".inp-deep-wrapper").find("input");t.val(e.data("val")),t.blur(),t.focus(),t.trigger("change")}),jQuery("body").on("click",".input-deepselects",function(){jQuery(this).closest(".inp-deep-wrapper").find(".inp-deep-list").addClass("visible"),jQuery(this).closest(".inp-deep-wrapper").addClass("selected-deep-wrapper")}))},t.checkMultipleSelectedItems=function(e){u.selectedLayers=[],jQuery(".layer-on-timeline-selector").each(function(){var t=jQuery(this),a=u.getLayerByUniqueId(t.closest(".mastertimer-layer").data("uniqueid"));t.attr("checked")&&!0!==e?(a.references.htmlLayer.addClass("multiplelayerselected"),u.selectedLayers.push(a.unique_id)):(t.removeAttr("checked"),a.references.htmlLayer.removeClass("multiplelayerselected"))})},t.compareLayerEndsVSSlideEnd=function(){var e=10*t.mainMaxTimeLeft;jQuery.each(u.arrLayers,function(t,a){(a.endWithSlide||e<a.frames.frame_999.time-a.frames.frame_999.speed)&&(a.frames.frame_999.time=e+a.frames.frame_999.speed)}),t.updateAllLayerTimeline()},t.resetIdleSelector=function(){jQuery("#toggle-idle-hover").addClass("idleisselected").removeClass("hoverisselected"),jQuery("#tp-idle-state-advanced-style").show(),jQuery("#tp-hover-state-advanced-style").hide()},t.checkAnimationTab=function(){return!jQuery("#layeranimation-playpause").hasClass("inpause")&&jQuery("#rs-animation-tab-button").hasClass("selected")},t.checkLoopTab=function(){return!jQuery("#loopanimation-playpause").hasClass("inpause")&&jQuery("#rs-loopanimation-tab-button").hasClass("selected")},t.stopAllLayerAnimation=function(){document.getElementById("mastertimer-playpause-wrapper").innerHTML='<i class="eg-icon-play"></i><span>PLAY</span>',punchgs.TweenLite.set(document.getElementsByClassName("tp-mask-wrap"),{clearProps:"transform",overwrite:"all"}),jQuery("#divbgholder").find(".tp-blockmask_in, .tp-blockmask_out").remove(),jQuery(".tp-showmask").removeClass("tp-showmask");for(var e=document.getElementsByClassName("innerslide_layer"),a=0;a<e.length;a++){var r=jQuery(e[a]);if((e[a].parentNode.classList.contains("rs-preview-inside-looper")||e[a].parentNode.parentNode.classList.contains("rs-preview-inside-looper"))&&r.unwrap(),null!=r.data("tl")){var i=r.data("tl");i.clear(),i.kill();try{r.data("mySplitText")&&r.data("mySplitText").revert()}catch(e){}punchgs.TweenLite.set(r[0].parentNode,{autoAlpha:1}),t.rebuildLayerIdle(r.closest(".slide_layer")),u.removeCurrentLayerRotatable()}}punchgs.TweenLite.set(document.getElementById("startanim_wrapper"),{autoAlpha:0}),punchgs.TweenLite.set(document.getElementById("endanim_wrapper"),{autoAlpha:0})},t.callCaptionLoops=function(){t.stopAllLayerAnimation();var e=jQuery(".slide_layer.layer_selected"),a=e.find(".innerslide_layer").first();if(0==a.length)return!1;var r=u.getSerialFromID(e.attr("id"));params=u.getLayer(r),loopanim=params.loop_animation,a.closest(".rs-preview-inside-looper").length>0&&a.unwrap(),a.wrap('<div class="rs-preview-inside-looper" style="width:100%;height:100%;position:relative"></div>');var i=e.find(".rs-preview-inside-looper"),o=params.loop_startdeg,n=params.loop_enddeg,s=params.loop_speed,l=params.loop_xorigin+"% "+params.loop_yorigin+"%",d=params.loop_easing,c=params.loop_angle,m=parseInt(params.loop_radius,0),p=params.loop_xstart,f=params.loop_ystart,h=params.loop_xend,y=params.loop_yend,g=params.loop_zoomstart,v=params.loop_zoomend;factor=1;var b=new punchgs.TimelineLite;switch(b.pause(),loopanim){case"rs-pendulum":b.add(punchgs.TweenLite.fromTo(i,s,{force3D:"auto",rotation:o,transformOrigin:l},{rotation:n,ease:d})),b.add(punchgs.TweenLite.fromTo(i,s,{force3D:"auto",rotation:n},{rotation:o,ease:d,onComplete:function(){b.restart()}}));break;case"rs-rotate":b.add(punchgs.TweenLite.fromTo(i,s,{force3D:"auto",rotation:o,transformOrigin:l},{rotation:n,ease:d,onComplete:function(){b.restart()}}));break;case"rs-slideloop":b.add(punchgs.TweenLite.fromTo(i,s,{force3D:"auto",x:p,y:f},{x:h,y:y,ease:d})),b.add(punchgs.TweenLite.fromTo(i,s,{force3D:"auto",x:h,y:y},{x:p,y:f,onComplete:function(){b.restart()}}));break;case"rs-pulse":b.add(punchgs.TweenLite.fromTo(i,s,{force3D:"auto",scale:g},{scale:v,ease:d})),b.add(punchgs.TweenLite.fromTo(i,s,{force3D:"auto",scale:v},{scale:g,onComplete:function(){b.restart()}}));break;case"rs-wave":var _={a:0,ang:c,element:i,unit:m,xoffset:0+(parseInt(params.loop_xorigin,0)/100-.5)*i.width(),yoffset:-1*m+(parseInt(params.loop_yorigin,0)/100-.5)*i.height()},w=parseInt(c,0);b.add(punchgs.TweenLite.fromTo(_,s,{a:0+w},{a:360+w,force3D:"auto",ease:punchgs.Linear.easeNone,onUpdate:function(){var e=_.a*(Math.PI/180),t=_.yoffset+_.unit*(1-Math.sin(e)),a=_.xoffset+Math.cos(e)*_.unit;punchgs.TweenLite.to(_.element,.1,{force3D:"auto",x:a,y:t})},onComplete:function(){b.restart()}}))}b.play(),e.data("tl",b)},t.rebuildLayerIdle=function(e,a,r){if(a=null==a?50:a,r=null!=r&&r,0==g_rebuildTimer&&(a=0,g_rebuildTimer=999),null==e||0==jQuery(e).length||e[0].classList.contains("layer-deleted"))return!1;var i=jQuery(e);clearTimeout(i.data("idlerebuildtimer")),t.rebuildLayerIdleProgress(e);var o=u.getSerialFromID(e.attr("id")),n=u.getLayer(o,r),s=e.find(".tp-caption img");if(u.updateHtmlLayerPosition(!1,n,u.getVal(n,"top"),u.getVal(n,"left"),u.getVal(n,"align_hor"),u.getVal(n,"align_vert")),s.length>0&&!jQuery(s).hasClass("loaded")){jQuery(s).addClass("loaded");var l=new Image;l.onload=function(){n.originalWidth=this.width,n.originalHeight=this.height,u.updateHtmlLayerPosition(!1,n,u.getVal(n,"top"),u.getVal(n,"left"),u.getVal(n,"align_hor"),u.getVal(n,"align_vert"))},l.onerror=function(){s[0].src=n.image_url=g_revslider_url+"/admin/assets/images/tp-brokenimage.png",u.updateHtmlLayerPosition(!1,n,u.getVal(n,"top"),u.getVal(n,"left"),u.getVal(n,"align_hor"),u.getVal(n,"align_vert"))},l.onabort=function(){u.updateHtmlLayerPosition(!1,n,u.getVal(n,"top"),u.getVal(n,"left"),u.getVal(n,"align_hor"),u.getVal(n,"align_vert"))},l.src=s[0].src}else u.updateHtmlLayerCorners(n),u.updateCrossIconPosition(n);return u.extendSlideHeightBasedOnRows(),!0},t.rebuildLayerIdleProgress=function(caption){if(void 0!==caption){var is_demo=caption.attr("id")!==caption.attr("id").replace("demo_layer_");if(null==caption||0==jQuery(caption).length)return!1;var id=u.getSerialFromID(caption.attr("id")),params=u.getLayer(id,is_demo);if(null==params||0==params)return!1;punchgs.TweenLite.set(caption.find(".tp-mask-wrap"),{clearProps:"all",visibility:"visible",opacity:1}),"column"===params.type&&punchgs.TweenLite.set(caption.find(".column_background").first(),{clearProps:"all",visibility:"visible",opacity:1});var inlayer=jQuery(caption[0].getElementsByClassName("innerslide_layer")[0]),deform=params.deformation,deformidle=params.deformation,deformhover=params["deformation-hover"],ss=params.static_styles,fontcolor=window.RevColor.get(u.getVal(ss,"color")),fonttrans=deform["color-transparency"],bgcolor=window.RevColor.get(deform["background-color"]),bordercolor=deform["border-color"],bordertrans=deform["border-transparency"];if("audio"==params.type)return params.video_data.video_show_visibility?caption.addClass("invisible-audio"):caption.removeClass("invisible-audio"),!1;if(is_demo&&params.alias,null!=inlayer.data("mySplitText")){try{inlayer.data("mySplitText").revert()}catch(e){}"text"!=params.type&&"button"!=params.type||(inlayer[0].innerHTML=params.text,u.makeCurrentLayerRotatable()),inlayer.removeData("mySplitText")}if(Number(bordertrans)<1){var rgb=UniteAdminRev.convertHexToRGB(bordercolor);bordercolor="rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+bordertrans+")"}var mwidth=u.getVal(params,"max_width"),mheight=u.getVal(params,"max_height"),cmode=u.getVal(params,"cover_mode"),loc_position="absolute";switch(params.type){case"image":mwidth=u.getVal(params,"scaleX"),mheight=u.getVal(params,"scaleY");break;case"video":mwidth=!0===params.video_data.cover||!0===params.video_data.fullwidth?"100%":u.getVal(params,"video_width"),mheight=!0===params.video_data.cover||!0===params.video_data.fullwidth?"100%":u.getVal(params,"video_height"),caption.find(".slide_layer_video").css({width:parseInt(mwidth,0)+"px",height:parseInt(mheight,0)+"px"});break;case"row":mwidth="100%","bottom"===u.getVal(params,"align_vert")?caption[0].style.position="absolute":caption[0].style.position="relative","mobile"===params.column_break_at&&"mobile"===t.layout||"tablet"===params.column_break_at&&("tablet"===t.layout||"mobile"===t.layout)||"notebook"===params.column_break_at&&"desktop"!==t.layout?caption.addClass("rev_breakcolumns"):caption.removeClass("rev_breakcolumns");break;case"column":mwidth=100*eval(params.column_size)+"%",mheight="auto",caption[0].style.position="relative",caption[0].style.display="table_cell",caption[0].style.minHeight=parseInt(u.getVal(params,"min_height"),0)+"px",caption[0].style.verticalAlign=deform["vertical-align"],caption[0].cb=void 0===caption[0].cb?caption.find(".column_background"):caption[0].cb,void 0!==params.bgimage_url&&params.bgimage_url.length>0?caption[0].cb.css({backgroundImage:"url('"+params.bgimage_url+"')",backgroundSize:params.layer_bg_size,backgroundPosition:params.layer_bg_position,backgroundRepeat:params.layer_bg_repeat}):caption[0].cb.css({backgroundImage:"",background:bgcolor});break;case"group":switch(mwidth){case"#1/1#":mwidth="100%";break;case"#1/2#":mwidth="50%";break;case"#1/3#":mwidth="33.333333%";break;case"#2/3#":mwidth="66.666666%";break;case"#1/4#":mwidth="25%";break;case"#3/4#":mwidth="75%";break;case"#1/5#":mwidth="20%";break;case"#2/5#":mwidth="40%";break;case"#3/5#":mwidth="60%";break;case"#4/5#":mwidth="80%";break;case"#1/6#":mwidth="16.666666%";break;case"#4/6#":mwidth="66.666666%";break;case"#5/6#":mwidth="83.333333%"}}void 0!==deform.overflow&&"group"===params.type||(deform.overflow="visible"),null==mwidth&&(mwidth=""),null==mheight&&(mheight=""),-1!==params.p_uid&&"column"===u.getObjLayerType(params.p_uid)?punchgs.TweenLite.set(caption,{position:"relative",display:u.getVal(params,"display"),top:"auto",left:"auto",right:"auto",bottom:"auto"}):"column"===params.type?punchgs.TweenLite.set(caption,{position:"absolute",display:"table-cell"}):punchgs.TweenLite.set(caption,{position:"absolute",display:"block"}),"column"===params.type&&(bgcolor="transparent"),mwidth=void 0===cmode||"custom"===cmode?jQuery.isNumeric(mwidth)?mwidth+"px":mwidth.match(/px/g)?parseInt(mwidth,0)+"px":mwidth.match(/%/g)?parseFloat(mwidth)+"%":mwidth:"fullwidth"===cmode||"cover"===cmode||"cover-proportional"===cmode?"100%":mwidth,mheight=void 0===cmode||"custom"===cmode?jQuery.isNumeric(mheight)?mheight+"px":mheight.match(/px/g)?parseInt(mheight,0)+"px":mheight.match(/%/g)?parseFloat(mheight,0)+"%":mheight:"fullheight"===cmode||"cover"===cmode||"cover-proportional"===cmode?"100%":mheight,caption[0].style.width=mwidth,caption[0].style.height=mheight,"row"===params.type&&(caption[0].style.minHeight=mheight);var fw=parseInt(u.getVal(ss,"font-weight"),0)||400,bgimage="";punchgs.TweenLite.set(inlayer,{clearProps:"all",visibility:"visible",opacity:1}),void 0!==params.bgimage_url&&params.bgimage_url.length>0&&"column"!==params.type?inlayer.css({backgroundImage:"url('"+params.bgimage_url+"')",backgroundSize:params.layer_bg_size,backgroundPosition:params.layer_bg_position,backgroundRepeat:params.layer_bg_repeat}):inlayer.css({backgroundImage:"",backgroundSize:params.layer_bg_size,backgroundPosition:params.layer_bg_position,backgroundRepeat:params.layer_bg_repeat});var inlay_object_anim={z:deform.z,scaleX:parseFloat(deform.scalex),scaleY:parseFloat(deform.scaley),textAlign:u.getVal(params,"text-align"),rotationX:parseFloat(deform.xrotate),rotationY:parseFloat(deform.yrotate),rotationZ:parseFloat(params["2d_rotation"]),skewX:parseFloat(deform.skewx),skewY:parseFloat(deform.skewy),transformPerspective:parseFloat(deform.pers),transformOrigin:params.layer_2d_origin_x+"%"+params.layer_2d_origin_y+"%",autoAlpha:deform.opacity,paddingTop:parseInt(u.getVal(params,"padding")[0],0)+"px",paddingRight:parseInt(u.getVal(params,"padding")[1],0)+"px",paddingBottom:parseInt(u.getVal(params,"padding")[2],0)+"px",paddingLeft:parseInt(u.getVal(params,"padding")[3],0)+"px",fontSize:parseInt(u.getVal(ss,"font-size"),0)+"px",lineHeight:parseInt(u.getVal(ss,"line-height"),0)+"px",fontWeight:fw,color:fontcolor,letterSpacing:parseInt(u.getVal(ss,"letter-spacing"),0)+"px",fontStyle:deformidle["font-style"],textDecoration:deform["text-decoration"],textTransform:deform["text-transform"],borderColor:bordercolor,borderRadius:deform["border-radius"][0]+" "+deform["border-radius"][1]+" "+deform["border-radius"][2]+" "+deform["border-radius"][3],borderWidth:deform["border-width"][0]+" "+deform["border-width"][1]+" "+deform["border-width"][2]+" "+deform["border-width"][3],borderStyle:deform["border-style"],whiteSpace:u.getVal(params,"whitespace"),maxWidth:"100%",maxHeight:"100%"};if(bgcolor.indexOf("gradient")>=0?inlay_object_anim.background=bgcolor:inlay_object_anim.backgroundColor=bgcolor,void 0!==deform.blurfilter&&parseInt(deform.blurfilter,0)>0||void 0!==deformhover.blurfilter&&parseInt(deformhover.blurfilter,0)>0){var bf="blur("+parseInt(deform.blurfilter,0)+"px)";inlay_object_anim["-webkit-filter"]=bf,inlay_object_anim.filter=bf}if(void 0!==deform.grayscalefilter&&parseInt(deform.grayscalefilter,0)>0||void 0!==deformhover.grayscalefilter&&parseInt(deformhover.grayscalefilter,0)>0){var gf="grayscale("+parseInt(deform.grayscalefilter,0)+"%)";inlay_object_anim["-webkit-filter"]=void 0===inlay_object_anim["-webkit-filter"]?gf:inlay_object_anim["-webkit-filter"]+" "+gf,inlay_object_anim.filter=void 0===inlay_object_anim.filter?gf:inlay_object_anim.filter+" "+gf}if(void 0!==deform.brightnessfilter&&100!==parseInt(deform.brightnessfilter,0)||void 0!==deformhover.brightnessfilter&&100!=parseInt(deformhover.brightnessfilter,0)){var brf="brightness("+parseInt(deform.brightnessfilter,0)+"%)";inlay_object_anim["-webkit-filter"]=void 0===inlay_object_anim["-webkit-filter"]?brf:inlay_object_anim["-webkit-filter"]+" "+brf,inlay_object_anim.filter=void 0===inlay_object_anim.filter?brf:inlay_object_anim.filter+" "+brf}switch(deformidle["font-family"]&&(inlay_object_anim.fontFamily=deformidle["font-family"]),"group"===params.type&&punchgs.TweenLite.set(inlayer.find(".tp_layer_group_inner_wrapper").first(),{overflow:deform.overflow}),"row"===params.type&&punchgs.TweenLite.set(inlayer.find(".tp_layer_group_inner_wrapper").first(),{minHeight:mheight}),void 0!==params.layer_blend_mode&&jQuery.inArray(params.type,["image","shape","text","svg"]>=0)&&punchgs.TweenLite.set(inlayer.closest(".slide_layer"),{mixBlendMode:params.layer_blend_mode}),params.type){case"shape":case"svg":punchgs.TweenLite.set(caption,{marginTop:parseInt(u.getVal(params,"margin")[0],0)+"px",marginRight:parseInt(u.getVal(params,"margin")[1],0)+"px",marginBottom:parseInt(u.getVal(params,"margin")[2],0)+"px",marginLeft:parseInt(u.getVal(params,"margin")[3],0)+"px"});break;case"column":punchgs.TweenLite.set(caption.find(".column_background"),{borderTopWidth:parseInt(u.getVal(params,"margin")[0],0)+"px",borderRightWidth:parseInt(u.getVal(params,"margin")[1],0)+"px",borderBottomWidth:parseInt(u.getVal(params,"margin")[2],0)+"px",borderLeftWidth:parseInt(u.getVal(params,"margin")[3],0)+"px"}),inlay_object_anim.marginTop=parseInt(u.getVal(params,"margin")[0],0)+"px",inlay_object_anim.marginRight=parseInt(u.getVal(params,"margin")[1],0)+"px",inlay_object_anim.marginBottom=parseInt(u.getVal(params,"margin")[2],0)+"px",inlay_object_anim.marginLeft=parseInt(u.getVal(params,"margin")[3],0)+"px";break;default:punchgs.TweenLite.set(caption,{marginTop:parseInt(u.getVal(params,"margin")[0],0)+"px",marginRight:parseInt(u.getVal(params,"margin")[1],0)+"px",marginBottom:parseInt(u.getVal(params,"margin")[2],0)+"px",marginLeft:parseInt(u.getVal(params,"margin")[3],0)+"px"})}if("image"===params.type&&(params.scaleProportional?(punchgs.TweenLite.set(inlayer.find("img"),{width:"100%",height:"auto"}),inlay_object_anim.width="100%",inlay_object_anim.height="auto"):(punchgs.TweenLite.set(inlayer.find("img"),{width:"100%",height:"100%"}),inlay_object_anim.width="100%",inlay_object_anim.height="100%")),"video"===params.type&&(punchgs.TweenLite.set(inlayer.find(".slide_layer_video"),{width:"100%",height:"100%"}),inlay_object_anim.width="100%",inlay_object_anim.height="100%"),"svg"===params.type&&null!=params.svg){var svgstrokecolor=window.RevColor.get(params.svg["svgstroke-color"])||"transparent",svgstrokewidth=params.svg["svgstroke-width"]||0,svgstrokedasharray=params.svg["svgstroke-dasharray"]||0,svgstrokedashoffset=params.svg["svgstroke-dashoffset"]||0;punchgs.TweenLite.set(inlayer.find("svg"),{fill:fontcolor,stroke:svgstrokecolor,strokeWidth:svgstrokewidth,strokeDasharray:svgstrokedasharray,strokeDashoffset:svgstrokedashoffset}),punchgs.TweenLite.set(inlayer.find("svg path"),{fill:fontcolor})}if(punchgs.TweenLite.set(inlayer,inlay_object_anim),null!=params.inline&&null!=params.inline.idle&&jQuery.each(params.inline.idle,function(e,t){inlayer.css(e,t)}),!0===params.hover){deform=params["deformation-hover"];var fontcolor=window.RevColor.get(deform.color),fonttrans=deform["color-transparency"],bgcolor=window.RevColor.get(deform["background-color"]),bgtrans=deform["background-transparency"],bordercolor=deform["border-color"],bordertrans=deform["border-transparency"];if(Number(bordertrans)<1){var rgb=UniteAdminRev.convertHexToRGB(bordercolor);bordercolor="rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+bordertrans+")"}var tl=new punchgs.TimelineLite;tl.pause();var hoverspeed=parseFloat(deform.speed)/1e3;hoverspeed=0===hoverspeed?.001:hoverspeed;var hover_object_anim={scaleX:parseFloat(deform.scalex),scaleY:parseFloat(deform.scaley),rotationX:parseFloat(deform.xrotate),rotationY:parseFloat(deform.yrotate),rotationZ:parseFloat(deform["2d_rotation"]),skewX:parseFloat(deform.skewx),skewY:parseFloat(deform.skewy),autoAlpha:deform.opacity,color:fontcolor,textDecoration:deform["text-decoration"],borderColor:bordercolor,borderRadius:parseInt(deform["border-radius"][0],0)+"px "+parseInt(deform["border-radius"][1],0)+"px "+parseInt(deform["border-radius"][2],0)+"px "+parseInt(deform["border-radius"][3],0)+"px",borderWidth:parseInt(deform["border-width"][0],0)+"px "+parseInt(deform["border-width"][1],0)+"px "+parseInt(deform["border-width"][2],0)+"px "+parseInt(deform["border-width"][3],0)+"px",borderStyle:deform["border-style"],onComplete:function(){params.inline&&null!=params.inline.hover&&jQuery.each(params.inline.hover,function(e,t){inlayer.css(e,t)})},ease:deform.easing};if(bgcolor.indexOf("gradient")>=0?hover_object_anim.background=bgcolor:hover_object_anim.backgroundColor=bgcolor,void 0!==deform.blurfilter&&parseInt(deform.blurfilter,0)>0||void 0!==deformidle.blurfilter&&parseInt(deformidle.blurfilter,0)>0){var bf="blur("+parseInt(deform.blurfilter,0)+"px)";hover_object_anim["-webkit-filter"]=bf,hover_object_anim.filter=bf}if(void 0!==deform.grayscalefilter&&parseInt(deform.grayscalefilter,0)>0||void 0!==deformidle.grayscalefilter&&parseInt(deformidle.grayscalefilter,0)>0){var gf="grayscale("+parseInt(deform.grayscalefilter,0)+"%)";hover_object_anim["-webkit-filter"]=void 0===hover_object_anim["-webkit-filter"]?gf:hover_object_anim["-webkit-filter"]+" "+gf,hover_object_anim.filter=void 0===hover_object_anim.filter?gf:hover_object_anim.filter+" "+gf}if(void 0!==deform.brightnessfilter&&100!=parseInt(deform.brightnessfilter,0)||void 0!==deformidle.brightnessfilter&&100!=parseInt(deformidle.brightnessfilter,0)){var brf="brightness("+parseInt(deform.brightnessfilter,0)+"%)";hover_object_anim["-webkit-filter"]=void 0===hover_object_anim["-webkit-filter"]?brf:hover_object_anim["-webkit-filter"]+" "+brf,hover_object_anim.filter=void 0===hover_object_anim.filter?brf:hover_object_anim.filter+" "+brf}if(tl.add(punchgs.TweenLite.to(inlayer,hoverspeed,hover_object_anim)),"svg"===params.type&&null!=params.svg){var svgstrokecolor=window.RevColor.get(params.svg["svgstroke-hover-color"])||"transparent",svgstrokewidth=params.svg["svgstroke-hover-width"]||0,svgstrokedasharray=params.svg["svgstroke-hover-dasharray"]||0,svgstrokedashoffset=params.svg["svgstroke-hover-dashoffset"]||0;tl.add(punchgs.TweenLite.to(inlayer.find("svg"),hoverspeed,{fill:fontcolor,stroke:svgstrokecolor,strokeWidth:svgstrokewidth,strokeDasharray:svgstrokedasharray,strokeDashoffset:svgstrokedashoffset,ease:deform.easing}),0),tl.add(punchgs.TweenLite.to(inlayer.find("svg path"),hoverspeed,{fill:fontcolor}),0)}inlayer.data("hoveranim",tl),void 0!==caption.data("hoverexist")&&!1!==caption.data("hoverexist")||(caption.hover(function(){if(jQuery("#rs-style-tab-button").hasClass("selected")&&jQuery("#toggle-idle-hover").hasClass("idleisselected")){var e=jQuery(this).find(".innerslide_layer").first();if(e.length>0&&null!=e.data("hoveranim"))e.data("hoveranim").play(0)}},function(){if(jQuery("#rs-style-tab-button").hasClass("selected")&&jQuery("#toggle-idle-hover").hasClass("idleisselected")){var e=jQuery(this).find(".innerslide_layer").first();if(e.length>0&&null!=e.data("hoveranim"))e.data("hoveranim").reverse()}}),caption.data("hoverexist",!0)),document.getElementById("toggle-idle-hover").classList.contains("hoverisselected")?tl.seek(tl.endTime()):(tl.seek(0),tl.pause(0),setTimeout(function(){tl.pause(0)},109))}else caption.unbind("hover"),caption.data("hoverexist",!1)}},t.animateCurrentSelectedLayer=function(e){u.removeCurrentLayerRotatable();var t=jQuery(".slide_layer.layer_selected").find(".innerslide_layer").first();if(0==t.length)return!1;if(null==t.data("tl"))var a=new punchgs.TimelineLite;else a=t.data("tl");a.clear(),a.kill(),a.pause(),t.data("inanim",theLayerInAnimation(t)),t.data("outanim",theLayerOutAnimation(t)),a.addLabel("inanimation"),a.add(t.data("inanim"),"=+0.2"),a.addLabel("outanimation"),a.add(punchgs.TweenLite.fromTo(jQuery("#startanim_timerunner"),1,{x:0,y:0},{y:41}),"outanimation"),a.add(punchgs.TweenLite.fromTo(jQuery("#startanim_timerunnerbox"),1,{x:0,y:0},{y:41}),"outanimation"),a.add(punchgs.TweenLite.fromTo(jQuery("#endanim_timerunnerbox"),1,{x:0,y:-41},{x:0,y:0}),"outanimation"),a.add(punchgs.TweenLite.fromTo(jQuery("#endanim_timerunner"),1,{x:0,y:-41},{y:0}),"outanimation"),a.add(punchgs.TweenLite.set(jQuery("#endanim_wrapper"),{width:67,autoAlpha:1}),"outanimation"),a.add(t.data("outanim")),a.eventCallback("onComplete",function(){a.restart()}),a.play(),t.data("tl",a)};var checkAnimValue=function(e,t,a,r,i){var o=e,n=t;if(jQuery.isNumeric(parseFloat(o)))return parseFloat(o);if(void 0===o||"inherit"===o)return n;if(o.split("{").length>1){var s=o.split(",");if(max=s[1].split("}")[0],s=s[0].split("{")[1],void 0!==i&&i>1){o="["+(parseInt(Math.random()*(max-s),0)+parseInt(s,0));for(var l=0;l<i;l++)o=o+"|"+(parseInt(Math.random()*(max-s),0)+parseInt(s,0));o+="]"}else o=Math.random()*(max-s)+s;return o}var d=jQuery("#divLayers").width(),c=jQuery("#divLayers").height(),u=a.closest(".slide_layer"),m=u.width(),p=u.height(),f=u.position();if(o.match(/%]/g))o=o.split("[")[1].split("]")[0],"horizontal"==r?o=m*parseInt(o,0)/100:"vertical"==r&&(o=p*parseInt(o,0)/100);else switch(o.toLowerCase()){case"top":case"stage_top":o=0-p-f.top;break;case"bottom":case"stage_bottom":o=c;break;case"stage_left":case"left":o=0-m-f.left;break;case"right":case"stage_right":o=d;break;case"center":case"stage_center":o=d/2-f.left-m/2;break;case"middle":case"stage_middle":o=c/2-f.top-p/2;break;case"layer_top":o=0-p;break;case"layer_bottom":o=p;break;case"layer_left":o=0-m;break;case"layer_right":o=m;break;case"layer_center":o=m/2;break;case"layer_middle":o=p/2}return o};function checkSFXAnimations(e,t,a,r,i,o){if(void 0!==t&&t.indexOf("block")>=0){var n=new Object;switch(0===a.find(".tp-blockmask_in").length&&(a.append('<div class="tp-blockmask_in"></div>'),a.append('<div class="tp-blockmask_out"></div>')),n.ft=[{scaleY:1,scaleX:0,transformOrigin:"0% 50%"},{scaleY:1,scaleX:1,ease:i,immediateRender:!1}],n.t={scaleY:1,scaleX:0,transformOrigin:"100% 50%",ease:i,immediateRender:!1},n.bmask_in=a.find(".tp-blockmask_in"),n.bmask_out=a.find(".tp-blockmask_out"),n.type="block",t){case"blocktoleft":case"blockfromright":n.ft[0].transformOrigin="100% 50%",n.t.transformOrigin="0% 50%";break;case"blockfromtop":case"blocktobottom":n.ft=[{scaleX:1,scaleY:0,transformOrigin:"50% 0%"},{scaleX:1,scaleY:1,ease:i,immediateRender:!1}],n.t={scaleX:1,scaleY:0,transformOrigin:"50% 100%",ease:i,immediateRender:!1};break;case"blocktotop":case"blockfrombottom":n.ft=[{scaleX:1,scaleY:0,transformOrigin:"50% 100%"},{scaleX:1,scaleY:1,ease:i,immediateRender:!1}],n.t={scaleX:1,scaleY:0,transformOrigin:"50% 0%",ease:i,immediateRender:!1}}return n.ft[1].overwrite="auto",n.t.overwrite="auto",n}return a.find(".tp-blockmask").remove(),!1}function shuffleArray(e){for(var t,a,r=e.length;0!==r;)a=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[a],e[a]=t;return e}function getSplitTextDirs(e,t){var a=new Array;switch(t){case"forward":case"random":for(var r=0;r<=e;r++)a.push(r);"random"===t&&(a=shuffleArray(a));break;case"backward":for(r=0;r<=e;r++)a.push(e-r);break;case"middletoedge":var i=Math.ceil(e/2),o=i-1,n=i+1;a.push(i);for(r=0;r<i;r++)o>=0&&a.push(o),n<=e&&a.push(n),o--,n++;break;case"edgetomiddle":for(o=e,n=0,r=0;r<=Math.floor(e/2);r++)a.push(o),n<o&&a.push(n),o--,n++}return a}function getCycles(e){var t={};for(var a in e)"string"==typeof e[a]&&e[a].indexOf("|")>=0&&(void 0===t[a]&&(t[a]={index:0}),t[a].values=e[a].replace("[","").replace("]","").split("|"),t[a].len=t[a].values.length-1);return t}function theLayerInAnimation(e){var t=e.closest(".slide_layer"),a=u.getSerialFromID(t.attr("id")),r=new Object;r=jQuery.extend(!0,{},r,u.getLayer(a)),0==t.children(".tp-mask-wrap").length&&t.wrapInner('<div style="width:100%;height:100%;position:relative;" class="tp-mask-wrap"></div>');var i=t.find(".tp-mask-wrap"),o=(r.animation,t.hasClass("slide_layer_type_column")?t.find(".column_background").first():void 0),n=r.frames.frame_0.speed/1e3,s=r.frames.frame_0.easing,l=r.frames.frame_0.splitdelay/100,d=r.frames.frame_0.split,c=r.frames.frame_999.split,m=e,p=new Object,f=new Object,h=r.frames.frame_0.split_direction;if(p.transx=0,p.transy=0,p.transz=0,p.rotatex=0,p.rotatey=0,p.rotatez=0,p.scalex=1,p.scaley=1,p.skewx=0,p.skewy=0,p.opac=0,p.tper=parseFloat(r.deformation.pers),p.origin="center,center",f.transx=0,f.transy=0,f.transz=parseFloat(r.deformation.z),f.rotatex=parseFloat(r.deformation.xrotate),f.rotatey=parseFloat(r.deformation.yrotate),f.rotatez=parseFloat(r["2d_rotation"]),f.scalex=parseFloat(r.deformation.scalex),f.scaley=parseFloat(r.deformation.scaley),f.skewx=parseFloat(r.deformation.skewx),f.skewy=parseFloat(r.deformation.skewy),f.opac=parseFloat(r.deformation.opacity),f.tper=parseFloat(r.deformation.pers),p["-webkit-filter"]="",p.filter="",f["-webkit-filter"]="",f.filter="",void 0!==r.deformation.blurfilter&&parseInt(r.deformation.blurfilter,0)>0||void 0!==r.blurfilter_start&&parseInt(r.blurfilter_start,0)>0){var y="blur("+parseInt(r.deformation.blurfilter,0)+"px)",g="inherit"===r.blurfilter_start?y:"blur("+parseInt(r.blurfilter_start,0)+"px)";p["-webkit-filter"]=g,p.filter=g,f["-webkit-filter"]=y,f.filter=y}if(void 0!==r.deformation.grayscalefilter&&parseInt(r.deformation.grayscalefilter,0)>0||void 0!==r.grayscalefilter_start&&parseInt(r.grayscalefilter_start,0)>0){var v="grayscale("+parseInt(r.deformation.grayscalefilter,0)+"%)",b="inherit"===r.grayscalefilter_start?v:"grayscale("+parseInt(r.grayscalefilter_start,0)+"%)";p["-webkit-filter"]=""===p["-webkit-filter"]?b:p["-webkit-filter"]+" "+b,p.filter=""===p.filter?b:p.filter+" "+b,f["-webkit-filter"]=""===f["-webkit-filter"]?v:f["-webkit-filter"]+" "+v,f.filter=""===f.filter?v:f.filter+" "+v}if(void 0!==r.deformation.brightnessfilter&&100!=parseInt(r.deformation.brightnessfilter,0)||void 0!==r.brightnessfilter_start&&100!=parseInt(r.brightnessfilter_start,0)){var _="brightness("+parseInt(r.deformation.brightnessfilter,0)+"%)",w="inherit"===r.brightnessfilter_start?_:"brightness("+parseInt(r.brightnessfilter_start,0)+"%)";p["-webkit-filter"]=""===p["-webkit-filter"]?w:p["-webkit-filter"]+" "+w,p.filter=""===p.filter?w:p.filter+" "+w,f["-webkit-filter"]=""===f["-webkit-filter"]?_:f["-webkit-filter"]+" "+_,f.filter=""===f.filter?_:f.filter+" "+_}var k=r.layer_2d_origin_x+"%"+" "+(r.layer_2d_origin_y+"%");if(null!=e.data("mySplitText")&&("none"!=d||"none"!=c))try{e.data("mySplitText").revert()}catch(e){}switch("chars"==d||"words"==d||"lines"==d||"chars"==c||"words"==c||"lines"==c?e.find("a").length>0?e.data("mySplitText",new SplitText(e.find("a"),{type:"lines,words,chars"})):e.data("mySplitText",new SplitText(e,{type:"lines,words,chars"})):e.data("mySplitText","none"),d){case"chars":m=e.data("mySplitText").chars;break;case"words":m=e.data("mySplitText").words;break;case"lines":m=e.data("mySplitText").lines}m.length;punchgs.TweenLite.killTweensOf(e,!1),punchgs.TweenLite.killTweensOf(m,!1),punchgs.TweenLite.set(i,{clearProps:"transform"}),punchgs.TweenLite.set(e,{clearProps:"transform"}),punchgs.TweenLite.set(m,{clearProps:"transform"});var x=new punchgs.TimelineLite,L=new punchgs.TimelineLite;m!=e&&x.add(punchgs.TweenLite.set(e,{scaleX:f.scalex,scaleY:f.scaley,rotationX:f.rotatex,rotationY:f.rotatey,rotationZ:f.rotatez,x:f.transx,y:f.transy,z:f.transz+1,skewX:f.skewx,skewY:f.skewy,transformPerspective:f.tper,transformOrigin:k,autoAlpha:f.opac,overwrite:"all"})),e.data("timer")&&clearTimeout(e.data("timer")),e.data("timera")&&clearTimeout(e.data("timera"));var j=checkSFXAnimations(r,r.frames.frame_0.sfx_effect,i,l,s,n);if(!1!==j)"block"===j.type&&(j.ft[0].background=window.RevColor.get(r.frames.frame_0.sfxcolor),x.add(punchgs.TweenLite.fromTo(j.bmask_in,n/2,j.ft[0],j.ft[1],l)),x.add(punchgs.TweenLite.fromTo(j.bmask_in,n/2,j.ft[1],j.t,l+n/2)),x.add(L.set(m,{clearProps:"transform"}),0),x.add(L.staggerFromTo(m,.05,{x:0,y:0,scale:1,autoAlpha:0},{x:0,y:0,autoAlpha:1,delay:n/2},l),0));else{p.transx=checkAnimValue(r.x_start,f.transx,e,"horizontal",m.length),p.transy=checkAnimValue(r.y_start,f.transy,e,"vertical",m.length),p.transz=checkAnimValue(r.z_start,f.transz,e,void 0,m.length),p.rotatex=checkAnimValue(r.x_rotate_start,f.rotatex,e,void 0,m.length),p.rotatey=checkAnimValue(r.y_rotate_start,f.rotatey,e,void 0,m.length),p.rotatez=checkAnimValue(r.z_rotate_start,f.rotatez,e,void 0,m.length),p.scalex=checkAnimValue(r.scale_x_start,f.scalex,e,void 0,m.length),p.scaley=checkAnimValue(r.scale_y_start,f.scaley,e,void 0,m.length),p.skewx=checkAnimValue(r.skew_x_start,f.skewx,e,void 0,m.length),p.skewy=checkAnimValue(r.skew_y_start,f.skewy,e,void 0,m.length),p.opac=checkAnimValue(r.opacity_start,f.opac,e,void 0,m.length),p.tper=r.deformation.pers,x.add(L.set(m,{clearProps:"transform"}),0);var T={scaleX:p.scalex,scaleY:p.scaley,rotationX:p.rotatex,rotationY:p.rotatey,rotationZ:p.rotatez,x:p.transx,y:p.transy,z:p.transz,skewX:p.skewx,skewY:p.skewy,transformPerspective:p.tper,transformOrigin:k,autoAlpha:p.opac,"-webkit-filter":p["-webkit-filter"],filter:p.filter},Q={scaleX:f.scalex,scaleY:f.scaley,rotationX:f.rotatex,rotationY:f.rotatey,rotationZ:f.rotatez,x:f.transx,y:f.transy,z:f.transz,skewX:f.skewx,skewY:Number(f.skewy),transformPerspective:f.tper,transformOrigin:k,ease:s,autoAlpha:f.opac,overwrite:"all",force3D:"auto","-webkit-filter":f["-webkit-filter"],filter:f.filter};if(r.frames.frame_0.use_text_c&&(T.color=r.frames.frame_0.text_c,Q.color=window.RevColor.get(u.getVal(r.static_styles,"color"))),r.frames.frame_0.use_bg_c&&(T.backgroundColor=r.frames.frame_0.bg_c,Q.backgroundColor=window.RevColor.get(r.deformation["background-color"])),m.length>1){var I=getSplitTextDirs(m.length-1,h),S={from:getCycles(jQuery.extend({},T,!0)),to:getCycles(jQuery.extend({},Q,!0))};for(var A in m){var C=jQuery.extend({},T,!0),E=jQuery.extend({},Q,!0);for(var z in S.from)C[z]=parseInt(S.from[z].values[S.from[z].index],0),S.from[z].index=S.from[z].index<S.from[z].len?S.from[z].index+1:0;x.add(L.fromTo(m[I[A]],n,C,E,l*A),0)}}else x.add(L.staggerFromTo(m,n,jQuery.extend({},T,!0),jQuery.extend({},Q,!0),l))}if(null!=o&&x.add(punchgs.TweenLite.fromTo(o,n,{scaleX:p.scalex,scaleY:p.scaley,rotationX:p.rotatex,rotationY:p.rotatey,rotationZ:p.rotatez,x:p.transx,y:p.transy,z:p.transz,skewX:p.skewx,skewY:p.skewy,transformPerspective:p.tper,transformOrigin:k,autoAlpha:p.opac},{scaleX:f.scalex,scaleY:f.scaley,rotationX:f.rotatex,rotationY:f.rotatey,rotationZ:f.rotatez,x:f.transx,y:f.transy,z:f.transz,skewX:f.skewx,skewY:Number(f.skewy),transformPerspective:f.tper,transformOrigin:k,ease:s,autoAlpha:f.opac,overwrite:"all",force3D:"auto"}),0),r.mask_start||x.add(punchgs.TweenLite.set(i,{overflow:"visible"}),0),r.mask_start){var B=new Object;B.x=checkAnimValue(r.mask_x_start,r.mask_x_start,e,"horizontal"),B.y=checkAnimValue(r.mask_y_start,r.mask_y_start,e,"vertical"),x.add(punchgs.TweenLite.fromTo(i,n,{overflow:"hidden",x:B.x,y:B.y},{x:0,y:0,ease:s}),0)}return r.mask_start||r.mask_end?i.addClass("tp-showmask"):i.removeClass("tp-showmask"),e.data("startanimobj",p),x.add(punchgs.TweenLite.fromTo(jQuery("#startanim_wrapper"),L.totalDuration(),{autoAlpha:1,width:0},{width:67,ease:s}),0),m!=e&&x.add(punchgs.TweenLite.fromTo(e.parent(),.2,{autoAlpha:0},{autoAlpha:1}),0),x}function theLayerOutAnimation(e){var t=e.closest(".slide_layer"),a=u.getSerialFromID(t.attr("id")),r=new Object;r=jQuery.extend(!0,{},r,u.getLayer(a));var i=t.find(".tp-mask-wrap"),o=t.hasClass("slide_layer_type_column")?t.find(".column_background").first():void 0,n=r.frames.frame_999.animation,s=r.frames.frame_999.speed/1e3,l=r.frames.frame_999.easing,d=r.frames.frame_999.splitdelay/100,c=r.frames.frame_999.split,m=e;if(theanim=new Object,theresult=new Object,originx=r.layer_2d_origin_x+"%",originy=r.layer_2d_origin_y+"%",origin=originx+" "+originy,$splitdir=r.frames.frame_999.split_direction,l="nothing"==l?r.frames.frame_999.easing:l,theanim.transx=0,theanim.transy=0,theanim.transz=0,theanim.rotatex=0,theanim.rotatey=0,theanim.rotatez=0,theanim.scalex=1,theanim.scaley=1,theanim.skewx=0,theanim.skewy=0,theanim.opac=0,theanim.tper=parseFloat(r.deformation.pers),theresult.transx=0,theresult.transy=0,theresult.transz=parseFloat(r.deformation.z),theresult.rotatex=parseFloat(r.deformation.xrotate),theresult.rotatey=parseFloat(r.deformation.yrotate),theresult.rotatez=parseFloat(r["2d_rotation"]),theresult.scalex=parseFloat(r.deformation.scalex),theresult.scaley=parseFloat(r.deformation.scaley),theresult.skewx=parseFloat(r.deformation.skewx),theresult.skewy=parseFloat(r.deformation.skewy),theresult.opac=parseFloat(r.deformation.opacity),theresult.tper=parseFloat(r.deformation.pers),theanim["-webkit-filter"]="",theanim.filter="",theresult["-webkit-filter"]="",theresult.filter="",void 0!==r.deformation.blurfilter&&parseInt(r.deformation.blurfilter,0)>0||void 0!==r.blurfilter_start&&parseInt(r.blurfilter_start,0)>0){var p="blur("+parseInt(r.deformation.blurfilter,0)+"px)",f="inherit"===r.blurfilter_end?p:"blur("+parseInt(r.blurfilter_end,0)+"px)";theanim["-webkit-filter"]=f,theanim.filter=f,theresult["-webkit-filter"]=p,theresult.filter=p}if(void 0!==r.deformation.grayscalefilter&&parseInt(r.deformation.grayscalefilter,0)>0||void 0!==r.grayscalefilter_end&&parseInt(r.grayscalefilter_end,0)>0){var h="grayscale("+parseInt(r.deformation.grayscalefilter,0)+"%)",y="inherit"===r.grayscalefilter_end?h:"grayscale("+parseInt(r.grayscalefilter_end,0)+"%)";theanim["-webkit-filter"]=""===theanim["-webkit-filter"]?y:theanim["-webkit-filter"]+" "+y,theanim.filter=""===theanim.filter?y:theanim.filter+" "+y,theresult["-webkit-filter"]=""===theresult["-webkit-filter"]?h:theresult["-webkit-filter"]+" "+h,theresult.filter=""===theresult.filter?h:theresult.filter+" "+h}if(void 0!==r.deformation.brightnessfilter&&100!=parseInt(r.deformation.brightnessfilter,0)||void 0!==r.brightnessfilter_end&&100!=parseInt(r.brightnessfilter_end,0)){var g="brightness("+parseInt(r.deformation.brightnessfilter,0)+"%)",v="inherit"===r.brightnessfilter_end?g:"brightness("+parseInt(r.brightnessfilter_end,0)+"%)";theanim["-webkit-filter"]=""===theanim["-webkit-filter"]?v:theanim["-webkit-filter"]+" "+v,theanim.filter=""===theanim.filter?v:theanim.filter+" "+v,theresult["-webkit-filter"]=""===theresult["-webkit-filter"]?g:theresult["-webkit-filter"]+" "+g,theresult.filter=""===theresult.filter?g:theresult.filter+" "+g}switch(c){case"chars":m=e.data("mySplitText").chars;break;case"words":m=e.data("mySplitText").words;break;case"lines":m=e.data("mySplitText").lines}m.length;var b=new punchgs.TimelineLite,_=new punchgs.TimelineLite;null==n&&(n="auto"),r.mask_end&&("auto"!==n||r.mask_start)||b.add(punchgs.TweenLite.set(i,{overflow:"visible"}));var w=checkSFXAnimations(r,r.frames.frame_999.sfx_effect,i,d,l,s);if(!1!==w)"block"===w.type&&(w.ft[0].background=window.RevColor.get(r.frames.frame_999.sfxcolor),b.add(punchgs.TweenLite.fromTo(w.bmask_out,s/2,w.ft[0],w.ft[1],d)),b.add(punchgs.TweenLite.fromTo(w.bmask_out,s/2,w.ft[1],w.t,d+s/2)),b.add(_.set(m,{clearProps:"transform"}),0),b.add(_.staggerTo(m,.05,{x:0,y:0,autoAlpha:0,delay:s/2},d),0));else{if("auto"===n)theanim=e.data("startanimobj");else{r.mask_end||"auto"===n&&r.mask_start;theanim.transx=checkAnimValue(r.x_end,theresult.transx,e,"horizontal",m.length),theanim.transy=checkAnimValue(r.y_end,theresult.transy,e,"vertical",m.length),theanim.transz=checkAnimValue(r.z_end,theresult.transz,e,void 0,m.length),theanim.rotatex=checkAnimValue(r.x_rotate_end,theresult.rotatex,e,void 0,m.length),theanim.rotatey=checkAnimValue(r.y_rotate_end,theresult.rotatey,e,void 0,m.length),theanim.rotatez=checkAnimValue(r.z_rotate_end,theresult.rotatez,e,void 0,m.length),theanim.scalex=checkAnimValue(r.scale_x_end,theresult.scalex,e,void 0,m.length),theanim.scaley=checkAnimValue(r.scale_y_end,theresult.scaley,e,void 0,m.length),theanim.skewx=checkAnimValue(r.skew_x_end,theresult.skewx,e,void 0,m.length),theanim.skewy=checkAnimValue(r.skew_y_end,theresult.skewy,e,void 0,m.length),theanim.opac=checkAnimValue(r.opacity_end,theresult.opac,e,void 0,m.length),theanim.tper=r.deformation.pers}b.add(_.staggerTo(m,.001,{"-webkit-filter":theresult["-webkit-filter"],filter:theresult.filter},d-.001));var k={scaleX:theanim.scalex,scaleY:theanim.scaley,rotationX:theanim.rotatex,rotationY:theanim.rotatey,rotationZ:theanim.rotatez,x:theanim.transx,y:theanim.transy,z:theanim.transz+1,skewX:theanim.skewx,skewY:theanim.skewy,opacity:theanim.opac,transformPerspective:theanim.tper,transformOrigin:origin,ease:l,"-webkit-filter":theanim["-webkit-filter"],filter:theanim.filter};if(r.frames.frame_999.use_text_c&&(k.color=r.frames.frame_999.text_c),r.frames.frame_999.use_bg_c&&(k.backgroundColor=r.frames.frame_999.bg_c),m.length>1){var x=getSplitTextDirs(m.length-1,$splitdir),L={to:getCycles(jQuery.extend({},k,!0))};for(var j in m){var T=jQuery.extend({},k,!0);for(var Q in L.to)T[Q]=parseInt(L.to[Q].values[L.to[Q].index],0),L.to[Q].index=L.to[Q].index<L.to[Q].len?L.to[Q].index+1:0;b.add(_.to(m[x[j]],s,T,d*j),0)}}else b.add(_.staggerTo(m,s,jQuery.extend({},k,!0),d))}if(null!=o&&b.add(punchgs.TweenLite.to(o,s,{scaleX:theanim.scalex,scaleY:theanim.scaley,rotationX:theanim.rotatex,rotationY:theanim.rotatey,rotationZ:theanim.rotatez,x:theanim.transx,y:theanim.transy,z:theanim.transz+1,skewX:theanim.skewx,skewY:theanim.skewy,opacity:theanim.opac,transformPerspective:theanim.tper,transformOrigin:origin,ease:l},d),0),r.mask_end)(I=new Object).x=checkAnimValue(r.mask_x_end,r.mask_x_end,e),I.y=checkAnimValue(r.mask_y_end,r.mask_y_end,e),b.add(punchgs.TweenLite.to(i,s,{x:I.x,y:I.y,ease:l,overflow:"hidden"},d),0);else if("auto"===n&&r.mask_start){var I;(I=new Object).x=checkAnimValue(r.mask_x_start,r.mask_x_start,e),I.y=checkAnimValue(r.mask_y_start,r.mask_y_start,e),b.add(punchgs.TweenLite.to(i,s,{x:I.x,y:I.y,ease:l},d),0)}return b.add(punchgs.TweenLite.fromTo(jQuery("#endanim_timerunnerbox"),_.totalDuration(),{x:0},{x:-67,ease:l}),0),b.add(punchgs.TweenLite.fromTo(jQuery("#endanim_timerunner"),_.totalDuration(),{x:0},{x:-67,ease:l}),0),m!=e&&b.add(punchgs.TweenLite.fromTo(e.parent(),.2,{autoAlpha:1},{autoAlpha:0}),_.totalDuration()-.2),b}var initSlideDuration=function(){var e=jQuery("#delay").val();null!=e&&0!=e&&"undefined"!=e||(e=g_slideTime),jQuery("#mastertimer-maxtime").css({left:e/10})};t.masterTimerPositionChange=function(e){var a,r=jQuery(document.getElementById("mastertimer-position")),i=(r[0].getBoundingClientRect().left-document.getElementById("master-rightheader").getBoundingClientRect().left+t.timercorrectur)/100,o=jQuery(document.getElementById("divbgholder")).data("slidetimeline");if(r[0].className=r[0].classList.contains("hovering")?r[0].className:r[0].className+" hovering",i<=0&&("wasnotidle"==r.data("wasidle")||null==r.data("wasidle"))&&(t.stopAllLayerAnimation(),r.data("wasidle","wasidle"),null!=r.data("tl")&&r.data("tl").kill(),null!=o&&(o.stop(),o.seek(1e5)),t.allLayerToIdle()),i>0&&("wasidle"==r.data("wasidle")||null==r.data("wasidle"))&&(r.data("wasidle","wasnotidle"),createGlobalTimeline(!0),document.getElementById("mastertimer-playpause-wrapper").innerHTML='<i class="eg-icon-play"></i><span>PLAY</span>',r[0].className=r[0].classList.contains("inaction")?r[0].className:r[0].className+" inaction"),i>0&&"wasnotidle"==r.data("wasidle")){e&&createGlobalTimeline(!1);var n=r.data("tl");n.stop(),o.stop(),n.seek(i),o.seek(i)}i>0?((a=document.getElementById("mastertimer-poscurtime")).className=a.classList.contains("movedalready")?a.className:a.className+" movedalready",a.innerHTML=t.convToTime(100*i),r.removeClass("timerinidle")):(a=document.getElementById("mastertimer-poscurtime")).classList.contains("movedalready")&&(a.innerHTML="Idle",r.addClass("timerinidle"));r.trigger("poschanged")},t.convToTime=function(e){var t=Math.floor(e/6e3),a=Math.floor(Math.ceil(e-6e3*t)/100),r=Math.round(e-100*a-6e3*t);return 0==t?t="00":t<10&&(t="0"+t.toString()),0==a?a="00":a<10&&(a="0"+a.toString()),0==r?r="00":r<10&&(r="0"+r.toString()),t.toString()+":"+a.toString()+"."+r.toString()},t.allLayerToIdle=function(e){var a=null!=e&&null!=e.type?"slide_layer_type_"+e.type:"slide_layer";elements=document.getElementsByClassName(a);for(var r=0;r<elements.length;r++)t.rebuildLayerIdle(jQuery(elements[r]))};var initMasterTimer=function(){jQuery("#master-rightheader");function e(){__coffset=parseInt(jQuery("#layers-right").offset().left,0)}jQuery("#mastertimer-position").on("poschanged",function(){var e=jQuery(this),a=Math.round(e.position().left+t.timercorrectur),r=t.convToTime(a);a<0&&(r="IDLE"),document.getElementById("master-timer-time").innerHTML=r}),jQuery("#mastertimer-backtoidle").click(function(){jQuery("#mastertimer-position").removeClass("inaction"),document.getElementById("mastertimer-playpause-wrapper").innerHTML='<i class="eg-icon-play"></i><span>PLAY</span>',document.getElementById("master-timer-time").innerHTML="IDLE",t.stopAllLayerAnimation();var e=jQuery("#mastertimer-position"),a=jQuery("#divbgholder").data("slidetimeline");e.css({left:"-15px"}),null!=e.data("tl")&&e.data("tl").kill(),null!=a&&(a.stop(),a.seek(1e5)),t.allLayerToIdle()}),jQuery("#divLayers").hover(function(){var e=jQuery(document.getElementById("mastertimer-position")),a=document.getElementById("mastertimer-playpause-wrapper"),r=jQuery(document.getElementById("divbgholder")).data("slidetimeline");null!=e.data("tl")&&e.data("tl").stop(),null!=r&&(r.stop(),r.seek(1e5)),e.removeClass("inaction"),a.innerHTML='<i class="eg-icon-play"></i><span>PLAY</span>',e.hasClass("hovering")&&(e.removeClass("hovering"),t.stopAllLayerAnimation(),t.allLayerToIdle(),jQuery("#layeranimation-playpause").hasClass("inpuase")||t.checkAnimationTab()&&t.animateCurrentSelectedLayer(1),jQuery("#loopanimation-playpause").hasClass("inpuase")||t.checkLoopTab()&&t.animateCurrentSelectedLayer(2))}),jQuery("#mastertimer-wrapper").hover(function(){jQuery(this).hasClass("overme")||(jQuery(this).addClass("overme"),t.masterTimerPositionChange(!0))},function(){jQuery(this).removeClass("overme")}),jQuery("#mastertimer-position").draggable({axis:"x",start:function(e,a){punchgs.TweenLite.set(document.getElementById("mastertimer-curtime"),{autoAlpha:0,x:-3,y:-10}),punchgs.TweenLite.set(document.getElementById("mastertimer-curtime-b"),{autoAlpha:0}),t.deactivatePerfectScrollBars()},drag:function(e,a){a.position.left=Math.max(-15,a.position.left),t.masterTimerPositionChange(!1)},stop:function(e,t){punchgs.TweenLite.set(document.getElementById("mastertimer-curtime"),{autoAlpha:1,x:-1,y:0,ease:punchgs.Power2.easeInOut}),punchgs.TweenLite.set(document.getElementById("mastertimer-curtime-b"),{autoAlpha:1})}}),jQuery("#mastertimer-linear").click(function(e){var a=jQuery("#mastertimer-linear").offset().left,r=jQuery("#master-rightheader").scrollLeft();jQuery("#mastertimer-position").css({left:e.pageX-a+r+"px"}),t.masterTimerPositionChange()}),jQuery("#mastertimer-maxtime").draggable({axis:"x",containment:"#master-rightheader",create:function(e,a){t.mainMaxTimeLeft=jQuery("#mastertimer-maxtime").position().left,document.getElementById("mastertimer-maxcurtime").innerHTML=t.convToTime(t.mainMaxTimeLeft),t.setIdleZones()},start:function(e,a){punchgs.TweenLite.set(document.getElementById("mastertimer-curtime"),{autoAlpha:0,x:-3,y:-10}),punchgs.TweenLite.set(document.getElementById("mastertimer-curtime-b"),{autoAlpha:0}),document.getElementById("mastertimer-maxcurtime").innerHTML=t.convToTime(t.mainMaxTimeLeft),t.setIdleZones(),t.deactivatePerfectScrollBars()},drag:function(e,a){t.mainMaxTimeLeft=a.position.left,document.getElementById("mastertimer-maxcurtime").innerHTML=t.convToTime(t.mainMaxTimeLeft),document.getElementById("delay").value=10*t.mainMaxTimeLeft,t.setIdleZones(),t.compareLayerEndsVSSlideEnd(),t.setSlideTransitionTimerBar()},stop:function(e,a){punchgs.TweenLite.set(document.getElementById("mastertimer-curtime"),{autoAlpha:1,x:-1,y:0,ease:punchgs.Power2.easeInOut}),punchgs.TweenLite.set(document.getElementById("mastertimer-curtime-b"),{autoAlpha:1}),t.mainMaxTimeLeft=a.position.left,document.getElementById("mastertimer-maxcurtime").innerHTML=t.convToTime(t.mainMaxTimeLeft),document.getElementById("delay").value=10*t.mainMaxTimeLeft,t.setIdleZones(),g_slideTime=10*t.mainMaxTimeLeft,u.setMaintime(g_slideTime),t.compareLayerEndsVSSlideEnd(),t.rerenderAllAudioMap(),t.setSlideTransitionTimerBar()}}),__ctime=jQuery("#mastertimer-curtime"),__ctimeb=jQuery("#mastertimer-curtime-b"),__ctimei=jQuery("#mastertimer-curtimeinner"),jQuery(window).resize(function(){e()}),e(),__ctime.data("offset",0),jQuery(".master-rightcell").on("mousemove",function(e){var a=e.pageX-__coffset-jQuery(document.getElementById("master-rightheader")).data("left");0==__ctime.data("offset")&&(punchgs.TweenLite.set(__ctime,{left:a}),punchgs.TweenLite.set(__ctimeb,{left:a+15}),__ctimei[0].innerHTML=t.convToTime(a-10))}),jQuery("#mastertimer-playpause-wrapper").click(function(){var e=jQuery(this);if(punchgs.TweenLite.to(jQuery("#mastertimer-poscurtime"),.3,{autoAlpha:0,x:-3,y:-10,ease:punchgs.Power2.easeInOut}),e.find(".eg-icon-pause").length>0){document.getElementById("mastertimer-playpause-wrapper").innerHTML='<i class="eg-icon-play"></i><span>PLAY</span>',t.stopAllLayerAnimation(),null!=(a=jQuery("#mastertimer-position")).data("tl")&&a.data("tl").kill()}else{createGlobalTimeline(!0),document.getElementById("mastertimer-playpause-wrapper").innerHTML='<i class="eg-icon-pause"></i><span>PAUSE</span>',jQuery("#mastertimer-position").addClass("inaction");var a,r=(a=jQuery("#mastertimer-position")).data("tl"),i=jQuery("#divbgholder").data("slidetimeline"),o=a.position().left/100;r.play(o),i.play(o),jQuery("#divbgholder").data("slidetimeline").play(o),r.eventCallback("onComplete",function(){r.play(0),i.play(0)}),r.eventCallback("onUpdate",function(){a.css({left:100*r.time()}),a.trigger("poschanged")})}})};function createGlobalTimeline(e,a){e&&t.stopAllLayerAnimation();var r=jQuery("#mastertimer-position");null!=r.data("tl")&&r.data("tl").kill();var i=new punchgs.TimelineLite;i.pause(),jQuery(" .slide_layer .innerslide_layer").each(function(){var e=jQuery(this);e.data("inanim",theLayerInAnimation(e)),e.data("outanim",theLayerOutAnimation(e));var t=u.getSerialFromID(e.closest(".slide_layer").attr("id"));params=u.getLayer(t),i.add(e.data("inanim"),params.frames.frame_0.time/1e3);var a=params.frames.frame_999.endspeed;null==a&&(a=params.frames.frame_0.speed),i.add(e.data("outanim"),params.frames.frame_999.time/1e3)}),r.data("tl",i)}t.setIdleZones=function(){for(var e=document.getElementsByClassName("slide-idle-section"),a=0;a<e.length;a++)e[a].style.left=t.mainMaxTimeLeft+15+"px"};var setFakeAnim=function(){var e=jQuery(".slide-trans-cur-ul li").first(),t=e.data("animval"),a=e.text();return"random-selected"!=t&&"random"!=t&&"random-static"!=t&&"random-premium"!=t||(t="fade",a="Fade"),document.getElementById("fake-select-label").innerHTML='"'+a+'"',jQuery("#fake-select-label").data("valu",t),removeAllSlots(),slideAnimation(),!0,!1};t.setSlideTransitionTimerBar=function(){var e=document.getElementById("slide_in_sort_time"),a=e.getElementsByClassName("timeline_frame")[0],r=e.getElementsByClassName("timeline_full")[0],i=document.getElementById("transition_duration")?document.getElementById("transition_duration").value:0;e.getElementsByClassName("duration_cont")[0].innerHTML=i,jQuery.isNumeric(i)||(i=500),punchgs.TweenLite.set(a,{width:i/10}),punchgs.TweenLite.set(r,{left:15,width:t.mainMaxTimeLeft})};var addSlideToSortbox=function(){t.setSlideTransitionTimerBar();var e=document.getElementById("slide_in_sort_time"),a=e.getElementsByClassName("timeline_frame")[0],r=e.getElementsByClassName("duration_cont")[0];jQuery(a).resizable({minWidth:0,handles:"e",start:function(e,t){},stop:function(e,a){document.getElementById("transition_duration").value=10*a.size.width,r.innerHTML=10*a.size.width,jQuery(".slide-trans-cur-ul li.selected").data("duration",10*a.size.width),t.resetSlideAnimations(!0)},resize:function(e,t){document.getElementById("transition_duration").value=10*t.size.width,jQuery(".slide-trans-cur-ul li.selected").data("duration",10*t.size.width),r.innerHTML=10*t.size.width}})};function loadMusicTimeLine(e,t){if(null===audioContext||!AudioContext)return!1;var a=new XMLHttpRequest,r=e.references.sorttable.timeline;a.open("GET",t,!0),a.responseType="arraybuffer",a.onreadystatechange=function(t){4==a.readyState&&(200==a.status?audioContext.decodeAudioData(a.response,function(t){t,r.data("audiobuffer",t),displayAudioBuffer(e,t)},onDecodeError):console.log("error during the load.Wrong url or cross origin issue"))},a.send()}function onDecodeError(){alert("error while decoding your Audio file.")}function getStartSec(e){return null==e?-1:""==e?-1:" "==e?-1:jQuery.isNumeric(e)?e:e.split(":").length>1?60*parseInt(e.split(":")[0],0)+parseInt(e.split(":")[1],0):e}function displayAudioBuffer(e,a){try{var r=e.references.sorttable.timeline,i=a.getChannelData(0),o=(r.find(".timeline_full"),a.duration),n=(e.video_data.start_at,getStartSec(e.video_data.start_at)),s=getStartSec(e.video_data.end_at);n=-1==n?0:n,s=-1==s?999999999:s,n/=60,s=(s/=60)>a.duration?a.duration:s,n*=a.sampleRate,o=((s*=a.sampleRate)-n)/a.sampleRate*100,r.find("canvas").remove();var l=document.createElement("canvas");l.width=t.mainMaxTimeLeft,l.height=19,r.append('<div class="timeline_audio"></div>'),r.find(".timeline_audio").append(l);var d=r.find("canvas");punchgs.TweenLite.set(d,{zIndex:2,top:3,left:0,position:"absolute"});var c=l.getContext("2d");i.length;c.save(),c.fillStyle="transparent",c.fillRect(0,0,o,19),c.strokeStyle="#333",c.translate(0,9.5),c.globalAlpha=.5;for(var u=s-n,m=0;m<s-n;m+=200){var p=Math.floor(o*m/u),f=19*i[n+m];c.beginPath(),c.moveTo(p,0),c.lineTo(p+1,f),c.stroke(),0}if("none"!=e.video_data.videoloop){var h=c.getImageData(0,0,o,19),y=t.mainMaxTimeLeft/o;for(m=0;m<y;m++)c.beginPath(),c.moveTo(m*o,-50),c.lineTo(m*o,19),c.lineWidth=3,c.strokeStyle="#c0392b",c.stroke(),c.putImageData(h,m*o,0)}c.restore(),audio=jQuery(e.references.sorttable.timeline[0]).find(".timeline_audio"),void 0!==audio&&audio.length>0&&punchgs.TweenLite.set(audio,{left:15+e.frames.frame_0.time/10,width:(e.frames.frame_999.time-e.frames.frame_0.time+e.frames.frame_999.split_extratime+e.frames.frame_999.speed)/10})}catch(s){console.log("Drawing of Audio Map failed !")}}t.rerenderAllAudioMap=function(){jQuery.each(u.arrLayers,function(e,a){"audio"==a.type&&t.drawAudioMap(a)})},t.drawAudioMap=function(e){var t=e.references.sorttable.timeline;if(t.data("lastaudio")==e.video_data.urlAudio&&null!=t.data("audiobuffer")?displayAudioBuffer(e,t.data("audiobuffer")):loadMusicTimeLine(e,e.video_data.urlAudio),t.data("lastaudio",e.video_data.urlAudio),!AudioContext)return console.log("Audio Map cannot be drawn  in your Browser. Try a recent Chrome or Firefox. "),!1},t.addToSortbox=function(e,a){if(1===document.getElementById("layers-right-ul").children.length&&addSlideToSortbox(),void 0===e)return!1;t.isLayerVisible(a.references.htmlLayer);var r="",i="",o=t.getSortboxText(a.alias),n=Number(a.order)+5,s="",l="";switch(visibleclass="in-on",groupLink=void 0!==a.groupLink?a.groupLink:0,a.type){case"group":r=" sortable_elements sortable_group",i=" droppable_sortable_group";break;case"row":r="  sortable_elements sortable_group sortable_row",i=" droppable_sortable_row";break;case"column":r=" sortable_elements sortable_column",i=" droppable_sortable_column";break;default:r=" sortable_elements sortable_layers"}switch(a.deleted&&(r+=" layer-deleted"),s+='<li data-uniqueid="'+a.unique_id+'" id="layer_sort_'+e+'" data-type="'+a.type+'" class="mastertimer-layer ui-state-default'+r+'" data-grouptype="'+a.grouptype+'" data-pid="'+a.p_uid+'">',s+='\t<div class="layer_sort_inner_wrapper '+i+'">',s+='\t\t<span class="mastertimer-timeline-selector-row tipsy_enabled_top" title="Select Layer in Timeline">',s+='\t\t\t<input data-uniqueid="'+a.unique_id+'"  id="lots_id_'+a.unique_id+'" class="layer-on-timeline-selector" style="margin:0px" type="checkbox"/>',s+="\t\t</span>",s+='\t\t<span data-uniqueid="'+a.unique_id+'" class="list-of-layer-links tipsy_enabled_top" title="Choose Layers Group Link">',s+='\t\t\t<span class="layer-link-type-element layer-link-type-element-cs layer-link-type-'+groupLink+'"></span>',s+='\t\t\t<span class="list-of-layer-links-inner">',s+='\t\t\t\t<span data-linktype="1" class="layer-link-type-element layer-link-type-1"></span>',s+='\t\t\t\t<span data-linktype="2" class="layer-link-type-element layer-link-type-2"></span>',s+='\t\t\t\t<span data-linktype="3" class="layer-link-type-element layer-link-type-3"></span>',s+='\t\t\t\t<span data-linktype="4" class="layer-link-type-element layer-link-type-4"></span>',s+='\t\t\t\t<span data-linktype="5" class="layer-link-type-element layer-link-type-5"></span>',s+='\t\t\t\t<span data-linktype="0" class="layer-link-type-element layer-link-type-0"></span>',s+="\t\t\t</span>",s+="\t\t</span>","column"!=a.type?"row"!==a.type?(s+='\t<span  class="mastertimer-timeline-zindex-row tipsy_enabled_top" title="z-Index">',s+='\t\t<i style="margin-left:15px;margin-right:0px;" class="layersortclass eg-icon-sort"></i>',s+='\t\t<span class="sortbox_depth" title="z-Index">'+n+"</span>",s+="\t</span>"):s+='\t<span  class="mastertimer-timeline-zindex-row tipsy_enabled_top" style="cursor:default !important" title="z-Index"></span>':s+=' \t<span class="column_sort_row_spacer"></span>',s+='\t\t<span class="mastertimer-timeline-tillendcontainer" style="">',s+='\t\t\t<span data-uniqueid="'+a.unique_id+'" data-serial="'+e+'" class="till_slideend tipsy_enabled_top " title="Wait till Slides End / Custom End"><i class="eg-icon-back-in-time"></i><i class="eg-icon-download-2"></i></span>',s+="\t\t</span>",s+='\t\t<span class="sort-hover-part layer_sort_layer_text_field">',s+='\t\t\t<span class="sortbox_text"><i class="layertypeclass ',a.type){case"group":s+="fa-icon-object-group";break;case"row":s+="rs-icon-layergroup";break;case"column":s+="rs-icon-layercolumns";break;case"text":s+="rs-icon-layerfont";break;case"image":s+="rs-icon-layerimage";break;case"video":s+="rs-icon-layervideo";break;case"audio":s+="rs-icon-layeraudio";break;case"button":s+="rs-icon-layerbutton";break;case"shape":s+="rs-icon-layershape";break;case"svg":s+="rs-icon-layersvg"}s+='"></i>',s+='\t\t\t\t<input class="timer-layer-text" style="margin-top:-1px !important" type="text" enabled value="'+o+'">',s+="\t\t\t</span>",s+="\t\t</span>","group"!=a.type&&"row"!=a.type&&"column"!=a.type||(s+='\t\t<span class="sort_group_collapser"><i class="eg-icon-down-dir"></i><i class="eg-icon-right-dir"></i></span>'),"column"!=a.type&&(s+='\t\t<span class="timer-manual-edit"><i class="eg-icon-pencil"></i></span>'),s+="\t</div>","group"!=a.type&&"row"!=a.type||(s+='<ul id="sortable_group_'+a.unique_id+'" class="sortable_groups_wrap sgw_def"></ul>'),"column"==a.type&&(s+='<ul id="sortable_columns_'+a.unique_id+'" class="sortable_layers_in_columns sgw_def"></ul>'),s+="</li>";var d="";null!=a.p_uid&&-1!==a.p_uid&&"row"!==a.type&&"group"!==a.type&&(d=" quick_in_group"),"row"===a.type&&(d+=" quick_in_row"),l+='<li id="layer_quicksort_'+e+'" data-serial="'+e+'" class="quicksortlayer ui-state-default layer-toolbar-li'+d+'">';var c='<span class="quick-edit-toolbar-in-list">';switch(a.type){case"text":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layerfont_n"></i>',c+='<span id="button_edit_layer_'+e+'" class="button_edit_layer layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span id="button_reset_size_'+e+'" class="button_reset_size layer-short-tool revblue"><i class="eg-icon-resize-normal"></i></span>';break;case"group":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="fa-icon-object-group"></i>',c+='<span  class="layer-short-tool revdarkgray"></span>',c+='<span  class="layer-short-tool revdarkgray"></span>';break;case"row":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layergroup_n"></i>',c+='<span  class="layer-short-tool revdarkgray"></span>',c+='<span  class="layer-short-tool revdarkgray"></span>';break;case"column":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layercolumns_n"></i>',c+='<span  class="layer-short-tool revdarkgray"></span>',c+='<span  class="layer-short-tool revdarkgray"></span>',c+='<span  class="layer-short-tool revdarkgray"></span>',c+='<span  class="layer-short-tool revdarkgray"></span>';break;case"shape":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layershape_n"></i>',c+='<span id="button_edit_shape_'+e+'" class="button_edit_shape layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span  class="layer-short-tool revdarkgray"></span>';break;case"button":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layerbutton_n"></i>',c+='<span id="button_edit_layer_'+e+'" class="button_edit_layer layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span id="button_reset_size_'+e+'" class="button_reset_size layer-short-tool revblue"><i class="eg-icon-resize-normal"></i></span>';break;case"image":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layerimage_n"></i>',c+='<span  id="button_change_image_source_'+e+'" class="button_change_image_source layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span id="button_reset_size_'+e+'" class="button_reset_size layer-short-tool revblue"><i class="eg-icon-resize-normal"></i></span>';break;case"video":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layervideo_n"></i>',c+='<span  id="button_change_video_settings_'+e+'" class="button_change_video_settings layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span  class="layer-short-tool revdarkgray"></span>';break;case"audio":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layeraudio_n"></i>',c+='<span  id="button_changeaudio_settings_'+e+'" class="button_change_audio_settings layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span  class="layer-short-tool revdarkgray"></span>',r=" layer-sort-audio-item";break;case"svg":l+='<span class="layer-short-tool revdarkgray layer-title-with-icon"><i class="rs-icon-layersvg_n"></i>',c+='<span  id="button_changesvg_settings_'+e+'" class="button_change_svg_settings layer-short-tool revblue"><i class="eg-icon-pencil"></i></span>',c+='<span  class="layer-short-tool revdarkgray"></span>'}l+='<input type="text" class="layer-title-in-list" value="'+o+'"></span>',l+=c,"column"!==a.type&&(l+='<span id="button_delete_layer_'+e+'" class="button_delete_layer layer-short-tool revred"><i class="rs-lighttrash"></i></span>',l+='<span id="button_duplicate_layer_'+e+'" class="button_duplicate_layer layer-short-tool revyellow" data-isstatic=""><i class="rs-lightcopy"></i></span>'),l+='<span style="display:block;float:none;clear:both"></span></span>',l+='<span class="quick-layer-view layer-short-tool revdarkgray '+visibleclass+'"><i class="eg-icon-eye"></i></span>',l+='<span class="quick-layer-lock layer-short-tool revdarkgray"><i class="eg-icon-lock-open"></i></span>',l+='<div style="clear:both;display:block"></div>',l+="</li>",document.getElementById("quick-layers-list-id").childNodes.length>1&&(document.getElementById("nolayersavailable").style.display="none");var u="",m="logical_o"===a.grouptype?" hide_timeline":"";u+='<li data-uniqueid="'+a.unique_id+'" data-serial="'+e+'" id="layer_sort_time_'+e+'" class="sortable_elements mastertimer-layer ui-state-default'+r+m+'" data-grouptype="'+a.grouptype+'" data-pid="'+a.p_uid+'">',u+='\t\t<div class="timeline_full"></div>',u+='  <div class="timeline">',u+='  \t<div class="timeline-relative-marker trm-groupandrowmarker"></div>',u+='\t\t<div data-frameindex="0" id="tl_'+a.unique_id+'_frame_0" class="timeline_frame tf_startframe tl_layer_frame" data-uniqueid="'+a.unique_id+'" data-serial="'+e+'" style="z-index:50;">',u+=' \t\t\t<span class="timebefore_cont"></span>',u+='\t\t\t<div class="tl_speed_wrapper">',u+='\t\t\t\t<div class="tlf_speed"><span class="duration_cont"></span></div>',u+='\t\t\t\t<div class="tlf_splitdelay"></div>',u+="\t\t\t</div>",u+='\t\t\t<span class="show_timeline_helper">EDIT</span>',u+="\t\t</div>",u+='\t\t<div data-frameindex="999" id="tl_'+a.unique_id+'_frame_999" class="timeline_frame tf_endframe tl_layer_frame" data-uniqueid="'+a.unique_id+'" data-serial="'+e+'" style="z-index:48;">',u+=' \t\t\t<span class="timebefore_cont"></span>',u+='\t\t\t<div class="tl_speed_wrapper">',u+='\t\t\t\t<div class="tlf_speed"><span class="duration_cont"></span></div>',u+='\t\t\t\t<div class="tlf_splitdelay"></div>',u+="\t\t\t</div>",u+='\t\t\t<span class="show_timeline_helper">EDIT</span>',u+="\t\t</div>",u+=" </div>",u+=' <div class="slide-idle-section"></div>',u+="</li>";var p=!0;"row"===a.type&&document.getElementById("layers-left-ul").getElementsByClassName("sortable_row").length>0&&(p=!1,document.getElementById("layers-left-ul").getElementsByClassName("sortable_row")[0].insertAdjacentHTML("afterend",s),document.getElementById("quick-layers-list-id").getElementsByClassName("quick_in_row")[0].insertAdjacentHTML("afterend",l),document.getElementById("layers-right-ul").getElementsByClassName("sortable_row")[0].insertAdjacentHTML("afterend",u)),p&&(document.getElementById("layers-left-ul").insertAdjacentHTML("beforeend",s),document.getElementById("quick-layers-list-id").insertAdjacentHTML("beforeend",l),document.getElementById("layers-right-ul").insertAdjacentHTML("beforeend",u)),jQuery("#layer_quicksort_"+e).on("mouseenter",function(e){jQuery(".layer_due_list_element_selected").removeClass("layer_due_list_element_selected"),jQuery("#slide_layer_"+jQuery(this).data("serial")).addClass("layer_due_list_element_selected")}),jQuery("#layer_quicksort_"+e).on("mouseleave",function(e){jQuery(".layer_due_list_element_selected").removeClass("layer_due_list_element_selected")}),jQuery("#layers-left .tipsy_enabled_top").tipsy({gravity:"s",delayIn:70}),reinitSortBox();var f=document.getElementById("layer_sort_time_"+e),h=jQuery(f),y=f.getElementsByClassName("timeline")[0];jQuery(y);a.references.sorttable=void 0===a.references.sorttable?{}:a.references.sorttable,a.references.sorttable.layer=jQuery(document.getElementById("layer_sort_"+e)),a.references.sorttable.timeline=h,a.references.quicklayer=jQuery(document.getElementById("layer_quicksort_"+e)),"audio"==a.type&&(h.data("objref",a),t.drawAudioMap(a),h.on("mousemove",function(e){try{var t=jQuery(this),a=t.data("objref"),r=t.data("serial"),i=jQuery("#slide_layer_"+r+" audio")[0];if(!t.hasClass("ui-state-hover"))return!1;clearTimeout(t.data("audiopreview")),t.find(".audio-progress").remove(),i.pause(),t.data("audiopreview",setTimeout(function(){var r=t.find(".timeline_full"),o=r.position().left,n=r.width(),s=e.pageX-t.offset().left,l=s-o;if(!(s<o||s>o+n)){t.find(".audio-progress").remove(),t.append('<div class="audio-progress"></div>');var d=t.find(".audio-progress"),c=getStartSec(a.video_data.start_at),u=getStartSec(a.video_data.end_at);c=-1==c?0:c,u=-1==u?999999999:u,c/=60;var m=(u=(u/=60)>i.duration?i.duration:u)-c,p=Math.floor(l/(100*m));l>100*m&&(l-=100*m*p),l>0&&(restw=100*(m-l/100),punchgs.TweenLite.fromTo(d,m-l/100,{left:o+l+p*(100*m),transformOrigin:"0% 50%",width:restw,scaleX:0},{scale:1,ease:punchgs.Linear.easeNone,onUpdate:function(){},onComplete:function(){i.pause()}})),l>0&&(i.play(),i.currentTime=l/100)}},400))}catch(e){}}),h.on("mouseleave",function(e){try{var t=jQuery(this),a=t.data("serial"),r=jQuery("#slide_layer_"+a+" audio")[0];clearTimeout(t.data("audiopreview")),t.find(".audio-progress").remove(),r.pause()}catch(e){}}));for(var g=f.getElementsByClassName("timeline_frame"),v=0;v<g.length;v++)jQuery(g[v]).resizable({handles:"e,w",minWidth:1,create:function(e,a){var r=this;t.setTLFrame(r),setTimeout(function(){t.frameLimitations(r)},25)},start:function(e,a){t.deactivatePerfectScrollBars(),t.updateTLFrame(this,"trigger",void 0,a.size.width)},resize:function(e,a){t.updateTLFrame(this,"trigger",void 0,a.size.width)},stop:function(e,a){t.updateTLFrame(this,"trigger")}}),jQuery(g[v]).draggable({axis:"x",start:function(e,a){t.recordFrameStatus(this,a)},drag:function(e,a){t.frameLimitations(this,a),t.updateTLFrame(this,"trigger"),t.updateAllSelectedLayerTimeline(this)},stop:function(e,a){t.frameLimitations(this,a),t.updateTLFrame(this,"trigger"),t.updateAllSelectedLayerTimeline(this)}});t.resetTimeLineHeight(),t.setIdleZones()},t.deactivatePerfectScrollBars=function(){jQuery(".revolution-template-groups").perfectScrollbar("destroy")},t.activatePerfectScrollBars=function(){jQuery(".revolution-template-groups").perfectScrollbar()};var checkTillSlideEnd=function(e){var a=10*t.mainMaxTimeLeft,r=document.getElementById("layer_sort_"+e.serial);e.frames.frame_999.time>=a?(e.endWithSlide=!0,r.classList.contains("tillendon")||(r.className+=" tillendon")):(e.endWithSlide=!1,jQuery(r).removeClass("tillendon"))};t.setTLFrame=function(e){var a=e.getElementsByClassName("tlf_speed")[0],r=e.getElementsByClassName("tlf_splitdelay")[0],i=e.getElementsByClassName("duration_cont")[0],o=e.getElementsByClassName("timebefore_cont")[0],n=e.parentNode.parentNode.getElementsByClassName("timeline-relative-marker")[0],s=(e=jQuery(e),u.getLayerByUniqueId(e.data("uniqueid"))),l=u.checkLayerTriggered(s),d=u.getObjectLength(s.frames);s.frames.frame_0.time=Math.max(0,s.frames.frame_0.time),s.frames.frame_999.time=Math.min(10*t.mainMaxTimeLeft,s.frames.frame_999.time);var c=e.data("frameindex"),m=s.frames["frame_"+c].speed,p=s.frames["frame_"+c].time,f=getSplitCounts(s.text,s.frames["frame_"+c].split,s.frames["frame_"+c].splitdelay),h=p;if(s.frames["frame_"+c].split_extratime=f,0!==f?(punchgs.TweenLite.set(a,{width:m/10-f}),punchgs.TweenLite.set(r,{width:f})):(punchgs.TweenLite.set(a,{width:m/10}),punchgs.TweenLite.set(r,{width:0})),punchgs.TweenLite.set(e,{left:p/10,width:f+m/10}),i.innerHTML=m,void 0!==s.p_uid&&-1!==s.p_uid&&void 0!==u.getLayerByUniqueId(s.p_uid)&&"object"==typeof u.getLayerByUniqueId(s.p_uid)){var y=u.getLayerByUniqueId(s.p_uid);n.style.display="block",n.style.width=y.frames.frame_0.time/10-1+"px",h=p-y.frames.frame_0.time}else if(n.style.display="none",n.style.width="0px",0!==c){var g=999===c?s.frames["frame_"+(d-2)]:s.frames["frame_"+(c-1)];void 0!==g&&(h=p-(g.time+g.speed+10*g.split_extratime))}p==10*t.mainMaxTimeLeft&&(o.innerHTML='<span class="wait_slide_end">WAIT</span>'),s.frames["frame_"+c].time_relative=h,0==c&&l.in&&(o.innerHTML='<span class="triggered_layer_on_timeline">a</span>'),999==c&&l.out&&(o.innerHTML='<span class="triggered_layer_on_timeline">a</span>'),t.updateFullTime(s),checkTillSlideEnd(s)},t.updateTLFrame=function(e,a,r,i){t.recordFrameStatusForce&&t.recordFrameStatus(e);var o=u.getCurrentLayer().serial,n=e.getElementsByClassName("tlf_speed")[0],s=e.getElementsByClassName("tlf_splitdelay")[0],l=e.getElementsByClassName("duration_cont")[0],d=e.getElementsByClassName("timebefore_cont")[0],c=e.parentNode.parentNode.getElementsByClassName("timeline-relative-marker")[0],m=(e=jQuery(e),u.getLayerByUniqueId(e.data("uniqueid"))),p={frames:{}},f=u.getObjectLength(m.frames),h=u.checkLayerTriggered(m);if(fi=e.data("frameindex"),speed=10*e.outerWidth(),time=10*e.position().left,splitdelay=getSplitCounts(m.text,m.frames["frame_"+fi].split,m.frames["frame_"+fi].splitdelay),currentframe=m.frames["frame_"+fi],updateTimerText=!0,timedif=time,p.frames["frame_"+fi]={},speed-10*splitdelay<0&&(speed=10*splitdelay,punchgs.TweenLite.set(e,{width:splitdelay})),0!==splitdelay?(punchgs.TweenLite.set(n,{width:speed/10-splitdelay}),punchgs.TweenLite.set(s,{width:splitdelay})):(punchgs.TweenLite.set(n,{width:speed/10}),punchgs.TweenLite.set(s,{width:0})),l.innerHTML=speed,(time==10*t.mainMaxTimeLeft||0==fi&&h.in||999==fi&&h.out)&&(updateTimerText=!1),void 0!==m.p_uid&&-1!==m.p_uid&&void 0!==u.getLayerByUniqueId(m.p_uid)&&"object"==typeof u.getLayerByUniqueId(m.p_uid)){var y=u.getLayerByUniqueId(m.p_uid);timedif=time-y.frames.frame_0.time,c.style.display="block"}else{if(c.style.display="none",c.style.width="0px",0!==fi)(k=999===fi?m.frames["frame_"+(f-2)]:m.frames["frame_"+(fi-1)])&&(timedif=time-(k.time+k.speed+10*k.split_extratime))}if(time==10*t.mainMaxTimeLeft&&(d.innerHTML='<span class="wait_slide_end">WAIT</span>'),0==fi&&h.in&&(d.innerHTML='<span class="triggered_layer_on_timeline">a</span>'),999==fi&&h.out&&(d.innerHTML='<span class="triggered_layer_on_timeline">a</span>'),currentframe.time_relative=timedif,p.frames["frame_"+fi].speed=speed-10*splitdelay,p.frames["frame_"+fi].time=time,p.frames["frame_"+fi].time_relative=timedif,p.frames["frame_"+fi].split_extratime=splitdelay,m.serial==o&&(0===fi&&(document.getElementById("layer_speed").value=p.frames.frame_0.speed),999===fi&&(document.getElementById("layer_endspeed").value=p.frames.frame_999.speed)),"trigger"!==a&&(currentframe.speed=p.frames["frame_"+fi].speed,currentframe.time=p.frames["frame_"+fi].time),0===fi&&("row"===m.type||"column"===m.type||"group"==m.type)){for(var g=u.getLayersInGroup(m.unique_id),v=0;v<g.columns.length;v++){(c=g.columns[v].references.sorttable.timeline[0].getElementsByClassName("timeline-relative-marker")[0]).style.width=time/10-1+"px"}for(v=0;v<g.layers.length;v++){c=g.layers[v].references.sorttable.timeline[0].getElementsByClassName("timeline-relative-marker")[0];if("row"===m.type){var b=document.getElementById("tl_"+g.layers[v].p_uid+"_frame_0");null!=b&&(c.style.width=b.style.left)}else c.style.width=time/10-1+"px"}}if(999!==fi){var _=fi+1>=f-1?999:fi+1,w=m.frames["frame_"+_];null!=w&&(w.time_relative=w.time-(currentframe.time+currentframe.speed+10*currentframe.split_extratime),p.frames["frame_"+_]={time_relative:w.time_relative},m.frames["frame_"+_].time_relative=w.time_relative)}else{var k;_="frame_0";for(var x in m.frames)"frame_999"!==x&&(_=x);if(null!=(k=m.frames[_])){var L=m.frames["frame_"+fi].time-(k.time+k.speed+10*k.split_extratime);p.frames.frame_999.time_relative=L,m.frames.frame_999.time_relative=L}}"trigger"==a?u.updateLayer(m.serial,p):currentframe.split_extratime=p.frames["frame_"+fi].split_extratime,t.frameLimitations(e,!1,r,{update:updateTimerText,triggered:h,timecont:d}),t.updateFullTime(m),checkTillSlideEnd(m)},t.addLayersColumnsToSelectedElements=function(e,t){var a=u.getLayersInGroup(e.unique_id);if("row"===e.type||"column"==e.type||"group"===e.type){for(var r=0;r<=a.layers.length-1;r++){var i=a.layers[r].unique_id;if(-1==jQuery.inArray(i,u.selectedLayers)&&-1==jQuery.inArray(i,u.currentGroupElements)){var o=document.getElementById("tl_"+i+"_frame_"+t);u.currentGroupElementsPositionLeftReset.push(parseInt(o.style.left,0)),u.currentGroupElements.push(i)}}if("row"===e.type)for(r=0;r<=a.columns.length-1;r++){i=a.columns[r].unique_id;if(-1==jQuery.inArray(i,u.selectedLayers)&&-1==jQuery.inArray(i,u.currentGroupElements)){o=document.getElementById("tl_"+i+"_frame_"+t);u.currentGroupElementsPositionLeftReset.push(parseInt(o.style.left,0)),u.currentGroupElements.push(i)}}}return!0},t.recordFrameStatus=function(e,a){var r=(e=jQuery(e)).data("frameindex"),i=u.getLayerByUniqueId(e.data("uniqueid"));i.positionLeftReset=void 0!==a?a.position.left:e.position().left,u.selectedLayersPositionLeftReset=[],u.currentGroupElements=[],u.currentGroupElementsPositionLeftReset=[];for(var o=0;o<=u.selectedLayers.length-1;o++){var n=u.selectedLayers[o],s=-1!==n?u.getLayerByUniqueId(n):-1,l=document.getElementById("tl_"+n+"_frame_"+r);u.selectedLayersPositionLeftReset.push(parseInt(l.style.left,0)),-1!==s&&t.addLayersColumnsToSelectedElements(s,0)}t.addLayersColumnsToSelectedElements(i,0),t.recordFrameStatusForce=!1},t.frameLimitations=function(e,a,r,i){t.recordFrameStatusForce&&t.recordFrameStatus(e);e=jQuery(e);var o=u.getLayerByUniqueId(e.data("uniqueid")),n=e.prev(),s=e.next(),l=s.data("frameindex"),d=e.data("frameindex"),c=void 0!==a&&!1!==a?a.position.left:e.position().left,m=e.outerWidth(),p=u.getObjectLength(o.frames),f=o.frames["frame_"+d];if(n.length>0&&(c=Math.max(n.position().left+n.outerWidth(),c)),c=Math.max(0,c),s.length>0&&999!==d&&(c=Math.min(s.position().left-m,c)),c=Math.min(t.mainMaxTimeLeft,c),void 0!==i&&i.update){var h=0;if(void 0!==o.p_uid&&0===d&&-1!==o.p_uid&&void 0!==u.getLayerByUniqueId(o.p_uid)&&"object"==typeof u.getLayerByUniqueId(o.p_uid))h=10*c-u.getLayerByUniqueId(o.p_uid).frames.frame_0.time;else if(0!==d){var y=999===d?o.frames["frame_"+(p-2)]:o.frames["frame_"+(d-1)];y&&(h=10*c-(y.time+y.speed+10*y.split_extratime))}"absolute"===t.timelinetype?i.timecont.innerHTML=10*c:i.timecont.innerHTML=h}if(999!==d&&"absolute"!==t.timelinetype){var g=o.frames["frame_"+l];g.time_relative=g.time-(f.time+10*f.split_extratime+f.speed),s.find(".timebefore_cont").html(g.time_relative)}if(void 0!==a&&!1!==a&&(a.position.left=c),punchgs.TweenLite.set(e,{left:c}),u.selectedLayers.length>0&&!r||null!=u.currentGroupElements&&u.currentGroupElements.length>0&&!r){for(var v=c-o.positionLeftReset,b=0;b<=u.selectedLayers.length-1;b++){if((_=u.selectedLayers[b])!=o.unique_id)document.getElementById("tl_"+_+"_frame_"+d).style.left=u.selectedLayersPositionLeftReset[b]+v+"px",t.updateFullTime(u.getLayerByUniqueId(_),u.selectedLayersPositionLeftReset[b]+v)}if(0===d&&void 0!==u.currentGroupElements&&u.currentGroupElements.length>0)for(b=0;b<=u.currentGroupElements.length-1;b++){var _;if((_=u.currentGroupElements[b])!=o.unique_id)document.getElementById("tl_"+_+"_frame_"+d).style.left=u.currentGroupElementsPositionLeftReset[b]+v+"px",t.updateFullTime(u.getLayerByUniqueId(_),u.currentGroupElementsPositionLeftReset[b]+v)}}t.updateFullTime(o),checkTillSlideEnd(o)},t.updateFullTime=function(e,t){var a=e.references.sorttable.timeline[0].getElementsByClassName("timeline_full")[0],r=jQuery(e.references.sorttable.timeline[0]).find(".timeline_audio"),i=10*((t=void 0===t?15+e.frames.frame_0.time/10:t+15)-15);punchgs.TweenLite.set(a,{left:t,width:(e.frames.frame_999.time-i+e.frames.frame_999.split_extratime+e.frames.frame_999.speed)/10}),void 0!==r&&r.length>0&&punchgs.TweenLite.set(r,{left:t,width:(e.frames.frame_999.time-i+e.frames.frame_999.split_extratime+e.frames.frame_999.speed)/10})},t.updateLayerTimeline=function(e){for(var a=e.references.sorttable.timeline[0].getElementsByClassName("timeline_frame"),r=0;r<a.length;r++)t.setTLFrame(a[r]),t.updateTLFrame(a[r],!1,!0)},t.updateCurrentLayerTimeline=function(){for(var e=document.getElementById("layer_sort_time_"+u.getCurrentLayer().serial).getElementsByClassName("timeline_frame"),a=0;a<e.length;a++)t.setTLFrame(e[a],!1,!0)},t.updateAllLayerTimeline=function(){for(var e=document.getElementsByClassName("timeline_frame tl_layer_frame"),a=0;a<e.length;a++)t.updateTLFrame(e[a],!1,!0)},t.updateAllSelectedLayerTimeline=function(e){var a=(e=jQuery(e)).data("uniqueid"),r=e.data("frameindex");if(u.selectedLayers.length>0)for(var i=0;i<=u.selectedLayers.length-1;i++){(o=u.selectedLayers[i])!=a&&t.updateTLFrame(document.getElementById("tl_"+o+"_frame_"+r),!1,!0)}if(0===r&&void 0!==u.currentGroupElements&&u.currentGroupElements.length>0)for(i=0;i<=u.currentGroupElements.length-1;i++){var o;(o=u.currentGroupElements[i])!=a&&t.updateTLFrame(document.getElementById("tl_"+o+"_frame_"+r),!1,!0)}},t.showTimeLineDirectInput=function(e){jQuery("#clayer_start_time").val(e.time),jQuery("#clayer_start_speed").val(e.speed)},t.manageTimeLineDirectInput=function(){jQuery("#clayer_start_time, #clayer_end_time").on("change blur",function(){var e=t.getLayer(selectedLayerSerial);e.time=jQuery("#clayer_start_time").val(),e.frames.frame_999.time=jQuery("#clayer_end_time").val(),e.speed=jQuery("#clayer_start_speed").val(),e.frames.frame_999.speed=jQuery("#clayer_end_speed").val(),jQuery("#layer_speed").val(e.speed),jQuery("#layer_endspeed").val(e.frames.frame_999.speed),t.updateLayerFromFields(),u.updateCurrentLayerTimeline()})};var msToSec=function(e){var t=Math.floor(e/1e3),a=t+".";return(e-=1e3*t)<100&&(a+="0"),a+=Math.round(e/10)},getSplitCounts=function(e,t,a){if(null==e)return 0;var r=new Object;switch(ht=jQuery("<div>"+e+"</div>"),w=1,r.c=ht.text().replace(/ /g,"").length,r.w=e.split(" ").length,r.l=e.split("<br").length,t){case"chars":w=r.c;break;case"words":w=r.w;break;case"lines":w=r.l}return(w-1)*a},showHideTimeines=function(){jQuery("#button_sort_timing").click(function(){var e=jQuery(this);e.hasClass("off")?(e.removeClass("off"),e.find(".onoff").html("- on"),punchgs.TweenLite.to(jQuery(".sortlist .timeline"),.5,{autoAlpha:.5,overwrite:"auto"})):(punchgs.TweenLite.to(jQuery(".sortlist .timeline"),.5,{autoAlpha:0,overwrite:"auto"}),e.addClass("off"),e.find(".onoff").html("- off"))})};t.deleteLayerFromSortbox=function(e){var a=t.getHtmlSortItemFromSerial(e),r=t.getHtmlSortTimeItemFromSerial(e),i=t.getHtmlQuickTimeItemFromSerial(e);try{a.remove(),r.remove(),i.remove()}catch(e){}jQuery(".quick-layers-list li").length<2&&jQuery(".nolayersavailable").show()},t.unselectSortboxItems=function(){jQuery(".sortlist li,#layers-right li, .quick-layers-list li").removeClass("ui-state-hover").addClass("ui-state-default")},t.organiseGroupsAndLayer=function(e,a,r){var i=a?u.arrLayersDemo:u.arrLayers,o=!1;for(var n in i){var s=i[n];if("group"!=s.type&&"row"!=s.type&&null!=s.p_uid&&-1!=s.p_uid){var l=a?null:s.references.sorttable.layer,d=u.getLayerByUniqueId(s.p_uid),c=!a&&d?d.references.sorttable.layer[0].getElementsByClassName("sgw_def")[0]:void 0,m=s.references.htmlLayer,p=d?d.references.htmlLayer:void 0;if(p&&m&&!p[0].contains(m[0])){var f=p[0].getElementsByClassName("tp_layer_group_inner_wrapper")[0];if(void 0!==f&&void 0!==m[0])if("column"!==s.type){var h,y=99999;for(var g in i){var v=i[g];s.p_uid===v.p_uid&&void 0!==v.references.htmlLayer&&void 0!==v.groupOrder&&v.groupOrder>s.groupOrder&&v.groupOrder<y&&(y=v.groupOrder,!1,h=v.references.htmlLayer)}void 0!==h&&y<99999&&h[0].parentNode==f?f.insertBefore(m[0],h[0]):f.appendChild(m[0])}else f.appendChild(m[0])}a||e||void 0===c||c.contains(l[0])||(o=!0,c.appendChild(l[0])),a||void 0!==c||"column"!==s.type||u.deleteLayer(s.serial)}else{s.p_uid=-1;m=s.references.htmlLayer,l=a?null:s.references.sorttable.layer;if("row"===s.type){var b,_="row-zone-"+u.getVal(s,"align_vert"),w=99999,k=document.getElementById(_);for(var x in i){"row"===(v=i[x]).type&&v.unique_id!==s.unique_id&&u.getVal(s,"align_vert")===u.getVal(v,"align_vert")&&void 0!==v.references.htmlLayer&&void 0!==v.groupOrder&&v.groupOrder>=s.groupOrder&&v.groupOrder<w&&(w=v.groupOrder,!1,b=v.references.htmlLayer)}void 0!==b&&w<99999&&b[0].parentNode==k?k.insertBefore(m[0],b[0]):k.appendChild(m[0]),u.checkRowZoneContents()}else"divLayers"!=m[0].parentNode.id&&document.getElementById("divLayers").appendChild(m[0]);a||"layers-left-ul"==l[0].parentNode.id||(document.getElementById("layers-left-ul").insertBefore(l[0],document.getElementById("last_drop_zone_layers")),o=!0)}}u.setMiddleRowZone(),o&&t.updateOrderFromSortbox(r)},t.updateOrderFromSortbox=function(e){for(l in u.arrLayers){if("column"!=(d=u.arrLayers[l]).type&&"row"!=d.type&&"group"!=d.type){var a=d.references.sorttable.layer,r=a[0].parentNode.parentNode.classList.contains("sortable_column"),i=a[0].parentNode.parentNode.classList.contains("sortable_group"),o=-1;if(!r&&!i||"layers-left-ul"==a[0].parentNode.parentNode.id);else{var n=jQuery(a[0].parentNode.parentNode);if(!r)a.data("pid",n.data("uniqueid")),"row"===n.data("type")&&(0==(n=a.prev()).length&&(n=a.next()),n[0].getElementsByClassName("sortable_layers_in_columns")[0].appendChild(a[0]));o=n.data("uniqueid")}a.data("pid",o),a.attr("pid",o),d.p_uid!=o&&(d.p_uid=o,u.add_layer_change())}}for(var s=jQuery("#layers-left-ul").sortable("toArray",{attribute:"data-uniqueid"}),l=0;l<s.length;l++){var d=u.getLayerByUniqueId(s[l]),c=l+5;u.arrLayers[d.serial].order=l,u.arrLayers[d.serial].zIndex=c,d.references.sorttable.layer[0].getElementsByClassName("sortbox_depth")[0]&&(d.references.sorttable.layer[0].getElementsByClassName("sortbox_depth")[0].innerHTML=c),document.getElementById("layers-right-ul").appendChild(d.references.sorttable.timeline[0]),document.getElementById("quick-layers-list-id").appendChild(d.references.quicklayer[0]),-1!=d.p_uid&&void 0!==d.p_uid&&"row"!==d.type&&"group"!==d.type?d.references.quicklayer.addClass("quick_in_group"):d.references.quicklayer.removeClass("quick_in_group")}t.updateZIndexByOrder(),1!=e&&t.updateAllLayerTimeline()},t.resetTimeLineHeight=function(){var e=document.getElementById("layers-right-ul").clientHeight;punchgs.TweenLite.set(jQuery("#mastertimer-position"),{height:e+40})},t.timeLineTableDimensionUpdate=function(){clearTimeout(timeline_timer),timeline_timer=setTimeout(function(){t.resetTimeLineHeight();var e=30*(jQuery("#layers-right ul li").length+1)-30*(jQuery("#layers-right ul li.layer-deleted").length+1);punchgs.TweenLite.set(jQuery(".layers-wrapper"),{height:e+3}),punchgs.TweenLite.set(jQuery("#mastertimer-wrapper"),{height:e+3}),jQuery(".master-rightcell .layers-wrapper, .master-leftcell .layers-wrapper, #divLayers-wrapper, .quick-layers-list").perfectScrollbar("update")},50)},t.updateZIndexByOrder=function(){for(var e in u.arrLayers){var t=u.arrLayers[e],a={zIndex:void 0!==t.order?t.order+5:5};void 0!==t.order&&punchgs.TweenLite.set(t.references.htmlLayer,{zIndex:Number(t.order)+100}),u.updateLayer(t.serial,a,!1,!0)}};var shiftOrder=function(e){for(key in u.arrLayers){var t=u.arrLayers[key];t.order>=e&&(t.order=Number(t.order)+1,u.arrLayers[key]=t)}};t.getSortboxText=function(e){sorboxTextSize=20;var t=void 0===e?"NoText":UniteAdminRev.stripTags(e);return t.length<2&&(t=UniteAdminRev.htmlspecialchars(e)),t.length>sorboxTextSize&&(t=t.slice(0,sorboxTextSize)+"..."),t},t.redrawSortbox=function(e){null==e&&(e=sortMode),emptySortbox();var a=getLayersSorted("depth");if(0==a.length)return!1;for(var r=0;r<a.length;r++){var i=a[r];t.addToSortbox(i.serial,i)}-1!=u.selectedLayerSerial&&t.setSortboxItemSelected(u.selectedLayerSerial)};var reinitSortBox=function(e){jQuery("#last_drop_zone_layers").appendTo("#layers-left-ul"),e&&jQuery(".layer_sortbox ul").sortable({refreshPositions:!0,placeholder:"silent-placeholder",cancel:"#slide_in_sort, input",handle:".mastertimer-timeline-zindex-row",items:".sortable_elements",connectWith:"#layers-left-ul, .sortable_groups_wrap, .sortable_layers_in_columns",update:function(e,a){var r=jQuery(a.item);r.hasClass("sortable_row")&&jQuery(this).sortable("cancel");var i=r.parent(),o=i.closest(".sortable_group"),n=jQuery("#layers-left-ul");if(!i.hasClass("sortable_groups_wrap")&&!i.hasClass("sortable_layers_in_columns")||r.hasClass("sortable_layers")||(r.index()<i.children().length/2?r.insertBefore(o):r.insertAfter(o)),"layers-left-ul"===i.attr("id")||"layers-left-ul"===i.parent().attr("id")||r.hasClass("sortable_group")){var s=n.find(".sortable_row"),l=s.first().index(),d=s.last().index(),c=r.index();c>l&&c<d&&r.insertAfter(s.last())}onSortboxSorted(),t.organiseGroupsAndLayer()}}),jQuery(".droppable_sortable_group,.droppable_sortable_row, .droppable_sortable_column").droppable({tolerance:"intersect",greedy:!0,over:function(e){jQuery(e.target).addClass("readytodrop")},out:function(e){jQuery(e.target).removeClass("readytodrop")},drop:function(e,a){jQuery("#layers-left-ul");jQuery(e.target).removeClass("readytodrop");var r,i=jQuery(e.target).attr("class"),o=jQuery(e.srcElement).closest(".sortable_elements.sortable_layers");if(!o.length)return!1;i.indexOf("droppable_sortable_group")>=0&&(r=jQuery(e.target).closest("li.sortable_group").find(".sortable_groups_wrap")),i.indexOf("droppable_sortable_row")>=0&&(r=jQuery(e.target).closest("li.sortable_group.sortable_row").find(".sortable_layers_in_columns").first()),i.indexOf("droppable_sortable_column")>=0&&(r=jQuery(e.target).closest("li.sortable_column").find(".sortable_layers_in_columns").first()),setTimeout(function(){o.appendTo(r),onSortboxSorted(),t.organiseGroupsAndLayer()},50)}})},initSortbox=function(){t.redrawSortbox(),reinitSortBox(!0),jQuery("body").delegate(".layer_sort_inner_wrapper","mousedown",function(e){var t=jQuery(this).closest(".sortable_elements");if(t.hasClass("ui-state-hover"))return!0;if(!t.hasClass("mastertimer-slide")){var a=u.getSerialFromSortID(t.attr("id"));return u.setLayerSelected(a),!1}}),jQuery("body").on("click",".sort_group_collapser",function(e){var t=jQuery(this),a=t.closest(".sortable_column"),r=a.length?a:t.closest(".sortable_group"),i=a.length?r.find(".sortable_layers_in_columns"):r.find(".sortable_groups_wrap");t.toggleClass("collapsed"),t.hasClass("collapsed")?i.css({maxHeight:"0px",overflow:"hidden"}):i.css({maxHeight:"none",overflow:"visible"}),i.find(".sortable_elements").each(function(e,a){var r=(a=jQuery(a)).data("uniqueid");t.hasClass("collapsed")?jQuery('#layers-right-ul li[data-uniqueid="'+r+'"]').addClass("unvisibletimeline"):jQuery('#layers-right-ul li[data-uniqueid="'+r+'"]').removeClass("unvisibletimeline")})}),jQuery("#layers-right").delegate("li","mousedown",function(e){var a=jQuery(this);if(t.recordFrameStatusForce=!0,a.hasClass("ui-state-hover"))return!0;if(!a.hasClass("mastertimer-slide")){var r=u.getSerialFromSortID(this.id);return u.setLayerSelected(r),!1}}),jQuery(".quick-layer-all-lock").click(function(){var e=jQuery(this).find("i");e.hasClass("eg-icon-lock")?(jQuery(".quick-layer-lock i").each(function(){jQuery(this).removeClass("eg-icon-lock-open").addClass("eg-icon-lock")}),e.addClass("eg-icon-lock-open").removeClass("eg-icon-lock"),u.lockAllLayers()):(jQuery(".quick-layer-lock i").each(function(){jQuery(this).removeClass("eg-icon-lock").addClass("eg-icon-lock-open")}),e.removeClass("eg-icon-lock-open").addClass("eg-icon-lock"),u.unlockAllLayers())}),jQuery(".quick-layer-all-view").click(function(){var e=jQuery(this).find("i");e.hasClass("eg-icon-eye")?(jQuery(".quick-layer-view i").each(function(){jQuery(this).addClass("eg-icon-eye").removeClass("eg-icon-eye-off")}),e.removeClass("eg-icon-eye").addClass("eg-icon-eye-off"),u.showAllLayers()):(jQuery(".quick-layer-view i").each(function(){jQuery(this).removeClass("eg-icon-eye").addClass("eg-icon-eye-off")}),e.addClass("eg-icon-eye").removeClass("eg-icon-eye-off"),u.hideAllLayers())}),jQuery(".sortlist").delegate(".till_slideend","mousedown",function(e){var a=jQuery(this),r=a.closest("li"),i=a.data("serial"),o=u.getLayer(i),n=10*t.mainMaxTimeLeft;r.hasClass("tillendon")?(r.removeClass("tillendon"),o.frames.frame_999.time=o.frames.frame_999.time-200,t.updateLayerTimeline(o)):(r.addClass("tillendon"),o.frames.frame_999.time=n,t.updateLayerTimeline(o))})},getLayersSorted=function(e){null==e&&(e="time");var t=[];for(key in u.arrLayers){var a=u.arrLayers[key];a.serial=key,t.push(a)}return 0==t.length?t:(t.sort(function(t,a){switch(e){case"time":if(Number(t.time)==Number(a.time))return t.order==a.order?0:t.order>a.order?1:-1;if(Number(t.time)>Number(a.time))return 1;break;case"depth":if(t.order==a.order)return 0;if(t.order>a.order)return 1;break;default:trace("wrong sort type: "+e)}return-1}),t)};t.hideLayer=function(e,a){if(void 0!==e.references&&void 0!==e.references.htmlLayer){var r=e.references.htmlLayer;r.css({visibility:"hidden"}),r.addClass("currently_not_visible"),e.isDemo||setSortboxItemHidden(e.serial),1!=a&&t.isAllLayersHidden()&&jQuery("#button_sort_visibility").addClass("e-disabled")}},t.showLayer=function(e,t){if(void 0!==e.references&&void 0!==e.references.htmlLayer){var a=e.references.htmlLayer;a.css({visibility:"visible"}),a.removeClass("currently_not_visible"),e.isDemo||setSortboxItemVisible(e.serial),1!=t&&jQuery("#button_sort_visibility").removeClass("e-disabled")}},t.isLayerVisible=function(e){var t=!0;return null!=e&&e[0].classList.contains("currently_not_visible")&&(t=!1),t},t.isAllLayersHidden=function(){var e=0;for(serial in u.arrLayers){if(void 0!==u.arrLayers[e]&&1==t.isLayerVisible(u.arrLayers[e].references.htmlLayer))return!1;e++}return!0},t.isLayerLocked=function(e){return e.hasClass("layer_on_lock")},t.lockLayer=function(e){setSortboxItemLocked(e),u.getHtmlLayerFromSerial(e).addClass("layer_on_lock")},t.unlockLayer=function(e){setSortboxItemUnlocked(e),u.getHtmlLayerFromSerial(e).removeClass("layer_on_lock")},t.setSortboxItemSelected=function(e){var a=t.getHtmlSortItemFromSerial(e),r=t.getHtmlSortTimeItemFromSerial(e),i=t.getHtmlQuickTimeItemFromSerial(e);t.unselectSortboxItems(),a&&a.removeClass("ui-state-default").addClass("ui-state-hover"),r&&r.removeClass("ui-state-default").addClass("ui-state-hover"),i&&i.removeClass("ui-state-default").addClass("ui-state-hover")};var setSortboxItemHidden=function(e){var a=t.getHtmlSortItemFromSerial(e),r=t.getHtmlSortTimeItemFromSerial(e),i=t.getHtmlQuickTimeItemFromSerial(e);a&&a.addClass("sortitem-hidden"),r&&r.addClass("sortitem-hidden"),i&&(i.addClass("sortitem-hidden"),i.find(".eg-icon-eye").addClass("eg-icon-eye-off").removeClass("eg-icon-eye"),i.find(".quick-layer-view").addClass("in-off"))},setSortboxItemVisible=function(e){var a=t.getHtmlSortItemFromSerial(e),r=t.getHtmlSortTimeItemFromSerial(e),i=t.getHtmlQuickTimeItemFromSerial(e);a&&a.removeClass("sortitem-hidden"),r&&r.removeClass("sortitem-hidden"),i&&i.removeClass("sortitem-hidden")},setSortboxItemLocked=function(e){var a=t.getHtmlSortItemFromSerial(e),r=t.getHtmlSortTimeItemFromSerial(e),i=t.getHtmlQuickTimeItemFromSerial(e);a&&a.addClass("sortitem-locked"),r&&r.addClass("sortitem-locked"),i&&i.addClass("sortitem-locked")},setSortboxItemUnlocked=function(e){var a=t.getHtmlSortItemFromSerial(e),r=t.getHtmlSortTimeItemFromSerial(e),i=t.getHtmlQuickTimeItemFromSerial(e);a&&a.removeClass("sortitem-locked"),r&&r.removeClass("sortitem-locked"),i&&i.removeClass("sortitem-locked")};t.getHtmlSortItemFromSerial=function(e){var t=jQuery("#layer_sort_"+e);return 0==t.length?(UniteAdminRev.showErrorMessage("Html sort field with serial: "+e+" not found!"),!1):t},t.getHtmlSortTimeItemFromSerial=function(e){var t=jQuery("#layer_sort_time_"+e);return 0==t.length?(UniteAdminRev.showErrorMessage("Html sort field with serial: "+e+" not found!"),!1):t},t.getHtmlQuickTimeItemFromSerial=function(e){var t=jQuery("#layer_quicksort_"+e);return 0==t.length?(UniteAdminRev.showErrorMessage("Html sort field with serial: "+e+" not found!"),!1):t};var emptySortbox=function(){jQuery(".sortlist ul").find(".sortable_elements").remove(),jQuery("#layers-right ul").find(".sortable_elements").remove()},onSortboxSorted=function(){t.updateOrderFromSortbox()},prepareOneSlide=function(e,t,a,r,i,o){var n=e,s=(n.find(".defaultimg"),n.data("zoomstart"),n.data("rotationstart"),n.find(".defaultimg").css("backgroundImage")),l=n.find(".defaultimg").css("backgroundColor"),d=0,c=n.find(".defaultimg").css("backgroundSize"),u=n.find(".defaultimg").css("backgroundRepeat"),m=n.find(".defaultimg").css("backgroundPosition");s=(s=s.replace('"',"")).replace('"',""),null==c&&(c="cover"),null==u&&(u="no-repeat"),null==m&&(m="center center");i=null!=i?i:jQuery("#divbgholder").width(),o=null!=o?o:jQuery("#divbgholder").height();t.slotw=Math.ceil(i/t.slots),t.sloth=Math.ceil(o/t.slots);var p=0,f=0,h=0;p=t.sloth>t.slotw?t.sloth:t.slotw,t.slotw=p,t.sloth=p;f=0,h=0;switch(r){case"box":for(var y=0;y<t.slots;y++){h=0;for(var g=0;g<t.slots;g++)n.append('<div class="slot" style="position:absolute;top:'+(0+h)+"px;left:"+(0+f)+"px;width:"+p+"px;height:"+p+'px;overflow:hidden;"><div class="slotslide" data-x="'+f+'" data-y="'+h+'" style="position:absolute;top:0px;left:0px;width:'+p+"px;height:"+p+'px;overflow:hidden;"><div class="slotslidebg" style="position:absolute;top:'+(0-h)+"px;left:"+(0-f)+"px;width:"+i+"px;height:"+o+"px;background-color:"+l+";background-image:"+s+";background-repeat:"+u+";background-size:"+c+";background-position:"+m+';"></div></div></div>'),h+=p;f+=p}break;case"vertical":case"horizontal":if("horizontal"==r){if(!a)d=0-t.slotw;for(g=0;g<t.slots;g++)n.append('<div class="slot" style="position:absolute;top:0px;left:'+(0+g*t.slotw)+"px;overflow:hidden;width:"+(t.slotw+.6)+"px;height:"+o+'px"><div class="slotslide" style="position:absolute;top:0px;left:'+d+"px;width:"+(t.slotw+.6)+"px;height:"+o+'px;overflow:hidden;"><div class="slotslidebg" style="background-color:'+l+";position:absolute;top:0px;left:"+(0-g*t.slotw)+"px;width:"+i+"px;height:"+o+"px;background-image:"+s+";background-repeat:"+u+";background-size:"+c+";background-position:"+m+';"></div></div></div>')}else{if(!a)d=0-t.sloth;for(g=0;g<t.slots+2;g++)n.append('<div class="slot" style="position:absolute;top:'+(0+g*t.sloth)+"px;left:0px;overflow:hidden;width:"+i+"px;height:"+t.sloth+'px"><div class="slotslide" style="position:absolute;top:'+d+"px;left:0px;width:"+i+"px;height:"+t.sloth+'px;overflow:hidden;"><div class="slotslidebg" style="background-color:'+l+";position:absolute;top:"+(0-g*t.sloth)+"px;left:0px;width:"+i+"px;height:"+o+"px;background-image:"+s+";background-repeat:"+u+";background-size:"+c+";background-position:"+m+';"></div></div></div>')}}},slideAnimation=function(e,t,a,r,i){if(null!=e){var o=e,n=t,s=new Object;(l=new Object).width=e.width(),l.height=e.height()}else{var l;e=o=jQuery("#divbgholder").find(".slotholder"),t=n=jQuery("#divbgholder").find(".oldslotholder"),s=new Object,a=jQuery("#fake-select-label").data("valu");(l=new Object).width=jQuery("#divbgholder").width(),l.height=jQuery("#divbgholder").height()}"slidingoverlayvertical"==a&&(a="slidingoverlayup"),"slidingoverlayhorizontal"==a&&(a="slidingoverlayleft"),"slideoverhorizontal"==a&&(a="slideoverleft"),"slideoververtical"==a&&(a="slideoverup"),"slideremovehorizontal"==a&&(a="slideremoveleft"),"slideremovevertical"==a&&(a="slideremoveup"),"slidehorizontal"==a&&(a="slideleft"),"slidevertical"==a&&(a="slideup"),"parallaxhorizontal"==a&&(a="parallaxtoleft"),"parallaxvertical"==a&&(a="parallaxtotop");var d=punchgs.Power1.easeIn,c=punchgs.Power1.easeOut,u=punchgs.Power1.easeInOut,m=punchgs.Power2.easeIn,p=punchgs.Power2.easeOut,f=punchgs.Power2.easeInOut,h=(punchgs.Power3.easeIn,punchgs.Power3.easeOut),y=punchgs.Power3.easeInOut,g=0,v=1,b=0,_=0,w=new Array,k=[["boxslide",0,1,10,0,"box",!1,null,0,c,c,500,6],["boxfade",1,0,10,0,"box",!1,null,1,u,u,700,5],["slotslide-horizontal",2,0,0,200,"horizontal",!0,!1,2,f,f,700,3],["slotslide-vertical",3,0,0,200,"vertical",!0,!1,3,f,f,700,3],["curtain-1",4,3,0,0,"horizontal",!0,!0,4,c,c,300,5],["curtain-2",5,3,0,0,"horizontal",!0,!0,5,c,c,300,5],["curtain-3",6,3,25,0,"horizontal",!0,!0,6,c,c,300,5],["slotzoom-horizontal",7,0,0,400,"horizontal",!0,!0,7,c,c,300,7],["slotzoom-vertical",8,0,0,0,"vertical",!0,!0,8,p,p,500,8],["slotfade-horizontal",9,0,0,500,"horizontal",!0,null,9,p,p,500,25],["slotfade-vertical",10,0,0,500,"vertical",!0,null,10,p,p,500,25],["fade",11,0,1,300,"horizontal",!0,null,11,f,f,1e3,1],["crossfade",11,1,1,300,"horizontal",!0,null,11,f,f,1e3,1],["fadethroughdark",11,2,1,300,"horizontal",!0,null,11,f,f,1e3,1],["fadethroughlight",11,3,1,300,"horizontal",!0,null,11,f,f,1e3,1],["fadethroughtransparent",11,4,1,300,"horizontal",!0,null,11,f,f,1e3,1],["slideleft",12,0,1,0,"horizontal",!0,!0,12,y,y,1e3,1],["slideup",13,0,1,0,"horizontal",!0,!0,13,y,y,1e3,1],["slidedown",14,0,1,0,"horizontal",!0,!0,14,y,y,1e3,1],["slideright",15,0,1,0,"horizontal",!0,!0,15,y,y,1e3,1],["slideoverleft",12,7,1,0,"horizontal",!0,!0,12,y,y,1e3,1],["slideoverup",13,7,1,0,"horizontal",!0,!0,13,y,y,1e3,1],["slideoverdown",14,7,1,0,"horizontal",!0,!0,14,y,y,1e3,1],["slideoverright",15,7,1,0,"horizontal",!0,!0,15,y,y,1e3,1],["slideremoveleft",12,8,1,0,"horizontal",!0,!0,12,y,y,1e3,1],["slideremoveup",13,8,1,0,"horizontal",!0,!0,13,y,y,1e3,1],["slideremovedown",14,8,1,0,"horizontal",!0,!0,14,y,y,1e3,1],["slideremoveright",15,8,1,0,"horizontal",!0,!0,15,y,y,1e3,1],["papercut",16,0,0,600,"",null,null,16,y,y,1e3,2],["3dcurtain-horizontal",17,0,20,100,"vertical",!1,!0,17,u,u,500,7],["3dcurtain-vertical",18,0,10,100,"horizontal",!1,!0,18,u,u,500,5],["cubic",19,0,20,600,"horizontal",!1,!0,19,y,y,500,1],["cube",19,0,20,600,"horizontal",!1,!0,20,y,y,500,1],["flyin",20,0,4,600,"vertical",!1,!0,21,h,y,500,1],["turnoff",21,0,1,500,"horizontal",!1,!0,22,y,y,500,1],["incube",22,0,20,200,"horizontal",!1,!0,23,f,f,500,1],["cubic-horizontal",23,0,20,500,"vertical",!1,!0,24,p,p,500,1],["cube-horizontal",23,0,20,500,"vertical",!1,!0,25,p,p,500,1],["incube-horizontal",24,0,20,500,"vertical",!1,!0,26,f,f,500,1],["turnoff-vertical",25,0,1,200,"horizontal",!1,!0,27,f,f,500,1],["fadefromright",12,1,1,0,"horizontal",!0,!0,28,f,f,1e3,1],["fadefromleft",15,1,1,0,"horizontal",!0,!0,29,f,f,1e3,1],["fadefromtop",14,1,1,0,"horizontal",!0,!0,30,f,f,1e3,1],["fadefrombottom",13,1,1,0,"horizontal",!0,!0,31,f,f,1e3,1],["fadetoleftfadefromright",12,2,1,0,"horizontal",!0,!0,32,f,f,1e3,1],["fadetorightfadefromleft",15,2,1,0,"horizontal",!0,!0,33,f,f,1e3,1],["fadetobottomfadefromtop",14,2,1,0,"horizontal",!0,!0,34,f,f,1e3,1],["fadetotopfadefrombottom",13,2,1,0,"horizontal",!0,!0,35,f,f,1e3,1],["parallaxtoright",12,3,1,0,"horizontal",!0,!0,36,f,m,1500,1],["parallaxtoleft",15,3,1,0,"horizontal",!0,!0,37,f,m,1500,1],["parallaxtotop",14,3,1,0,"horizontal",!0,!0,38,f,d,1500,1],["parallaxtobottom",13,3,1,0,"horizontal",!0,!0,39,f,d,1500,1],["scaledownfromright",12,4,1,0,"horizontal",!0,!0,40,f,m,1e3,1],["scaledownfromleft",15,4,1,0,"horizontal",!0,!0,41,f,m,1e3,1],["scaledownfromtop",14,4,1,0,"horizontal",!0,!0,42,f,m,1e3,1],["scaledownfrombottom",13,4,1,0,"horizontal",!0,!0,43,f,m,1e3,1],["zoomout",13,5,1,0,"horizontal",!0,!0,44,f,m,1e3,1],["zoomin",13,6,1,0,"horizontal",!0,!0,45,f,m,1e3,1],["slidingoverlayup",27,0,1,0,"horizontal",!0,!0,47,u,c,2e3,1],["slidingoverlaydown",28,0,1,0,"horizontal",!0,!0,48,u,c,2e3,1],["slidingoverlayright",30,0,1,0,"horizontal",!0,!0,49,u,c,2e3,1],["slidingoverlayleft",29,0,1,0,"horizontal",!0,!0,50,u,c,2e3,1],["notransition",26,0,1,0,"horizontal",!0,null,46,f,m,1e3,1],["grayscale",11,5,1,300,"horizontal",!0,null,11,f,f,1e3,1],["grayscalecross",11,6,1,300,"horizontal",!0,null,11,f,f,1e3,1],["brightness",11,7,1,300,"horizontal",!0,null,11,f,f,1e3,1],["brightnesscross",11,8,1,300,"horizontal",!0,null,11,f,f,1e3,1],["blurlight",11,9,1,300,"horizontal",!0,null,11,f,f,1e3,1],["blurlightcross",11,10,1,300,"horizontal",!0,null,11,f,f,1e3,1],["blurstrong",11,9,1,300,"horizontal",!0,null,11,f,f,1e3,1],["blurstrongcross",11,10,1,300,"horizontal",!0,null,11,f,f,1e3,1]];"random-selected"!=a&&"random"!=a&&"random-static"!=a&&"random-premium"!=a||(a=11),k&&jQuery.each(k,function(e,t){t[0]!=a&&t[8]!=a||(g=t[1],v=t[2],b=_),_+=1});var x=jQuery("#transition_duration").val();g>30&&(g=30),g<0&&(g=0),w=k[b];var L=new punchgs.TimelineLite;L.add(punchgs.TweenLite.set(e.find(".defaultimg"),{autoAlpha:0})),L.pause(),L.add(punchgs.TweenLite.set(t,{autoAlpha:1,force3D:"auto",zIndex:0}),0),L.add(punchgs.TweenLite.set(e,{autoAlpha:1,force3D:"auto",zIndex:1}),0),l.slots=jQuery("#slot_amount").val(),l.rotate=jQuery("#transition_rotation").val(),x=(x="default"===x?w[11]:"random"===x?Math.round(1e3*Math.random()+300):null!=x?parseInt(x,0):w[11])>l.delay?l.delay:x,x+=w[4],l.slots=null==l.slots||"default"==l.slots?w[12]:"random"==l.slots?Math.round(12*Math.random()+4):w[12],l.slots=l.slots<1?"boxslide"==a?Math.round(6*Math.random()+3):"flyin"==a?Math.round(4*Math.random()+1):l.slots:l.slots,l.slots=(4==g||5==g||6==g)&&l.slots<3?3:l.slots,l.slots=0!=w[3]?Math.min(l.slots,w[3]):l.slots,l.slots=9==g?l.width/20:10==g?l.height/20:l.slots,l.rotate=null==l.rotate||"default"==l.rotate?0:999==l.rotate||"random"==l.rotate?Math.round(360*Math.random()):l.rotate,l.rotate=!jQuery.support.transition||l.ie||l.ie9?0:l.rotate,l.slotw=Math.ceil(l.width/jQuery("#slot_amount").val()),l.sloth=Math.ceil(l.height/jQuery("#slot_amount").val()),null!=w[7]&&prepareOneSlide(t,l,w[7],w[5],l.width,l.height),null!=w[6]&&prepareOneSlide(e,l,w[6],w[5],l.width,l.height);var j=jQuery("select[name=transition_ease_in]").val(),T=jQuery("select[name=transition_ease_out]").val();if(j="default"===j?w[9]||punchgs.Power2.easeInOut:j||w[9]||punchgs.Power2.easeInOut,T="default"===T?w[10]||punchgs.Power2.easeInOut:T||w[10]||punchgs.Power2.easeInOut,0==g){var Q=Math.ceil(l.height/l.sloth),I=0;e.find(".slotslide").each(function(e){var t=jQuery(this);(I+=1)==Q&&(I=0),L.add(punchgs.TweenLite.from(t,x/600,{opacity:0,top:0-l.sloth,left:0-l.slotw,rotation:l.rotate,force3D:"auto",ease:j}),(15*e+30*I)/1500)})}if(1==g){var S;e.find(".slotslide").each(function(e){var t=jQuery(this),a=Math.random()*x+300,r=500*Math.random()+200;a+r>S&&(S=r+r,e),L.add(punchgs.TweenLite.from(t,a/1e3,{autoAlpha:0,force3D:"auto",rotation:l.rotate,ease:j}),r/1e3)})}if(2==g){var A=new punchgs.TimelineLite;t.find(".slotslide").each(function(){var e=jQuery(this);A.add(punchgs.TweenLite.to(e,x/1e3,{left:l.slotw,ease:j,force3D:"auto",rotation:0-l.rotate}),0),L.add(A,0)}),e.find(".slotslide").each(function(){var e=jQuery(this);A.add(punchgs.TweenLite.from(e,x/1e3,{left:0-l.slotw,ease:j,force3D:"auto",rotation:l.rotate}),0),L.add(A,0)})}if(3==g){A=new punchgs.TimelineLite;t.find(".slotslide").each(function(){var e=jQuery(this);A.add(punchgs.TweenLite.to(e,x/1e3,{top:l.sloth,ease:j,rotation:l.rotate,force3D:"auto",transformPerspective:600}),0),L.add(A,0)}),e.find(".slotslide").each(function(){var e=jQuery(this);A.add(punchgs.TweenLite.from(e,x/1e3,{top:0-l.sloth,rotation:l.rotate,ease:T,force3D:"auto",transformPerspective:600}),0),L.add(A,0)})}if(4==g||5==g){setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100);var C=x/1e3;A=new punchgs.TimelineLite;t.find(".slotslide").each(function(e){var t=jQuery(this),a=e*C/l.slots;5==g&&(a=(l.slots-e-1)*C/l.slots/1.5),A.add(punchgs.TweenLite.to(t,3*C,{transformPerspective:600,force3D:"auto",top:0+l.height,opacity:.5,rotation:l.rotate,ease:j,delay:a}),0),L.add(A,0)}),e.find(".slotslide").each(function(e){var t=jQuery(this),a=e*C/l.slots;5==g&&(a=(l.slots-e-1)*C/l.slots/1.5),A.add(punchgs.TweenLite.from(t,3*C,{top:0-l.height,opacity:.5,rotation:l.rotate,force3D:"auto",ease:punchgs.eo,delay:a}),0),L.add(A,0)})}if(6==g){l.slots<2&&(l.slots=2),l.slots%2&&(l.slots=l.slots+1);A=new punchgs.TimelineLite;setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100),t.find(".slotslide").each(function(e){var t=jQuery(this);if(e+1<l.slots/2)var a=90*(e+2);else a=90*(2+l.slots-e);A.add(punchgs.TweenLite.to(t,(x+a)/1e3,{top:0+l.height,opacity:1,force3D:"auto",rotation:l.rotate,ease:j}),0),L.add(A,0)}),e.find(".slotslide").each(function(e){var t=jQuery(this);if(e+1<l.slots/2)var a=90*(e+2);else a=90*(2+l.slots-e);A.add(punchgs.TweenLite.from(t,(x+a)/1e3,{top:0-l.height,opacity:1,force3D:"auto",rotation:l.rotate,ease:T}),0),L.add(A,0)})}if(7==g){(x*=2)>l.delay&&(x=l.delay);A=new punchgs.TimelineLite;setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100),t.find(".slotslide").each(function(){var e=jQuery(this).find("div");A.add(punchgs.TweenLite.to(e,x/1e3,{left:0-l.slotw/2+"px",top:0-l.height/2+"px",width:2*l.slotw+"px",height:2*l.height+"px",opacity:0,rotation:l.rotate,force3D:"auto",ease:j}),0),L.add(A,0)}),e.find(".slotslide").each(function(e){var t=jQuery(this).find("div");A.add(punchgs.TweenLite.fromTo(t,x/1e3,{left:0,top:0,opacity:0,transformPerspective:600},{left:0-e*l.slotw+"px",ease:T,force3D:"auto",top:"0px",width:l.width,height:l.height,opacity:1,rotation:0,delay:.1}),0),L.add(A,0)})}if(8==g){(x*=3)>l.delay&&(x=l.delay);A=new punchgs.TimelineLite;t.find(".slotslide").each(function(){var e=jQuery(this).find("div");A.add(punchgs.TweenLite.to(e,x/1e3,{left:0-l.width/2+"px",top:0-l.sloth/2+"px",width:2*l.width+"px",height:2*l.sloth+"px",force3D:"auto",ease:j,opacity:0,rotation:l.rotate}),0),L.add(A,0)}),e.find(".slotslide").each(function(t){var a=jQuery(this).find("div");A.add(punchgs.TweenLite.fromTo(a,x/1e3,{left:0,top:0,opacity:0,force3D:"auto"},{left:"0px",top:0-t*l.sloth+"px",width:e.find(".defaultimg").data("neww")+"px",height:e.find(".defaultimg").data("newh")+"px",opacity:1,ease:T,rotation:0}),0),L.add(A,0)})}if(9==g||10==g){e.find(".slotslide").each(function(e){var t=jQuery(this);0,L.add(punchgs.TweenLite.fromTo(t,x/1e3,{autoAlpha:0,force3D:"auto",transformPerspective:600},{autoAlpha:1,ease:j,delay:5*e/1e3}),0)})}if(11==g||26==g){var E=2==v?"#000000":3==v?"#ffffff":"transparent";if(26==g&&(x=0),i)switch(L.add(punchgs.TweenLite.set(e.parent(),{backgroundColor:E,force3D:"auto"}),0),v){case 0:L.add(punchgs.TweenLite.fromTo(t,x/1e3,{autoAlpha:0,zIndex:1},{autoAlpha:1,zIndex:1,force3D:"auto",ease:j}),0),L.add(punchgs.TweenLite.set(e,{autoAlpha:1,force3D:"auto",zIndex:0}),0);break;case 1:L.add(punchgs.TweenLite.fromTo(t,x/1e3,{autoAlpha:0},{autoAlpha:1,force3D:"auto",ease:j}),0),L.add(punchgs.TweenLite.fromTo(e,x/1e3,{autoAlpha:1},{autoAlpha:0,force3D:"auto",ease:j}),0);break;case 2:case 3:case 4:L.add(punchgs.TweenLite.fromTo(e,x/2e3,{autoAlpha:1},{autoAlpha:0,force3D:"auto",ease:j}),0),L.add(punchgs.TweenLite.set(t,{autoAlpha:0,force3D:"auto"}),0),L.add(punchgs.TweenLite.fromTo(t,x/2e3,{autoAlpha:0},{autoAlpha:1,force3D:"auto",ease:j}),x/2e3);break;case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:var z="blur("+(jQuery.inArray(v,[9,10])>=0?5:jQuery.inArray(v,[11,12])>=0?10:0)+"px) grayscale("+(jQuery.inArray(v,[5,6,7,8])>=0?100:0)+"%) brightness("+(jQuery.inArray(v,[7,8])>=0?300:0)+"%)",B="blur(0px) grayscale(0%) brightness(100%)";L.add(punchgs.TweenLite.fromTo(e,x/1e3,{autoAlpha:0,filter:z,"-webkit-filter":z},{autoAlpha:1,filter:B,"-webkit-filter":B,force3D:"auto",ease:j}),0),jQuery.inArray(v,[6,8,10])>=0&&L.add(punchgs.TweenLite.fromTo(t,x/1e3,{autoAlpha:1,filter:B,"-webkit-filter":B},{autoAlpha:0,force3D:"auto",ease:j,filter:z,"-webkit-filter":z}),0)}else e.find(".slotslide").each(function(e){var t=jQuery(this);if(v<5)L.add(punchgs.TweenLite.fromTo(t,x/1e3,{autoAlpha:0},{autoAlpha:1,force3D:"auto",ease:j}),0);else{var a="blur("+(jQuery.inArray(v,[9,10])>=0?5:jQuery.inArray(v,[11,12])>=0?10:0)+"px) grayscale("+(jQuery.inArray(v,[5,6,7,8])>=0?100:0)+"%) brightness("+(jQuery.inArray(v,[7,8])>=0?300:0)+"%)",r="blur(0px) grayscale(0%) brightness(100%)";L.add(punchgs.TweenLite.fromTo(t,x/1e3,{autoAlpha:0,filter:a,"-webkit-filter":a},{autoAlpha:1,filter:r,"-webkit-filter":r,force3D:"auto",ease:j}),0)}})}if(27==g||28==g||29==g||30==g){var M=e.find(".slot"),Y=27==g||28==g?1:2,X=27==g||29==g?"-100%":"+100%",R=27==g||29==g?"+100%":"-100%",H=27==g||29==g?"-80%":"80%",D=27==g||29==g?"80%":"-80%",P=27==g||29==g?"10%":"-10%",F={overwrite:"all"},O={autoAlpha:0,zIndex:1,force3D:"auto",ease:punchgs.Power1.easeInOut},N={position:"inherit",autoAlpha:0,overwrite:"all"},q={autoAlpha:1,force3D:"auto",ease:punchgs.Power1.easeOut},W={overwrite:"all",zIndex:2},V={autoAlpha:1,force3D:"auto",overwrite:"all",ease:punchgs.Power1.easeInOut},U={overwrite:"all",zIndex:2},G={autoAlpha:1,force3D:"auto",ease:punchgs.Power1.easeInOut},Z=1==Y?"y":"x";F[Z]="0px",O[Z]=X,N[Z]=P,q[Z]="0%",W[Z]=R,V[Z]=X,U[Z]=H,G[Z]=D,M.append('<span style="background-color:rgba(0,0,0,0.6);width:100%;height:100%;position:absolute;top:0px;left:0px;display:block;z-index:2"></span>'),L.add(punchgs.TweenLite.fromTo(t,x/1e3,F,O),0),L.add(punchgs.TweenLite.fromTo(e.find(".defaultimg"),x/2e3,N,q),x/2e3),L.add(punchgs.TweenLite.fromTo(M,x/1e3,W,V),0),L.add(punchgs.TweenLite.fromTo(M.find(".slotslide div"),x/1e3,U,G),0)}if(12==g||13==g||14==g||15==g){(x=x)>l.delay&&(x=l.delay),setTimeout(function(){punchgs.TweenLite.set(t.find(".defaultimg"),{autoAlpha:0})},100);var K=l.width,$=l.height,J=e.find(".slotslide"),ee=0,te=0,ae=1,re=1,ie=1,oe=x/1e3,ne=oe;"fullwidth"!=l.sliderLayout&&"fullscreen"!=l.sliderLayout||(K=J.width(),$=J.height()),12==g?ee=K:15==g?ee=0-K:13==g?te=$:14==g&&(te=0-$),1==v&&(ae=0),2==v&&(ae=0),3==v&&(oe=x/1300),4!=v&&5!=v||(re=.6),6==v&&(re=1.4),5!=v&&6!=v||(ie=1.4,ae=0,K=0,$=0,ee=0,te=0),6==v&&(ie=.6);7==v&&(K=0,$=0);var se=e.find(".slotslide"),le=t.find(".slotslide");if(L.add(punchgs.TweenLite.set(n,{zIndex:15}),0),L.add(punchgs.TweenLite.set(o,{zIndex:20}),0),8==v?(L.add(punchgs.TweenLite.set(n,{zIndex:20}),0),L.add(punchgs.TweenLite.set(o,{zIndex:15}),0),L.add(punchgs.TweenLite.set(se,{left:0,top:0,scale:1,opacity:1,rotation:0,ease:j,force3D:"auto"}),0)):L.add(punchgs.TweenLite.from(se,oe,{left:ee,top:te,scale:ie,opacity:ae,rotation:l.rotate,ease:j,force3D:"auto"}),0),4!=v&&5!=v||(K=0,$=0),1!=v)switch(g){case 12:L.add(punchgs.TweenLite.to(le,ne,{left:0-K+"px",force3D:"auto",scale:re,opacity:ae,rotation:l.rotate,ease:T}),0);break;case 15:L.add(punchgs.TweenLite.to(le,ne,{left:K+"px",force3D:"auto",scale:re,opacity:ae,rotation:l.rotate,ease:T}),0);break;case 13:L.add(punchgs.TweenLite.to(le,ne,{top:0-$+"px",force3D:"auto",scale:re,opacity:ae,rotation:l.rotate,ease:T}),0);break;case 14:L.add(punchgs.TweenLite.to(le,ne,{top:$+"px",force3D:"auto",scale:re,opacity:ae,rotation:l.rotate,ease:T}),0)}}if(16==g){A=new punchgs.TimelineLite;L.add(punchgs.TweenLite.set(n,{position:"absolute","z-index":20}),0),L.add(punchgs.TweenLite.set(o,{position:"absolute","z-index":15}),0),n.wrapInner('<div class="tp-half-one" style="position:relative; width:100%;height:100%"></div>'),n.find(".tp-half-one").clone(!0).appendTo(n).addClass("tp-half-two"),n.find(".tp-half-two").removeClass("tp-half-one");K=l.width,$=l.height;"on"==l.autoHeight&&($=s.height()),n.find(".tp-half-one .defaultimg").wrap('<div class="tp-papercut" style="width:'+K+"px;height:"+$+'px;"></div>'),n.find(".tp-half-two .defaultimg").wrap('<div class="tp-papercut" style="width:'+K+"px;height:"+$+'px;"></div>'),n.find(".tp-half-two .defaultimg").css({position:"absolute",top:"-50%"}),n.find(".tp-half-two .tp-caption").wrapAll('<div style="position:absolute;top:-50%;left:0px;"></div>'),L.add(punchgs.TweenLite.set(n.find(".tp-half-two"),{width:K,height:$,overflow:"hidden",zIndex:15,position:"absolute",top:$/2,left:"0px",transformPerspective:600,transformOrigin:"center bottom"}),0),L.add(punchgs.TweenLite.set(n.find(".tp-half-one"),{width:K,height:$/2,overflow:"visible",zIndex:10,position:"absolute",top:"0px",left:"0px",transformPerspective:600,transformOrigin:"center top"}),0);n.find(".defaultimg");var de=Math.round(20*Math.random()-10),ce=Math.round(20*Math.random()-10),ue=Math.round(20*Math.random()-10),me=.4*Math.random()-.2,pe=.4*Math.random()-.2,fe=1*Math.random()+1,he=1*Math.random()+1,ye=.3*Math.random()+.3;L.add(punchgs.TweenLite.set(n.find(".tp-half-one"),{overflow:"hidden"}),0),L.add(punchgs.TweenLite.fromTo(n.find(".tp-half-one"),x/800,{width:K,height:$/2,position:"absolute",top:"0px",left:"0px",force3D:"auto",transformOrigin:"center top"},{scale:fe,rotation:de,y:0-$-$/4,autoAlpha:0,ease:j}),0),L.add(punchgs.TweenLite.fromTo(n.find(".tp-half-two"),x/800,{width:K,height:$,overflow:"hidden",position:"absolute",top:$/2,left:"0px",force3D:"auto",transformOrigin:"center bottom"},{scale:he,rotation:ce,y:$+$/4,ease:j,autoAlpha:0,onComplete:function(){punchgs.TweenLite.set(n,{position:"absolute","z-index":15}),punchgs.TweenLite.set(o,{position:"absolute","z-index":20}),n.find(".tp-half-one").length>0&&(n.find(".tp-half-one .defaultimg").unwrap(),n.find(".tp-half-one .slotholder").unwrap()),n.find(".tp-half-two").remove()}}),0),A.add(punchgs.TweenLite.set(e.find(".defaultimg"),{autoAlpha:1}),0),null!=n.html()&&L.add(punchgs.TweenLite.fromTo(o,(x-200)/1e3,{scale:ye,x:l.width/4*me,y:$/4*pe,rotation:ue,force3D:"auto",transformOrigin:"center center",ease:T},{autoAlpha:1,scale:1,x:0,y:0,rotation:0}),0),L.add(A,0)}if(17==g&&e.find(".slotslide").each(function(e){var t=jQuery(this);L.add(punchgs.TweenLite.fromTo(t,x/800,{opacity:0,rotationY:0,scale:.9,rotationX:-110,force3D:"auto",transformPerspective:600,transformOrigin:"center center"},{opacity:1,top:0,left:0,scale:1,rotation:0,rotationX:0,force3D:"auto",rotationY:0,ease:j,delay:.06*e}),0)}),18==g&&e.find(".slotslide").each(function(e){var t=jQuery(this);L.add(punchgs.TweenLite.fromTo(t,x/500,{autoAlpha:0,rotationY:110,scale:.9,rotationX:10,force3D:"auto",transformPerspective:600,transformOrigin:"center center"},{autoAlpha:1,top:0,left:0,scale:1,rotation:0,rotationX:0,force3D:"auto",rotationY:0,ease:j,delay:.06*e}),0)}),19==g||22==g){A=new punchgs.TimelineLite;L.add(punchgs.TweenLite.set(n,{zIndex:20}),0),L.add(punchgs.TweenLite.set(o,{zIndex:20}),0),setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100);var ge=90,ve=(ae=1,"center center ");ge=-90,19==g?(ve=ve+"-"+l.height/2,ae=0):ve+=l.height/2,punchgs.TweenLite.set(s,{transformStyle:"flat",backfaceVisibility:"hidden",transformPerspective:600}),e.find(".slotslide").each(function(e){var t=jQuery(this);A.add(punchgs.TweenLite.fromTo(t,x/1e3,{transformStyle:"flat",backfaceVisibility:"hidden",left:0,rotationY:l.rotate,z:10,top:0,scale:1,force3D:"auto",transformPerspective:600,transformOrigin:ve,rotationX:ge},{left:0,rotationY:0,top:0,z:0,scale:1,force3D:"auto",rotationX:0,delay:50*e/1e3,ease:j}),0),A.add(punchgs.TweenLite.to(t,.1,{autoAlpha:1,delay:50*e/1e3}),0),L.add(A)}),t.find(".slotslide").each(function(e){var t=jQuery(this),a=-90;a=90,A.add(punchgs.TweenLite.fromTo(t,x/1e3,{transformStyle:"flat",backfaceVisibility:"hidden",autoAlpha:1,rotationY:0,top:0,z:0,scale:1,force3D:"auto",transformPerspective:600,transformOrigin:ve,rotationX:0},{autoAlpha:1,rotationY:l.rotate,top:0,z:10,scale:1,rotationX:a,delay:50*e/1e3,force3D:"auto",ease:T}),0),L.add(A)}),L.add(punchgs.TweenLite.set(n,{zIndex:18}),0)}if(20==g){setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100);var be=-l.width,ge=80,ve="20% 70% -"+l.height/2;e.find(".slotslide").each(function(e){var t=jQuery(this),a=50*e/1e3;L.add(punchgs.TweenLite.fromTo(t,x/1e3,{left:be,rotationX:40,z:-600,opacity:ae,top:0,scale:1,force3D:"auto",transformPerspective:600,transformOrigin:ve,transformStyle:"flat",rotationY:ge},{left:0,rotationX:0,opacity:1,top:0,z:0,scale:1,rotationY:0,delay:a,ease:j}),0)}),t.find(".slotslide").each(function(e){var t=jQuery(this),a=50*e/1e3;a=e>0?a+x/9e3:0;var r=l.width/2,i=-30,o="80% 70% -"+l.height/2;T=punchgs.Power2.easeInOut,L.add(punchgs.TweenLite.fromTo(t,x/1e3,{opacity:1,rotationX:0,top:0,z:0,scale:1,left:0,force3D:"auto",transformPerspective:600,transformOrigin:o,transformStyle:"flat",rotationY:0},{opacity:1,rotationX:20,top:0,z:-600,left:r,force3D:"auto",rotationY:i,delay:a,ease:T}),0)})}if(21==g||25==g){setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100);ge=90,be=-l.width;var _e=-ge;if(25==g){var ve="center top 0";ge=l.rotate}else{ve="left center 0";_e=l.rotate}e.find(".slotslide").each(function(e){var t=jQuery(this),a=x/1.5/3;L.add(punchgs.TweenLite.fromTo(t,2*a/1e3,{left:0,transformStyle:"flat",rotationX:_e,z:0,autoAlpha:0,top:0,scale:1,force3D:"auto",transformPerspective:1200,transformOrigin:ve,rotationY:ge},{left:0,rotationX:0,top:0,z:0,autoAlpha:1,scale:1,rotationY:0,force3D:"auto",delay:a/1e3,ease:j}),0)}),be=l.width,ge=-90,25==g?(ve="center bottom 0",_e=-ge,ge=l.rotate):(ve="right center 0",_e=l.rotate),t.find(".slotslide").each(function(e){var t=jQuery(this);L.add(punchgs.TweenLite.fromTo(t,x/1e3,{left:0,transformStyle:"flat",rotationX:0,z:0,autoAlpha:1,top:0,scale:1,force3D:"auto",transformPerspective:1200,transformOrigin:ve,rotationY:0},{left:0,rotationX:_e,top:0,z:0,autoAlpha:1,force3D:"auto",scale:1,rotationY:ge,ease:T}),0)})}if(23==g||24==g){setTimeout(function(){t.find(".defaultimg").css({opacity:0})},100);ge=-90,ae=1;if(ge=90,23==g){ve="center center -"+l.width/2;ae=0}else ve="center center "+l.width/2;punchgs.TweenLite.set(s,{transformStyle:"preserve-3d",backfaceVisibility:"hidden",perspective:2500}),e.find(".slotslide").each(function(e){var t=jQuery(this);L.add(punchgs.TweenLite.fromTo(t,x/1e3,{left:0,rotationX:l.rotate,force3D:"auto",opacity:ae,top:0,scale:1,transformPerspective:1200,transformOrigin:ve,rotationY:ge},{left:0,rotationX:0,autoAlpha:1,top:0,z:0,scale:1,rotationY:0,delay:50*e/500,ease:j}),0)}),ge=90,ge=-90,t.find(".slotslide").each(function(e){var t=jQuery(this);L.add(punchgs.TweenLite.fromTo(t,x/1e3,{left:0,rotationX:0,top:0,z:0,scale:1,force3D:"auto",transformStyle:"flat",transformPerspective:1200,transformOrigin:ve,rotationY:0},{left:0,rotationX:l.rotate,top:0,scale:1,rotationY:ge,delay:50*e/500,ease:T}),0),23==g&&L.add(punchgs.TweenLite.fromTo(t,x/2e3,{autoAlpha:1},{autoAlpha:0,delay:50*e/500+x/3e3,ease:T}),0)})}if(L.add(punchgs.TweenLite.set(e.find(".defaultimg"),{autoAlpha:1})),L.add(punchgs.TweenLite.set(e.find(".slot"),{autoAlpha:0})),L.seek(1e5),null!=r)return L;jQuery("#divbgholder").data("slidetimeline",L)},removeAllSlots=function(){null!=jQuery("#divbgholder").data("slidetimeline")&&(jQuery("#divbgholder").data("slidetimeline").kill(),jQuery("#divbgholder").find(".slot").each(function(){jQuery(this).remove()}))};t.resetSlideAnimations=function(e){removeAllSlots(),slideAnimation();var t=jQuery("#divbgholder").data("slidetimeline"),a=jQuery("#mastertimer-position").position().left/100;null!=t&&(t.stop(),e&&t.seek(a))}};